"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7005],{7005:(v,f,s)=>{s.r(f),s.d(f,{GameSelectionPage:()=>T});var _=s(5861),e=s(2029),u=s(6814),p=s(6223),o=s(7027),d=s(3911),Z=s(8399),G=s(6546),P=s(8939);function A(i,c){if(1&i){const r=e.EpF();e.TgZ(0,"ion-item")(1,"ion-item-sliding")(2,"ion-item",11),e.NdJ("click",function(){const l=e.CHM(r).$implicit,a=e.oxw();return e.KtG(a.selectGame(l))}),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e._UZ(5,"ion-icon",12),e.qZA(),e.TgZ(6,"ion-item-options",13)(7,"ion-item-option",14),e.NdJ("click",function(){const l=e.CHM(r).$implicit,a=e.oxw();return e.KtG(a.deleteGame(l))}),e._uU(8),e.ALo(9,"translate"),e.qZA()()()()}if(2&i){const r=c.$implicit;e.xp6(4),e.hij(" ",r.name,""),e.xp6(4),e.hij(" ",e.lcZ(9,2,"Delete"),"")}}function E(i,c){1&i&&(e.TgZ(0,"ion-list")(1,"ion-item"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"No Games Found")," "))}function x(i,c){if(1&i){const r=e.EpF();e.TgZ(0,"ion-button",11),e.NdJ("click",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.addGame())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Add")," "))}let T=(()=>{var i;class c{constructor(t,n,l,a,g){this.auth=t,this.game=n,this.menuCtrl=l,this.info=a,this.translateService=g,this.games=[],this.isLocal=(0,e.X6Q)()}setLanguage(t){this.translateService.use(t)}ngOnInit(){this.game.games$.subscribe(t=>{this.games=t})}ionViewDidEnter(){var t=this;return(0,_.Z)(function*(){t.game.loadGames(),t.closeMenu()})()}closeMenu(){var t=this;return(0,_.Z)(function*(){const n="game-content";yield t.menuCtrl.enable(!0,n),yield t.menuCtrl.close(n)})()}handleRefresh(t){this.game.loadGames(),t.target.complete()}logOut(){var t=this;return(0,_.Z)(function*(){(yield t.info.confirmYesNo("LogOut","Are you sure to log out?"))&&t.auth.logOut()})()}addGame(){this.game.addGame("sample")}deleteGame(t){var n=this;return(0,_.Z)(function*(){const l=yield n.info.translate("Are you sure to remove?");(yield n.info.confirmYesNo(t.name,t.name+": "+l))&&n.game.deleteGame(t)})()}selectGame(t){var n=this;return(0,_.Z)(function*(){const a=(yield n.game.gameProgressExists(t.id))?[{text:yield n.info.translate("Continue"),data:"continue"},{text:yield n.info.translate("Restart"),data:"restart"},{text:yield n.info.translate("Delete"),data:"delete",role:"destructive"}]:[{text:yield n.info.translate("Start"),data:"start"},{text:yield n.info.translate("Delete"),data:"delete",role:"destructive"}],g=t.name+": "+(yield n.info.translate("Start game")),h=yield n.info.showAction("Start",g,a);if(!h)return;const m=h.data;if("delete"!=m){if("restart"!=m)return"start"==m?(console.log("start"),void(yield n.game.loadGame(t,!0))):"continue"===m?(console.log(".resume."),void(yield n.game.loadGame(t,!1))):void 0;if(!(yield n.info.confirmYesNo("Restart",`Restart game ${t.name}?`)))return;yield n.game.loadGame(t,!0)}else n.deleteGame(t)})()}}return(i=c).\u0275fac=function(t){return new(t||i)(e.Y36(Z.e),e.Y36(G.h),e.Y36(o._q),e.Y36(P.C),e.Y36(d.sK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-game-selection"]],standalone:!0,features:[e.jDz],decls:26,vars:15,consts:[["menuId","game-content","contentId","game-content"],[1,"ion-padding"],["id","game-content",3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],["slot","fixed",3,"ionRefresh"],[3,"inset"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],["name","chevron-forward-outline"],["side","end"],["color","danger",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-menu",0)(1,"ion-header")(2,"ion-toolbar")(3,"ion-title"),e._uU(4),e.ALo(5,"translate"),e.qZA()()(),e._UZ(6,"ion-content",1),e.TgZ(7,"ion-footer"),e._UZ(8,"ion-toolbar"),e.qZA()(),e.TgZ(9,"ion-header",2)(10,"ion-toolbar")(11,"ion-title"),e._uU(12),e.ALo(13,"translate"),e.qZA()()(),e.TgZ(14,"ion-content",3)(15,"ion-header",4)(16,"ion-toolbar")(17,"ion-title",5),e._uU(18),e.ALo(19,"translate"),e.qZA()()(),e.TgZ(20,"ion-refresher",6),e.NdJ("ionRefresh",function(a){return n.handleRefresh(a)}),e._UZ(21,"ion-refresher-content"),e.qZA(),e.TgZ(22,"ion-list",7),e.YNc(23,A,10,4,"ion-item",8),e.qZA(),e.YNc(24,E,4,3,"ion-list",9),e.YNc(25,x,3,3,"ion-button",10),e.qZA()),2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,9,"Menu Content")),e.xp6(5),e.Q6J("translucent",!0),e.xp6(3),e.hij(" ",e.lcZ(13,11,"Game Selection"),""),e.xp6(2),e.Q6J("fullscreen",!0),e.xp6(4),e.hij(" ",e.lcZ(19,13,"Games")," "),e.xp6(4),e.Q6J("inset",!0),e.xp6(1),e.Q6J("ngForOf",n.games),e.xp6(1),e.Q6J("ngIf",!n.games||!n.games.length),e.xp6(1),e.Q6J("ngIf",n.isLocal))},dependencies:[o.Pc,o.YG,o.W2,o.fr,o.Gu,o.gu,o.Ie,o.u8,o.IK,o.td,o.Q$,o.q_,o.z0,o.nJ,o.Wo,o.wd,o.sr,u.ez,u.sg,u.O5,p.u5,d.aw,d.X$]}),c})()}}]);