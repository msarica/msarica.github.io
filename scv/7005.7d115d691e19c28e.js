"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7005],{7005:(v,d,s)=>{s.r(d),s.d(d,{GameSelectionPage:()=>T});var _=s(5861),e=s(6689),u=s(6814),f=s(95),o=s(7027),h=s(8399),G=s(6546),p=s(8939);function P(i,c){if(1&i){const r=e.EpF();e.TgZ(0,"ion-item")(1,"ion-item-sliding")(2,"ion-item",10),e.NdJ("click",function(){const l=e.CHM(r).$implicit,a=e.oxw();return e.KtG(a.selectGame(l))}),e.TgZ(3,"ion-label"),e._uU(4),e.qZA()(),e.TgZ(5,"ion-item-options",11)(6,"ion-item-option",12),e.NdJ("click",function(){const l=e.CHM(r).$implicit,a=e.oxw();return e.KtG(a.deleteGame(l))}),e._uU(7,"Delete"),e.qZA()()()()}if(2&i){const r=c.$implicit;e.xp6(4),e.hij(" ",r.name,"")}}function Z(i,c){1&i&&(e.TgZ(0,"ion-list")(1,"ion-item"),e._uU(2," No Games found "),e.qZA()())}function E(i,c){if(1&i){const r=e.EpF();e.TgZ(0,"ion-button",10),e.NdJ("click",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.addGame())}),e._uU(1," Add "),e.qZA()}}let T=(()=>{var i;class c{constructor(t,n,l,a){this.auth=t,this.game=n,this.menuCtrl=l,this.info=a,this.games=[],this.isLocal=(0,e.X6Q)()}ngOnInit(){this.game.games$.subscribe(t=>{this.games=t})}ionViewDidEnter(){var t=this;return(0,_.Z)(function*(){t.game.loadGames(),t.closeMenu()})()}closeMenu(){var t=this;return(0,_.Z)(function*(){const n="game-content";yield t.menuCtrl.enable(!0,n),yield t.menuCtrl.close(n)})()}handleRefresh(t){this.game.loadGames(),t.target.complete()}logOut(){var t=this;return(0,_.Z)(function*(){(yield t.info.confirmYesNo("LogOut","Are you sure to log out?"))&&t.auth.logOut()})()}addGame(){this.game.addGame("sample")}deleteGame(t){var n=this;return(0,_.Z)(function*(){(yield n.info.confirmYesNo("Remove",`Are you sure to remove ${t.name}?`))&&n.game.deleteGame(t)})()}selectGame(t){var n=this;return(0,_.Z)(function*(){const a=(yield n.game.gameProgressExists(t.id))?[{text:"Continue",data:"continue"},{text:"Restart",data:"restart"},{text:"Delete",data:"delete",role:"destructive"}]:[{text:"Start",data:"start"},{text:"Delete",data:"delete",role:"destructive"}],g=yield n.info.showAction("Start",`Start game ${t.name}?`,a);if(!g)return;const m=g.data;if("delete"!=m){if("restart"!=m)return"start"==m?(console.log("start"),void(yield n.game.loadGame(t,!0))):"continue"===m?(console.log(".resume."),void(yield n.game.loadGame(t,!1))):void 0;if(!(yield n.info.confirmYesNo("Restart",`Restart game ${t.name}?`)))return;yield n.game.loadGame(t,!0)}else n.deleteGame(t)})()}}return(i=c).\u0275fac=function(t){return new(t||i)(e.Y36(h.e),e.Y36(G.h),e.Y36(o._q),e.Y36(p.C))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-game-selection"]],standalone:!0,features:[e.jDz],decls:23,vars:5,consts:[["menuId","game-content","contentId","game-content"],[1,"ion-padding"],["id","game-content",3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],["slot","fixed",3,"ionRefresh"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],["side","end"],["color","danger",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-menu",0)(1,"ion-header")(2,"ion-toolbar")(3,"ion-title"),e._uU(4,"Menu Content"),e.qZA()()(),e._UZ(5,"ion-content",1),e.TgZ(6,"ion-footer"),e._UZ(7,"ion-toolbar"),e.qZA()(),e.TgZ(8,"ion-header",2)(9,"ion-toolbar")(10,"ion-title"),e._uU(11,"Game Selection"),e.qZA()()(),e.TgZ(12,"ion-content",3)(13,"ion-header",4)(14,"ion-toolbar")(15,"ion-title",5),e._uU(16,"Games"),e.qZA()()(),e.TgZ(17,"ion-refresher",6),e.NdJ("ionRefresh",function(a){return n.handleRefresh(a)}),e._UZ(18,"ion-refresher-content"),e.qZA(),e.TgZ(19,"ion-list"),e.YNc(20,P,8,1,"ion-item",7),e.qZA(),e.YNc(21,Z,3,0,"ion-list",8),e.YNc(22,E,2,0,"ion-button",9),e.qZA()),2&t&&(e.xp6(8),e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(8),e.Q6J("ngForOf",n.games),e.xp6(1),e.Q6J("ngIf",!n.games||!n.games.length),e.xp6(1),e.Q6J("ngIf",n.isLocal))},dependencies:[o.Pc,o.YG,o.W2,o.fr,o.Gu,o.Ie,o.u8,o.IK,o.td,o.Q$,o.q_,o.z0,o.nJ,o.Wo,o.wd,o.sr,u.ez,u.sg,u.O5,f.u5]}),c})()}}]);