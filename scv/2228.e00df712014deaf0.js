(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2228],{1414:function(Gt){Gt.exports=function(){"use strict";function mt(g,y,p,w,m){!function I(f,F,ot,U,q){for(;U>ot;){if(U-ot>600){var tt=U-ot+1,ht=F-ot+1,xt=Math.log(tt),at=.5*Math.exp(2*xt/3),D=.5*Math.sqrt(xt*at*(tt-at)/tt)*(ht-tt/2<0?-1:1);I(f,F,Math.max(ot,Math.floor(F-ht*at/tt+D)),Math.min(U,Math.floor(F+(tt-ht)*at/tt+D)),q)}var E=f[F],A=ot,B=U;for(h(f,ot,F),q(f[U],E)>0&&h(f,ot,U);A<B;){for(h(f,A,B),A++,B--;q(f[A],E)<0;)A++;for(;q(f[B],E)>0;)B--}0===q(f[ot],E)?h(f,ot,B):h(f,++B,U),B<=F&&(ot=B+1),F<=B&&(U=B-1)}}(g,y,p||0,w||g.length-1,m||Q)}function h(g,y,p){var w=g[y];g[y]=g[p],g[p]=w}function Q(g,y){return g<y?-1:g>y?1:0}var W=function(g){void 0===g&&(g=9),this._maxEntries=Math.max(4,g),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function nt(g,y,p){if(!p)return y.indexOf(g);for(var w=0;w<y.length;w++)if(p(g,y[w]))return w;return-1}function H(g,y){S(g,0,g.children.length,y,g)}function S(g,y,p,w,m){m||(m=n(null)),m.minX=1/0,m.minY=1/0,m.maxX=-1/0,m.maxY=-1/0;for(var I=y;I<p;I++){var f=g.children[I];N(m,g.leaf?w(f):f)}return m}function N(g,y){return g.minX=Math.min(g.minX,y.minX),g.minY=Math.min(g.minY,y.minY),g.maxX=Math.max(g.maxX,y.maxX),g.maxY=Math.max(g.maxY,y.maxY),g}function G(g,y){return g.minX-y.minX}function O(g,y){return g.minY-y.minY}function u(g){return(g.maxX-g.minX)*(g.maxY-g.minY)}function o(g){return g.maxX-g.minX+(g.maxY-g.minY)}function l(g,y){return g.minX<=y.minX&&g.minY<=y.minY&&y.maxX<=g.maxX&&y.maxY<=g.maxY}function a(g,y){return y.minX<=g.maxX&&y.minY<=g.maxY&&y.maxX>=g.minX&&y.maxY>=g.minY}function n(g){return{children:g,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function R(g,y,p,w,m){for(var I=[y,p];I.length;)if(!((p=I.pop())-(y=I.pop())<=w)){var f=y+Math.ceil((p-y)/w/2)*w;mt(g,f,y,p,m),I.push(y,f,f,p)}}return W.prototype.all=function(){return this._all(this.data,[])},W.prototype.search=function(g){var y=this.data,p=[];if(!a(g,y))return p;for(var w=this.toBBox,m=[];y;){for(var I=0;I<y.children.length;I++){var f=y.children[I],F=y.leaf?w(f):f;a(g,F)&&(y.leaf?p.push(f):l(g,F)?this._all(f,p):m.push(f))}y=m.pop()}return p},W.prototype.collides=function(g){var y=this.data;if(!a(g,y))return!1;for(var p=[];y;){for(var w=0;w<y.children.length;w++){var m=y.children[w],I=y.leaf?this.toBBox(m):m;if(a(g,I)){if(y.leaf||l(g,I))return!0;p.push(m)}}y=p.pop()}return!1},W.prototype.load=function(g){if(!g||!g.length)return this;if(g.length<this._minEntries){for(var y=0;y<g.length;y++)this.insert(g[y]);return this}var p=this._build(g.slice(),0,g.length-1,0);if(this.data.children.length)if(this.data.height===p.height)this._splitRoot(this.data,p);else{if(this.data.height<p.height){var w=this.data;this.data=p,p=w}this._insert(p,this.data.height-p.height-1,!0)}else this.data=p;return this},W.prototype.insert=function(g){return g&&this._insert(g,this.data.height-1),this},W.prototype.clear=function(){return this.data=n([]),this},W.prototype.remove=function(g,y){if(!g)return this;for(var p,w,m,I=this.data,f=this.toBBox(g),F=[],ot=[];I||F.length;){if(I||(I=F.pop(),w=F[F.length-1],p=ot.pop(),m=!0),I.leaf){var U=nt(g,I.children,y);if(-1!==U)return I.children.splice(U,1),F.push(I),this._condense(F),this}m||I.leaf||!l(I,f)?w?(p++,I=w.children[p],m=!1):I=null:(F.push(I),ot.push(p),p=0,w=I,I=I.children[0])}return this},W.prototype.toBBox=function(g){return g},W.prototype.compareMinX=function(g,y){return g.minX-y.minX},W.prototype.compareMinY=function(g,y){return g.minY-y.minY},W.prototype.toJSON=function(){return this.data},W.prototype.fromJSON=function(g){return this.data=g,this},W.prototype._all=function(g,y){for(var p=[];g;)g.leaf?y.push.apply(y,g.children):p.push.apply(p,g.children),g=p.pop();return y},W.prototype._build=function(g,y,p,w){var m,I=p-y+1,f=this._maxEntries;if(I<=f)return H(m=n(g.slice(y,p+1)),this.toBBox),m;w||(w=Math.ceil(Math.log(I)/Math.log(f)),f=Math.ceil(I/Math.pow(f,w-1))),(m=n([])).leaf=!1,m.height=w;var F=Math.ceil(I/f),ot=F*Math.ceil(Math.sqrt(f));R(g,y,p,ot,this.compareMinX);for(var U=y;U<=p;U+=ot){var q=Math.min(U+ot-1,p);R(g,U,q,F,this.compareMinY);for(var tt=U;tt<=q;tt+=F){var ht=Math.min(tt+F-1,q);m.children.push(this._build(g,tt,ht,w-1))}}return H(m,this.toBBox),m},W.prototype._chooseSubtree=function(g,y,p,w){for(;w.push(y),!y.leaf&&w.length-1!==p;){for(var m=1/0,I=1/0,f=void 0,F=0;F<y.children.length;F++){var ot=y.children[F],U=u(ot),q=(tt=g,ht=ot,(Math.max(ht.maxX,tt.maxX)-Math.min(ht.minX,tt.minX))*(Math.max(ht.maxY,tt.maxY)-Math.min(ht.minY,tt.minY))-U);q<I?(I=q,m=U<m?U:m,f=ot):q===I&&U<m&&(m=U,f=ot)}y=f||y.children[0]}var tt,ht;return y},W.prototype._insert=function(g,y,p){var w=p?g:this.toBBox(g),m=[],I=this._chooseSubtree(w,this.data,y,m);for(I.children.push(g),N(I,w);y>=0&&m[y].children.length>this._maxEntries;)this._split(m,y),y--;this._adjustParentBBoxes(w,m,y)},W.prototype._split=function(g,y){var p=g[y],w=p.children.length,m=this._minEntries;this._chooseSplitAxis(p,m,w);var I=this._chooseSplitIndex(p,m,w),f=n(p.children.splice(I,p.children.length-I));f.height=p.height,f.leaf=p.leaf,H(p,this.toBBox),H(f,this.toBBox),y?g[y-1].children.push(f):this._splitRoot(p,f)},W.prototype._splitRoot=function(g,y){this.data=n([g,y]),this.data.height=g.height+1,this.data.leaf=!1,H(this.data,this.toBBox)},W.prototype._chooseSplitIndex=function(g,y,p){for(var w,m,I,f,F,ot,U,q=1/0,tt=1/0,ht=y;ht<=p-y;ht++){var xt=S(g,0,ht,this.toBBox),at=S(g,ht,p,this.toBBox),D=(m=xt,I=at,void 0,void 0,void 0,void 0,f=Math.max(m.minX,I.minX),F=Math.max(m.minY,I.minY),ot=Math.min(m.maxX,I.maxX),U=Math.min(m.maxY,I.maxY),Math.max(0,ot-f)*Math.max(0,U-F)),C=u(xt)+u(at);D<q?(q=D,w=ht,tt=C<tt?C:tt):D===q&&C<tt&&(tt=C,w=ht)}return w||p-y},W.prototype._chooseSplitAxis=function(g,y,p){var w=g.leaf?this.compareMinX:G,m=g.leaf?this.compareMinY:O;this._allDistMargin(g,y,p,w)<this._allDistMargin(g,y,p,m)&&g.children.sort(w)},W.prototype._allDistMargin=function(g,y,p,w){g.children.sort(w);for(var m=this.toBBox,I=S(g,0,y,m),f=S(g,p-y,p,m),F=o(I)+o(f),ot=y;ot<p-y;ot++){var U=g.children[ot];N(I,g.leaf?m(U):U),F+=o(I)}for(var q=p-y-1;q>=y;q--){var tt=g.children[q];N(f,g.leaf?m(tt):tt),F+=o(f)}return F},W.prototype._adjustParentBBoxes=function(g,y,p){for(var w=p;w>=0;w--)N(y[w],g)},W.prototype._condense=function(g){for(var y=g.length-1,p=void 0;y>=0;y--)0===g[y].children.length?y>0?(p=g[y-1].children).splice(p.indexOf(g[y]),1):this.clear():H(g[y],this.toBBox)},W}()},1165:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>G});var Q=h(7221),W=h(9529),nt=h(9395);class S extends nt.ZP{constructor(u,o,l){super(u),this.element=o,this.index=l}}const G=class N extends Q.Z{constructor(u,o){if(super(),this.unique_=!!(o=o||{}).unique,this.array_=u||[],this.unique_)for(let l=0,a=this.array_.length;l<a;++l)this.assertUnique_(this.array_[l],l);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(u){for(let o=0,l=u.length;o<l;++o)this.push(u[o]);return this}forEach(u){const o=this.array_;for(let l=0,a=o.length;l<a;++l)u(o[l],l,o)}getArray(){return this.array_}item(u){return this.array_[u]}getLength(){return this.get("length")}insertAt(u,o){if(u<0||u>this.getLength())throw new Error("Index out of bounds: "+u);this.unique_&&this.assertUnique_(o),this.array_.splice(u,0,o),this.updateLength_(),this.dispatchEvent(new S(W.Z.ADD,o,u))}pop(){return this.removeAt(this.getLength()-1)}push(u){this.unique_&&this.assertUnique_(u);const o=this.getLength();return this.insertAt(o,u),this.getLength()}remove(u){const o=this.array_;for(let l=0,a=o.length;l<a;++l)if(o[l]===u)return this.removeAt(l)}removeAt(u){if(u<0||u>=this.getLength())return;const o=this.array_[u];return this.array_.splice(u,1),this.updateLength_(),this.dispatchEvent(new S(W.Z.REMOVE,o,u)),o}setAt(u,o){if(u>=this.getLength())return void this.insertAt(u,o);if(u<0)throw new Error("Index out of bounds: "+u);this.unique_&&this.assertUnique_(o,u);const a=this.array_[u];this.array_[u]=o,this.dispatchEvent(new S(W.Z.REMOVE,a,u)),this.dispatchEvent(new S(W.Z.ADD,o,u))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(u,o){for(let l=0,a=this.array_.length;l<a;++l)if(this.array_[l]===u&&l!==o)throw new Error("Duplicate item added to a unique collection")}}},9529:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>Q});const Q={ADD:"add",REMOVE:"remove"}},9511:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>W});const W=class Q{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}},902:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>G});var Q=h(7221),W=h(8688),nt=h(2780),H=h(7796);class S extends Q.Z{constructor(u){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),u&&("function"==typeof u.getSimplifiedGeometry?this.setGeometry(u):this.setProperties(u))}clone(){const u=new S(this.hasProperties()?this.getProperties():null);u.setGeometryName(this.getGeometryName());const o=this.getGeometry();o&&u.setGeometry(o.clone());const l=this.getStyle();return l&&u.setStyle(l),u}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,H.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);const u=this.getGeometry();u&&(this.geometryChangeKey_=(0,H.oL)(u,W.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(u){this.set(this.geometryName_,u)}setStyle(u){this.style_=u,this.styleFunction_=u?function N(O){if("function"==typeof O)return O;let u;return Array.isArray(O)?u=O:((0,nt.h)("function"==typeof O.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),u=[O]),function(){return u}}(u):void 0,this.changed()}setId(u){this.id_=u,this.changed()}setGeometryName(u){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=u,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const G=S},5605:(Gt,mt,h)=>{"use strict";h.d(mt,{Kp:()=>S,Q9:()=>G});var Q=h(8688),W=h(8072),nt=h(7796);function S(o,l,a){const n=o;let R=!0,g=!1,y=!1;const p=[(0,nt.Vx)(n,Q.Z.LOAD,function(){y=!0,g||l()})];return n.src&&W.Tp?(g=!0,n.decode().then(function(){R&&l()}).catch(function(w){R&&(y?l():a())})):p.push((0,nt.Vx)(n,Q.Z.ERROR,a)),function(){R=!1,p.forEach(nt.bN)}}function G(o,l){return l&&(o.src=l),W.Tp?new Promise((a,n)=>o.decode().then(()=>a(o),n)):function N(o,l){return new Promise((a,n)=>{function R(){y(),a(o)}function g(){y(),n(new Error("Image load error"))}function y(){o.removeEventListener("load",R),o.removeEventListener("error",g)}o.addEventListener("load",R),o.addEventListener("error",g),l&&(o.src=l)})}(o)}},1084:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>Q});const Q={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},4961:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>G});var Q=h(6323),W=h(6614),nt=h(7120),H=h(5605);const G=class S extends Q.Z{constructor(u,o,l,a,n,R){super(u,o,R),this.crossOrigin_=a,this.src_=l,this.key=l,this.image_=new Image,null!==a&&(this.image_.crossOrigin=a),this.unlisten_=null,this.tileLoadFunction_=n}getImage(){return this.image_}setImage(u){this.image_=u,this.state=W.Z.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=W.Z.ERROR,this.unlistenImage_(),this.image_=function N(){const O=(0,nt.E4)(1,1);return O.fillStyle="rgba(0,0,0,0)",O.fillRect(0,0,1,1),O.canvas}(),this.changed()}handleImageLoad_(){const u=this.image_;this.state=u.naturalWidth&&u.naturalHeight?W.Z.LOADED:W.Z.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==W.Z.ERROR&&(this.state=W.Z.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==W.Z.IDLE&&(this.state=W.Z.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,H.Kp)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}},4475:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>ze});var Q=h(7221),W=h(1165),nt=h(9529),H=h(9511),S=h(589),N=h(9070),G=h(9664),O=h(4654),u=h(1075),o=h(7971),l=h(722);function n(dt,e){u.c.expire()}const R=class a extends H.Z{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,v){(0,N.O3)()}calculateMatrices2D(e){const v=e.viewState,Z=e.coordinateToPixelTransform,Y=e.pixelToCoordinateTransform;(0,G.qC)(Z,e.size[0]/2,e.size[1]/2,1/v.resolution,-1/v.resolution,-v.rotation,-v.center[0],-v.center[1]),(0,G.nb)(Y,Z)}forEachFeatureAtCoordinate(e,v,Z,Y,pt,At,Nt,se){let pe;const Oe=v.viewState;function Ye(Le,Te,oi,ii){return pt.call(At,Te,Le?oi:null,ii)}const _i=Oe.projection,mi=(0,l.Cf)(e.slice(),_i),hi=[[0,0]];if(_i.canWrapX()&&Y){const Le=_i.getExtent(),Te=(0,O.dz)(Le);hi.push([-Te,0],[Te,0])}const Ei=v.layerStatesArray,Mi=Ei.length,Ue=[],yi=[];for(let Le=0;Le<hi.length;Le++)for(let Te=Mi-1;Te>=0;--Te){const oi=Ei[Te],ii=oi.layer;if(ii.hasRenderer()&&(0,o.j)(oi,Oe)&&Nt.call(se,ii)){const ni=ii.getRenderer(),wi=ii.getSource();if(ni&&wi){const pi=wi.getWrapX()?mi:e,Ji=Ye.bind(null,oi.managed);yi[0]=pi[0]+hi[Le][0],yi[1]=pi[1]+hi[Le][1],pe=ni.forEachFeatureAtCoordinate(yi,v,Z,Ji,Ue)}if(pe)return pe}}if(0===Ue.length)return;const Hi=1/Ue.length;return Ue.forEach((Le,Te)=>Le.distanceSq+=Te*Hi),Ue.sort((Le,Te)=>Le.distanceSq-Te.distanceSq),Ue.some(Le=>pe=Le.callback(Le.feature,Le.layer,Le.geometry)),pe}hasFeatureAtCoordinate(e,v,Z,Y,pt,At){return void 0!==this.forEachFeatureAtCoordinate(e,v,Z,Y,S.uX,this,pt,At)}getMap(){return this.map_}renderFrame(e){(0,N.O3)()}flushDeclutterItems(e){}scheduleExpireIconCache(e){u.c.canExpireCache()&&e.postRenderFunctions.push(n)}};var g=h(3196),y=h(6008),p=h(4074),w=h(4096),m=h(748),I=h(7796),f=h(7120);const ot=class F extends R{constructor(e){super(e),this.fontChangeListenerKey_=(0,I.oL)(m.sG,g.Z.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const v=this.element_.style;v.position="absolute",v.width="100%",v.height="100%",v.zIndex="0",this.element_.className=w.XV+" ol-layers";const Z=e.getViewport();Z.insertBefore(this.element_,Z.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(e,v){const Z=this.getMap();if(Z.hasListener(e)){const Y=new y.Z(e,void 0,v);Z.dispatchEvent(Y)}}disposeInternal(){(0,I.bN)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(e),this.dispatchRenderEvent(p.Z.PRECOMPOSE,e);const v=e.layerStatesArray.sort(function(At,Nt){return At.zIndex-Nt.zIndex}),Z=e.viewState;this.children_.length=0;const Y=this.declutterLayers_;Y.length=0;let pt=null;for(let At=0,Nt=v.length;At<Nt;++At){const se=v[At];e.layerIndex=At;const pe=se.layer,Oe=pe.getSourceState();if(!(0,o.j)(se,Z)||"ready"!=Oe&&"undefined"!=Oe){pe.unrender();continue}const Ye=pe.render(e,pt);Ye&&(Ye!==pt&&(this.children_.push(Ye),pt=Ye),"getDeclutter"in pe&&Y.push(pe))}this.flushDeclutterItems(e),(0,f.hF)(this.element_,this.children_),this.dispatchRenderEvent(p.Z.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}flushDeclutterItems(e){const v=this.declutterLayers_;for(let Z=v.length-1;Z>=0;--Z)v[Z].renderDeclutter(e);v.length=0}};var U=h(8688),q=h(392),tt=h(9395),ht=h(2780),xt=h(925);class at extends tt.ZP{constructor(e,v){super(e),this.layer=v}}class C extends q.Z{constructor(e){e=e||{};const v=Object.assign({},e);delete v.layers;let Z=e.layers;super(v),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),Z?Array.isArray(Z)?Z=new W.Z(Z.slice(),{unique:!0}):(0,ht.h)("function"==typeof Z.getArray,"Expected `layers` to be an array or a `Collection`"):Z=new W.Z(void 0,{unique:!0}),this.setLayers(Z)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(I.bN),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push((0,I.oL)(e,nt.Z.ADD,this.handleLayersAdd_,this),(0,I.oL)(e,nt.Z.REMOVE,this.handleLayersRemove_,this));for(const Z in this.listenerKeys_)this.listenerKeys_[Z].forEach(I.bN);(0,xt.Z)(this.listenerKeys_);const v=e.getArray();for(let Z=0,Y=v.length;Z<Y;Z++){const pt=v[Z];this.registerLayerListeners_(pt),this.dispatchEvent(new at("addlayer",pt))}this.changed()}registerLayerListeners_(e){const v=[(0,I.oL)(e,g.Z.PROPERTYCHANGE,this.handleLayerChange_,this),(0,I.oL)(e,U.Z.CHANGE,this.handleLayerChange_,this)];e instanceof C&&v.push((0,I.oL)(e,"addlayer",this.handleLayerGroupAdd_,this),(0,I.oL)(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,N.sq)(e)]=v}handleLayerGroupAdd_(e){this.dispatchEvent(new at("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new at("removelayer",e.layer))}handleLayersAdd_(e){const v=e.element;this.registerLayerListeners_(v),this.dispatchEvent(new at("addlayer",v)),this.changed()}handleLayersRemove_(e){const v=e.element,Z=(0,N.sq)(v);this.listenerKeys_[Z].forEach(I.bN),delete this.listenerKeys_[Z],this.dispatchEvent(new at("removelayer",v)),this.changed()}getLayers(){return this.get("layers")}setLayers(e){const v=this.getLayers();if(v){const Z=v.getArray();for(let Y=0,pt=Z.length;Y<pt;++Y)this.dispatchEvent(new at("removelayer",Z[Y]))}this.set("layers",e)}getLayersArray(e){return e=void 0!==e?e:[],this.getLayers().forEach(function(v){v.getLayersArray(e)}),e}getLayerStatesArray(e){const v=void 0!==e?e:[],Z=v.length;this.getLayers().forEach(function(At){At.getLayerStatesArray(v)});const Y=this.getLayerState();let pt=Y.zIndex;!e&&void 0===Y.zIndex&&(pt=0);for(let At=Z,Nt=v.length;At<Nt;At++){const se=v[At];se.opacity*=Y.opacity,se.visible=se.visible&&Y.visible,se.maxResolution=Math.min(se.maxResolution,Y.maxResolution),se.minResolution=Math.max(se.minResolution,Y.minResolution),se.minZoom=Math.max(se.minZoom,Y.minZoom),se.maxZoom=Math.min(se.maxZoom,Y.maxZoom),void 0!==Y.extent&&(se.extent=void 0!==se.extent?(0,O.Ed)(se.extent,Y.extent):Y.extent),void 0===se.zIndex&&(se.zIndex=pt)}return v}getSourceState(){return"ready"}}const r=C,A=class E extends tt.ZP{constructor(e,v,Z){super(e),this.map=v,this.frameState=void 0!==Z?Z:null}},$=class B extends A{constructor(e,v,Z,Y,pt,At){super(e,v,pt),this.originalEvent=Z,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==Y&&Y,this.activePointers=At}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},et={SINGLECLICK:"singleclick",CLICK:U.Z.CLICK,DBLCLICK:U.Z.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var L=h(9078),z=h(8072);const j=class K extends L.Z{constructor(e,v){super(e),this.map_=e,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===v?1:v,this.down_=null;const Z=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=Z,this.pointerdownListenerKey_=(0,I.oL)(Z,"pointerdown",this.handlePointerDown_,this),this.relayedListenerKey_=(0,I.oL)(Z,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(U.Z.TOUCHMOVE,this.boundHandleTouchMove_,!!z.bM&&{passive:!1})}emulateClick_(e){let v=new $(et.CLICK,this.map_,e);this.dispatchEvent(v),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,v=new $(et.DBLCLICK,this.map_,e),this.dispatchEvent(v)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const Z=new $(et.SINGLECLICK,this.map_,e);this.dispatchEvent(Z)},250)}updateActivePointers_(e){const v=e,Z=v.pointerId;if(v.type==et.POINTERUP||v.type==et.POINTERCANCEL){delete this.trackedTouches_[Z];for(const Y in this.trackedTouches_)if(this.trackedTouches_[Y].target!==v.target){delete this.trackedTouches_[Y];break}}else(v.type==et.POINTERDOWN||v.type==et.POINTERMOVE)&&(this.trackedTouches_[Z]=v);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const v=new $(et.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(v),this.emulateClicks_&&!v.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(I.bN),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return 0===e.button}handlePointerDown_(e){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(e);const v=new $(et.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(v),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),0===this.dragListenerKeys_.length){const Z=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,I.oL)(Z,et.POINTERMOVE,this.handlePointerMove_,this),(0,I.oL)(Z,et.POINTERUP,this.handlePointerUp_,this),(0,I.oL)(this.element_,et.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==Z&&this.dragListenerKeys_.push((0,I.oL)(this.element_.getRootNode(),et.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const v=new $(et.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(v)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const v=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new $(et.POINTERMOVE,this.map_,e,v))}handleTouchMove_(e){const v=this.originalPointerMoveEvent_;(!v||v.defaultPrevented)&&("boolean"!=typeof e.cancelable||!0===e.cancelable)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&((0,I.bN)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(U.Z.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,I.bN)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(I.bN),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}};var it=h(1645);const yt=1/0,bt=class St{constructor(e,v){this.priorityFunction_=e,this.keyFunction_=v,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,(0,xt.Z)(this.queuedElements_)}dequeue(){const e=this.elements_,v=this.priorities_,Z=e[0];1==e.length?(e.length=0,v.length=0):(e[0]=e.pop(),v[0]=v.pop(),this.siftUp_(0));const Y=this.keyFunction_(Z);return delete this.queuedElements_[Y],Z}enqueue(e){(0,ht.h)(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const v=this.priorityFunction_(e);return v!=yt&&(this.elements_.push(e),this.priorities_.push(v),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(e){return 2*e+1}getRightChildIndex_(e){return 2*e+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return 0===this.elements_.length}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const v=this.elements_,Z=this.priorities_,Y=v.length,pt=v[e],At=Z[e],Nt=e;for(;e<Y>>1;){const se=this.getLeftChildIndex_(e),pe=this.getRightChildIndex_(e),Oe=pe<Y&&Z[pe]<Z[se]?pe:se;v[e]=v[Oe],Z[e]=Z[Oe],e=Oe}v[e]=pt,Z[e]=At,this.siftDown_(Nt,e)}siftDown_(e,v){const Z=this.elements_,Y=this.priorities_,pt=Z[v],At=Y[v];for(;v>e;){const Nt=this.getParentIndex_(v);if(!(Y[Nt]>At))break;Z[v]=Z[Nt],Y[v]=Y[Nt],v=Nt}Z[v]=pt,Y[v]=At}reprioritize(){const e=this.priorityFunction_,v=this.elements_,Z=this.priorities_;let Y=0;const pt=v.length;let At,Nt,se;for(Nt=0;Nt<pt;++Nt)At=v[Nt],se=e(At),se==yt?delete this.queuedElements_[this.keyFunction_(At)]:(Z[Y]=se,v[Y++]=At);v.length=Y,Z.length=Y,this.heapify_()}};var Ft=h(6614);const ae=class Xt extends bt{constructor(e,v){super(function(Z){return e.apply(null,Z)},function(Z){return Z[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=v,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const v=super.enqueue(e);return v&&e[0].addEventListener(U.Z.CHANGE,this.boundHandleTileChange_),v}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const v=e.target,Z=v.getState();if(Z===Ft.Z.LOADED||Z===Ft.Z.ERROR||Z===Ft.Z.EMPTY){Z!==Ft.Z.ERROR&&v.removeEventListener(U.Z.CHANGE,this.boundHandleTileChange_);const Y=v.getKey();Y in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[Y],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,v){let Y,pt,At,Z=0;for(;this.tilesLoading_<e&&Z<v&&this.getCount()>0;)pt=this.dequeue()[0],At=pt.getKey(),Y=pt.getState(),Y===Ft.Z.IDLE&&!(At in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[At]=!0,++this.tilesLoading_,++Z,pt.load())}};var rt=h(1828),ut=h(5329),Dt=h(9489);var ie=h(3906);function c(dt,e,v,Z){const Y=dt.getZoom();if(void 0===Y)return;const pt=dt.getConstrainedZoom(Y+e),At=dt.getResolutionForZoom(pt);dt.getAnimating()&&dt.cancelAnimations(),dt.animate({resolution:At,anchor:v,duration:void 0!==Z?Z:250,easing:ie.Vv})}const X=class le extends Q.Z{constructor(e){super(),e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set("active",e)}setMap(e){this.map_=e}},Et=class V extends X{constructor(e){super(),this.delta_=(e=e||{}).delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:250}handleEvent(e){let v=!1;if(e.type==et.DBLCLICK){const Z=e.originalEvent,pt=e.coordinate,At=Z.shiftKey?-this.delta_:this.delta_;c(e.map.getView(),At,pt,this.duration_),Z.preventDefault(),v=!0}return!v}};function It(dt){const e=dt.length;let v=0,Z=0;for(let Y=0;Y<e;Y++)v+=dt[Y].clientX,Z+=dt[Y].clientY;return{clientX:v/e,clientY:Z/e}}const Wt=class Tt extends X{constructor(e){super(e=e||{}),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let v=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==et.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==et.POINTERUP){const Z=this.handleUpEvent(e);this.handlingDownUpSequence=Z&&this.targetPointers.length>0}}else if(e.type==et.POINTERDOWN){const Z=this.handleDownEvent(e);this.handlingDownUpSequence=Z,v=this.stopDown(Z)}else e.type==et.POINTERMOVE&&this.handleMoveEvent(e);return!v}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}};function Vt(dt){const e=arguments;return function(v){let Z=!0;for(let Y=0,pt=e.length;Y<pt&&(Z=Z&&e[Y](v),Z);++Y);return Z}}const te=function(dt){const e=dt.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},be=function(dt){return!dt.map.getTargetElement().hasAttribute("tabindex")||function(dt){const e=dt.map.getTargetElement(),v=dt.map.getOwnerDocument().activeElement;return e.contains(v)}(dt)},Ke=S.uX,we=function(dt){const e=dt.originalEvent;return 0==e.button&&!(z.G$&&z.tK&&e.ctrlKey)},Mt=function(dt){const e=dt.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},ee=function(dt){const e=dt.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},de=function(dt){const e=dt.originalEvent,v=e.target.tagName;return"INPUT"!==v&&"SELECT"!==v&&"TEXTAREA"!==v&&!e.target.isContentEditable},re=function(dt){const e=dt.originalEvent;return(0,ht.h)(void 0!==e,"mapBrowserEvent must originate from a pointer event"),"mouse"==e.pointerType},Me=function(dt){const e=dt.originalEvent;return(0,ht.h)(void 0!==e,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&0===e.button},Je=class Ee extends Wt{constructor(e){super({stopDown:S.Dv}),this.kinetic_=(e=e||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const v=e.condition?e.condition:Vt(Mt,Me);this.condition_=e.onFocusOnly?Vt(be,v):v,this.noKinetic_=!1}handleDragEvent(e){const v=e.map;this.panning_||(this.panning_=!0,v.getView().beginInteraction());const Z=this.targetPointers,Y=v.getEventPixel(It(Z));if(Z.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(Y[0],Y[1]),this.lastCentroid){const pt=[this.lastCentroid[0]-Y[0],Y[1]-this.lastCentroid[1]],Nt=e.map.getView();(0,l.bA)(pt,Nt.getResolution()),(0,l.U1)(pt,Nt.getRotation()),Nt.adjustCenterInternal(pt)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=Y,this.lastPointersCount_=Z.length,e.originalEvent.preventDefault()}handleUpEvent(e){const v=e.map,Z=v.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const Y=this.kinetic_.getDistance(),pt=this.kinetic_.getAngle(),At=Z.getCenterInternal(),Nt=v.getPixelFromCoordinateInternal(At),se=v.getCoordinateFromPixelInternal([Nt[0]-Y*Math.cos(pt),Nt[1]-Y*Math.sin(pt)]);Z.animateInternal({center:Z.getConstrainedCenter(se),duration:500,easing:ie.Vv})}return this.panning_&&(this.panning_=!1,Z.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const Z=e.map.getView();return this.lastCentroid=null,Z.getAnimating()&&Z.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}};var fi=h(1781);const Zi=class ne extends Wt{constructor(e){e=e||{},super({stopDown:S.Dv}),this.condition_=e.condition?e.condition:te,this.lastAngle_=void 0,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){if(!re(e))return;const v=e.map,Z=v.getView();if(Z.getConstraints().rotation===fi.h$)return;const Y=v.getSize(),pt=e.pixel,At=Math.atan2(Y[1]/2-pt[1],pt[0]-Y[0]/2);void 0!==this.lastAngle_&&Z.adjustRotationInternal(-(At-this.lastAngle_)),this.lastAngle_=At}handleUpEvent(e){return!re(e)||(e.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(e){return!!(re(e)&&we(e)&&this.condition_(e))&&(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}};var Ni=h(8559);const Be=class Ii extends H.Z{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,v=this.endPixel_,Z="px",Y=this.element_.style;Y.left=Math.min(e[0],v[0])+Z,Y.top=Math.min(e[1],v[1])+Z,Y.width=Math.abs(v[0]-e[0])+Z,Y.height=Math.abs(v[1]-e[1])+Z}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const v=this.element_.style;v.left="inherit",v.top="inherit",v.width="inherit",v.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,v){this.startPixel_=e,this.endPixel_=v,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,v=this.endPixel_,Y=[e,[e[0],v[1]],v,[v[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);Y[4]=Y[0].slice(),this.geometry_?this.geometry_.setCoordinates([Y]):this.geometry_=new Ni.ZP([Y])}getGeometry(){return this.geometry_}};class kt extends tt.ZP{constructor(e,v,Z){super(e),this.coordinate=v,this.mapBrowserEvent=Z}}const Wi=class je extends Wt{constructor(e){super(),this.box_=new Be((e=e||{}).className||"ol-dragbox"),this.minArea_=void 0!==e.minArea?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:we,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,v,Z){const Y=Z[0]-v[0],pt=Z[1]-v[1];return Y*Y+pt*pt>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new kt("boxdrag",e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const v=this.boxEndCondition_(e,this.startPixel_,e.pixel);return v&&this.onBoxEnd(e),this.dispatchEvent(new kt(v?"boxend":"boxcancel",e.coordinate,e)),!1}handleDownEvent(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new kt("boxstart",e.coordinate,e)),!0)}onBoxEnd(e){}},ki=class si extends Wi{constructor(e){super({condition:(e=e||{}).condition?e.condition:ee,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=void 0!==e.duration?e.duration:200,this.out_=void 0!==e.out&&e.out}onBoxEnd(e){const Z=this.getMap().getView();let Y=this.getGeometry();if(this.out_){const pt=Z.rotatedExtentForGeometry(Y),At=Z.getResolutionForExtentInternal(pt),Nt=Z.getResolution()/At;Y=Y.clone(),Y.scale(Nt*Nt)}Z.fitInternal(Y,{duration:this.duration_,easing:ie.Vv})}},Xi=class Gi extends X{constructor(e){super(),e=e||{},this.defaultCondition_=function(v){return Mt(v)&&de(v)},this.condition_=void 0!==e.condition?e.condition:this.defaultCondition_,this.duration_=void 0!==e.duration?e.duration:100,this.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128}handleEvent(e){let v=!1;if(e.type==U.Z.KEYDOWN){const Z=e.originalEvent,Y=Z.key;if(this.condition_(e)&&("ArrowDown"==Y||"ArrowLeft"==Y||"ArrowRight"==Y||"ArrowUp"==Y)){const At=e.map.getView(),Nt=At.getResolution()*this.pixelDelta_;let se=0,pe=0;"ArrowDown"==Y?pe=-Nt:"ArrowLeft"==Y?se=-Nt:"ArrowRight"==Y?se=Nt:pe=Nt;const Oe=[se,pe];(0,l.U1)(Oe,At.getRotation()),function vt(dt,e,v){const Z=dt.getCenterInternal();Z&&dt.animateInternal({duration:void 0!==v?v:250,easing:ie.GE,center:dt.getConstrainedCenter([Z[0]+e[0],Z[1]+e[1]])})}(At,Oe,this.duration_),Z.preventDefault(),v=!0}}return!v}},Ki=class Ui extends X{constructor(e){super(),this.condition_=(e=e||{}).condition?e.condition:function(v){return!function(dt){const e=dt.originalEvent;return z.tK?e.metaKey:e.ctrlKey}(v)&&de(v)},this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:100}handleEvent(e){let v=!1;if(e.type==U.Z.KEYDOWN||e.type==U.Z.KEYPRESS){const Z=e.originalEvent,Y=Z.key;if(this.condition_(e)&&("+"===Y||"-"===Y)){const At="+"===Y?this.delta_:-this.delta_;c(e.map.getView(),At,void 0,this.duration_),Z.preventDefault(),v=!0}}return!v}};var Ae=h(3469);const ji=class Bi extends X{constructor(e){super(e=e||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==e.maxDelta?e.maxDelta:1,this.duration_=void 0!==e.duration?e.duration:250,this.timeout_=void 0!==e.timeout?e.timeout:80,this.useAnchor_=void 0===e.useAnchor||e.useAnchor,this.constrainResolution_=void 0!==e.constrainResolution&&e.constrainResolution;const v=e.condition?e.condition:Ke;this.condition_=e.onFocusOnly?Vt(be,v):v,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();e&&e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==U.Z.WHEEL)return!0;const Z=e.map,Y=e.originalEvent;let pt;if(Y.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate),e.type==U.Z.WHEEL&&(pt=Y.deltaY,z.V&&Y.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(pt/=z.MP),Y.deltaMode===WheelEvent.DOM_DELTA_LINE&&(pt*=40)),0===pt)return!1;this.lastDelta_=pt;const At=Date.now();void 0===this.startTime_&&(this.startTime_=At),(!this.mode_||At-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(pt)<4?"trackpad":"wheel");const Nt=Z.getView();if("trackpad"===this.mode_&&!Nt.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(Nt.getAnimating()&&Nt.cancelAnimations(),Nt.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),Nt.adjustZoom(-pt/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=At,!1;this.totalDelta_+=pt;const se=Math.max(this.timeout_-(At-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,Z),se),!1}handleWheelZoom_(e){const v=e.getView();v.getAnimating()&&v.cancelAnimations();let Z=-(0,Ae.uZ)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(v.getConstrainResolution()||this.constrainResolution_)&&(Z=Z?Z>0?1:-1:0),c(v,Z,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}},zi=class ai extends Wt{constructor(e){const v=e=e||{};v.stopDown||(v.stopDown=S.Dv),super(v),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==e.threshold?e.threshold:.3,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){let v=0;const Z=this.targetPointers[0],Y=this.targetPointers[1],pt=Math.atan2(Y.clientY-Z.clientY,Y.clientX-Z.clientX);if(void 0!==this.lastAngle_){const se=pt-this.lastAngle_;this.rotationDelta_+=se,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),v=se}this.lastAngle_=pt;const At=e.map,Nt=At.getView();Nt.getConstraints().rotation!==fi.h$&&(this.anchor_=At.getCoordinateFromPixelInternal(At.getEventPixel(It(this.targetPointers))),this.rotating_&&(At.render(),Nt.adjustRotationInternal(v,this.anchor_)))}handleUpEvent(e){return!(this.targetPointers.length<2&&(e.map.getView().endInteraction(this.duration_),1))}handleDownEvent(e){if(this.targetPointers.length>=2){const v=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||v.getView().beginInteraction(),!0}return!1}},Yi=class on extends Wt{constructor(e){const v=e=e||{};v.stopDown||(v.stopDown=S.Dv),super(v),this.anchor_=null,this.duration_=void 0!==e.duration?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let v=1;const Z=this.targetPointers[0],Y=this.targetPointers[1],pt=Z.clientX-Y.clientX,At=Z.clientY-Y.clientY,Nt=Math.sqrt(pt*pt+At*At);void 0!==this.lastDistance_&&(v=this.lastDistance_/Nt),this.lastDistance_=Nt;const se=e.map,pe=se.getView();1!=v&&(this.lastScaleDelta_=v),this.anchor_=se.getCoordinateFromPixelInternal(se.getEventPixel(It(this.targetPointers))),se.render(),pe.adjustResolutionInternal(v,this.anchor_)}handleUpEvent(e){return!(this.targetPointers.length<2)||(e.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(e){if(this.targetPointers.length>=2){const v=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||v.getView().beginInteraction(),!0}return!1}};var Li=h(7555),li=h(2064),Se=h(2518),ti=h(9608);function Pi(dt){dt instanceof o.Z?dt.setMapInternal(null):dt instanceof r&&dt.getLayers().forEach(Pi)}function gi(dt,e){if(dt instanceof o.Z)dt.setMapInternal(e);else if(dt instanceof r){const v=dt.getLayers().getArray();for(let Z=0,Y=v.length;Z<Y;++Z)gi(v[Z],e)}}const ze=class an extends Q.Z{constructor(e){super();const v=function ei(dt){let e=null;void 0!==dt.keyboardEventTarget&&(e="string"==typeof dt.keyboardEventTarget?document.getElementById(dt.keyboardEventTarget):dt.keyboardEventTarget);const v={},Z=dt.layers&&"function"==typeof dt.layers.getLayers?dt.layers:new r({layers:dt.layers});let Y,pt,At;return v.layergroup=Z,v.target=dt.target,v.view=dt.view instanceof rt.ZP?dt.view:new rt.ZP,void 0!==dt.controls&&(Array.isArray(dt.controls)?Y=new W.Z(dt.controls.slice()):((0,ht.h)("function"==typeof dt.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),Y=dt.controls)),void 0!==dt.interactions&&(Array.isArray(dt.interactions)?pt=new W.Z(dt.interactions.slice()):((0,ht.h)("function"==typeof dt.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),pt=dt.interactions)),void 0!==dt.overlays?Array.isArray(dt.overlays)?At=new W.Z(dt.overlays.slice()):((0,ht.h)("function"==typeof dt.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),At=dt.overlays):At=new W.Z,{controls:Y,interactions:pt,keyboardEventTarget:e,overlays:At,values:v}}(e=e||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:z.MP,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=(0,G.Ue)(),this.pixelToCoordinateTransform_=(0,G.Ue)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=v.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=v.controls||(0,Dt.c)(),this.interactions=v.interactions||function Vi(dt){dt=dt||{};const e=new W.Z,v=new class Si{constructor(e,v,Z){this.decay_=e,this.minVelocity_=v,this.delay_=Z,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,v){this.points_.push(e,v,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,v=this.points_.length-3;if(this.points_[v+2]<e)return!1;let Z=v-3;for(;Z>0&&this.points_[Z+2]>e;)Z-=3;const Y=this.points_[v+2]-this.points_[Z+2];if(Y<1e3/60)return!1;const pt=this.points_[v]-this.points_[Z],At=this.points_[v+1]-this.points_[Z+1];return this.angle_=Math.atan2(At,pt),this.initialVelocity_=Math.sqrt(pt*pt+At*At)/Y,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}(-.005,.05,100);return(void 0===dt.altShiftDragRotate||dt.altShiftDragRotate)&&e.push(new Zi),(void 0===dt.doubleClickZoom||dt.doubleClickZoom)&&e.push(new Et({delta:dt.zoomDelta,duration:dt.zoomDuration})),(void 0===dt.dragPan||dt.dragPan)&&e.push(new Je({onFocusOnly:dt.onFocusOnly,kinetic:v})),(void 0===dt.pinchRotate||dt.pinchRotate)&&e.push(new zi),(void 0===dt.pinchZoom||dt.pinchZoom)&&e.push(new Yi({duration:dt.zoomDuration})),(void 0===dt.keyboard||dt.keyboard)&&(e.push(new Xi),e.push(new Ki({delta:dt.zoomDelta,duration:dt.zoomDuration}))),(void 0===dt.mouseWheelZoom||dt.mouseWheelZoom)&&e.push(new ji({onFocusOnly:dt.onFocusOnly,duration:dt.zoomDuration})),(void 0===dt.shiftDragZoom||dt.shiftDragZoom)&&e.push(new ki({duration:dt.zoomDuration})),e}({onFocusOnly:!0}),this.overlays_=v.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new ae(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener("layergroup",this.handleLayerGroupChanged_),this.addChangeListener("view",this.handleViewChanged_),this.addChangeListener("size",this.handleSizeChanged_),this.addChangeListener("target",this.handleTargetChanged_),this.setProperties(v.values);const Z=this;e.view&&!(e.view instanceof rt.ZP)&&e.view.then(function(Y){Z.setView(new rt.ZP(Y))}),this.controls.addEventListener(nt.Z.ADD,Y=>{Y.element.setMap(this)}),this.controls.addEventListener(nt.Z.REMOVE,Y=>{Y.element.setMap(null)}),this.interactions.addEventListener(nt.Z.ADD,Y=>{Y.element.setMap(this)}),this.interactions.addEventListener(nt.Z.REMOVE,Y=>{Y.element.setMap(null)}),this.overlays_.addEventListener(nt.Z.ADD,Y=>{this.addOverlayInternal_(Y.element)}),this.overlays_.addEventListener(nt.Z.REMOVE,Y=>{const pt=Y.element.getId();void 0!==pt&&delete this.overlayIdIndex_[pt.toString()],Y.element.setMap(null)}),this.controls.forEach(Y=>{Y.setMap(this)}),this.interactions.forEach(Y=>{Y.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){gi(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const v=e.getId();void 0!==v&&(this.overlayIdIndex_[v.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,v,Z){if(!this.frameState_||!this.renderer_)return;const Y=this.getCoordinateFromPixelInternal(e);return this.renderer_.forEachFeatureAtCoordinate(Y,this.frameState_,void 0!==(Z=void 0!==Z?Z:{}).hitTolerance?Z.hitTolerance:0,!1!==Z.checkWrapped,v,null,void 0!==Z.layerFilter?Z.layerFilter:S.uX,null)}getFeaturesAtPixel(e,v){const Z=[];return this.forEachFeatureAtPixel(e,function(Y){Z.push(Y)},v),Z}getAllLayers(){const e=[];return function v(Z){Z.forEach(function(Y){Y instanceof r?v(Y.getLayers()):e.push(Y)})}(this.getLayers()),e}hasFeatureAtPixel(e,v){if(!this.frameState_||!this.renderer_)return!1;const Z=this.getCoordinateFromPixelInternal(e);return this.renderer_.hasFeatureAtCoordinate(Z,this.frameState_,void 0!==(v=void 0!==v?v:{}).hitTolerance?v.hitTolerance:0,!1!==v.checkWrapped,void 0!==v.layerFilter?v.layerFilter:S.uX,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const Z=this.viewport_.getBoundingClientRect(),Y=this.getSize(),Nt="changedTouches"in e?e.changedTouches[0]:e;return[(Nt.clientX-Z.left)/(Z.width/Y[0]),(Nt.clientY-Z.top)/(Z.height/Y[1])]}getTarget(){return this.get("target")}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return(0,li.lO)(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const v=this.frameState_;return v?(0,G.nn)(v.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const v=this.overlayIdIndex_[e.toString()];return void 0!==v?v:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get("layergroup")}setLayers(e){const v=this.getLayerGroup();if(e instanceof W.Z)return void v.setLayers(e);const Z=v.getLayers();Z.clear(),Z.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let v=0,Z=e.length;v<Z;++v){const Y=e[v];if(!Y.visible)continue;const pt=Y.layer.getRenderer();if(pt&&!pt.ready)return!0;const At=Y.layer.getSource();if(At&&At.loading)return!0}return!1}getPixelFromCoordinate(e){const v=(0,li.Vs)(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(v)}getPixelFromCoordinateInternal(e){const v=this.frameState_;return v?(0,G.nn)(v.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get("size")}getView(){return this.get("view")}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,v,Z,Y){return function P(dt,e,v,Z,Y){if(!dt||!(v in dt.wantedTiles)||!dt.wantedTiles[v][e.getKey()])return yt;const pt=dt.viewState.center,At=Z[0]-pt[0],Nt=Z[1]-pt[1];return 65536*Math.log(Y)+Math.sqrt(At*At+Nt*Nt)/Y}(this.frameState_,e,v,Z,Y)}handleBrowserEvent(e,v){const Z=new $(v=v||e.type,this,e);this.handleMapBrowserEvent(Z)}handleMapBrowserEvent(e){if(!this.frameState_)return;const v=e.originalEvent,Z=v.type;if("pointerdown"===Z||Z===U.Z.WHEEL||Z===U.Z.KEYDOWN){const Y=this.getOwnerDocument(),pt=this.viewport_.getRootNode?this.viewport_.getRootNode():Y,At=v.target;if(this.overlayContainerStopEvent_.contains(At)||!(pt===Y?Y.documentElement:pt).contains(At))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e)){const Y=this.getInteractions().getArray().slice();for(let pt=Y.length-1;pt>=0;pt--){const At=Y[pt];if(At.getMap()===this&&At.getActive()&&this.getTargetElement()&&(!At.handleEvent(e)||e.propagationStopped))break}}}handlePostRender(){const e=this.frameState_,v=this.tileQueue_;if(!v.isEmpty()){let Y=this.maxTilesLoading_,pt=Y;if(e){const At=e.viewHints;if(At[ut.Z.ANIMATING]||At[ut.Z.INTERACTING]){const Nt=Date.now()-e.time>8;Y=Nt?0:8,pt=Nt?0:2}}v.getTilesLoading()<Y&&(v.reprioritize(),v.loadMoreTiles(Y,pt))}e&&this.renderer_&&!e.animate&&(!0===this.renderComplete_?(this.hasListener(p.Z.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(p.Z.RENDERCOMPLETE,e),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new A(it.Z.LOADEND,this,e)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new A(it.Z.LOADSTART,this,e))));const Z=this.postRenderFunctions_;for(let Y=0,pt=Z.length;Y<pt;++Y)Z[Y](this,e);Z.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let Z=0,Y=this.targetChangeHandlerKeys_.length;Z<Y;++Z)(0,I.bN)(this.targetChangeHandlerKeys_[Z]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(U.Z.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(U.Z.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,f.ZF)(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const Z=this.targetElement_.getRootNode();Z instanceof ShadowRoot&&this.resizeObserver_.unobserve(Z.host),this.setSize(void 0)}const e=this.getTarget(),v="string"==typeof e?document.getElementById(e):e;if(this.targetElement_=v,v){v.appendChild(this.viewport_),this.renderer_||(this.renderer_=new ot(this)),this.mapBrowserEventHandler_=new j(this,this.moveTolerance_);for(const pt in et)this.mapBrowserEventHandler_.addEventListener(et[pt],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(U.Z.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(U.Z.WHEEL,this.boundHandleBrowserEvent_,!!z.bM&&{passive:!1});const Z=this.keyboardEventTarget_?this.keyboardEventTarget_:v;this.targetChangeHandlerKeys_=[(0,I.oL)(Z,U.Z.KEYDOWN,this.handleBrowserEvent,this),(0,I.oL)(Z,U.Z.KEYPRESS,this.handleBrowserEvent,this)];const Y=v.getRootNode();Y instanceof ShadowRoot&&this.resizeObserver_.observe(Y.host),this.resizeObserver_.observe(v)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&((0,I.bN)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,I.bN)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=(0,I.oL)(e,g.Z.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,I.oL)(e,U.Z.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(I.bN),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new at("addlayer",e)),this.layerGroupPropertyListenerKeys_=[(0,I.oL)(e,g.Z.PROPERTYCHANGE,this.render,this),(0,I.oL)(e,U.Z.CHANGE,this.render,this),(0,I.oL)(e,"addlayer",this.handleLayerAdd_,this),(0,I.oL)(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let v=0,Z=e.length;v<Z;++v){const Y=e[v].layer;Y.hasRenderer()&&Y.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const e=this.frameState_;e&&this.renderer_.flushDeclutterItems(e)}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Pi(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const v=this.getSize(),Z=this.getView(),Y=this.frameState_;let pt=null;if(void 0!==v&&(0,Se.py)(v)&&Z&&Z.isDef()){const At=Z.getHints(this.frameState_?this.frameState_.viewHints:void 0),Nt=Z.getState();if(pt={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:(0,O.p8)(Nt.center,Nt.resolution,Nt.rotation,v),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:v,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:Nt,viewHints:At,wantedTiles:{},mapId:(0,N.sq)(this),renderTargets:{}},Nt.nextCenter&&Nt.nextResolution){const se=isNaN(Nt.nextRotation)?Nt.rotation:Nt.nextRotation;pt.nextExtent=(0,O.p8)(Nt.nextCenter,Nt.nextResolution,se,v)}}this.frameState_=pt,this.renderer_.renderFrame(pt),pt&&(pt.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,pt.postRenderFunctions),Y&&(!this.previousExtent_||!(0,O.xb)(this.previousExtent_)&&!(0,O.fS)(pt.extent,this.previousExtent_))&&(this.dispatchEvent(new A(it.Z.MOVESTART,this,Y)),this.previousExtent_=(0,O.YN)(this.previousExtent_)),this.previousExtent_&&!pt.viewHints[ut.Z.ANIMATING]&&!pt.viewHints[ut.Z.INTERACTING]&&!(0,O.fS)(pt.extent,this.previousExtent_)&&(this.dispatchEvent(new A(it.Z.MOVEEND,this,pt)),(0,O.d9)(pt.extent,this.previousExtent_))),this.dispatchEvent(new A(it.Z.POSTRENDER,this,pt)),this.renderComplete_=this.hasListener(it.Z.LOADSTART)||this.hasListener(it.Z.LOADEND)||this.hasListener(p.Z.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const v=this.getLayerGroup();v&&this.handleLayerRemove_(new at("removelayer",v)),this.set("layergroup",e)}setSize(e){this.set("size",e)}setTarget(e){this.set("target",e)}setView(e){if(!e||e instanceof rt.ZP)return void this.set("view",e);this.set("view",new rt.ZP);const v=this;e.then(function(Z){v.setView(new rt.ZP(Z))})}updateSize(){const e=this.getTargetElement();let v;if(e){const Y=getComputedStyle(e),pt=e.offsetWidth-parseFloat(Y.borderLeftWidth)-parseFloat(Y.paddingLeft)-parseFloat(Y.paddingRight)-parseFloat(Y.borderRightWidth),At=e.offsetHeight-parseFloat(Y.borderTopWidth)-parseFloat(Y.paddingTop)-parseFloat(Y.paddingBottom)-parseFloat(Y.borderBottomWidth);!isNaN(pt)&&!isNaN(At)&&(v=[pt,At],!(0,Se.py)(v)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&(0,ti.ZK)("No map visible because the map container's width or height are 0."))}const Z=this.getSize();v&&(!Z||!(0,Li.fS)(v,Z))&&(this.setSize(v),this.updateViewportSize_())}updateViewportSize_(){const e=this.getView();if(e){let v;const Z=getComputedStyle(this.viewport_);Z.width&&Z.height&&(v=[parseInt(Z.width,10),parseInt(Z.height,10)]),e.setViewportSize(v)}}}},1645:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>Q});const Q={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"}},7221:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>O});var Q=h(9395),W=h(3196),nt=h(7210),H=h(9070),S=h(925);class N extends Q.ZP{constructor(o,l,a){super(o),this.key=l,this.oldValue=a}}const O=class G extends nt.Z{constructor(o){super(),(0,H.sq)(this),this.values_=null,void 0!==o&&this.setProperties(o)}get(o){let l;return this.values_&&this.values_.hasOwnProperty(o)&&(l=this.values_[o]),l}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(o,l){let a;a=`change:${o}`,this.hasListener(a)&&this.dispatchEvent(new N(a,o,l)),a=W.Z.PROPERTYCHANGE,this.hasListener(a)&&this.dispatchEvent(new N(a,o,l))}addChangeListener(o,l){this.addEventListener(`change:${o}`,l)}removeChangeListener(o,l){this.removeEventListener(`change:${o}`,l)}set(o,l,a){const n=this.values_||(this.values_={});if(a)n[o]=l;else{const R=n[o];n[o]=l,R!==l&&this.notify(o,R)}}setProperties(o,l){for(const a in o)this.set(a,o[a],l)}applyProperties(o){o.values_&&Object.assign(this.values_||(this.values_={}),o.values_)}unset(o,l){if(this.values_&&o in this.values_){const a=this.values_[o];delete this.values_[o],(0,S.x)(this.values_)&&(this.values_=null),l||this.notify(o,a)}}}},3196:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>Q});const Q={PROPERTYCHANGE:"propertychange"}},7210:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>N});var Q=h(9078),W=h(8688),nt=h(7796);const N=class H extends Q.Z{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(W.Z.CHANGE)}getRevision(){return this.revision_}onInternal(O,u){if(Array.isArray(O)){const o=O.length,l=new Array(o);for(let a=0;a<o;++a)l[a]=(0,nt.oL)(this,O[a],u);return l}return(0,nt.oL)(this,O,u)}onceInternal(O,u){let o;if(Array.isArray(O)){const l=O.length;o=new Array(l);for(let a=0;a<l;++a)o[a]=(0,nt.Vx)(this,O[a],u)}else o=(0,nt.Vx)(this,O,u);return u.ol_key=o,o}unInternal(O,u){const o=u.ol_key;if(o)!function S(G){if(Array.isArray(G))for(let O=0,u=G.length;O<u;++O)(0,nt.bN)(G[O]);else(0,nt.bN)(G)}(o);else if(Array.isArray(O))for(let l=0,a=O.length;l<a;++l)this.removeEventListener(O[l],u);else this.removeEventListener(O,u)}}},6323:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>G});var Q=h(9078),W=h(8688),nt=h(6614),H=h(9070),S=h(3906);const G=class N extends Q.Z{constructor(u,o,l){super(),l=l||{},this.tileCoord=u,this.state=o,this.interimTile=null,this.key="",this.transition_=void 0===l.transition?250:l.transition,this.transitionStarts_={},this.interpolate=!!l.interpolate}changed(){this.dispatchEvent(W.Z.CHANGE)}release(){this.state===nt.Z.ERROR&&this.setState(nt.Z.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let u=this.interimTile;do{if(u.getState()==nt.Z.LOADED)return this.transition_=0,u;u=u.interimTile}while(u);return this}refreshInterimChain(){if(!this.interimTile)return;let u=this.interimTile,o=this;do{if(u.getState()==nt.Z.LOADED){u.interimTile=null;break}u.getState()==nt.Z.LOADING?o=u:u.getState()==nt.Z.IDLE?o.interimTile=u.interimTile:o=u,u=o.interimTile}while(u)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(u){if(this.state!==nt.Z.ERROR&&this.state>u)throw new Error("Tile load sequence violation");this.state=u,this.changed()}load(){(0,H.O3)()}getAlpha(u,o){if(!this.transition_)return 1;let l=this.transitionStarts_[u];if(l){if(-1===l)return 1}else l=o,this.transitionStarts_[u]=l;const a=o-l+1e3/60;return a>=this.transition_?1:(0,S.YQ)(a/this.transition_)}inTransition(u){return!!this.transition_&&-1!==this.transitionStarts_[u]}endTransition(u){this.transition_&&(this.transitionStarts_[u]=-1)}}},1047:(Gt,mt,h)=>{"use strict";h.d(mt,{T:()=>W,Z:()=>nt});class Q{constructor(S,N,G,O){this.minX=S,this.maxX=N,this.minY=G,this.maxY=O}contains(S){return this.containsXY(S[1],S[2])}containsTileRange(S){return this.minX<=S.minX&&S.maxX<=this.maxX&&this.minY<=S.minY&&S.maxY<=this.maxY}containsXY(S,N){return this.minX<=S&&S<=this.maxX&&this.minY<=N&&N<=this.maxY}equals(S){return this.minX==S.minX&&this.minY==S.minY&&this.maxX==S.maxX&&this.maxY==S.maxY}extend(S){S.minX<this.minX&&(this.minX=S.minX),S.maxX>this.maxX&&(this.maxX=S.maxX),S.minY<this.minY&&(this.minY=S.minY),S.maxY>this.maxY&&(this.maxY=S.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(S){return this.minX<=S.maxX&&this.maxX>=S.minX&&this.minY<=S.maxY&&this.maxY>=S.minY}}function W(H,S,N,G,O){return void 0!==O?(O.minX=H,O.maxX=S,O.minY=N,O.maxY=G,O):new Q(H,S,N,G)}const nt=Q},6614:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>Q});const Q={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},1828:(Gt,mt,h)=>{"use strict";h.d(mt,{ZP:()=>D});var Q=h(7221),W=h(5329);const nt={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var H=h(8834),S=h(2064),N=h(589),G=h(722),O=h(2780),u=h(3469);function o(C,r,E){return function(A,B,$,et,k){if(!A)return;if(!B&&!r)return A;const L=r?0:$[0]*B,z=r?0:$[1]*B,K=k?k[0]:0,j=k?k[1]:0;let it=C[0]+L/2+K,lt=C[2]-L/2+K,yt=C[1]+z/2+j,St=C[3]-z/2+j;it>lt&&(it=(lt+it)/2,lt=it),yt>St&&(yt=(St+yt)/2,St=yt);let bt=(0,u.uZ)(A[0],it,lt),Ft=(0,u.uZ)(A[1],yt,St);if(et&&E&&B){const Xt=30*B;bt+=-Xt*Math.log(1+Math.max(0,it-A[0])/Xt)+Xt*Math.log(1+Math.max(0,A[0]-lt)/Xt),Ft+=-Xt*Math.log(1+Math.max(0,yt-A[1])/Xt)+Xt*Math.log(1+Math.max(0,A[1]-St)/Xt)}return[bt,Ft]}}function l(C){return C}var a=h(4654),n=h(7555);function R(C,r,E,A){const B=(0,a.dz)(r)/E[0],$=(0,a.Cr)(r)/E[1];return A?Math.min(C,Math.max(B,$)):Math.min(C,Math.min(B,$))}function g(C,r,E){let A=Math.min(C,r);return A*=Math.log(1+50*Math.max(0,C/r-1))/50+1,E&&(A=Math.max(A,E),A/=Math.log(1+50*Math.max(0,E/C-1))/50+1),(0,u.uZ)(A,E/2,2*r)}function w(C,r,E,A,B){return E=void 0===E||E,function($,et,k,L){if(void 0!==$){const z=A?R(C,A,k,B):C;return E&&L?g($,z,r):(0,u.uZ)($,r,z)}}}var m=h(1781),I=h(3906),f=h(8559);function U(C,r){setTimeout(function(){C(r)},0)}function at(C,r,E,A,B){const $=Math.cos(-B);let et=Math.sin(-B),k=C[0]*$-C[1]*et,L=C[1]*$+C[0]*et;return k+=(r[0]/2-E[0])*A,L+=(E[1]-r[1]/2)*A,et=-et,[k*$-L*et,L*$+k*et]}const D=class ot extends Q.Z{constructor(r){super(),r=Object.assign({},r),this.hints_=[0,0],this.animations_=[],this.projection_=(0,S.UQ)(r.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,r.projection&&(0,S.h_)(),r.center&&(r.center=(0,S.Vs)(r.center,this.projection_)),r.extent&&(r.extent=(0,S.dY)(r.extent,this.projection_)),this.applyOptions_(r)}applyOptions_(r){const E=Object.assign({},r);for(const k in nt)delete E[k];this.setProperties(E,!0);const A=function tt(C){let r,E,A,et=void 0!==C.minZoom?C.minZoom:0,k=void 0!==C.maxZoom?C.maxZoom:28;const L=void 0!==C.zoomFactor?C.zoomFactor:2,z=void 0!==C.multiWorld&&C.multiWorld,K=void 0===C.smoothResolutionConstraint||C.smoothResolutionConstraint,j=void 0!==C.showFullExtent&&C.showFullExtent,it=(0,S.UQ)(C.projection,"EPSG:3857"),lt=it.getExtent();let yt=C.constrainOnlyCenter,St=C.extent;if(!z&&!St&&it.isGlobal()&&(yt=!1,St=lt),void 0!==C.resolutions){const bt=C.resolutions;E=bt[et],A=void 0!==bt[k]?bt[k]:bt[bt.length-1],r=C.constrainResolution?function y(C,r,E,A){return r=void 0===r||r,function(B,$,et,k){if(void 0!==B){const L=C[0],z=C[C.length-1],K=E?R(L,E,et,A):L;if(k)return r?g(B,K,z):(0,u.uZ)(B,z,K);const j=Math.min(K,B),it=Math.floor((0,n.h7)(C,j,$));return C[it]>K&&it<C.length-1?C[it+1]:C[it]}}}(bt,K,!yt&&St,j):w(E,A,K,!yt&&St,j)}else{const Ft=(lt?Math.max((0,a.dz)(lt),(0,a.Cr)(lt)):360*S.Wm.degrees/it.getMetersPerUnit())/H.S/Math.pow(2,0),Xt=Ft/Math.pow(2,28);E=C.maxResolution,void 0!==E?et=0:E=Ft/Math.pow(L,et),A=C.minResolution,void 0===A&&(A=void 0!==C.maxZoom?void 0!==C.maxResolution?E/Math.pow(L,k):Ft/Math.pow(L,k):Xt),k=et+Math.floor(Math.log(E/A)/Math.log(L)),A=E/Math.pow(L,k-et),r=C.constrainResolution?function p(C,r,E,A,B,$){return A=void 0===A||A,E=void 0!==E?E:0,function(et,k,L,z){if(void 0!==et){const K=B?R(r,B,L,$):r;if(z)return A?g(et,K,E):(0,u.uZ)(et,E,K);const j=1e-9,it=Math.ceil(Math.log(r/K)/Math.log(C)-j),lt=-k*(.5-j)+.5,yt=Math.min(K,et),St=Math.floor(Math.log(r/yt)/Math.log(C)+lt),bt=Math.max(it,St),Ft=r/Math.pow(C,bt);return(0,u.uZ)(Ft,E,K)}}}(L,E,A,K,!yt&&St,j):w(E,A,K,!yt&&St,j)}return{constraint:r,maxResolution:E,minResolution:A,minZoom:et,zoomFactor:L}}(r);this.maxResolution_=A.maxResolution,this.minResolution_=A.minResolution,this.zoomFactor_=A.zoomFactor,this.resolutions_=r.resolutions,this.padding_=r.padding,this.minZoom_=A.minZoom;const B=function q(C){if(void 0!==C.extent)return o(C.extent,C.constrainOnlyCenter,void 0===C.smoothExtentConstraint||C.smoothExtentConstraint);const r=(0,S.UQ)(C.projection,"EPSG:3857");if(!0!==C.multiWorld&&r.isGlobal()){const E=r.getExtent().slice();return E[0]=-1/0,E[2]=1/0,o(E,!1,!1)}return l}(r),$=A.constraint,et=function ht(C){if(void 0===C.enableRotation||C.enableRotation){const E=C.constrainRotation;return void 0===E||!0===E?(0,m.Gw)():!1===E?m.YP:"number"==typeof E?(0,m.gE)(E):m.YP}return m.h$}(r);this.constraints_={center:B,resolution:$,rotation:et},this.setRotation(void 0!==r.rotation?r.rotation:0),this.setCenterInternal(void 0!==r.center?r.center:null),void 0!==r.resolution?this.setResolution(r.resolution):void 0!==r.zoom&&this.setZoom(r.zoom)}get padding(){return this.padding_}set padding(r){let E=this.padding_;this.padding_=r;const A=this.getCenterInternal();if(A){const B=r||[0,0,0,0];E=E||[0,0,0,0];const $=this.getResolution();this.setCenterInternal([A[0]+$/2*(B[3]-E[3]+E[1]-B[1]),A[1]-$/2*(B[0]-E[0]+E[2]-B[2])])}}getUpdatedOptions_(r){const E=this.getProperties();return void 0!==E.resolution?E.resolution=this.getResolution():E.zoom=this.getZoom(),E.center=this.getCenterInternal(),E.rotation=this.getRotation(),Object.assign({},E,r)}animate(r){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const E=new Array(arguments.length);for(let A=0;A<E.length;++A){let B=arguments[A];B.center&&(B=Object.assign({},B),B.center=(0,S.Vs)(B.center,this.getProjection())),B.anchor&&(B=Object.assign({},B),B.anchor=(0,S.Vs)(B.anchor,this.getProjection())),E[A]=B}this.animateInternal.apply(this,E)}animateInternal(r){let A,E=arguments.length;E>1&&"function"==typeof arguments[E-1]&&(A=arguments[E-1],--E);let B=0;for(;B<E&&!this.isDef();++B){const K=arguments[B];K.center&&this.setCenterInternal(K.center),void 0!==K.zoom?this.setZoom(K.zoom):K.resolution&&this.setResolution(K.resolution),void 0!==K.rotation&&this.setRotation(K.rotation)}if(B===E)return void(A&&U(A,!0));let $=Date.now(),et=this.targetCenter_.slice(),k=this.targetResolution_,L=this.targetRotation_;const z=[];for(;B<E;++B){const K=arguments[B],j={start:$,complete:!1,anchor:K.anchor,duration:void 0!==K.duration?K.duration:1e3,easing:K.easing||I.rd,callback:A};if(K.center&&(j.sourceCenter=et,j.targetCenter=K.center.slice(),et=j.targetCenter),void 0!==K.zoom?(j.sourceResolution=k,j.targetResolution=this.getResolutionForZoom(K.zoom),k=j.targetResolution):K.resolution&&(j.sourceResolution=k,j.targetResolution=K.resolution,k=j.targetResolution),void 0!==K.rotation){j.sourceRotation=L;const it=(0,u.$W)(K.rotation-L+Math.PI,2*Math.PI)-Math.PI;j.targetRotation=L+it,L=j.targetRotation}(C=j).sourceCenter&&C.targetCenter&&!(0,G.fS)(C.sourceCenter,C.targetCenter)||C.sourceResolution!==C.targetResolution||C.sourceRotation!==C.targetRotation?$+=j.duration:j.complete=!0,z.push(j)}var C;this.animations_.push(z),this.setHint(W.Z.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[W.Z.ANIMATING]>0}getInteracting(){return this.hints_[W.Z.INTERACTING]>0}cancelAnimations(){let r;this.setHint(W.Z.ANIMATING,-this.hints_[W.Z.ANIMATING]);for(let E=0,A=this.animations_.length;E<A;++E){const B=this.animations_[E];if(B[0].callback&&U(B[0].callback,!1),!r)for(let $=0,et=B.length;$<et;++$){const k=B[$];if(!k.complete){r=k.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=r,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const r=Date.now();let E=!1;for(let A=this.animations_.length-1;A>=0;--A){const B=this.animations_[A];let $=!0;for(let et=0,k=B.length;et<k;++et){const L=B[et];if(L.complete)continue;let K=L.duration>0?(r-L.start)/L.duration:1;K>=1?(L.complete=!0,K=1):$=!1;const j=L.easing(K);if(L.sourceCenter){const it=L.sourceCenter[0],lt=L.sourceCenter[1],yt=L.targetCenter[0],St=L.targetCenter[1];this.nextCenter_=L.targetCenter,this.targetCenter_=[it+j*(yt-it),lt+j*(St-lt)]}if(L.sourceResolution&&L.targetResolution){const it=1===j?L.targetResolution:L.sourceResolution+j*(L.targetResolution-L.sourceResolution);if(L.anchor){const lt=this.getViewportSize_(this.getRotation()),yt=this.constraints_.resolution(it,0,lt,!0);this.targetCenter_=this.calculateCenterZoom(yt,L.anchor)}this.nextResolution_=L.targetResolution,this.targetResolution_=it,this.applyTargetState_(!0)}if(void 0!==L.sourceRotation&&void 0!==L.targetRotation){const it=1===j?(0,u.$W)(L.targetRotation+Math.PI,2*Math.PI)-Math.PI:L.sourceRotation+j*(L.targetRotation-L.sourceRotation);if(L.anchor){const lt=this.constraints_.rotation(it,!0);this.targetCenter_=this.calculateCenterRotate(lt,L.anchor)}this.nextRotation_=L.targetRotation,this.targetRotation_=it}if(this.applyTargetState_(!0),E=!0,!L.complete)break}if($){this.animations_[A]=null,this.setHint(W.Z.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const et=B[0].callback;et&&U(et,!0)}}this.animations_=this.animations_.filter(Boolean),E&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(r,E){let A;const B=this.getCenterInternal();return void 0!==B&&(A=[B[0]-E[0],B[1]-E[1]],(0,G.U1)(A,r-this.getRotation()),(0,G.IH)(A,E)),A}calculateCenterZoom(r,E){let A;const B=this.getCenterInternal(),$=this.getResolution();return void 0!==B&&void 0!==$&&(A=[E[0]-r*(E[0]-B[0])/$,E[1]-r*(E[1]-B[1])/$]),A}getViewportSize_(r){const E=this.viewportSize_;if(r){const A=E[0],B=E[1];return[Math.abs(A*Math.cos(r))+Math.abs(B*Math.sin(r)),Math.abs(A*Math.sin(r))+Math.abs(B*Math.cos(r))]}return E}setViewportSize(r){this.viewportSize_=Array.isArray(r)?r.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const r=this.getCenterInternal();return r&&(0,S.lO)(r,this.getProjection())}getCenterInternal(){return this.get(nt.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(r){return void 0!==r?(r[0]=this.hints_[0],r[1]=this.hints_[1],r):this.hints_.slice()}calculateExtent(r){const E=this.calculateExtentInternal(r);return(0,S.Fj)(E,this.getProjection())}calculateExtentInternal(r){r=r||this.getViewportSizeMinusPadding_();const E=this.getCenterInternal();(0,O.h)(E,"The view center is not defined");const A=this.getResolution();(0,O.h)(void 0!==A,"The view resolution is not defined");const B=this.getRotation();return(0,O.h)(void 0!==B,"The view rotation is not defined"),(0,a.p8)(E,A,B,r)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(r){this.applyOptions_(this.getUpdatedOptions_({maxZoom:r}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(r){this.applyOptions_(this.getUpdatedOptions_({minZoom:r}))}setConstrainResolution(r){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:r}))}getProjection(){return this.projection_}getResolution(){return this.get(nt.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(r,E){return this.getResolutionForExtentInternal((0,S.dY)(r,this.getProjection()),E)}getResolutionForExtentInternal(r,E){E=E||this.getViewportSizeMinusPadding_();const A=(0,a.dz)(r)/E[0],B=(0,a.Cr)(r)/E[1];return Math.max(A,B)}getResolutionForValueFunction(r){r=r||2;const E=this.getConstrainedResolution(this.maxResolution_),B=Math.log(E/this.minResolution_)/Math.log(r);return function($){return E/Math.pow(r,$*B)}}getRotation(){return this.get(nt.ROTATION)}getValueForResolutionFunction(r){const E=Math.log(r||2),A=this.getConstrainedResolution(this.maxResolution_),$=Math.log(A/this.minResolution_)/E;return function(et){return Math.log(A/et)/E/$}}getViewportSizeMinusPadding_(r){let E=this.getViewportSize_(r);const A=this.padding_;return A&&(E=[E[0]-A[1]-A[3],E[1]-A[0]-A[2]]),E}getState(){const r=this.getProjection(),E=this.getResolution(),A=this.getRotation();let B=this.getCenterInternal();const $=this.padding_;if($){const et=this.getViewportSizeMinusPadding_();B=at(B,this.getViewportSize_(),[et[0]/2+$[3],et[1]/2+$[0]],E,A)}return{center:B.slice(0),projection:void 0!==r?r:null,resolution:E,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:A,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let r;const E=this.getResolution();return void 0!==E&&(r=this.getZoomForResolution(E)),r}getZoomForResolution(r){let A,B,E=this.minZoom_||0;if(this.resolutions_){const $=(0,n.h7)(this.resolutions_,r,1);E=$,A=this.resolutions_[$],B=$==this.resolutions_.length-1?2:A/this.resolutions_[$+1]}else A=this.maxResolution_,B=this.zoomFactor_;return E+Math.log(A/r)/Math.log(B)}getResolutionForZoom(r){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const E=(0,u.uZ)(Math.floor(r),0,this.resolutions_.length-2);return this.resolutions_[E]/Math.pow(this.resolutions_[E]/this.resolutions_[E+1],(0,u.uZ)(r-E,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,r-this.minZoom_)}fit(r,E){let A;if((0,O.h)(Array.isArray(r)||"function"==typeof r.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(r)){(0,O.h)(!(0,a.xb)(r),"Cannot fit empty extent provided as `geometry`");const B=(0,S.dY)(r,this.getProjection());A=(0,f.oJ)(B)}else if("Circle"===r.getType()){const B=(0,S.dY)(r.getExtent(),this.getProjection());A=(0,f.oJ)(B),A.rotate(this.getRotation(),(0,a.qg)(B))}else{const B=(0,S.Cs)();A=B?r.clone().transform(B,this.getProjection()):r}this.fitInternal(A,E)}rotatedExtentForGeometry(r){const E=this.getRotation(),A=Math.cos(E),B=Math.sin(-E),$=r.getFlatCoordinates(),et=r.getStride();let k=1/0,L=1/0,z=-1/0,K=-1/0;for(let j=0,it=$.length;j<it;j+=et){const lt=$[j]*A-$[j+1]*B,yt=$[j]*B+$[j+1]*A;k=Math.min(k,lt),L=Math.min(L,yt),z=Math.max(z,lt),K=Math.max(K,yt)}return[k,L,z,K]}fitInternal(r,E){let A=(E=E||{}).size;A||(A=this.getViewportSizeMinusPadding_());const B=void 0!==E.padding?E.padding:[0,0,0,0],$=void 0!==E.nearest&&E.nearest;let et;et=void 0!==E.minResolution?E.minResolution:void 0!==E.maxZoom?this.getResolutionForZoom(E.maxZoom):0;const k=this.rotatedExtentForGeometry(r);let L=this.getResolutionForExtentInternal(k,[A[0]-B[1]-B[3],A[1]-B[0]-B[2]]);L=isNaN(L)?et:Math.max(L,et),L=this.getConstrainedResolution(L,$?0:1);const z=this.getRotation(),K=Math.sin(z),j=Math.cos(z),it=(0,a.qg)(k);it[0]+=(B[1]-B[3])/2*L,it[1]+=(B[0]-B[2])/2*L;const St=this.getConstrainedCenter([it[0]*j-it[1]*K,it[1]*j+it[0]*K],L),bt=E.callback?E.callback:N.Zn;void 0!==E.duration?this.animateInternal({resolution:L,center:St,duration:E.duration,easing:E.easing},bt):(this.targetResolution_=L,this.targetCenter_=St,this.applyTargetState_(!1,!0),U(bt,!0))}centerOn(r,E,A){this.centerOnInternal((0,S.Vs)(r,this.getProjection()),E,A)}centerOnInternal(r,E,A){this.setCenterInternal(at(r,E,A,this.getResolution(),this.getRotation()))}calculateCenterShift(r,E,A,B){let $;const et=this.padding_;if(et&&r){const k=this.getViewportSizeMinusPadding_(-A),L=at(r,B,[k[0]/2+et[3],k[1]/2+et[0]],E,A);$=[r[0]-L[0],r[1]-L[1]]}return $}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(r){const E=(0,S.lO)(this.targetCenter_,this.getProjection());this.setCenter([E[0]+r[0],E[1]+r[1]])}adjustCenterInternal(r){const E=this.targetCenter_;this.setCenterInternal([E[0]+r[0],E[1]+r[1]])}adjustResolution(r,E){E=E&&(0,S.Vs)(E,this.getProjection()),this.adjustResolutionInternal(r,E)}adjustResolutionInternal(r,E){const A=this.getAnimating()||this.getInteracting(),B=this.getViewportSize_(this.getRotation()),$=this.constraints_.resolution(this.targetResolution_*r,0,B,A);E&&(this.targetCenter_=this.calculateCenterZoom($,E)),this.targetResolution_*=r,this.applyTargetState_()}adjustZoom(r,E){this.adjustResolution(Math.pow(this.zoomFactor_,-r),E)}adjustRotation(r,E){E&&(E=(0,S.Vs)(E,this.getProjection())),this.adjustRotationInternal(r,E)}adjustRotationInternal(r,E){const A=this.getAnimating()||this.getInteracting(),B=this.constraints_.rotation(this.targetRotation_+r,A);E&&(this.targetCenter_=this.calculateCenterRotate(B,E)),this.targetRotation_+=r,this.applyTargetState_()}setCenter(r){this.setCenterInternal(r&&(0,S.Vs)(r,this.getProjection()))}setCenterInternal(r){this.targetCenter_=r,this.applyTargetState_()}setHint(r,E){return this.hints_[r]+=E,this.changed(),this.hints_[r]}setResolution(r){this.targetResolution_=r,this.applyTargetState_()}setRotation(r){this.targetRotation_=r,this.applyTargetState_()}setZoom(r){this.setResolution(this.getResolutionForZoom(r))}applyTargetState_(r,E){const A=this.getAnimating()||this.getInteracting()||E,B=this.constraints_.rotation(this.targetRotation_,A),$=this.getViewportSize_(B),et=this.constraints_.resolution(this.targetResolution_,0,$,A),k=this.constraints_.center(this.targetCenter_,et,$,A,this.calculateCenterShift(this.targetCenter_,et,B,$));this.get(nt.ROTATION)!==B&&this.set(nt.ROTATION,B),this.get(nt.RESOLUTION)!==et&&(this.set(nt.RESOLUTION,et),this.set("zoom",this.getZoom(),!0)),(!k||!this.get(nt.CENTER)||!(0,G.fS)(this.get(nt.CENTER),k))&&this.set(nt.CENTER,k),this.getAnimating()&&!r&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(r,E,A){r=void 0!==r?r:200;const B=E||0,$=this.constraints_.rotation(this.targetRotation_),et=this.getViewportSize_($),k=this.constraints_.resolution(this.targetResolution_,B,et),L=this.constraints_.center(this.targetCenter_,k,et,!1,this.calculateCenterShift(this.targetCenter_,k,$,et));if(0===r&&!this.cancelAnchor_)return this.targetResolution_=k,this.targetRotation_=$,this.targetCenter_=L,void this.applyTargetState_();A=A||(0===r?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==k||this.getRotation()!==$||!this.getCenterInternal()||!(0,G.fS)(this.getCenterInternal(),L))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:$,center:L,resolution:k,duration:r,easing:I.Vv,anchor:A}))}beginInteraction(){this.resolveConstraints(0),this.setHint(W.Z.INTERACTING,1)}endInteraction(r,E,A){A=A&&(0,S.Vs)(A,this.getProjection()),this.endInteractionInternal(r,E,A)}endInteractionInternal(r,E,A){this.getInteracting()&&(this.setHint(W.Z.INTERACTING,-1),this.resolveConstraints(r,E,A))}getConstrainedCenter(r,E){const A=this.getViewportSize_(this.getRotation());return this.constraints_.center(r,E||this.getResolution(),A)}getConstrainedZoom(r,E){const A=this.getResolutionForZoom(r);return this.getZoomForResolution(this.getConstrainedResolution(A,E))}getConstrainedResolution(r,E){E=E||0;const A=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(r,E,A)}}},5329:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>Q});const Q={ANIMATING:0,INTERACTING:1}},7555:(Gt,mt,h)=>{"use strict";function W(l,a){return l>a?1:l<a?-1:0}function H(l,a,n){if(l[0]<=a)return 0;const R=l.length;if(a<=l[R-1])return R-1;if("function"==typeof n){for(let g=1;g<R;++g){const y=l[g];if(y===a)return g;if(y<a)return n(a,l[g-1],y)>0?g-1:g}return R-1}if(n>0){for(let g=1;g<R;++g)if(l[g]<a)return g-1;return R-1}if(n<0){for(let g=1;g<R;++g)if(l[g]<=a)return g;return R-1}for(let g=1;g<R;++g){if(l[g]==a)return g;if(l[g]<a)return l[g-1]-a<a-l[g]?g-1:g}return R-1}function S(l,a,n){for(;a<n;){const R=l[a];l[a]=l[n],l[n]=R,++a,--n}}function N(l,a){const n=Array.isArray(a)?a:[a],R=n.length;for(let g=0;g<R;g++)l[l.length]=n[g]}function O(l,a){const n=l.length;if(n!==a.length)return!1;for(let R=0;R<n;R++)if(l[R]!==a[R])return!1;return!0}function o(l,a,n){const R=a||W;return l.every(function(g,y){if(0===y)return!0;const p=R(l[y-1],g);return!(p>0||n&&0===p)})}h.d(mt,{FZ:()=>S,fS:()=>O,h7:()=>H,j2:()=>W,l7:()=>N,pT:()=>o})},2780:(Gt,mt,h)=>{"use strict";function Q(W,nt){if(!W)throw new Error(nt)}h.d(mt,{h:()=>Q})},9145:(Gt,mt,h)=>{"use strict";h.d(mt,{BB:()=>o,XC:()=>H,_2:()=>G});var Q=h(3469);const W=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,nt=/^([a-z]*)$|^hsla?\(.*\)$/i;function H(a){return"string"==typeof a?a:o(a)}const N=function(){const n={};let R=0;return function(g){let y;if(n.hasOwnProperty(g))y=n[g];else{if(R>=1024){let p=0;for(const w in n)3&p++||(delete n[w],--R)}y=function O(a){let n,R,g,y,p;if(nt.exec(a)&&(a=function S(a){const n=document.createElement("div");if(n.style.color=a,""!==n.style.color){document.body.appendChild(n);const R=getComputedStyle(n).color;return document.body.removeChild(n),R}return""}(a)),W.exec(a)){const w=a.length-1;let m;m=w<=4?1:2;const I=4===w||8===w;n=parseInt(a.substr(1+0*m,m),16),R=parseInt(a.substr(1+1*m,m),16),g=parseInt(a.substr(1+2*m,m),16),y=I?parseInt(a.substr(1+3*m,m),16):255,1==m&&(n=(n<<4)+n,R=(R<<4)+R,g=(g<<4)+g,I&&(y=(y<<4)+y)),p=[n,R,g,y/255]}else if(a.startsWith("rgba("))p=a.slice(5,-1).split(",").map(Number),u(p);else{if(!a.startsWith("rgb("))throw new Error("Invalid color");p=a.slice(4,-1).split(",").map(Number),p.push(1),u(p)}return p}(g),n[g]=y,++R}return y}}();function G(a){return Array.isArray(a)?a:N(a)}function u(a){return a[0]=(0,Q.uZ)(a[0]+.5|0,0,255),a[1]=(0,Q.uZ)(a[1]+.5|0,0,255),a[2]=(0,Q.uZ)(a[2]+.5|0,0,255),a[3]=(0,Q.uZ)(a[3],0,1),a}function o(a){let n=a[0];n!=(0|n)&&(n=n+.5|0);let R=a[1];R!=(0|R)&&(R=R+.5|0);let g=a[2];return g!=(0|g)&&(g=g+.5|0),"rgba("+n+","+R+","+g+","+(void 0===a[3]?1:Math.round(100*a[3])/100)+")"}},9886:(Gt,mt,h)=>{"use strict";h.d(mt,{y:()=>W});var Q=h(9145);function W(nt){return Array.isArray(nt)?(0,Q.BB)(nt):nt}},9608:(Gt,mt,h)=>{"use strict";h.d(mt,{ZK:()=>S});const Q={info:1,warn:2,error:3,none:4};let W=Q.info;function S(...G){W>Q.warn||console.warn(...G)}},8039:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>G});var Q=h(9692),W=h(8688),nt=h(4096),H=h(7555),S=h(7120);const G=class N extends Q.Z{constructor(u){u=u||{},super({element:document.createElement("div"),render:u.render,target:u.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===u.collapsed||u.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==u.collapsible,this.collapsible_=void 0===u.collapsible||u.collapsible,this.collapsible_||(this.collapsed_=!1);const o=void 0!==u.className?u.className:"ol-attribution",l=void 0!==u.tipLabel?u.tipLabel:"Attributions",a=void 0!==u.expandClassName?u.expandClassName:o+"-expand",n=void 0!==u.collapseLabel?u.collapseLabel:"\u203a",R=void 0!==u.collapseClassName?u.collapseClassName:o+"-collapse";"string"==typeof n?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=n,this.collapseLabel_.className=R):this.collapseLabel_=n;const g=void 0!==u.label?u.label:"i";"string"==typeof g?(this.label_=document.createElement("span"),this.label_.textContent=g,this.label_.className=a):this.label_=g;const y=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=l,this.toggleButton_.appendChild(y),this.toggleButton_.addEventListener(W.Z.CLICK,this.handleClick_.bind(this),!1);const w=this.element;w.className=o+" "+nt.XV+" "+nt.hg+(this.collapsed_&&this.collapsible_?" "+nt.hN:"")+(this.collapsible_?"":" ol-uncollapsible"),w.appendChild(this.toggleButton_),w.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(u){const o=Array.from(new Set(this.getMap().getAllLayers().flatMap(a=>a.getAttributions(u)))),l=!this.getMap().getAllLayers().some(a=>a.getSource()&&!1===a.getSource().getAttributionsCollapsible());return this.overrideCollapsible_||this.setCollapsible(l),o}updateElement_(u){if(!u)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const o=this.collectSourceAttributions_(u),l=o.length>0;if(this.renderedVisible_!=l&&(this.element.style.display=l?"":"none",this.renderedVisible_=l),!(0,H.fS)(o,this.renderedAttributions_)){(0,S.ep)(this.ulElement_);for(let a=0,n=o.length;a<n;++a){const R=document.createElement("li");R.innerHTML=o[a],this.ulElement_.appendChild(R)}this.renderedAttributions_=o}}handleClick_(u){u.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(nt.hN),this.collapsed_?(0,S.$H)(this.collapseLabel_,this.label_):(0,S.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(u){this.collapsible_!==u&&(this.collapsible_=u,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(u){this.userCollapsed_=u,this.collapsible_&&this.collapsed_!==u&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(u){this.updateElement_(u.frameState)}}},9692:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>G});var Q=h(7221),W=h(1645),nt=h(589),H=h(7796),S=h(7120);const G=class N extends Q.Z{constructor(u){super();const o=u.element;o&&!u.target&&!o.style.pointerEvents&&(o.style.pointerEvents="auto"),this.element=o||null,this.target_=null,this.map_=null,this.listenerKeys=[],u.render&&(this.render=u.render),u.target&&this.setTarget(u.target)}disposeInternal(){(0,S.ZF)(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(u){this.map_&&(0,S.ZF)(this.element);for(let o=0,l=this.listenerKeys.length;o<l;++o)(0,H.bN)(this.listenerKeys[o]);this.listenerKeys.length=0,this.map_=u,u&&((this.target_?this.target_:u.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==nt.Zn&&this.listenerKeys.push((0,H.oL)(u,W.Z.POSTRENDER,this.render,this)),u.render())}render(u){}setTarget(u){this.target_="string"==typeof u?document.getElementById(u):u}}},9489:(Gt,mt,h)=>{"use strict";h.d(mt,{c:()=>l});var Q=h(8039),W=h(1165),nt=h(9692),H=h(8688),S=h(4096),N=h(3906);const O=class G extends nt.Z{constructor(n){n=n||{},super({element:document.createElement("div"),render:n.render,target:n.target});const R=void 0!==n.className?n.className:"ol-rotate",g=void 0!==n.label?n.label:"\u21e7",y=void 0!==n.compassClassName?n.compassClassName:"ol-compass";this.label_=null,"string"==typeof g?(this.label_=document.createElement("span"),this.label_.className=y,this.label_.textContent=g):(this.label_=g,this.label_.classList.add(y));const p=n.tipLabel?n.tipLabel:"Reset rotation",w=document.createElement("button");w.className=R+"-reset",w.setAttribute("type","button"),w.title=p,w.appendChild(this.label_),w.addEventListener(H.Z.CLICK,this.handleClick_.bind(this),!1);const I=this.element;I.className=R+" "+S.XV+" "+S.hg,I.appendChild(w),this.callResetNorth_=n.resetNorth?n.resetNorth:void 0,this.duration_=void 0!==n.duration?n.duration:250,this.autoHide_=void 0===n.autoHide||n.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(S.oj)}handleClick_(n){n.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const R=this.getMap().getView();if(!R)return;const g=R.getRotation();void 0!==g&&(this.duration_>0&&g%(2*Math.PI)!=0?R.animate({rotation:0,duration:this.duration_,easing:N.Vv}):R.setRotation(0))}render(n){const R=n.frameState;if(!R)return;const g=R.viewState.rotation;if(g!=this.rotation_){const y="rotate("+g+"rad)";if(this.autoHide_){const p=this.element.classList.contains(S.oj);p||0!==g?p&&0!==g&&this.element.classList.remove(S.oj):this.element.classList.add(S.oj)}this.label_.style.transform=y}this.rotation_=g}},o=class u extends nt.Z{constructor(n){n=n||{},super({element:document.createElement("div"),target:n.target});const R=void 0!==n.className?n.className:"ol-zoom",g=void 0!==n.delta?n.delta:1,y=void 0!==n.zoomInClassName?n.zoomInClassName:R+"-in",p=void 0!==n.zoomOutClassName?n.zoomOutClassName:R+"-out",w=void 0!==n.zoomInLabel?n.zoomInLabel:"+",m=void 0!==n.zoomOutLabel?n.zoomOutLabel:"\u2013",I=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"Zoom in",f=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"Zoom out",F=document.createElement("button");F.className=y,F.setAttribute("type","button"),F.title=I,F.appendChild("string"==typeof w?document.createTextNode(w):w),F.addEventListener(H.Z.CLICK,this.handleClick_.bind(this,g),!1);const ot=document.createElement("button");ot.className=p,ot.setAttribute("type","button"),ot.title=f,ot.appendChild("string"==typeof m?document.createTextNode(m):m),ot.addEventListener(H.Z.CLICK,this.handleClick_.bind(this,-g),!1);const q=this.element;q.className=R+" "+S.XV+" "+S.hg,q.appendChild(F),q.appendChild(ot),this.duration_=void 0!==n.duration?n.duration:250}handleClick_(n,R){R.preventDefault(),this.zoomByDelta_(n)}zoomByDelta_(n){const g=this.getMap().getView();if(!g)return;const y=g.getZoom();if(void 0!==y){const p=g.getConstrainedZoom(y+n);this.duration_>0?(g.getAnimating()&&g.cancelAnimations(),g.animate({zoom:p,duration:this.duration_,easing:N.Vv})):g.setZoom(p)}}};function l(a){a=a||{};const n=new W.Z;return(void 0===a.zoom||a.zoom)&&n.push(new o(a.zoomOptions)),(void 0===a.rotate||a.rotate)&&n.push(new O(a.rotateOptions)),(void 0===a.attribution||a.attribution)&&n.push(new Q.Z(a.attributionOptions)),n}},722:(Gt,mt,h)=>{"use strict";h.d(mt,{Cf:()=>y,IH:()=>W,U1:()=>u,bA:()=>o,fS:()=>O});var Q=h(4654);function W(w,m){return w[0]+=+m[0],w[1]+=+m[1],w}function O(w,m){let I=!0;for(let f=w.length-1;f>=0;--f)if(w[f]!=m[f]){I=!1;break}return I}function u(w,m){const I=Math.cos(m),f=Math.sin(m),ot=w[1]*I+w[0]*f;return w[0]=w[0]*I-w[1]*f,w[1]=ot,w}function o(w,m){return w[0]*=m,w[1]*=m,w}function y(w,m){if(m.canWrapX()){const I=(0,Q.dz)(m.getExtent()),f=function p(w,m,I){const f=m.getExtent();let F=0;return m.canWrapX()&&(w[0]<f[0]||w[0]>f[2])&&(I=I||(0,Q.dz)(f),F=Math.floor((w[0]-f[0])/I)),F}(w,m,I);f&&(w[0]-=f*I)}return w}},4096:(Gt,mt,h)=>{"use strict";h.d(mt,{XV:()=>nt,hN:()=>N,hg:()=>S,oj:()=>Q,p:()=>u});const Q="ol-hidden",nt="ol-unselectable",S="ol-control",N="ol-collapsed",G=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),O=["style","variant","weight","size","lineHeight","family"],u=function(o){const l=o.match(G);if(!l)return null;const a={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,R=O.length;n<R;++n){const g=l[n+1];void 0!==g&&(a[O[n]]=g)}return a.families=a.family.split(/,\s?/),a}},7120:(Gt,mt,h)=>{"use strict";h.d(mt,{$H:()=>N,E4:()=>W,ZF:()=>G,ep:()=>O,hF:()=>u,jy:()=>nt});var Q=h(8072);function W(o,l,a,n){let R;return R=a&&a.length?a.shift():Q.Id?new OffscreenCanvas(o||300,l||300):document.createElement("canvas"),o&&(R.width=o),l&&(R.height=l),R.getContext("2d",n)}function nt(o){const l=o.canvas;l.width=1,l.height=1,o.clearRect(0,0,1,1)}function N(o,l){const a=l.parentNode;a&&a.replaceChild(o,l)}function G(o){return o&&o.parentNode?o.parentNode.removeChild(o):null}function O(o){for(;o.lastChild;)o.removeChild(o.lastChild)}function u(o,l){const a=o.childNodes;for(let n=0;;++n){const R=a[n],g=l[n];if(!R&&!g)break;if(R!==g){if(!R){o.appendChild(g);continue}if(!g){o.removeChild(R),--n;continue}o.insertBefore(g,R)}}}},3906:(Gt,mt,h)=>{"use strict";function Q(N){return Math.pow(N,3)}function W(N){return 1-Q(1-N)}function nt(N){return 3*N*N-2*N*N*N}function H(N){return N}h.d(mt,{GE:()=>H,Vv:()=>W,YQ:()=>Q,rd:()=>nt})},7796:(Gt,mt,h)=>{"use strict";h.d(mt,{Vx:()=>nt,bN:()=>H,oL:()=>W});var Q=h(925);function W(S,N,G,O,u){if(O&&O!==S&&(G=G.bind(O)),u){const l=G;G=function(){S.removeEventListener(N,G),l.apply(this,arguments)}}const o={target:S,type:N,listener:G};return S.addEventListener(N,G),o}function nt(S,N,G,O){return W(S,N,G,O,!0)}function H(S){S&&S.target&&(S.target.removeEventListener(S.type,S.listener),(0,Q.Z)(S))}},9395:(Gt,mt,h)=>{"use strict";h.d(mt,{ZP:()=>H});const H=class Q{constructor(N){this.type=N,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}},8688:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>Q});const Q={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},9078:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>N});var Q=h(9511),W=h(9395),nt=h(589),H=h(925);const N=class S extends Q.Z{constructor(O){super(),this.eventTarget_=O,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(O,u){if(!O||!u)return;const o=this.listeners_||(this.listeners_={}),l=o[O]||(o[O]=[]);l.includes(u)||l.push(u)}dispatchEvent(O){const u="string"==typeof O,o=u?O:O.type,l=this.listeners_&&this.listeners_[o];if(!l)return;const a=u?new W.ZP(O):O;a.target||(a.target=this.eventTarget_||this);const n=this.dispatching_||(this.dispatching_={}),R=this.pendingRemovals_||(this.pendingRemovals_={});let g;o in n||(n[o]=0,R[o]=0),++n[o];for(let y=0,p=l.length;y<p;++y)if(g="handleEvent"in l[y]?l[y].handleEvent(a):l[y].call(this,a),!1===g||a.propagationStopped){g=!1;break}if(0==--n[o]){let y=R[o];for(delete R[o];y--;)this.removeEventListener(o,nt.Zn);delete n[o]}return g}disposeInternal(){this.listeners_&&(0,H.Z)(this.listeners_)}getListeners(O){return this.listeners_&&this.listeners_[O]||void 0}hasListener(O){return!!this.listeners_&&(O?O in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(O,u){const o=this.listeners_&&this.listeners_[O];if(o){const l=o.indexOf(u);-1!==l&&(this.pendingRemovals_&&O in this.pendingRemovals_?(o[l]=nt.Zn,++this.pendingRemovals_[O]):(o.splice(l,1),0===o.length&&delete this.listeners_[O]))}}}},4654:(Gt,mt,h)=>{"use strict";h.d(mt,{Cf:()=>Xt,Cr:()=>B,EO:()=>yt,Ed:()=>et,GN:()=>y,H6:()=>tt,HK:()=>R,I7:()=>bt,MV:()=>ae,Ne:()=>Ft,T9:()=>a,Wj:()=>f,Xv:()=>K,YN:()=>n,b8:()=>G,bg:()=>ht,d9:()=>S,dY:()=>A,dz:()=>j,f3:()=>H,fS:()=>w,g0:()=>C,hC:()=>xt,hI:()=>W,jE:()=>u,kK:()=>it,l7:()=>I,lJ:()=>l,p8:()=>E,pX:()=>o,qP:()=>ot,qf:()=>N,qg:()=>D,r4:()=>O,rL:()=>z,w$:()=>at,xb:()=>lt});var Q=h(5552);function W(P){const rt=[1/0,1/0,-1/0,-1/0];for(let ut=0,Dt=P.length;ut<Dt;++ut)f(rt,P[ut]);return rt}function H(P,rt,ut){return ut?(ut[0]=P[0]-rt,ut[1]=P[1]-rt,ut[2]=P[2]+rt,ut[3]=P[3]+rt,ut):[P[0]-rt,P[1]-rt,P[2]+rt,P[3]+rt]}function S(P,rt){return rt?(rt[0]=P[0],rt[1]=P[1],rt[2]=P[2],rt[3]=P[3],rt):P.slice()}function N(P,rt,ut){let Dt,Ut;return Dt=rt<P[0]?P[0]-rt:P[2]<rt?rt-P[2]:0,Ut=ut<P[1]?P[1]-ut:P[3]<ut?ut-P[3]:0,Dt*Dt+Ut*Ut}function G(P,rt){return u(P,rt[0],rt[1])}function O(P,rt){return P[0]<=rt[0]&&rt[2]<=P[2]&&P[1]<=rt[1]&&rt[3]<=P[3]}function u(P,rt,ut){return P[0]<=rt&&rt<=P[2]&&P[1]<=ut&&ut<=P[3]}function o(P,rt){const le=rt[0],vt=rt[1];let c=Q.Z.UNKNOWN;return le<P[0]?c|=Q.Z.LEFT:le>P[2]&&(c|=Q.Z.RIGHT),vt<P[1]?c|=Q.Z.BELOW:vt>P[3]&&(c|=Q.Z.ABOVE),c===Q.Z.UNKNOWN&&(c=Q.Z.INTERSECTING),c}function l(){return[1/0,1/0,-1/0,-1/0]}function a(P,rt,ut,Dt,Ut){return Ut?(Ut[0]=P,Ut[1]=rt,Ut[2]=ut,Ut[3]=Dt,Ut):[P,rt,ut,Dt]}function n(P){return a(1/0,1/0,-1/0,-1/0,P)}function R(P,rt){const ut=P[0],Dt=P[1];return a(ut,Dt,ut,Dt,rt)}function y(P,rt,ut,Dt,Ut){return ot(n(Ut),P,rt,ut,Dt)}function w(P,rt){return P[0]==rt[0]&&P[2]==rt[2]&&P[1]==rt[1]&&P[3]==rt[3]}function I(P,rt){return rt[0]<P[0]&&(P[0]=rt[0]),rt[2]>P[2]&&(P[2]=rt[2]),rt[1]<P[1]&&(P[1]=rt[1]),rt[3]>P[3]&&(P[3]=rt[3]),P}function f(P,rt){rt[0]<P[0]&&(P[0]=rt[0]),rt[0]>P[2]&&(P[2]=rt[0]),rt[1]<P[1]&&(P[1]=rt[1]),rt[1]>P[3]&&(P[3]=rt[1])}function ot(P,rt,ut,Dt,Ut){for(;ut<Dt;ut+=Ut)q(P,rt[ut],rt[ut+1]);return P}function q(P,rt,ut){P[0]=Math.min(P[0],rt),P[1]=Math.min(P[1],ut),P[2]=Math.max(P[2],rt),P[3]=Math.max(P[3],ut)}function tt(P,rt){let ut;return ut=rt(xt(P)),!!(ut||(ut=rt(at(P)),ut)||(ut=rt(K(P)),ut)||(ut=rt(z(P)),ut))&&ut}function ht(P){let rt=0;return lt(P)||(rt=j(P)*B(P)),rt}function xt(P){return[P[0],P[1]]}function at(P){return[P[2],P[1]]}function D(P){return[(P[0]+P[2])/2,(P[1]+P[3])/2]}function C(P,rt){let ut;if("bottom-left"===rt)ut=xt(P);else if("bottom-right"===rt)ut=at(P);else if("top-left"===rt)ut=z(P);else{if("top-right"!==rt)throw new Error("Invalid corner");ut=K(P)}return ut}function E(P,rt,ut,Dt,Ut){const[ie,le,vt,c,X,V,Et,Tt]=A(P,rt,ut,Dt);return a(Math.min(ie,vt,X,Et),Math.min(le,c,V,Tt),Math.max(ie,vt,X,Et),Math.max(le,c,V,Tt),Ut)}function A(P,rt,ut,Dt){const Ut=rt*Dt[0]/2,ie=rt*Dt[1]/2,le=Math.cos(ut),vt=Math.sin(ut),c=Ut*le,X=Ut*vt,V=ie*le,Et=ie*vt,Tt=P[0],It=P[1];return[Tt-c+Et,It-X-V,Tt-c-Et,It-X+V,Tt+c-Et,It+X+V,Tt+c+Et,It+X-V,Tt-c+Et,It-X-V]}function B(P){return P[3]-P[1]}function et(P,rt,ut){const Dt=ut||[1/0,1/0,-1/0,-1/0];return it(P,rt)?(Dt[0]=P[0]>rt[0]?P[0]:rt[0],Dt[1]=P[1]>rt[1]?P[1]:rt[1],Dt[2]=P[2]<rt[2]?P[2]:rt[2],Dt[3]=P[3]<rt[3]?P[3]:rt[3]):n(Dt),Dt}function z(P){return[P[0],P[3]]}function K(P){return[P[2],P[3]]}function j(P){return P[2]-P[0]}function it(P,rt){return P[0]<=rt[2]&&P[2]>=rt[0]&&P[1]<=rt[3]&&P[3]>=rt[1]}function lt(P){return P[2]<P[0]||P[3]<P[1]}function yt(P,rt){return rt?(rt[0]=P[0],rt[1]=P[1],rt[2]=P[2],rt[3]=P[3],rt):P}function bt(P,rt,ut){let Dt=!1;const Ut=o(P,rt),ie=o(P,ut);if(Ut===Q.Z.INTERSECTING||ie===Q.Z.INTERSECTING)Dt=!0;else{const le=P[0],vt=P[1],c=P[2],X=P[3],Tt=ut[0],It=ut[1],Wt=(It-rt[1])/(Tt-rt[0]);let Vt,Ht;ie&Q.Z.ABOVE&&!(Ut&Q.Z.ABOVE)&&(Vt=Tt-(It-X)/Wt,Dt=Vt>=le&&Vt<=c),!Dt&&ie&Q.Z.RIGHT&&!(Ut&Q.Z.RIGHT)&&(Ht=It-(Tt-c)*Wt,Dt=Ht>=vt&&Ht<=X),!Dt&&ie&Q.Z.BELOW&&!(Ut&Q.Z.BELOW)&&(Vt=Tt-(It-vt)/Wt,Dt=Vt>=le&&Vt<=c),!Dt&&ie&Q.Z.LEFT&&!(Ut&Q.Z.LEFT)&&(Ht=It-(Tt-le)*Wt,Dt=Ht>=vt&&Ht<=X)}return Dt}function Ft(P,rt,ut,Dt){if(lt(P))return n(ut);let Ut=[];if(Dt>1){const vt=P[2]-P[0],c=P[3]-P[1];for(let X=0;X<Dt;++X)Ut.push(P[0]+vt*X/Dt,P[1],P[2],P[1]+c*X/Dt,P[2]-vt*X/Dt,P[3],P[0],P[3]-c*X/Dt)}else Ut=[P[0],P[1],P[2],P[1],P[2],P[3],P[0],P[3]];rt(Ut,Ut,2);const ie=[],le=[];for(let vt=0,c=Ut.length;vt<c;vt+=2)ie.push(Ut[vt]),le.push(Ut[vt+1]);return function nt(P,rt,ut){return a(Math.min.apply(null,P),Math.min.apply(null,rt),Math.max.apply(null,P),Math.max.apply(null,rt),ut)}(ie,le,ut)}function Xt(P,rt){const ut=rt.getExtent(),Dt=D(P);if(rt.canWrapX()&&(Dt[0]<ut[0]||Dt[0]>=ut[2])){const Ut=j(ut),le=Math.floor((Dt[0]-ut[0])/Ut)*Ut;P[0]-=le,P[2]-=le}return P}function ae(P,rt){if(rt.canWrapX()){const ut=rt.getExtent();if(!isFinite(P[0])||!isFinite(P[2]))return[[ut[0],P[1],ut[2],P[3]]];Xt(P,rt);const Dt=j(ut);if(j(P)>Dt)return[[ut[0],P[1],ut[2],P[3]]];if(P[0]<ut[0])return[[P[0]+Dt,P[1],ut[2],P[3]],[ut[0],P[1],P[2],P[3]]];if(P[2]>ut[2])return[[P[0],P[1],ut[2],P[3]],[ut[0],P[1],P[2]-Dt,P[3]]]}return[P]}},5552:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>Q});const Q={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},589:(Gt,mt,h)=>{"use strict";h.d(mt,{Dv:()=>nt,Zn:()=>H,qe:()=>S,uX:()=>W});var Q=h(7555);function W(){return!0}function nt(){return!1}function H(){}function S(G){let u,o,l,O=!1;return function(){const a=Array.prototype.slice.call(arguments);return(!O||this!==l||!(0,Q.fS)(a,o))&&(O=!0,l=this,o=a,u=G.apply(this,arguments)),u}}},5311:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>N});var Q=h(1928),W=h(4654),nt=h(3449),H=h(3469);class S extends Q.ZP{constructor(O,u){super(),this.setCoordinates(O,u)}clone(){const O=new S(this.flatCoordinates.slice(),this.layout);return O.applyProperties(this),O}closestPointXY(O,u,o,l){const a=this.flatCoordinates,n=(0,H.bI)(O,u,a[0],a[1]);if(n<l){const R=this.stride;for(let g=0;g<R;++g)o[g]=a[g];return o.length=R,n}return l}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(O){return(0,W.HK)(this.flatCoordinates,O)}getType(){return"Point"}intersectsExtent(O){return(0,W.jE)(O,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(O,u){this.setLayout(u,O,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,nt.IG)(this.flatCoordinates,0,O,this.stride),this.changed()}}const N=S},8559:(Gt,mt,h)=>{"use strict";h.d(mt,{ZP:()=>E,oJ:()=>B});var Q=h(1928),W=h(3469);function nt(k,L,z,K,j,it,lt){const yt=k[L],St=k[L+1],bt=k[z]-yt,Ft=k[z+1]-St;let Xt;if(0===bt&&0===Ft)Xt=L;else{const ae=((j-yt)*bt+(it-St)*Ft)/(bt*bt+Ft*Ft);if(ae>1)Xt=z;else{if(ae>0){for(let P=0;P<K;++P)lt[P]=(0,W.t7)(k[L+P],k[z+P],ae);return void(lt.length=K)}Xt=L}}for(let ae=0;ae<K;++ae)lt[ae]=k[Xt+ae];lt.length=K}function H(k,L,z,K,j){let it=k[L],lt=k[L+1];for(L+=K;L<z;L+=K){const yt=k[L],St=k[L+1],bt=(0,W.bI)(it,lt,yt,St);bt>j&&(j=bt),it=yt,lt=St}return j}function G(k,L,z,K,j,it,lt,yt,St,bt,Ft){if(L==z)return bt;let Xt,ae;if(0===j){if(ae=(0,W.bI)(lt,yt,k[L],k[L+1]),ae<bt){for(Xt=0;Xt<K;++Xt)St[Xt]=k[L+Xt];return St.length=K,ae}return bt}Ft=Ft||[NaN,NaN];let P=L+K;for(;P<z;)if(nt(k,P-K,P,K,lt,yt,Ft),ae=(0,W.bI)(lt,yt,Ft[0],Ft[1]),ae<bt){for(bt=ae,Xt=0;Xt<K;++Xt)St[Xt]=Ft[Xt];St.length=K,P+=K}else P+=K*Math.max((Math.sqrt(ae)-Math.sqrt(bt))/j|0,1);if(it&&(nt(k,z-K,L,K,lt,yt,Ft),ae=(0,W.bI)(lt,yt,Ft[0],Ft[1]),ae<bt)){for(bt=ae,Xt=0;Xt<K;++Xt)St[Xt]=Ft[Xt];St.length=K}return bt}var o=h(4654),l=h(3449),a=h(4340),n=h(2868);function R(k,L,z,K){let j=0,it=k[z-K],lt=k[z-K+1];for(;L<z;L+=K){const yt=k[L],St=k[L+1];j+=lt*yt-it*St,it=yt,lt=St}return j/2}class p extends Q.ZP{constructor(L,z){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===z||Array.isArray(L[0])?this.setCoordinates(L,z):this.setFlatCoordinates(z,L)}clone(){return new p(this.flatCoordinates.slice(),this.layout)}closestPointXY(L,z,K,j){return j<(0,o.qf)(this.getExtent(),L,z)?j:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(H(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),G(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,L,z,K,j))}getArea(){return R(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return(0,n.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(L){const z=[];return z.length=(0,a.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,L,z,0),new p(z,"XY")}getType(){return"LinearRing"}intersectsExtent(L){return!1}setCoordinates(L,z){this.setLayout(z,L,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,l.Sg)(this.flatCoordinates,0,L,this.stride),this.changed()}}const w=p;var m=h(5311),I=h(7555),f=h(4817);var U=h(2574);function q(k,L,z,K){for(;L<z-K;){for(let j=0;j<K;++j){const it=k[L+j];k[L+j]=k[z-K+j],k[z-K+j]=it}L+=K,z-=K}}function tt(k,L,z,K){let j=0,it=k[z-K],lt=k[z-K+1];for(;L<z;L+=K){const yt=k[L],St=k[L+1];j+=(yt-it)*(St+lt),it=yt,lt=St}return 0===j?void 0:j>0}function at(k,L,z,K,j){j=void 0!==j&&j;for(let it=0,lt=z.length;it<lt;++it){const yt=z[it],St=tt(k,L,yt,K);(0===it?j&&St||!j&&!St:j&&!St||!j&&St)&&q(k,L,yt,K),L=yt}return L}class r extends Q.ZP{constructor(L,z,K){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==z&&K?(this.setFlatCoordinates(z,L),this.ends_=K):this.setCoordinates(L,z)}appendLinearRing(L){this.flatCoordinates?(0,I.l7)(this.flatCoordinates,L.getFlatCoordinates()):this.flatCoordinates=L.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const L=new r(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return L.applyProperties(this),L}closestPointXY(L,z,K,j){return j<(0,o.qf)(this.getExtent(),L,z)?j:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function S(k,L,z,K,j){for(let it=0,lt=z.length;it<lt;++it){const yt=z[it];j=H(k,L,yt,K,j),L=yt}return j}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function O(k,L,z,K,j,it,lt,yt,St,bt,Ft){Ft=Ft||[NaN,NaN];for(let Xt=0,ae=z.length;Xt<ae;++Xt){const P=z[Xt];bt=G(k,L,P,K,j,it,lt,yt,St,bt,Ft),L=P}return bt}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,L,z,K,j))}containsXY(L,z){return(0,f.wY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,L,z)}getArea(){return function g(k,L,z,K){let j=0;for(let it=0,lt=z.length;it<lt;++it){const yt=z[it];j+=R(k,L,yt,K),L=yt}return j}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(L){let z;return void 0!==L?(z=this.getOrientedFlatCoordinates().slice(),at(z,0,this.ends_,this.stride,L)):z=this.flatCoordinates,(0,n.o1)(z,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const L=(0,o.qg)(this.getExtent());this.flatInteriorPoint_=function F(k,L,z,K,j,it,lt){let yt,St,bt,Ft,Xt,ae,P;const rt=j[it+1],ut=[];for(let ie=0,le=z.length;ie<le;++ie){const vt=z[ie];for(Ft=k[vt-K],ae=k[vt-K+1],yt=L;yt<vt;yt+=K)Xt=k[yt],P=k[yt+1],(rt<=ae&&P<=rt||ae<=rt&&rt<=P)&&(bt=(rt-ae)/(P-ae)*(Xt-Ft)+Ft,ut.push(bt)),Ft=Xt,ae=P}let Dt=NaN,Ut=-1/0;for(ut.sort(I.j2),Ft=ut[0],yt=1,St=ut.length;yt<St;++yt){Xt=ut[yt];const ie=Math.abs(Xt-Ft);ie>Ut&&(bt=(Ft+Xt)/2,(0,f.wY)(k,L,z,K,bt,rt)&&(Dt=bt,Ut=ie)),Ft=Xt}return isNaN(Dt)&&(Dt=j[it]),lt?(lt.push(Dt,rt,Ut),lt):[Dt,rt,Ut]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,L,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new m.Z(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(L){return L<0||this.ends_.length<=L?null:new w(this.flatCoordinates.slice(0===L?0:this.ends_[L-1],this.ends_[L]),this.layout)}getLinearRings(){const L=this.layout,z=this.flatCoordinates,K=this.ends_,j=[];let it=0;for(let lt=0,yt=K.length;lt<yt;++lt){const St=K[lt],bt=new w(z.slice(it,St),L);j.push(bt),it=St}return j}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const L=this.flatCoordinates;!function ht(k,L,z,K,j){j=void 0!==j&&j;for(let it=0,lt=z.length;it<lt;++it){const yt=z[it],St=tt(k,L,yt,K);if(0===it){if(j&&St||!j&&!St)return!1}else if(j&&!St||!j&&St)return!1;L=yt}return!0}(L,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=L.slice(),this.orientedFlatCoordinates_.length=at(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=L,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(L){const z=[],K=[];return z.length=(0,a.Zh)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(L),z,0,K),new r(z,"XY",K)}getType(){return"Polygon"}intersectsExtent(L){return(0,U.ac)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,L)}setCoordinates(L,z){this.setLayout(z,L,2),this.flatCoordinates||(this.flatCoordinates=[]);const K=(0,l._5)(this.flatCoordinates,0,L,this.stride,this.ends_);this.flatCoordinates.length=0===K.length?0:K[K.length-1],this.changed()}}const E=r;function B(k){if((0,o.xb)(k))throw new Error("Cannot create polygon from empty extent");const L=k[0],z=k[1],K=k[2],j=k[3],it=[L,z,L,j,K,j,K,z,L,z];return new r(it,"XY",[it.length])}},1928:(Gt,mt,h)=>{"use strict";h.d(mt,{ZP:()=>g,Kr:()=>R});var Q=h(7221),W=h(9070),nt=h(9664),H=h(4654),S=h(2064),N=h(589),G=h(7714);const O=(0,nt.Ue)(),o=class u extends Q.Z{constructor(){super(),this.extent_=(0,H.lJ)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=(0,N.qe)(function(p,w,m){if(!m)return this.getSimplifiedGeometry(w);const I=this.clone();return I.applyTransform(m),I.getSimplifiedGeometry(w)})}simplifyTransformed(p,w){return this.simplifyTransformedInternal(this.getRevision(),p,w)}clone(){return(0,W.O3)()}closestPointXY(p,w,m,I){return(0,W.O3)()}containsXY(p,w){const m=this.getClosestPoint([p,w]);return m[0]===p&&m[1]===w}getClosestPoint(p,w){return this.closestPointXY(p[0],p[1],w=w||[NaN,NaN],1/0),w}intersectsCoordinate(p){return this.containsXY(p[0],p[1])}computeExtent(p){return(0,W.O3)()}getExtent(p){if(this.extentRevision_!=this.getRevision()){const w=this.computeExtent(this.extent_);(isNaN(w[0])||isNaN(w[1]))&&(0,H.YN)(w),this.extentRevision_=this.getRevision()}return(0,H.EO)(this.extent_,p)}rotate(p,w){(0,W.O3)()}scale(p,w,m){(0,W.O3)()}simplify(p){return this.getSimplifiedGeometry(p*p)}getSimplifiedGeometry(p){return(0,W.O3)()}getType(){return(0,W.O3)()}applyTransform(p){(0,W.O3)()}intersectsExtent(p){return(0,W.O3)()}translate(p,w){(0,W.O3)()}transform(p,w){const m=(0,S.U2)(p),I="tile-pixels"==m.getUnits()?function(f,F,ot){const U=m.getExtent(),q=m.getWorldExtent(),tt=(0,H.Cr)(q)/(0,H.Cr)(U);return(0,nt.qC)(O,q[0],q[3],tt,-tt,0,0,0),(0,G.vT)(f,0,f.length,ot,O,F),(0,S.Ck)(m,w)(f,F,ot)}:(0,S.Ck)(m,w);return this.applyTransform(I),this}};function n(y){let p;return"XY"==y?p=2:"XYZ"==y||"XYM"==y?p=3:"XYZM"==y&&(p=4),p}function R(y,p,w){const m=y.getFlatCoordinates();if(!m)return null;const I=y.getStride();return(0,G.vT)(m,0,m.length,I,p,w)}const g=class l extends o{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(p){return(0,H.GN)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,p)}getCoordinates(){return(0,W.O3)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(p){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),p<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&p<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const w=this.getSimplifiedGeometryInternal(p);return w.getFlatCoordinates().length<this.flatCoordinates.length?w:(this.simplifiedGeometryMaxMinSquaredTolerance=p,this)}getSimplifiedGeometryInternal(p){return this}getStride(){return this.stride}setFlatCoordinates(p,w){this.stride=n(p),this.layout=p,this.flatCoordinates=w}setCoordinates(p,w){(0,W.O3)()}setLayout(p,w,m){let I;if(p)I=n(p);else{for(let f=0;f<m;++f){if(0===w.length)return this.layout="XY",void(this.stride=2);w=w[0]}I=w.length,p=function a(y){let p;return 2==y?p="XY":3==y?p="XYZ":4==y&&(p="XYZM"),p}(I)}this.layout=p,this.stride=I}applyTransform(p){this.flatCoordinates&&(p(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(p,w){const m=this.getFlatCoordinates();if(m){const I=this.getStride();(0,G.U1)(m,0,m.length,I,p,w,m),this.changed()}}scale(p,w,m){void 0===w&&(w=p),m||(m=(0,H.qg)(this.getExtent()));const I=this.getFlatCoordinates();if(I){const f=this.getStride();(0,G.bA)(I,0,I.length,f,p,w,m,I),this.changed()}}translate(p,w){const m=this.getFlatCoordinates();if(m){const I=this.getStride();(0,G.Iu)(m,0,m.length,I,p,w,m),this.changed()}}}},4817:(Gt,mt,h)=>{"use strict";h.d(mt,{TG:()=>nt,uG:()=>W,wY:()=>H});var Q=h(4654);function W(N,G,O,u,o){return!(0,Q.H6)(o,function(a){return!nt(N,G,O,u,a[0],a[1])})}function nt(N,G,O,u,o,l){let a=0,n=N[O-u],R=N[O-u+1];for(;G<O;G+=u){const g=N[G],y=N[G+1];R<=l?y>l&&(g-n)*(l-R)-(o-n)*(y-R)>0&&a++:y<=l&&(g-n)*(l-R)-(o-n)*(y-R)<0&&a--,n=g,R=y}return 0!==a}function H(N,G,O,u,o,l){if(0===O.length||!nt(N,G,O[0],u,o,l))return!1;for(let a=1,n=O.length;a<n;++a)if(nt(N,O[a-1],O[a],u,o,l))return!1;return!0}},3449:(Gt,mt,h)=>{"use strict";function Q(S,N,G,O){for(let u=0,o=G.length;u<o;++u)S[N++]=G[u];return N}function W(S,N,G,O){for(let u=0,o=G.length;u<o;++u){const l=G[u];for(let a=0;a<O;++a)S[N++]=l[a]}return N}function nt(S,N,G,O,u){u=u||[];let o=0;for(let l=0,a=G.length;l<a;++l){const n=W(S,N,G[l],O);u[o++]=n,N=n}return u.length=o,u}h.d(mt,{IG:()=>Q,Sg:()=>W,_5:()=>nt})},2868:(Gt,mt,h)=>{"use strict";function Q(H,S,N,G,O){O=void 0!==O?O:[];let u=0;for(let o=S;o<N;o+=G)O[u++]=H.slice(o,o+G);return O.length=u,O}function W(H,S,N,G,O){O=void 0!==O?O:[];let u=0;for(let o=0,l=N.length;o<l;++o){const a=N[o];O[u++]=Q(H,S,a,G,O[u]),S=a}return O.length=u,O}function nt(H,S,N,G,O){O=void 0!==O?O:[];let u=0;for(let o=0,l=N.length;o<l;++o){const a=N[o];O[u++]=1===a.length&&a[0]===S?[]:W(H,S,a,G,O[u]),S=a[a.length-1]}return O.length=u,O}h.d(mt,{Ml:()=>Q,o1:()=>W,ug:()=>nt})},2574:(Gt,mt,h)=>{"use strict";h.d(mt,{mV:()=>N,ac:()=>G});var Q=h(4654),nt=h(4817);function H(u,o,l,a,n){const R=(0,Q.qP)((0,Q.lJ)(),u,o,l,a);return!!(0,Q.kK)(n,R)&&(!!((0,Q.r4)(n,R)||R[0]>=n[0]&&R[2]<=n[2]||R[1]>=n[1]&&R[3]<=n[3])||function W(u,o,l,a,n){let R;for(o+=a;o<l;o+=a)if(R=n(u.slice(o-a,o),u.slice(o,o+a)),R)return R;return!1}(u,o,l,a,function(g,y){return(0,Q.I7)(n,g,y)}))}function N(u,o,l,a,n){return!!(H(u,o,l,a,n)||(0,nt.TG)(u,o,l,a,n[0],n[1])||(0,nt.TG)(u,o,l,a,n[0],n[3])||(0,nt.TG)(u,o,l,a,n[2],n[1])||(0,nt.TG)(u,o,l,a,n[2],n[3]))}function G(u,o,l,a,n){if(!N(u,o,l[0],a,n))return!1;if(1===l.length)return!0;for(let R=1,g=l.length;R<g;++R)if((0,nt.uG)(u,l[R-1],l[R],a,n)&&!H(u,l[R-1],l[R],a,n))return!1;return!0}},4340:(Gt,mt,h)=>{"use strict";h.d(mt,{Zh:()=>u,dt:()=>nt,uZ:()=>G});var Q=h(3469);function nt(l,a,n,R,g,y,p){const w=(n-a)/R;if(w<3){for(;a<n;a+=R)y[p++]=l[a],y[p++]=l[a+1];return p}const m=new Array(w);m[0]=1,m[w-1]=1;const I=[a,n-R];let f=0;for(;I.length>0;){const F=I.pop(),ot=I.pop();let U=0;const q=l[ot],tt=l[ot+1],ht=l[F],xt=l[F+1];for(let at=ot+R;at<F;at+=R){const r=(0,Q.rU)(l[at],l[at+1],q,tt,ht,xt);r>U&&(f=at,U=r)}U>g&&(m[(f-a)/R]=1,ot+R<f&&I.push(ot,f),f+R<F&&I.push(f,F))}for(let F=0;F<w;++F)m[F]&&(y[p++]=l[a+F*R],y[p++]=l[a+F*R+1]);return p}function G(l,a){return a*Math.round(l/a)}function O(l,a,n,R,g,y,p){if(a==n)return p;let I,f,w=G(l[a],g),m=G(l[a+1],g);a+=R,y[p++]=w,y[p++]=m;do{if(I=G(l[a],g),f=G(l[a+1],g),(a+=R)==n)return y[p++]=I,y[p++]=f,p}while(I==w&&f==m);for(;a<n;){const F=G(l[a],g),ot=G(l[a+1],g);if(a+=R,F==I&&ot==f)continue;const U=I-w,q=f-m,tt=F-w,ht=ot-m;U*ht==q*tt&&(U<0&&tt<U||U==tt||U>0&&tt>U)&&(q<0&&ht<q||q==ht||q>0&&ht>q)?(I=F,f=ot):(y[p++]=I,y[p++]=f,w=I,m=f,I=F,f=ot)}return y[p++]=I,y[p++]=f,p}function u(l,a,n,R,g,y,p,w){for(let m=0,I=n.length;m<I;++m){const f=n[m];p=O(l,a,f,R,g,y,p),w.push(p),a=f}return p}},7714:(Gt,mt,h)=>{"use strict";function Q(S,N,G,O,u,o){o=o||[];let l=0;for(let a=N;a<G;a+=O){const n=S[a],R=S[a+1];o[l++]=u[0]*n+u[2]*R+u[4],o[l++]=u[1]*n+u[3]*R+u[5]}return o&&o.length!=l&&(o.length=l),o}function W(S,N,G,O,u,o,l){l=l||[];const a=Math.cos(u),n=Math.sin(u),R=o[0],g=o[1];let y=0;for(let p=N;p<G;p+=O){const w=S[p]-R,m=S[p+1]-g;l[y++]=R+w*a-m*n,l[y++]=g+w*n+m*a;for(let I=p+2;I<p+O;++I)l[y++]=S[I]}return l&&l.length!=y&&(l.length=y),l}function nt(S,N,G,O,u,o,l,a){a=a||[];const n=l[0],R=l[1];let g=0;for(let y=N;y<G;y+=O){const w=S[y+1]-R;a[g++]=n+u*(S[y]-n),a[g++]=R+o*w;for(let m=y+2;m<y+O;++m)a[g++]=S[m]}return a&&a.length!=g&&(a.length=g),a}function H(S,N,G,O,u,o,l){l=l||[];let a=0;for(let n=N;n<G;n+=O){l[a++]=S[n]+u,l[a++]=S[n+1]+o;for(let R=n+2;R<n+O;++R)l[a++]=S[R]}return l&&l.length!=a&&(l.length=a),l}h.d(mt,{Iu:()=>H,U1:()=>W,bA:()=>nt,vT:()=>Q})},8072:(Gt,mt,h)=>{"use strict";h.d(mt,{G$:()=>S,Id:()=>O,MP:()=>G,Tp:()=>u,V:()=>W,bM:()=>l,tK:()=>N});const Q=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",W=Q.includes("firefox"),S=(Q.includes("safari")&&!Q.includes("chrom")&&(Q.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Q)),Q.includes("webkit")&&!Q.includes("edge")),N=Q.includes("macintosh"),G=typeof devicePixelRatio<"u"?devicePixelRatio:1,O=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,u=typeof Image<"u"&&Image.prototype.decode,l=function(){let a=!1;try{const n=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("_",null,n),window.removeEventListener("_",null,n)}catch{}return a}()},392:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>G});var Q=h(7221),W=h(4974),nt=h(9070),H=h(2780),S=h(3469);const G=class N extends Q.Z{constructor(u){super(),this.background_=u.background;const o=Object.assign({},u);"object"==typeof u.properties&&(delete o.properties,Object.assign(o,u.properties)),o[W.Z.OPACITY]=void 0!==u.opacity?u.opacity:1,(0,H.h)("number"==typeof o[W.Z.OPACITY],"Layer opacity must be a number"),o[W.Z.VISIBLE]=void 0===u.visible||u.visible,o[W.Z.Z_INDEX]=u.zIndex,o[W.Z.MAX_RESOLUTION]=void 0!==u.maxResolution?u.maxResolution:1/0,o[W.Z.MIN_RESOLUTION]=void 0!==u.minResolution?u.minResolution:0,o[W.Z.MIN_ZOOM]=void 0!==u.minZoom?u.minZoom:-1/0,o[W.Z.MAX_ZOOM]=void 0!==u.maxZoom?u.maxZoom:1/0,this.className_=void 0!==o.className?o.className:"ol-layer",delete o.className,this.setProperties(o),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(u){const o=this.state_||{layer:this,managed:void 0===u||u},l=this.getZIndex();return o.opacity=(0,S.uZ)(Math.round(100*this.getOpacity())/100,0,1),o.visible=this.getVisible(),o.extent=this.getExtent(),o.zIndex=void 0!==l||o.managed?l:1/0,o.maxResolution=this.getMaxResolution(),o.minResolution=Math.max(this.getMinResolution(),0),o.minZoom=this.getMinZoom(),o.maxZoom=this.getMaxZoom(),this.state_=o,o}getLayersArray(u){return(0,nt.O3)()}getLayerStatesArray(u){return(0,nt.O3)()}getExtent(){return this.get(W.Z.EXTENT)}getMaxResolution(){return this.get(W.Z.MAX_RESOLUTION)}getMinResolution(){return this.get(W.Z.MIN_RESOLUTION)}getMinZoom(){return this.get(W.Z.MIN_ZOOM)}getMaxZoom(){return this.get(W.Z.MAX_ZOOM)}getOpacity(){return this.get(W.Z.OPACITY)}getSourceState(){return(0,nt.O3)()}getVisible(){return this.get(W.Z.VISIBLE)}getZIndex(){return this.get(W.Z.Z_INDEX)}setBackground(u){this.background_=u,this.changed()}setExtent(u){this.set(W.Z.EXTENT,u)}setMaxResolution(u){this.set(W.Z.MAX_RESOLUTION,u)}setMinResolution(u){this.set(W.Z.MIN_RESOLUTION,u)}setMaxZoom(u){this.set(W.Z.MAX_ZOOM,u)}setMinZoom(u){this.set(W.Z.MIN_ZOOM,u)}setOpacity(u){(0,H.h)("number"==typeof u,"Layer opacity must be a number"),this.set(W.Z.OPACITY,u)}setVisible(u){this.set(W.Z.VISIBLE,u)}setZIndex(u){this.set(W.Z.Z_INDEX,u)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}},7971:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>l,j:()=>o});var Q=h(392),W=h(8688),nt=h(4974),H=h(4074),S=h(1828),N=h(2780),G=h(4654),O=h(7796);function o(a,n){if(!a.visible)return!1;const R=n.resolution;if(R<a.minResolution||R>=a.maxResolution)return!1;const g=n.zoom;return g>a.minZoom&&g<=a.maxZoom}const l=class u extends Q.Z{constructor(n){const R=Object.assign({},n);delete R.source,super(R),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,n.render&&(this.render=n.render),n.map&&this.setMap(n.map),this.addChangeListener(nt.Z.SOURCE,this.handleSourcePropertyChange_),this.setSource(n.source?n.source:null)}getLayersArray(n){return(n=n||[]).push(this),n}getLayerStatesArray(n){return(n=n||[]).push(this.getLayerState()),n}getSource(){return this.get(nt.Z.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const n=this.getSource();return n?n.getState():"undefined"}handleSourceChange_(){this.changed(),!this.sourceReady_&&"ready"===this.getSource().getState()&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,O.bN)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const n=this.getSource();n&&(this.sourceChangeKey_=(0,O.oL)(n,W.Z.CHANGE,this.handleSourceChange_,this),"ready"===n.getState()&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(n){return this.renderer_?this.renderer_.getFeatures(n):Promise.resolve([])}getData(n){return this.renderer_&&this.rendered?this.renderer_.getData(n):null}isVisible(n){let R;const g=this.getMapInternal();let y;!n&&g&&(n=g.getView()),R=n instanceof S.ZP?{viewState:n.getState(),extent:n.calculateExtent()}:n,!R.layerStatesArray&&g&&(R.layerStatesArray=g.getLayerGroup().getLayerStatesArray()),y=R.layerStatesArray?R.layerStatesArray.find(w=>w.layer===this):this.getLayerState();const p=this.getExtent();return o(y,R.viewState)&&(!p||(0,G.kK)(p,R.extent))}getAttributions(n){if(!this.isVisible(n))return[];let R;const g=this.getSource();if(g&&(R=g.getAttributions()),!R)return[];let p=R(n instanceof S.ZP?n.getViewStateAndExtent():n);return Array.isArray(p)||(p=[p]),p}render(n,R){const g=this.getRenderer();return g.prepareFrame(n)?(this.rendered=!0,g.renderFrame(n,R)):null}unrender(){this.rendered=!1}setMapInternal(n){n||this.unrender(),this.set(nt.Z.MAP,n)}getMapInternal(){return this.get(nt.Z.MAP)}setMap(n){this.mapPrecomposeKey_&&((0,O.bN)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),n||this.changed(),this.mapRenderKey_&&((0,O.bN)(this.mapRenderKey_),this.mapRenderKey_=null),n&&(this.mapPrecomposeKey_=(0,O.oL)(n,H.Z.PRECOMPOSE,function(R){const y=R.frameState.layerStatesArray,p=this.getLayerState(!1);(0,N.h)(!y.some(function(w){return w.layer===p.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),y.push(p)},this),this.mapRenderKey_=(0,O.oL)(this,W.Z.CHANGE,n.render,n),this.changed())}setSource(n){this.set(nt.Z.SOURCE,n)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}},4974:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>Q});const Q={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},2620:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>m});var Q=h(7971);const H=class nt extends Q.Z{constructor(f){f=f||{};const F=Object.assign({},f);delete F.preload,delete F.useInterimTilesOnError,super(F),this.setPreload(void 0!==f.preload?f.preload:0),this.setUseInterimTilesOnError(void 0===f.useInterimTilesOnError||f.useInterimTilesOnError)}getPreload(){return this.get("preload")}setPreload(f){this.set("preload",f)}getUseInterimTilesOnError(){return this.get("useInterimTilesOnError")}setUseInterimTilesOnError(f){this.set("useInterimTilesOnError",f)}getData(f){return super.getData(f)}};var S=h(5717),N=h(4961),G=h(9788),O=h(1047),u=h(6614),o=h(9664),l=h(7555),a=h(4654),n=h(2064),R=h(9070),g=h(2518);const p=class y extends S.Z{constructor(f){super(f),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,a.lJ)(),this.tmpTileRange_=new O.Z(0,0,0,0)}isDrawableTile(f){const F=this.getLayer(),ot=f.getState(),U=F.getUseInterimTilesOnError();return ot==u.Z.LOADED||ot==u.Z.EMPTY||ot==u.Z.ERROR&&!U}getTile(f,F,ot,U){const q=U.pixelRatio,tt=U.viewState.projection,ht=this.getLayer();let at=ht.getSource().getTile(f,F,ot,q,tt);return at.getState()==u.Z.ERROR&&ht.getUseInterimTilesOnError()&&ht.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(at)||(at=at.getInterimTile()),at}getData(f){const F=this.frameState;if(!F)return null;const ot=this.getLayer(),U=(0,o.nn)(F.pixelToCoordinateTransform,f.slice()),q=ot.getExtent();if(q&&!(0,a.b8)(q,U))return null;const tt=F.pixelRatio,ht=F.viewState.projection,xt=F.viewState,at=ot.getRenderSource(),D=at.getTileGridForProjection(xt.projection),C=at.getTilePixelRatio(F.pixelRatio);for(let r=D.getZForResolution(xt.resolution);r>=D.getMinZoom();--r){const E=D.getTileCoordForCoordAndZ(U,r),A=at.getTile(r,E[1],E[2],tt,ht);if(!(A instanceof N.Z||A instanceof G.Z)||A instanceof G.Z&&A.getState()===u.Z.EMPTY)return null;if(A.getState()!==u.Z.LOADED)continue;const B=D.getOrigin(r),$=(0,g.Pq)(D.getTileSize(r)),et=D.getResolution(r),k=Math.floor(C*((U[0]-B[0])/et-E[1]*$[0])),L=Math.floor(C*((B[1]-U[1])/et-E[2]*$[1])),z=Math.round(C*at.getGutterForProjection(xt.projection));return this.getImageData(A.getImage(),k+z,L+z)}return null}loadedTileCallback(f,F,ot){return!!this.isDrawableTile(ot)&&super.loadedTileCallback(f,F,ot)}prepareFrame(f){return!!this.getLayer().getSource()}renderFrame(f,F){const ot=f.layerStatesArray[f.layerIndex],U=f.viewState,q=U.projection,tt=U.resolution,ht=U.center,xt=U.rotation,at=f.pixelRatio,D=this.getLayer(),C=D.getSource(),r=C.getRevision(),E=C.getTileGridForProjection(q),A=E.getZForResolution(tt,C.zDirection),B=E.getResolution(A);let $=f.extent;const et=f.viewState.resolution,k=C.getTilePixelRatio(at),L=Math.round((0,a.dz)($)/et*at),z=Math.round((0,a.Cr)($)/et*at),K=ot.extent&&(0,n.dY)(ot.extent,q);K&&($=(0,a.Ed)($,(0,n.dY)(ot.extent,q)));const j=B*L/2/k,it=B*z/2/k,lt=[ht[0]-j,ht[1]-it,ht[0]+j,ht[1]+it],yt=E.getTileRangeForExtentAndZ($,A),St={};St[A]={};const bt=this.createLoadedTileFinder(C,q,St),Ft=this.tmpExtent,Xt=this.tmpTileRange_;this.newTiles_=!1;const ae=xt?(0,a.dY)(U.center,et,xt,f.size):void 0;for(let c=yt.minX;c<=yt.maxX;++c)for(let X=yt.minY;X<=yt.maxY;++X){if(xt&&!E.tileCoordIntersectsViewport([A,c,X],ae))continue;const V=this.getTile(A,c,X,f);if(this.isDrawableTile(V)){const It=(0,R.sq)(this);if(V.getState()==u.Z.LOADED){St[A][V.tileCoord.toString()]=V;let Wt=V.inTransition(It);Wt&&1!==ot.opacity&&(V.endTransition(It),Wt=!1),!this.newTiles_&&(Wt||!this.renderedTiles.includes(V))&&(this.newTiles_=!0)}if(1===V.getAlpha(It,f.time))continue}const Et=E.getTileCoordChildTileRange(V.tileCoord,Xt,Ft);let Tt=!1;Et&&(Tt=bt(A+1,Et)),Tt||E.forEachTileCoordParentTileRange(V.tileCoord,bt,Xt,Ft)}const P=B/tt*at/k;(0,o.qC)(this.pixelTransform,f.size[0]/2,f.size[1]/2,1/at,1/at,xt,-L/2,-z/2);const rt=(0,o.BB)(this.pixelTransform);this.useContainer(F,rt,this.getBackground(f));const ut=this.context,Dt=ut.canvas;(0,o.nb)(this.inversePixelTransform,this.pixelTransform),(0,o.qC)(this.tempTransform,L/2,z/2,P,P,0,-L/2,-z/2),Dt.width!=L||Dt.height!=z?(Dt.width=L,Dt.height=z):this.containerReused||ut.clearRect(0,0,L,z),K&&this.clipUnrotated(ut,f,K),C.getInterpolate()||(ut.imageSmoothingEnabled=!1),this.preRender(ut,f),this.renderedTiles.length=0;let ie,le,vt,Ut=Object.keys(St).map(Number);Ut.sort(l.j2),1!==ot.opacity||this.containerReused&&!C.getOpaque(f.viewState.projection)?(ie=[],le=[]):Ut=Ut.reverse();for(let c=Ut.length-1;c>=0;--c){const X=Ut[c],V=C.getTilePixelSize(X,at,q),Tt=E.getResolution(X)/B,It=V[0]*Tt*P,Wt=V[1]*Tt*P,Vt=E.getTileCoordForCoordAndZ((0,a.rL)(lt),X),Ht=E.getTileCoordExtent(Vt),te=(0,o.nn)(this.tempTransform,[k*(Ht[0]-lt[0])/B,k*(lt[3]-Ht[3])/B]),xe=k*C.getGutterForProjection(q),be=St[X];for(const Ke in be){const Fe=be[Ke],we=Fe.tileCoord,Xe=Vt[1]-we[1],ct=Math.round(te[0]-(Xe-1)*It),gt=Vt[2]-we[2],Ct=Math.round(te[1]-(gt-1)*Wt),Mt=Math.round(te[0]-Xe*It),Zt=Math.round(te[1]-gt*Wt),qt=ct-Mt,ee=Ct-Zt,de=A===X,re=de&&1!==Fe.getAlpha((0,R.sq)(this),f.time);let me=!1;if(!re)if(ie){vt=[Mt,Zt,Mt+qt,Zt,Mt+qt,Zt+ee,Mt,Zt+ee];for(let Ce=0,Me=ie.length;Ce<Me;++Ce)if(A!==X&&X<le[Ce]){const Ee=ie[Ce];(0,a.kK)([Mt,Zt,Mt+qt,Zt+ee],[Ee[0],Ee[3],Ee[4],Ee[7]])&&(me||(ut.save(),me=!0),ut.beginPath(),ut.moveTo(vt[0],vt[1]),ut.lineTo(vt[2],vt[3]),ut.lineTo(vt[4],vt[5]),ut.lineTo(vt[6],vt[7]),ut.moveTo(Ee[6],Ee[7]),ut.lineTo(Ee[4],Ee[5]),ut.lineTo(Ee[2],Ee[3]),ut.lineTo(Ee[0],Ee[1]),ut.clip())}ie.push(vt),le.push(X)}else ut.clearRect(Mt,Zt,qt,ee);this.drawTileImage(Fe,f,Mt,Zt,qt,ee,xe,de),ie&&!re?(me&&ut.restore(),this.renderedTiles.unshift(Fe)):this.renderedTiles.push(Fe),this.updateUsedTiles(f.usedTiles,C,Fe)}}return this.renderedRevision=r,this.renderedResolution=B,this.extentChanged=!this.renderedExtent_||!(0,a.fS)(this.renderedExtent_,lt),this.renderedExtent_=lt,this.renderedPixelRatio=at,this.renderedProjection=q,this.manageTilePyramid(f,C,E,at,q,$,A,D.getPreload()),this.scheduleExpireCache(f,C),this.postRender(ut,f),ot.extent&&ut.restore(),ut.imageSmoothingEnabled=!0,rt!==Dt.style.transform&&(Dt.style.transform=rt),this.container}drawTileImage(f,F,ot,U,q,tt,ht,xt){const at=this.getTileImage(f);if(!at)return;const D=(0,R.sq)(this),C=F.layerStatesArray[F.layerIndex],r=C.opacity*(xt?f.getAlpha(D,F.time):1),E=r!==this.context.globalAlpha;E&&(this.context.save(),this.context.globalAlpha=r),this.context.drawImage(at,ht,ht,at.width-2*ht,at.height-2*ht,ot,U,q,tt),E&&this.context.restore(),r!==C.opacity?F.animate=!0:xt&&f.endTransition(D)}getImage(){const f=this.context;return f?f.canvas:null}getTileImage(f){return f.getImage()}scheduleExpireCache(f,F){if(F.canExpireCache()){const ot=function(U,q,tt){const ht=(0,R.sq)(U);ht in tt.usedTiles&&U.expireCache(tt.viewState.projection,tt.usedTiles[ht])}.bind(null,F);f.postRenderFunctions.push(ot)}}updateUsedTiles(f,F,ot){const U=(0,R.sq)(F);U in f||(f[U]={}),f[U][ot.getKey()]=!0}manageTilePyramid(f,F,ot,U,q,tt,ht,xt,at){const D=(0,R.sq)(F);D in f.wantedTiles||(f.wantedTiles[D]={});const C=f.wantedTiles[D],r=f.tileQueue,E=ot.getMinZoom(),A=f.viewState.rotation,B=A?(0,a.dY)(f.viewState.center,f.viewState.resolution,A,f.size):void 0;let et,k,L,z,K,j,$=0;for(j=E;j<=ht;++j)for(k=ot.getTileRangeForExtentAndZ(tt,j,k),L=ot.getResolution(j),z=k.minX;z<=k.maxX;++z)for(K=k.minY;K<=k.maxY;++K)A&&!ot.tileCoordIntersectsViewport([j,z,K],B)||(ht-j<=xt?(++$,et=F.getTile(j,z,K,U,q),et.getState()==u.Z.IDLE&&(C[et.getKey()]=!0,r.isKeyQueued(et.getKey())||r.enqueue([et,D,ot.getTileCoordCenter(et.tileCoord),L])),void 0!==at&&at(et)):F.useTile(j,z,K,q));F.updateCacheSize($,q)}},m=class w extends H{constructor(f){super(f)}createRenderer(){return new p(this)}}},8182:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>Wn});var Q=h(7971),W=h(1414),nt=h(6093),H=h(9443),S=h(1059),N=h(3822),G=h(5729),O=h(8648),u=h(2518);class l{constructor(t){this.font_=(t=t||{}).font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=(0,u.Pq)(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new S.Z({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding}clone(){const t=this.getScale();return new l({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,u.Pq)(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const a=l;var n=h(7555);let R=0;const y=1<<R++,p=1<<R++,w=1<<R++,m=1<<R++,I=1<<R++,f=Math.pow(2,5)-1,F={[y]:"boolean",[p]:"number",[w]:"string",[m]:"color",[I]:"number[]"},ot=Object.keys(F).map(Number).sort(n.j2);function U(x){const t=[];for(const i of ot)q(x,i)&&t.push(F[i]);return 0===t.length?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function q(x,t){return(x&t)===t}function tt(x,t){return!!(x&t)}class xt{constructor(t,i){this.type=t,this.value=i}}class at{constructor(t,i,...s){this.type=t,this.operator=i,this.args=s}}function D(){return{variables:new Set,properties:new Set}}function C(x,t){switch(typeof x){case"boolean":return new xt(y,x);case"number":return new xt(p,x);case"string":return new xt(w,x)}if(!Array.isArray(x))throw new Error("Expression must be an array or a primitive value");if(0===x.length)throw new Error("Empty expression");if("string"==typeof x[0])return function L(x,t){const i=x[0],s=E[i];if(!s)throw new Error(`Unknown operator: ${i}`);return s(x,t)}(x,t);for(const s of x)if("number"!=typeof s)throw new Error("Expected an array of numbers");let i=I;return(3===x.length||4===x.length)&&(i|=m),new xt(i,x)}const r={Number:"number",String:"string",Get:"get",Var:"var",Any:"any",All:"all",Not:"!",Resolution:"resolution",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match"},E={[r.Number]:k(et(1,1/0,f),p),[r.String]:k(et(1,1/0,f),w),[r.Get]:k(function A(x,t){if(2!==x.length)throw new Error("Expected 1 argument for get operation");const i=C(x[1],t);if(!(i instanceof xt))throw new Error("Expected a literal argument for get operation");if("string"!=typeof i.value)throw new Error("Expected a string argument for get operation");return t.properties.add(i.value),[i]},f),[r.Var]:k(function B(x,t){if(2!==x.length)throw new Error("Expected 1 argument for var operation");const i=C(x[1],t);if(!(i instanceof xt))throw new Error("Expected a literal argument for var operation");if("string"!=typeof i.value)throw new Error("Expected a string argument for get operation");return t.variables.add(i.value),[i]},f),[r.Resolution]:k(function $(x,t){if(1!==x.length)throw new Error(`Expected no arguments for ${x[0]} operation`);return[]},p),[r.Any]:k(et(2,1/0,y),y),[r.All]:k(et(2,1/0,y),y),[r.Not]:k(et(1,1,y),y),[r.Equal]:k(et(2,2,f),y),[r.NotEqual]:k(et(2,2,f),y),[r.GreaterThan]:k(et(2,2,f),y),[r.GreaterThanOrEqualTo]:k(et(2,2,f),y),[r.LessThan]:k(et(2,2,f),y),[r.LessThanOrEqualTo]:k(et(2,2,f),y),[r.Multiply]:k(et(2,1/0,p),p),[r.Divide]:k(et(2,2,p),p),[r.Add]:k(et(2,1/0,p),p),[r.Subtract]:k(et(2,2,p),p),[r.Clamp]:k(et(3,3,p),p),[r.Mod]:k(et(2,2,p),p),[r.Pow]:k(et(2,2,p),p),[r.Abs]:k(et(1,1,p),p),[r.Floor]:k(et(1,1,p),p),[r.Ceil]:k(et(1,1,p),p),[r.Round]:k(et(1,1,p),p),[r.Sin]:k(et(1,1,p),p),[r.Cos]:k(et(1,1,p),p),[r.Atan]:k(et(1,2,p),p),[r.Sqrt]:k(et(1,1,p),p),[r.Match]:k(et(4,1/0,w|p),f)};function et(x,t,i){return function(s,_){const d=s[0],T=s.length-1;if(x===t){if(T!==x)throw new Error(`Expected ${x} argument${1===x?"":"s"} for operation ${d}, got ${T}`)}else if(T<x||T>t)throw new Error(`Expected ${x} to ${t} arguments for operation ${d}, got ${T}`);const M=new Array(T);for(let b=0;b<T;++b){const J=C(s[b+1],_);if(!tt(i,J.type)){const st=U(i),_t=U(J.type);throw new Error(`Unexpected type for argument ${b} of ${d} operation : got ${st} but expected ${_t}`)}M[b]=J}return M}}function k(x,t){return function(i,s){const _=i[0],d=x(i,s);return new at(t,_,...d)}}function K(x,t,i){const s=C(x,i);if(!tt(t,s.type)){const _=U(t),d=U(s.type);throw new Error(`Expected expression to be of type ${_}, got ${d}`)}return j(s,i)}function j(x,t){if(x instanceof xt)return function(){return x.value};const i=x.operator;switch(i){case r.Number:case r.String:return function it(x,t){const i=x.operator,s=x.args.length,_=new Array(s);for(let d=0;d<s;++d)_[d]=j(x.args[d],t);switch(i){case r.Number:case r.String:return d=>{for(let T=0;T<s;++T){const M=_[T](d);if(typeof M===i)return M}throw new Error(`Expected one of the values to be a ${i}`)};default:throw new Error(`Unsupported assertion operator ${i}`)}}(x,t);case r.Get:case r.Var:return function lt(x,t){const i=x.args[0];if(!(i instanceof xt))throw new Error("Expected literal name");const s=i.value;if("string"!=typeof s)throw new Error("Expected string name");switch(x.operator){case r.Get:return _=>_.properties[s];case r.Var:return _=>_.variables[s];default:throw new Error(`Unsupported accessor operator ${x.operator}`)}}(x);case r.Resolution:return s=>s.resolution;case r.Any:case r.All:case r.Not:return function St(x,t){const i=x.operator,s=x.args.length,_=new Array(s);for(let d=0;d<s;++d)_[d]=j(x.args[d],t);switch(i){case r.Any:return d=>{for(let T=0;T<s;++T)if(_[T](d))return!0;return!1};case r.All:return d=>{for(let T=0;T<s;++T)if(!_[T](d))return!1;return!0};case r.Not:return d=>!_[0](d);default:throw new Error(`Unsupported logical operator ${i}`)}}(x,t);case r.Equal:case r.NotEqual:case r.LessThan:case r.LessThanOrEqualTo:case r.GreaterThan:case r.GreaterThanOrEqualTo:return function yt(x,t){const i=x.operator,s=j(x.args[0],t),_=j(x.args[1],t);switch(i){case r.Equal:return d=>s(d)===_(d);case r.NotEqual:return d=>s(d)!==_(d);case r.LessThan:return d=>s(d)<_(d);case r.LessThanOrEqualTo:return d=>s(d)<=_(d);case r.GreaterThan:return d=>s(d)>_(d);case r.GreaterThanOrEqualTo:return d=>s(d)>=_(d);default:throw new Error(`Unsupported comparison operator ${i}`)}}(x,t);case r.Multiply:case r.Divide:case r.Add:case r.Subtract:case r.Clamp:case r.Mod:case r.Pow:case r.Abs:case r.Floor:case r.Ceil:case r.Round:case r.Sin:case r.Cos:case r.Atan:case r.Sqrt:return function bt(x,t){const i=x.operator,s=x.args.length,_=new Array(s);for(let d=0;d<s;++d)_[d]=j(x.args[d],t);switch(i){case r.Multiply:return d=>{let T=1;for(let M=0;M<s;++M)T*=_[M](d);return T};case r.Divide:return d=>_[0](d)/_[1](d);case r.Add:return d=>{let T=0;for(let M=0;M<s;++M)T+=_[M](d);return T};case r.Subtract:return d=>_[0](d)-_[1](d);case r.Clamp:return d=>{const T=_[0](d),M=_[1](d);if(T<M)return M;const b=_[2](d);return T>b?b:T};case r.Mod:return d=>_[0](d)%_[1](d);case r.Pow:return d=>Math.pow(_[0](d),_[1](d));case r.Abs:return d=>Math.abs(_[0](d));case r.Floor:return d=>Math.floor(_[0](d));case r.Ceil:return d=>Math.ceil(_[0](d));case r.Round:return d=>Math.round(_[0](d));case r.Sin:return d=>Math.sin(_[0](d));case r.Cos:return d=>Math.cos(_[0](d));case r.Atan:return 2===s?d=>Math.atan2(_[0](d),_[1](d)):d=>Math.atan(_[0](d));case r.Sqrt:return d=>Math.sqrt(_[0](d));default:throw new Error(`Unsupported numeric operator ${i}`)}}(x,t);case r.Match:return function Ft(x,t){const i=x.args.length,s=new Array(i);for(let _=0;_<i;++_)s[_]=j(x.args[_],t);return _=>{const d=s[0](_);for(let T=1;T<i;T+=2)if(d===s[T](_))return s[T+1](_);return s[i-1](_)}}(x,t);default:throw new Error(`Unsupported operator ${i}`)}}function Xt(x){return!0}function P(x){const t=D(),i=x.length,s=new Array(i);for(let T=0;T<i;++T)s[T]=ut(x[T],t);const _={variables:{},properties:{},resolution:NaN},d=new Array(i);return function(T,M){_.properties=T.getPropertiesInternal(),_.resolution=M;for(let b=0;b<i;++b)d[b]=s[b](_);return d}}function ut(x,t){const i=Dt(x,"",t),s=Ut(x,"",t),_=function ie(x,t){const i="text-",s=Et(x,i+"value",t);if(!s)return null;const _=Dt(x,i,t),d=Dt(x,i+"background-",t),T=Ut(x,i,t),M=Ut(x,i+"background-",t),b=Et(x,i+"font",t),J=V(x,i+"max-angle",t),st=V(x,i+"offset-x",t),_t=V(x,i+"offset-y",t),ft=Tt(x,i+"overflow",t),Rt=Et(x,i+"placement",t),Lt=V(x,i+"repeat",t),Ot=Ht(x,i+"scale",t),wt=Tt(x,i+"rotate-with-view",t),Pt=V(x,i+"rotation",t),jt=Et(x,i+"align",t),Kt=Et(x,i+"justify",t),Jt=Et(x,i+"baseline",t),Qt=Wt(x,i+"padding",t),zt=new a({});return function($t){if(zt.setText(s($t)),_&&zt.setFill(_($t)),d&&zt.setBackgroundFill(d($t)),T&&zt.setStroke(T($t)),M&&zt.setBackgroundStroke(M($t)),b&&zt.setFont(b($t)),J&&zt.setMaxAngle(J($t)),st&&zt.setOffsetX(st($t)),_t&&zt.setOffsetY(_t($t)),ft&&zt.setOverflow(ft($t)),Rt){const Yt=Rt($t);if("point"!==Yt&&"line"!==Yt)throw new Error("Expected point or line for text-placement");zt.setPlacement(Yt)}if(Lt&&zt.setRepeat(Lt($t)),Ot&&zt.setScale(Ot($t)),wt&&zt.setRotateWithView(wt($t)),Pt&&zt.setRotation(Pt($t)),jt){const Yt=jt($t);if("left"!==Yt&&"center"!==Yt&&"right"!==Yt&&"end"!==Yt&&"start"!==Yt)throw new Error("Expected left, right, center, start, or end for text-align");zt.setTextAlign(Yt)}if(Kt){const Yt=Kt($t);if("left"!==Yt&&"right"!==Yt&&"center"!==Yt)throw new Error("Expected left, right, or center for text-justify");zt.setJustify(Yt)}if(Jt){const Yt=Jt($t);if("bottom"!==Yt&&"top"!==Yt&&"middle"!==Yt&&"alphabetic"!==Yt&&"hanging"!==Yt)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");zt.setTextBaseline(Yt)}return Qt&&zt.setPadding(Qt($t)),zt}}(x,t),d=function le(x,t){return"icon-src"in x?function vt(x,t){const i="icon-",s=i+"src",_=Ct(x[s],s),d=Vt(x,i+"anchor",t),T=Ht(x,i+"scale",t),M=V(x,i+"opacity",t),b=Vt(x,i+"displacement",t),J=V(x,i+"rotation",t),st=Tt(x,i+"rotate-with-view",t),_t=Ke(x,i+"anchor-origin"),ft=Fe(x,i+"anchor-x-units"),Rt=Fe(x,i+"anchor-y-units"),Lt=function ct(x,t){const i=x[t];if(void 0!==i)return Zt(i,t)}(x,i+"color"),Ot=function be(x,t){const i=x[t];if(void 0!==i){if("string"!=typeof i)throw new Error(`Expected a string for ${t}`);return i}}(x,i+"cross-origin"),wt=function we(x,t){const i=x[t];if(void 0!==i)return gt(i,t)}(x,i+"offset"),Pt=Ke(x,i+"offset-origin"),jt=te(x,i+"width"),Kt=te(x,i+"height"),Jt=function xe(x,t){const i=x[t];if(void 0!==i){if("number"==typeof i)return(0,u.Pq)(i);if(!Array.isArray(i))throw new Error(`Expected a number or size array for ${t}`);if(2!==i.length||"number"!=typeof i[0]||"number"!=typeof i[1])throw new Error(`Expected a number or size array for ${t}`);return i}}(x,i+"size"),Qt=Xe(x,i+"declutter"),zt=new N.Z({src:_,anchorOrigin:_t,anchorXUnits:ft,anchorYUnits:Rt,color:Lt,crossOrigin:Ot,offset:wt,offsetOrigin:Pt,height:Kt,width:jt,size:Jt,declutterMode:Qt});return function($t){return M&&zt.setOpacity(M($t)),b&&zt.setDisplacement(b($t)),J&&zt.setRotation(J($t)),st&&zt.setRotateWithView(st($t)),T&&zt.setScale(T($t)),d&&zt.setAnchor(d($t)),zt}}(x,t):"shape-points"in x?function c(x,t){const i="shape-",s=i+"points",_=Mt(x[s],s),d=Dt(x,i,t),T=Ut(x,i,t),M=Ht(x,i+"scale",t),b=Vt(x,i+"displacement",t),J=V(x,i+"rotation",t),st=Tt(x,i+"rotate-with-view",t),_t=te(x,i+"radius"),ft=te(x,i+"radius1"),Rt=te(x,i+"radius2"),Lt=te(x,i+"angle"),Ot=Xe(x,i+"declutter-mode"),wt=new G.Z({points:_,radius:_t,radius1:ft,radius2:Rt,angle:Lt,declutterMode:Ot});return function(Pt){return d&&wt.setFill(d(Pt)),T&&wt.setStroke(T(Pt)),b&&wt.setDisplacement(b(Pt)),J&&wt.setRotation(J(Pt)),st&&wt.setRotateWithView(st(Pt)),M&&wt.setScale(M(Pt)),wt}}(x,t):"circle-radius"in x?function X(x,t){const i="circle-",s=Dt(x,i,t),_=Ut(x,i,t),d=V(x,i+"radius",t),T=Ht(x,i+"scale",t),M=Vt(x,i+"displacement",t),b=V(x,i+"rotation",t),J=Tt(x,i+"rotate-with-view",t),st=Xe(x,i+"declutter-mode"),_t=new H.Z({radius:5,declutterMode:st});return function(ft){return d&&_t.setRadius(d(ft)),s&&_t.setFill(s(ft)),_&&_t.setStroke(_(ft)),M&&_t.setDisplacement(M(ft)),b&&_t.setRotation(b(ft)),J&&_t.setRotateWithView(J(ft)),T&&_t.setScale(T(ft)),_t}}(x,t):null}(x,t),T=V(x,"z-index",t),M=new nt.ZP;return function(b){let J=!0;if(i){const st=i(b);st&&(J=!1),M.setFill(st)}if(s){const st=s(b);st&&(J=!1),M.setStroke(st)}if(_){const st=_(b);st&&(J=!1),M.setText(st)}if(d){const st=d(b);st&&(J=!1),M.setImage(st)}return T&&M.setZIndex(T(b)),J?null:M}}function Dt(x,t,i){const s=It(x,t+"fill-color",i);if(!s)return null;const _=new S.Z;return function(d){const T=s(d);return"none"===T?null:(_.setColor(T),_)}}function Ut(x,t,i){const s=V(x,t+"stroke-width",i),_=It(x,t+"stroke-color",i);if(!s&&!_)return null;const d=Et(x,t+"stroke-line-cap",i),T=Et(x,t+"stroke-line-join",i),M=Wt(x,t+"stroke-line-dash",i),b=V(x,t+"stroke-line-dash-offset",i),J=V(x,t+"stroke-miter-limit",i),st=new O.Z;return function(_t){if(_){const ft=_(_t);if("none"===ft)return null;st.setColor(ft)}if(s&&st.setWidth(s(_t)),d){const ft=d(_t);if("butt"!==ft&&"round"!==ft&&"square"!==ft)throw new Error("Expected butt, round, or square line cap");st.setLineCap(ft)}if(T){const ft=T(_t);if("bevel"!==ft&&"round"!==ft&&"miter"!==ft)throw new Error("Expected bevel, round, or miter line join");st.setLineJoin(ft)}return M&&st.setLineDash(M(_t)),b&&st.setLineDashOffset(b(_t)),J&&st.setMiterLimit(J(_t)),st}}function V(x,t,i){if(!(t in x))return;const s=K(x[t],p,i);return function(_){return Mt(s(_),t)}}function Et(x,t,i){if(!(t in x))return null;const s=K(x[t],w,i);return function(_){return Ct(s(_),t)}}function Tt(x,t,i){if(!(t in x))return null;const s=K(x[t],y,i);return function(_){const d=s(_);if("boolean"!=typeof d)throw new Error(`Expected a boolean for ${t}`);return d}}function It(x,t,i){if(!(t in x))return null;const s=K(x[t],m|w,i);return function(_){return Zt(s(_),t)}}function Wt(x,t,i){if(!(t in x))return null;const s=K(x[t],I,i);return function(_){return gt(s(_),t)}}function Vt(x,t,i){if(!(t in x))return null;const s=K(x[t],I,i);return function(_){const d=gt(s(_),t);if(2!==d.length)throw new Error(`Expected two numbers for ${t}`);return d}}function Ht(x,t,i){if(!(t in x))return null;const s=K(x[t],I|p,i);return function(_){return function qt(x,t){if("number"==typeof x)return x;const i=gt(x,t);if(2!==i.length)throw new Error(`Expected an array of two numbers for ${t}`);return i}(s(_),t)}}function te(x,t){const i=x[t];if(void 0!==i){if("number"!=typeof i)throw new Error(`Expected a number for ${t}`);return i}}function Ke(x,t){const i=x[t];if(void 0!==i){if("bottom-left"!==i&&"bottom-right"!==i&&"top-left"!==i&&"top-right"!==i)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return i}}function Fe(x,t){const i=x[t];if(void 0!==i){if("pixels"!==i&&"fraction"!==i)throw new Error(`Expected pixels or fraction for ${t}`);return i}}function Xe(x,t){const i=x[t];if(void 0!==i){if("string"!=typeof i)throw new Error(`Expected a string for ${t}`);if("declutter"!==i&&"obstacle"!==i&&"none"!==i)throw new Error(`Expected declutter, obstacle, or none for ${t}`);return i}}function gt(x,t){if(!Array.isArray(x))throw new Error(`Expected an array for ${t}`);const i=x.length;for(let s=0;s<i;++s)if("number"!=typeof x[s])throw new Error(`Expected an array of numbers for ${t}`);return x}function Ct(x,t){if("string"!=typeof x)throw new Error(`Expected a string for ${t}`);return x}function Mt(x,t){if("number"!=typeof x)throw new Error(`Expected a number for ${t}`);return x}function Zt(x,t){if("string"==typeof x)return x;const i=gt(x,t),s=i.length;if(s<3||s>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return i}const me=class de extends Q.Z{constructor(t){t=t||{};const i=Object.assign({},t);delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,super(i),this.declutter_=void 0!==t.declutter&&t.declutter,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new W(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set("renderOrder",t)}setStyle(t){this.style_=function re(x){if(void 0===x)return nt.yF;if(!x)return null;if("function"==typeof x||x instanceof nt.ZP)return x;if(!Array.isArray(x))return P([x]);if(0===x.length)return[];const t=x.length,i=x[0];if(i instanceof nt.ZP){const _=new Array(t);for(let d=0;d<t;++d){const T=x[d];if(!(T instanceof nt.ZP))throw new Error("Expected a list of style instances");_[d]=T}return _}if("style"in i){const _=new Array(t);for(let d=0;d<t;++d){const T=x[d];if(!("style"in T))throw new Error("Expected a list of rules with a style property");_[d]=T}return function ae(x){const i=function rt(x,t){const i=x.length,s=new Array(i);for(let _=0;_<i;++_){const d=x[_],T="filter"in d?K(d.filter,y,t):Xt;let M;if(Array.isArray(d.style)){const b=d.style.length;M=new Array(b);for(let J=0;J<b;++J)M[J]=ut(d.style[J],t)}else M=[ut(d.style,t)];s[_]={filter:T,styles:M}}return function(_){const d=[];let T=!1;for(let M=0;M<i;++M)if((0,s[M].filter)(_)&&(!x[M].else||!T)){T=!0;for(const J of s[M].styles){const st=J(_);st&&d.push(st)}}return d}}(x,D()),s={variables:{},properties:{},resolution:NaN};return function(_,d){return s.properties=_.getPropertiesInternal(),s.resolution=d,i(s)}}(_)}return P(x)}(t),this.styleFunction_=null===t?void 0:(0,nt.J$)(this.style_),this.changed()}},Ce={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Me=[Ce.FILL],Ee=[Ce.STROKE],Je=[Ce.BEGIN_PATH],fi=[Ce.CLOSE_PATH],ne=Ce;var Zi=h(5552);const Ii=class Ni{drawCustom(t,i,s,_){}drawGeometry(t){}setStyle(t){}drawCircle(t,i){}drawFeature(t,i){}drawGeometryCollection(t,i){}drawLineString(t,i){}drawMultiLineString(t,i){}drawMultiPoint(t,i){}drawMultiPolygon(t,i){}drawPoint(t,i){}drawPolygon(t,i){}drawText(t,i){}setFillStrokeStyle(t,i){}setImageStyle(t,i){}setTextStyle(t,i){}};var Be=h(9886),ce=h(4654),kt=h(748),je=h(2868);const si=class Wi extends Ii{constructor(t,i,s,_){super(),this.tolerance=t,this.maxExtent=i,this.pixelRatio=_,this.maxLineWidth=0,this.resolution=s,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const i=this.pixelRatio;return 1==i?t:t.map(function(s){return s*i})}appendFlatPointCoordinates(t,i){const s=this.getBufferedMaxExtent(),_=this.tmpCoordinate_,d=this.coordinates;let T=d.length;for(let M=0,b=t.length;M<b;M+=i)_[0]=t[M],_[1]=t[M+1],(0,ce.b8)(s,_)&&(d[T++]=_[0],d[T++]=_[1]);return T}appendFlatLineCoordinates(t,i,s,_,d,T){const M=this.coordinates;let b=M.length;const J=this.getBufferedMaxExtent();T&&(i+=_);let st=t[i],_t=t[i+1];const ft=this.tmpCoordinate_;let Lt,Ot,wt,Rt=!0;for(Lt=i+_;Lt<s;Lt+=_)ft[0]=t[Lt],ft[1]=t[Lt+1],wt=(0,ce.pX)(J,ft),wt!==Ot?(Rt&&(M[b++]=st,M[b++]=_t,Rt=!1),M[b++]=ft[0],M[b++]=ft[1]):wt===Zi.Z.INTERSECTING?(M[b++]=ft[0],M[b++]=ft[1],Rt=!1):Rt=!0,st=ft[0],_t=ft[1],Ot=wt;return(d&&Rt||Lt===i+_)&&(M[b++]=st,M[b++]=_t),b}drawCustomCoordinates_(t,i,s,_,d){for(let T=0,M=s.length;T<M;++T){const b=s[T],J=this.appendFlatLineCoordinates(t,i,b,_,!1,!1);d.push(J),i=b}return i}drawCustom(t,i,s,_){this.beginGeometry(t,i);const d=t.getType(),T=t.getStride(),M=this.coordinates.length;let b,J,st,_t,ft;switch(d){case"MultiPolygon":b=t.getOrientedFlatCoordinates(),_t=[];const Rt=t.getEndss();ft=0;for(let Lt=0,Ot=Rt.length;Lt<Ot;++Lt){const wt=[];ft=this.drawCustomCoordinates_(b,ft,Rt[Lt],T,wt),_t.push(wt)}this.instructions.push([ne.CUSTOM,M,_t,t,s,je.ug]),this.hitDetectionInstructions.push([ne.CUSTOM,M,_t,t,_||s,je.ug]);break;case"Polygon":case"MultiLineString":st=[],b="Polygon"==d?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),ft=this.drawCustomCoordinates_(b,0,t.getEnds(),T,st),this.instructions.push([ne.CUSTOM,M,st,t,s,je.o1]),this.hitDetectionInstructions.push([ne.CUSTOM,M,st,t,_||s,je.o1]);break;case"LineString":case"Circle":b=t.getFlatCoordinates(),J=this.appendFlatLineCoordinates(b,0,b.length,T,!1,!1),this.instructions.push([ne.CUSTOM,M,J,t,s,je.Ml]),this.hitDetectionInstructions.push([ne.CUSTOM,M,J,t,_||s,je.Ml]);break;case"MultiPoint":b=t.getFlatCoordinates(),J=this.appendFlatPointCoordinates(b,T),J>M&&(this.instructions.push([ne.CUSTOM,M,J,t,s,je.Ml]),this.hitDetectionInstructions.push([ne.CUSTOM,M,J,t,_||s,je.Ml]));break;case"Point":b=t.getFlatCoordinates(),this.coordinates.push(b[0],b[1]),J=this.coordinates.length,this.instructions.push([ne.CUSTOM,M,J,t,s]),this.hitDetectionInstructions.push([ne.CUSTOM,M,J,t,_||s])}this.endGeometry(i)}beginGeometry(t,i){this.beginGeometryInstruction1_=[ne.BEGIN_GEOMETRY,i,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ne.BEGIN_GEOMETRY,i,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let i;t.reverse();const s=t.length;let _,d,T=-1;for(i=0;i<s;++i)_=t[i],d=_[0],d==ne.END_GEOMETRY?T=i:d==ne.BEGIN_GEOMETRY&&(_[2]=i,(0,n.FZ)(this.hitDetectionInstructions,T,i),T=-1)}setFillStrokeStyle(t,i){const s=this.state;if(t){const _=t.getColor();s.fillStyle=(0,Be.y)(_||kt.bL)}else s.fillStyle=void 0;if(i){const _=i.getColor();s.strokeStyle=(0,Be.y)(_||kt.Tx);const d=i.getLineCap();s.lineCap=void 0!==d?d:kt.mb;const T=i.getLineDash();s.lineDash=T?T.slice():kt.X9;const M=i.getLineDashOffset();s.lineDashOffset=M||kt.He;const b=i.getLineJoin();s.lineJoin=void 0!==b?b:kt.rc;const J=i.getWidth();s.lineWidth=void 0!==J?J:kt.yC;const st=i.getMiterLimit();s.miterLimit=void 0!==st?st:kt.V4,s.lineWidth>this.maxLineWidth&&(this.maxLineWidth=s.lineWidth,this.bufferedMaxExtent_=null)}else s.strokeStyle=void 0,s.lineCap=void 0,s.lineDash=null,s.lineDashOffset=void 0,s.lineJoin=void 0,s.lineWidth=void 0,s.miterLimit=void 0}createFill(t){const i=t.fillStyle,s=[ne.SET_FILL_STYLE,i];return"string"!=typeof i&&s.push(!0),s}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[ne.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,i){const s=t.fillStyle;("string"!=typeof s||t.currentFillStyle!=s)&&(void 0!==s&&this.instructions.push(i.call(this,t)),t.currentFillStyle=s)}updateStrokeStyle(t,i){const s=t.strokeStyle,_=t.lineCap,d=t.lineDash,T=t.lineDashOffset,M=t.lineJoin,b=t.lineWidth,J=t.miterLimit;(t.currentStrokeStyle!=s||t.currentLineCap!=_||d!=t.currentLineDash&&!(0,n.fS)(t.currentLineDash,d)||t.currentLineDashOffset!=T||t.currentLineJoin!=M||t.currentLineWidth!=b||t.currentMiterLimit!=J)&&(void 0!==s&&i.call(this,t),t.currentStrokeStyle=s,t.currentLineCap=_,t.currentLineDash=d,t.currentLineDashOffset=T,t.currentLineJoin=M,t.currentLineWidth=b,t.currentMiterLimit=J)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const i=[ne.END_GEOMETRY,t];this.instructions.push(i),this.hitDetectionInstructions.push(i)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,ce.d9)(this.maxExtent),this.maxLineWidth>0)&&(0,ce.f3)(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}};var Ui=h(4340);const Si=class Ki extends si{constructor(t,i,s,_){super(t,i,s,_)}drawFlatCoordinatess_(t,i,s,_){const d=this.state,T=void 0!==d.fillStyle,M=void 0!==d.strokeStyle,b=s.length;this.instructions.push(Je),this.hitDetectionInstructions.push(Je);for(let J=0;J<b;++J){const st=s[J],_t=this.coordinates.length,ft=this.appendFlatLineCoordinates(t,i,st,_,!0,!M),Rt=[ne.MOVE_TO_LINE_TO,_t,ft];this.instructions.push(Rt),this.hitDetectionInstructions.push(Rt),M&&(this.instructions.push(fi),this.hitDetectionInstructions.push(fi)),i=st}return T&&(this.instructions.push(Me),this.hitDetectionInstructions.push(Me)),M&&(this.instructions.push(Ee),this.hitDetectionInstructions.push(Ee)),i}drawCircle(t,i){const s=this.state;if(void 0===s.fillStyle&&void 0===s.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,i),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([ne.SET_FILL_STYLE,kt.bL]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([ne.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,kt.X9,kt.He]);const T=t.getFlatCoordinates(),M=t.getStride(),b=this.coordinates.length;this.appendFlatLineCoordinates(T,0,T.length,M,!1,!1);const J=[ne.CIRCLE,b];this.instructions.push(Je,J),this.hitDetectionInstructions.push(Je,J),void 0!==s.fillStyle&&(this.instructions.push(Me),this.hitDetectionInstructions.push(Me)),void 0!==s.strokeStyle&&(this.instructions.push(Ee),this.hitDetectionInstructions.push(Ee)),this.endGeometry(i)}drawPolygon(t,i){const s=this.state;if(void 0===s.fillStyle&&void 0===s.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,i),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([ne.SET_FILL_STYLE,kt.bL]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([ne.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,kt.X9,kt.He]);const T=t.getEnds(),M=t.getOrientedFlatCoordinates(),b=t.getStride();this.drawFlatCoordinatess_(M,0,T,b),this.endGeometry(i)}drawMultiPolygon(t,i){const s=this.state;if(void 0===s.fillStyle&&void 0===s.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,i),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([ne.SET_FILL_STYLE,kt.bL]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([ne.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,kt.X9,kt.He]);const T=t.getEndss(),M=t.getOrientedFlatCoordinates(),b=t.getStride();let J=0;for(let st=0,_t=T.length;st<_t;++st)J=this.drawFlatCoordinatess_(M,J,T[st],b);this.endGeometry(i)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const i=this.coordinates;for(let s=0,_=i.length;s<_;++s)i[s]=(0,Ui.uZ)(i[s],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}};var ri=h(9070),Ae=h(3469);function Bi(x,t,i,s,_){const d=[];let T=i,M=0,b=t.slice(i,2);for(;M<x&&T+_<s;){const[J,st]=b.slice(-2),_t=t[T+_],ft=t[T+_+1],Rt=Math.sqrt((_t-J)*(_t-J)+(ft-st)*(ft-st));if(M+=Rt,M>=x){const Lt=(x-M+Rt)/Rt,Ot=(0,Ae.t7)(J,_t,Lt),wt=(0,Ae.t7)(st,ft,Lt);b.push(Ot,wt),d.push(b),b=[Ot,wt],M==x&&(T+=_),M=0}else if(M<x)b.push(t[T+_],t[T+_+1]),T+=_;else{const Lt=Rt-M,Ot=(0,Ae.t7)(J,_t,Lt/Rt),wt=(0,Ae.t7)(st,ft,Lt/Rt);b.push(Ot,wt),d.push(b),b=[Ot,wt],M=0,T+=_}}return M>0&&d.push(b),d}function ji(x,t,i,s,_){let st,_t,ft,Rt,Lt,Ot,wt,Pt,jt,Kt,d=i,T=i,M=0,b=0,J=i;for(_t=i;_t<s;_t+=_){const Jt=t[_t],Qt=t[_t+1];void 0!==Lt&&(jt=Jt-Lt,Kt=Qt-Ot,Rt=Math.sqrt(jt*jt+Kt*Kt),void 0!==wt&&(b+=ft,st=Math.acos((wt*jt+Pt*Kt)/(ft*Rt)),st>x&&(b>M&&(M=b,d=J,T=_t),b=0,J=_t-_)),ft=Rt,wt=jt,Pt=Kt),Lt=Jt,Ot=Qt}return b+=Rt,b>M?[J,_t]:[d,T]}const ai={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Yi={Circle:Si,Default:si,Image:class ki extends si{constructor(t,i,s,_){super(t,i,s,_),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,i){if(!this.image_)return;this.beginGeometry(t,i);const s=t.getFlatCoordinates(),_=t.getStride(),d=this.coordinates.length,T=this.appendFlatPointCoordinates(s,_);this.instructions.push([ne.DRAW_IMAGE,d,T,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ne.DRAW_IMAGE,d,T,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(i)}drawMultiPoint(t,i){if(!this.image_)return;this.beginGeometry(t,i);const s=t.getFlatCoordinates(),_=t.getStride(),d=this.coordinates.length,T=this.appendFlatPointCoordinates(s,_);this.instructions.push([ne.DRAW_IMAGE,d,T,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ne.DRAW_IMAGE,d,T,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(i)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,i){const s=t.getAnchor(),_=t.getSize(),d=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=s[0],this.anchorY_=s[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=_[1],this.opacity_=t.getOpacity(),this.originX_=d[0],this.originY_=d[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=_[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=i}},LineString:class Gi extends si{constructor(t,i,s,_){super(t,i,s,_)}drawFlatCoordinates_(t,i,s,_){const d=this.coordinates.length,T=this.appendFlatLineCoordinates(t,i,s,_,!1,!1),M=[ne.MOVE_TO_LINE_TO,d,T];return this.instructions.push(M),this.hitDetectionInstructions.push(M),s}drawLineString(t,i){const s=this.state;if(void 0===s.strokeStyle||void 0===s.lineWidth)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([ne.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,kt.X9,kt.He],Je);const T=t.getFlatCoordinates(),M=t.getStride();this.drawFlatCoordinates_(T,0,T.length,M),this.hitDetectionInstructions.push(Ee),this.endGeometry(i)}drawMultiLineString(t,i){const s=this.state;if(void 0===s.strokeStyle||void 0===s.lineWidth)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([ne.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,kt.X9,kt.He],Je);const T=t.getEnds(),M=t.getFlatCoordinates(),b=t.getStride();let J=0;for(let st=0,_t=T.length;st<_t;++st)J=this.drawFlatCoordinates_(M,J,T[st],b);this.hitDetectionInstructions.push(Ee),this.endGeometry(i)}finish(){const t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Ee),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Ee),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Je)}},Polygon:Si,Text:class zi extends si{constructor(t,i,s,_){super(t,i,s,_),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[kt.bL]={fillStyle:kt.bL},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,i){const d=this.textState_;if(""===this.text_||!d||!this.textFillState_&&!this.textStrokeState_)return;const T=this.coordinates;let M=T.length;const b=t.getType();let J=null,st=t.getStride();if("line"!==d.placement||"LineString"!=b&&"MultiLineString"!=b&&"Polygon"!=b&&"MultiPolygon"!=b){let _t=d.overflow?null:[];switch(b){case"Point":case"MultiPoint":J=t.getFlatCoordinates();break;case"LineString":J=t.getFlatMidpoint();break;case"Circle":J=t.getCenter();break;case"MultiLineString":J=t.getFlatMidpoints(),st=2;break;case"Polygon":J=t.getFlatInteriorPoint(),d.overflow||_t.push(J[2]/this.resolution),st=3;break;case"MultiPolygon":const Pt=t.getFlatInteriorPoints();J=[];for(let jt=0,Kt=Pt.length;jt<Kt;jt+=3)d.overflow||_t.push(Pt[jt+2]/this.resolution),J.push(Pt[jt],Pt[jt+1]);if(0===J.length)return;st=2}const ft=this.appendFlatPointCoordinates(J,st);if(ft===M)return;if(_t&&(ft-M)/2!=J.length/st){let Pt=M/2;_t=_t.filter((jt,Kt)=>{const Jt=T[2*(Pt+Kt)]===J[Kt*st]&&T[2*(Pt+Kt)+1]===J[Kt*st+1];return Jt||--Pt,Jt})}this.saveTextStates_(),(d.backgroundFill||d.backgroundStroke)&&(this.setFillStrokeStyle(d.backgroundFill,d.backgroundStroke),d.backgroundFill&&this.updateFillStyle(this.state,this.createFill),d.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,i);let Rt=d.padding;if(Rt!=kt.oB&&(d.scale[0]<0||d.scale[1]<0)){let Pt=d.padding[0],jt=d.padding[1],Kt=d.padding[2],Jt=d.padding[3];d.scale[0]<0&&(jt=-jt,Jt=-Jt),d.scale[1]<0&&(Pt=-Pt,Kt=-Kt),Rt=[Pt,jt,Kt,Jt]}const Lt=this.pixelRatio;this.instructions.push([ne.DRAW_IMAGE,M,ft,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,Rt==kt.oB?kt.oB:Rt.map(function(Pt){return Pt*Lt}),!!d.backgroundFill,!!d.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,_t]);const Ot=1/Lt,wt=this.state.fillStyle;d.backgroundFill&&(this.state.fillStyle=kt.bL,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([ne.DRAW_IMAGE,M,ft,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[Ot,Ot],NaN,void 0,this.declutterImageWithText_,Rt,!!d.backgroundFill,!!d.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?kt.bL:this.fillKey_,this.textOffsetX_,this.textOffsetY_,_t]),d.backgroundFill&&(this.state.fillStyle=wt,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(i)}else{if(!(0,ce.kK)(this.getBufferedMaxExtent(),t.getExtent()))return;let _t;if(J=t.getFlatCoordinates(),"LineString"==b)_t=[J.length];else if("MultiLineString"==b)_t=t.getEnds();else if("Polygon"==b)_t=t.getEnds().slice(0,1);else if("MultiPolygon"==b){const Ot=t.getEndss();_t=[];for(let wt=0,Pt=Ot.length;wt<Pt;++wt)_t.push(Ot[wt][0])}this.beginGeometry(t,i);const ft=d.repeat,Rt=ft?void 0:d.textAlign;let Lt=0;for(let Ot=0,wt=_t.length;Ot<wt;++Ot){let Pt;Pt=ft?Bi(ft*this.resolution,J,Lt,_t[Ot],st):[J.slice(Lt,_t[Ot])];for(let jt=0,Kt=Pt.length;jt<Kt;++jt){const Jt=Pt[jt];let Qt=0,zt=Jt.length;if(null==Rt){const Yt=ji(d.maxAngle,Jt,0,Jt.length,2);Qt=Yt[0],zt=Yt[1]}for(let Yt=Qt;Yt<zt;Yt+=st)T.push(Jt[Yt],Jt[Yt+1]);const $t=T.length;Lt=_t[Ot],this.drawChars_(M,$t),M=$t}}this.endGeometry(i)}}saveTextStates_(){const t=this.textStrokeState_,i=this.textState_,s=this.textFillState_,_=this.strokeKey_;t&&(_ in this.strokeStates||(this.strokeStates[_]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const d=this.textKey_;d in this.textStates||(this.textStates[d]={font:i.font,textAlign:i.textAlign||kt.PH,justify:i.justify,textBaseline:i.textBaseline||kt.ru,scale:i.scale});const T=this.fillKey_;s&&(T in this.fillStates||(this.fillStates[T]={fillStyle:s.fillStyle}))}drawChars_(t,i){const s=this.textStrokeState_,_=this.textState_,d=this.strokeKey_,T=this.textKey_,M=this.fillKey_;this.saveTextStates_();const b=this.pixelRatio,J=ai[_.textBaseline],st=this.textOffsetY_*b,_t=this.text_,ft=s?s.lineWidth*Math.abs(_.scale[0])/2:0;this.instructions.push([ne.DRAW_CHARS,t,i,J,_.overflow,M,_.maxAngle,b,st,d,ft*b,_t,T,1]),this.hitDetectionInstructions.push([ne.DRAW_CHARS,t,i,J,_.overflow,M&&kt.bL,_.maxAngle,b,st,d,ft*b,_t,T,1/b])}setTextStyle(t,i){let s,_,d;if(t){const T=t.getFill();T?(_=this.textFillState_,_||(_={},this.textFillState_=_),_.fillStyle=(0,Be.y)(T.getColor()||kt.bL)):(_=null,this.textFillState_=_);const M=t.getStroke();if(M){d=this.textStrokeState_,d||(d={},this.textStrokeState_=d);const Lt=M.getLineDash(),Ot=M.getLineDashOffset(),wt=M.getWidth(),Pt=M.getMiterLimit();d.lineCap=M.getLineCap()||kt.mb,d.lineDash=Lt?Lt.slice():kt.X9,d.lineDashOffset=void 0===Ot?kt.He:Ot,d.lineJoin=M.getLineJoin()||kt.rc,d.lineWidth=void 0===wt?kt.yC:wt,d.miterLimit=void 0===Pt?kt.V4:Pt,d.strokeStyle=(0,Be.y)(M.getColor()||kt.Tx)}else d=null,this.textStrokeState_=d;s=this.textState_;const b=t.getFont()||kt.Df;(0,kt.Qx)(b);const J=t.getScaleArray();s.overflow=t.getOverflow(),s.font=b,s.maxAngle=t.getMaxAngle(),s.placement=t.getPlacement(),s.textAlign=t.getTextAlign(),s.repeat=t.getRepeat(),s.justify=t.getJustify(),s.textBaseline=t.getTextBaseline()||kt.ru,s.backgroundFill=t.getBackgroundFill(),s.backgroundStroke=t.getBackgroundStroke(),s.padding=t.getPadding()||kt.oB,s.scale=void 0===J?[1,1]:J;const st=t.getOffsetX(),_t=t.getOffsetY(),ft=t.getRotateWithView(),Rt=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===st?0:st,this.textOffsetY_=void 0===_t?0:_t,this.textRotateWithView_=void 0!==ft&&ft,this.textRotation_=void 0===Rt?0:Rt,this.strokeKey_=d?("string"==typeof d.strokeStyle?d.strokeStyle:(0,ri.sq)(d.strokeStyle))+d.lineCap+d.lineDashOffset+"|"+d.lineWidth+d.lineJoin+d.miterLimit+"["+d.lineDash.join()+"]":"",this.textKey_=s.font+s.scale+(s.textAlign||"?")+(s.repeat||"?")+(s.justify||"?")+(s.textBaseline||"?"),this.fillKey_=_?"string"==typeof _.fillStyle?_.fillStyle:"|"+(0,ri.sq)(_.fillStyle):""}else this.text_="";this.declutterImageWithText_=i}}},Li=class Vi{constructor(t,i,s,_){this.tolerance_=t,this.maxExtent_=i,this.pixelRatio_=_,this.resolution_=s,this.buildersByZIndex_={}}finish(){const t={};for(const i in this.buildersByZIndex_){t[i]=t[i]||{};const s=this.buildersByZIndex_[i];for(const _ in s){const d=s[_].finish();t[i][_]=d}}return t}getBuilder(t,i){const s=void 0!==t?t.toString():"0";let _=this.buildersByZIndex_[s];void 0===_&&(_={},this.buildersByZIndex_[s]=_);let d=_[i];return void 0===d&&(d=new(0,Yi[i])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),_[i]=d),d}};var li=h(5717),Se=h(9664),ti=h(7714);function Pi(x,t,i,s,_,d,T,M,b,J,st,_t){let ft=x[t],Rt=x[t+1],Lt=0,Ot=0,wt=0,Pt=0;function jt(){Lt=ft,Ot=Rt,ft=x[t+=s],Rt=x[t+1],Pt+=wt,wt=Math.sqrt((ft-Lt)*(ft-Lt)+(Rt-Ot)*(Rt-Ot))}do{jt()}while(t<i-s&&Pt+wt<d);let Kt=0===wt?0:(d-Pt)/wt;const Jt=(0,Ae.t7)(Lt,ft,Kt),Qt=(0,Ae.t7)(Ot,Rt,Kt),zt=t-s,$t=Pt,Yt=d+M*b(J,_,st);for(;t<i-s&&Pt+wt<Yt;)jt();Kt=0===wt?0:(Yt-Pt)/wt;const fe=(0,Ae.t7)(Lt,ft,Kt),ge=(0,Ae.t7)(Ot,Rt,Kt);let Ie;if(_t){const oe=[Jt,Qt,fe,ge];(0,ti.U1)(oe,0,4,2,_t,oe,oe),Ie=oe[0]>oe[2]}else Ie=Jt>fe;const ve=Math.PI,_e=[],Ze=zt+s===t;let ye;if(wt=0,Pt=$t,ft=x[t=zt],Rt=x[t+1],Ze)return jt(),ye=Math.atan2(Rt-Ot,ft-Lt),Ie&&(ye+=ye>0?-ve:ve),_e[0]=[(fe+Jt)/2,(ge+Qt)/2,(Yt-d)/2,ye,_],_e;for(let oe=0,ue=(_=_.replace(/\n/g," ")).length;oe<ue;){jt();let he=Math.atan2(Rt-Ot,ft-Lt);if(Ie&&(he+=he>0?-ve:ve),void 0!==ye){let He=he-ye;if(He+=He>ve?-2*ve:He<-ve?2*ve:0,Math.abs(He)>T)return null}ye=he;const Re=oe;let Pe=0;for(;oe<ue;++oe){const ui=M*b(J,_[Ie?ue-oe-1:oe],st);if(t+s<i&&Pt+wt<d+Pe+ui/2)break;Pe+=ui}if(oe===Re)continue;const Ve=Ie?_.substring(ue-Re,ue-oe):_.substring(Re,oe);Kt=0===wt?0:(d+Pe/2-Pt)/wt;const Bt=(0,Ae.t7)(Lt,ft,Kt),cn=(0,Ae.t7)(Ot,Rt,Kt);_e.push([Bt,cn,Pe/2,he,Ve]),d+=Pe}return _e}function gi(x,t,i,s){let _=x[t],d=x[t+1],T=0;for(let M=t+s;M<i;M+=s){const b=x[M],J=x[M+1];T+=Math.sqrt((b-_)*(b-_)+(J-d)*(J-d)),_=b,d=J}return T}const ei=(0,ce.lJ)(),ze=[],dt=[],e=[],v=[];function Z(x){return x[3].declutterBox}const Y=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function pt(x,t){return"start"===t?t=Y.test(x)?"right":"left":"end"===t&&(t=Y.test(x)?"left":"right"),ai[t]}function At(x,t,i){return i>0&&x.push("\n",""),x.push(t,""),x}const se=class Nt{constructor(t,i,s,_){this.overlaps=s,this.pixelRatio=i,this.resolution=t,this.instructions=_.instructions,this.coordinates=_.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,Se.Ue)(),this.hitDetectionInstructions=_.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=_.fillStates||{},this.strokeStates=_.strokeStates||{},this.textStates=_.textStates||{},this.widths_={},this.labels_={}}createLabel(t,i,s,_){const d=t+i+s+_;if(this.labels_[d])return this.labels_[d];const T=_?this.strokeStates[_]:null,M=s?this.fillStates[s]:null,b=this.textStates[i],J=this.pixelRatio,st=[b.scale[0]*J,b.scale[1]*J],_t=Array.isArray(t),ft=b.justify?ai[b.justify]:pt(Array.isArray(t)?t[0]:t,b.textAlign||kt.PH),Rt=_&&T.lineWidth?T.lineWidth:0,Lt=_t?t:t.split("\n").reduce(At,[]),{width:Ot,height:wt,widths:Pt,heights:jt,lineWidths:Kt}=(0,kt.Zw)(b,Lt),Jt=Ot+Rt,Qt=[],zt=(Jt+2)*st[0],$t=(wt+Rt)*st[1],Yt={width:zt<0?Math.floor(zt):Math.ceil(zt),height:$t<0?Math.floor($t):Math.ceil($t),contextInstructions:Qt};(1!=st[0]||1!=st[1])&&Qt.push("scale",st),_&&(Qt.push("strokeStyle",T.strokeStyle),Qt.push("lineWidth",Rt),Qt.push("lineCap",T.lineCap),Qt.push("lineJoin",T.lineJoin),Qt.push("miterLimit",T.miterLimit),Qt.push("setLineDash",[T.lineDash]),Qt.push("lineDashOffset",T.lineDashOffset)),s&&Qt.push("fillStyle",M.fillStyle),Qt.push("textBaseline","middle"),Qt.push("textAlign","center");const fe=.5-ft;let ge=ft*Jt+fe*Rt;const Ie=[],ve=[];let ue,_e=0,Ze=0,ye=0,oe=0;for(let he=0,Re=Lt.length;he<Re;he+=2){const Pe=Lt[he];if("\n"===Pe){Ze+=_e,_e=0,ge=ft*Jt+fe*Rt,++oe;continue}const Ve=Lt[he+1]||b.font;Ve!==ue&&(_&&Ie.push("font",Ve),s&&ve.push("font",Ve),ue=Ve),_e=Math.max(_e,jt[ye]);const Bt=[Pe,ge+fe*Pt[ye]+ft*(Pt[ye]-Kt[oe]),.5*(Rt+_e)+Ze];ge+=Pt[ye],_&&Ie.push("strokeText",Bt),s&&ve.push("fillText",Bt),++ye}return Array.prototype.push.apply(Qt,Ie),Array.prototype.push.apply(Qt,ve),this.labels_[d]=Yt,Yt}replayTextBackground_(t,i,s,_,d,T,M){t.beginPath(),t.moveTo.apply(t,i),t.lineTo.apply(t,s),t.lineTo.apply(t,_),t.lineTo.apply(t,d),t.lineTo.apply(t,i),T&&(this.alignFill_=T[2],this.fill_(t)),M&&(this.setStrokeStyle_(t,M),t.stroke())}calculateImageOrLabelDimensions_(t,i,s,_,d,T,M,b,J,st,_t,ft,Rt,Lt,Ot,wt){let Pt=s-(M*=ft[0]),jt=_-(b*=ft[1]);const Kt=d+J>t?t-J:d,Jt=T+st>i?i-st:T,Qt=Lt[3]+Kt*ft[0]+Lt[1],zt=Lt[0]+Jt*ft[1]+Lt[2],$t=Pt-Lt[3],Yt=jt-Lt[0];let fe;return(Ot||0!==_t)&&(ze[0]=$t,v[0]=$t,ze[1]=Yt,dt[1]=Yt,dt[0]=$t+Qt,e[0]=dt[0],e[1]=Yt+zt,v[1]=e[1]),0!==_t?(fe=(0,Se.qC)((0,Se.Ue)(),s,_,1,1,_t,-s,-_),(0,Se.nn)(fe,ze),(0,Se.nn)(fe,dt),(0,Se.nn)(fe,e),(0,Se.nn)(fe,v),(0,ce.T9)(Math.min(ze[0],dt[0],e[0],v[0]),Math.min(ze[1],dt[1],e[1],v[1]),Math.max(ze[0],dt[0],e[0],v[0]),Math.max(ze[1],dt[1],e[1],v[1]),ei)):(0,ce.T9)(Math.min($t,$t+Qt),Math.min(Yt,Yt+zt),Math.max($t,$t+Qt),Math.max(Yt,Yt+zt),ei),Rt&&(Pt=Math.round(Pt),jt=Math.round(jt)),{drawImageX:Pt,drawImageY:jt,drawImageW:Kt,drawImageH:Jt,originX:J,originY:st,declutterBox:{minX:ei[0],minY:ei[1],maxX:ei[2],maxY:ei[3],value:wt},canvasTransform:fe,scale:ft}}replayImageOrLabel_(t,i,s,_,d,T,M){const J=_.declutterBox,st=t.canvas,_t=M?M[2]*_.scale[0]/2:0;return J.minX-_t<=st.width/i&&J.maxX+_t>=0&&J.minY-_t<=st.height/i&&J.maxY+_t>=0&&(!(!T&&!M)&&this.replayTextBackground_(t,ze,dt,e,v,T,M),(0,kt._f)(t,_.canvasTransform,d,s,_.originX,_.originY,_.drawImageW,_.drawImageH,_.drawImageX,_.drawImageY,_.scale)),!0}fill_(t){if(this.alignFill_){const i=(0,Se.nn)(this.renderedTransform_,[0,0]),s=512*this.pixelRatio;t.save(),t.translate(i[0]%s,i[1]%s),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,i){t.strokeStyle=i[1],t.lineWidth=i[2],t.lineCap=i[3],t.lineJoin=i[4],t.miterLimit=i[5],t.lineDashOffset=i[7],t.setLineDash(i[6])}drawLabelWithPointPlacement_(t,i,s,_){const d=this.textStates[i],T=this.createLabel(t,i,_,s),M=this.strokeStates[s],b=this.pixelRatio,J=pt(Array.isArray(t)?t[0]:t,d.textAlign||kt.PH),st=ai[d.textBaseline||kt.ru],_t=M&&M.lineWidth?M.lineWidth:0;return{label:T,anchorX:J*(T.width/b-2*d.scale[0])+2*(.5-J)*_t,anchorY:st*T.height/b+2*(.5-st)*_t}}execute_(t,i,s,_,d,T,M,b){let J;this.pixelCoordinates_&&(0,n.fS)(s,this.renderedTransform_)?J=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),J=(0,ti.vT)(this.coordinates,0,this.coordinates.length,2,s,this.pixelCoordinates_),(0,Se.lk)(this.renderedTransform_,s));let st=0;const _t=_.length;let Rt,Lt,Ot,wt,Pt,jt,Kt,Jt,Qt,zt,$t,Yt,ft=0,fe=0,ge=0,Ie=null,ve=null;const _e=this.coordinateCache_,Ze=this.viewRotation_,ye=Math.round(1e12*Math.atan2(-s[1],s[0]))/1e12,oe={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Ze},ue=this.instructions!=_||this.overlaps?0:200;let he,Re,Pe,Ve;for(;st<_t;){const Bt=_[st];switch(Bt[0]){case ne.BEGIN_GEOMETRY:he=Bt[1],Ve=Bt[3],he.getGeometry()?void 0===M||(0,ce.kK)(M,Ve.getExtent())?++st:st=Bt[2]+1:st=Bt[2];break;case ne.BEGIN_PATH:fe>ue&&(this.fill_(t),fe=0),ge>ue&&(t.stroke(),ge=0),!fe&&!ge&&(t.beginPath(),wt=NaN,Pt=NaN),++st;break;case ne.CIRCLE:ft=Bt[1];const He=J[ft],ui=J[ft+1],un=J[ft+2]-He,dn=J[ft+3]-ui,fn=Math.sqrt(un*un+dn*dn);t.moveTo(He+fn,ui),t.arc(He,ui,fn,0,2*Math.PI,!0),++st;break;case ne.CLOSE_PATH:t.closePath(),++st;break;case ne.CUSTOM:ft=Bt[1],Rt=Bt[2];const Un=Bt[4],gn=6==Bt.length?Bt[5]:void 0;oe.geometry=Bt[3],oe.feature=he,st in _e||(_e[st]=[]);const vi=_e[st];gn?gn(J,ft,Rt,2,vi):(vi[0]=J[ft],vi[1]=J[ft+1],vi.length=2),Un(vi,oe),++st;break;case ne.DRAW_IMAGE:ft=Bt[1],Rt=Bt[2],Jt=Bt[3],Lt=Bt[4],Ot=Bt[5];let Qi=Bt[6];const Kn=Bt[7],Bn=Bt[8],jn=Bt[9],_n=Bt[10];let qi=Bt[11];const zn=Bt[12];let Ai=Bt[13];const mn=Bt[14],xi=Bt[15];if(!Jt&&Bt.length>=20){Qt=Bt[19],zt=Bt[20],$t=Bt[21],Yt=Bt[22];const Ne=this.drawLabelWithPointPlacement_(Qt,zt,$t,Yt);Jt=Ne.label,Bt[3]=Jt,Lt=(Ne.anchorX-Bt[23])*this.pixelRatio,Bt[4]=Lt,Ot=(Ne.anchorY-Bt[24])*this.pixelRatio,Bt[5]=Ot,Qi=Jt.height,Bt[6]=Qi,Ai=Jt.width,Bt[13]=Ai}let tn,en,Oi,Di;Bt.length>25&&(tn=Bt[25]),Bt.length>17?(en=Bt[16],Oi=Bt[17],Di=Bt[18]):(en=kt.oB,Oi=!1,Di=!1),_n&&ye?qi+=Ze:!_n&&!ye&&(qi-=Ze);let Yn=0;for(;ft<Rt;ft+=2){if(tn&&tn[Yn++]<Ai/this.pixelRatio)continue;const Ne=this.calculateImageOrLabelDimensions_(Jt.width,Jt.height,J[ft],J[ft+1],Ai,Qi,Lt,Ot,Bn,jn,qi,zn,d,en,Oi||Di,he),di=[t,i,Jt,Ne,Kn,Oi?Ie:null,Di?ve:null];if(b){if("none"===mn)continue;if("obstacle"===mn){b.insert(Ne.declutterBox);continue}{let ke,Qe;if(xi){const We=Rt-ft;if(!xi[We]){xi[We]=di;continue}if(ke=xi[We],delete xi[We],Qe=Z(ke),b.collides(Qe))continue}if(b.collides(Ne.declutterBox))continue;ke&&(b.insert(Qe),this.replayImageOrLabel_.apply(this,ke)),b.insert(Ne.declutterBox)}}this.replayImageOrLabel_.apply(this,di)}++st;break;case ne.DRAW_CHARS:const En=Bt[1],yn=Bt[2],nn=Bt[3],Vn=Bt[4];Yt=Bt[5];const Hn=Bt[6],pn=Bt[7],vn=Bt[8];$t=Bt[9];const sn=Bt[10];Qt=Bt[11],zt=Bt[12];const xn=[Bt[13],Bt[13]],rn=this.textStates[zt],Ci=rn.font,Ti=[rn.scale[0]*pn,rn.scale[1]*pn];let Ri;Ci in this.widths_?Ri=this.widths_[Ci]:(Ri={},this.widths_[Ci]=Ri);const Cn=gi(J,En,yn,2),Tn=Math.abs(Ti[0])*(0,kt.Kd)(Ci,Qt,Ri);if(Vn||Tn<=Cn){const ke=Pi(J,En,yn,2,Qt,(Cn-Tn)*pt(Qt,this.textStates[zt].textAlign),Hn,Math.abs(Ti[0]),kt.Kd,Ci,Ri,ye?0:this.viewRotation_);t:if(ke){const Qe=[];let We,bi,Fi,De,Ge;if($t)for(We=0,bi=ke.length;We<bi;++We){Ge=ke[We],Fi=Ge[4],De=this.createLabel(Fi,zt,"",$t),Lt=Ge[2]+(Ti[0]<0?-sn:sn),Ot=nn*De.height+2*(.5-nn)*sn*Ti[1]/Ti[0]-vn;const qe=this.calculateImageOrLabelDimensions_(De.width,De.height,Ge[0],Ge[1],De.width,De.height,Lt,Ot,0,0,Ge[3],xn,!1,kt.oB,!1,he);if(b&&b.collides(qe.declutterBox))break t;Qe.push([t,i,De,qe,1,null,null])}if(Yt)for(We=0,bi=ke.length;We<bi;++We){Ge=ke[We],Fi=Ge[4],De=this.createLabel(Fi,zt,Yt,""),Lt=Ge[2],Ot=nn*De.height-vn;const qe=this.calculateImageOrLabelDimensions_(De.width,De.height,Ge[0],Ge[1],De.width,De.height,Lt,Ot,0,0,Ge[3],xn,!1,kt.oB,!1,he);if(b&&b.collides(qe.declutterBox))break t;Qe.push([t,i,De,qe,1,null,null])}b&&b.load(Qe.map(Z));for(let qe=0,Jn=Qe.length;qe<Jn;++qe)this.replayImageOrLabel_.apply(this,Qe[qe])}}++st;break;case ne.END_GEOMETRY:if(void 0!==T){he=Bt[1];const Ne=T(he,Ve);if(Ne)return Ne}++st;break;case ne.FILL:ue?fe++:this.fill_(t),++st;break;case ne.MOVE_TO_LINE_TO:for(ft=Bt[1],Rt=Bt[2],Re=J[ft],Pe=J[ft+1],jt=Re+.5|0,Kt=Pe+.5|0,(jt!==wt||Kt!==Pt)&&(t.moveTo(Re,Pe),wt=jt,Pt=Kt),ft+=2;ft<Rt;ft+=2)Re=J[ft],Pe=J[ft+1],jt=Re+.5|0,Kt=Pe+.5|0,(ft==Rt-2||jt!==wt||Kt!==Pt)&&(t.lineTo(Re,Pe),wt=jt,Pt=Kt);++st;break;case ne.SET_FILL_STYLE:Ie=Bt,this.alignFill_=Bt[2],fe&&(this.fill_(t),fe=0,ge&&(t.stroke(),ge=0)),t.fillStyle=Bt[1],++st;break;case ne.SET_STROKE_STYLE:ve=Bt,ge&&(t.stroke(),ge=0),this.setStrokeStyle_(t,Bt),++st;break;case ne.STROKE:ue?ge++:t.stroke(),++st;break;default:++st}}fe&&this.fill_(t),ge&&t.stroke()}execute(t,i,s,_,d,T){this.viewRotation_=_,this.execute_(t,i,s,this.instructions,d,void 0,void 0,T)}executeHitDetection(t,i,s,_,d){return this.viewRotation_=s,this.execute_(t,1,i,this.hitDetectionInstructions,!0,_,d)}};var pe=h(7120),Oe=h(925);const Ye=["Polygon","Circle","LineString","Image","Text","Default"],mi={},Ei=class _i{constructor(t,i,s,_,d,T){this.maxExtent_=t,this.overlaps_=_,this.pixelRatio_=s,this.resolution_=i,this.renderBuffer_=T,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,Se.Ue)(),this.createExecutors_(d)}clip(t,i){const s=this.getClipCoords(i);t.beginPath(),t.moveTo(s[0],s[1]),t.lineTo(s[2],s[3]),t.lineTo(s[4],s[5]),t.lineTo(s[6],s[7]),t.clip()}createExecutors_(t){for(const i in t){let s=this.executorsByZIndex_[i];void 0===s&&(s={},this.executorsByZIndex_[i]=s);const _=t[i];for(const d in _)s[d]=new se(this.resolution_,this.pixelRatio_,this.overlaps_,_[d])}}hasExecutors(t){for(const i in this.executorsByZIndex_){const s=this.executorsByZIndex_[i];for(let _=0,d=t.length;_<d;++_)if(t[_]in s)return!0}return!1}forEachFeatureAtCoordinate(t,i,s,_,d,T){const M=2*(_=Math.round(_))+1,b=(0,Se.qC)(this.hitDetectionTransform_,_+.5,_+.5,1/i,-1/i,-s,-t[0],-t[1]),J=!this.hitDetectionContext_;J&&(this.hitDetectionContext_=(0,pe.E4)(M,M,void 0,{willReadFrequently:!0}));const st=this.hitDetectionContext_;let _t;st.canvas.width!==M||st.canvas.height!==M?(st.canvas.width=M,st.canvas.height=M):J||st.clearRect(0,0,M,M),void 0!==this.renderBuffer_&&(_t=(0,ce.lJ)(),(0,ce.Wj)(_t,t),(0,ce.f3)(_t,i*(this.renderBuffer_+_),_t));const ft=function hi(x){if(void 0!==mi[x])return mi[x];const t=2*x+1,i=x*x,s=new Array(i+1);for(let d=0;d<=x;++d)for(let T=0;T<=x;++T){const M=d*d+T*T;if(M>i)break;let b=s[M];b||(b=[],s[M]=b),b.push(4*((x+d)*t+(x+T))+3),d>0&&b.push(4*((x-d)*t+(x+T))+3),T>0&&(b.push(4*((x+d)*t+(x-T))+3),d>0&&b.push(4*((x-d)*t+(x-T))+3))}const _=[];for(let d=0,T=s.length;d<T;++d)s[d]&&_.push(...s[d]);return mi[x]=_,_}(_);let Rt;function Lt(Qt,zt){const $t=st.getImageData(0,0,M,M).data;for(let Yt=0,fe=ft.length;Yt<fe;Yt++)if($t[ft[Yt]]>0){if(!T||"Image"!==Rt&&"Text"!==Rt||T.includes(Qt)){const ge=(ft[Yt]-3)/4,Ie=_-ge%M,ve=_-(ge/M|0),_e=d(Qt,zt,Ie*Ie+ve*ve);if(_e)return _e}st.clearRect(0,0,M,M);break}}const Ot=Object.keys(this.executorsByZIndex_).map(Number);let wt,Pt,jt,Kt,Jt;for(Ot.sort(n.j2),wt=Ot.length-1;wt>=0;--wt){const Qt=Ot[wt].toString();for(jt=this.executorsByZIndex_[Qt],Pt=Ye.length-1;Pt>=0;--Pt)if(Rt=Ye[Pt],Kt=jt[Rt],void 0!==Kt&&(Jt=Kt.executeHitDetection(st,b,s,Lt,_t),Jt))return Jt}}getClipCoords(t){const i=this.maxExtent_;if(!i)return null;const s=i[0],_=i[1],d=i[2],T=i[3],M=[s,_,s,T,d,T,d,_];return(0,ti.vT)(M,0,8,2,t,M),M}isEmpty(){return(0,Oe.x)(this.executorsByZIndex_)}execute(t,i,s,_,d,T,M){const b=Object.keys(this.executorsByZIndex_).map(Number);let J,st,_t,ft,Rt,Lt;for(b.sort(n.j2),this.maxExtent_&&(t.save(),this.clip(t,s)),T=T||Ye,M&&b.reverse(),J=0,st=b.length;J<st;++J){const Ot=b[J].toString();for(Rt=this.executorsByZIndex_[Ot],_t=0,ft=T.length;_t<ft;++_t)Lt=Rt[T[_t]],void 0!==Lt&&Lt.execute(t,i,s,_,d,M)}this.maxExtent_&&t.restore()}};var Mi=h(4074),Ue=h(5329),yi=h(1928);const Le=class Hi extends Ii{constructor(t,i,s,_,d,T,M){super(),this.context_=t,this.pixelRatio_=i,this.extent_=s,this.transform_=_,this.transformRotation_=_?(0,Ae.FH)(Math.atan2(_[1],_[0]),10):0,this.viewRotation_=d,this.squaredTolerance_=T,this.userTransform_=M,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,Se.Ue)()}drawImages_(t,i,s,_){if(!this.image_)return;const d=(0,ti.vT)(t,i,s,_,this.transform_,this.pixelCoordinates_),T=this.context_,M=this.tmpLocalTransform_,b=T.globalAlpha;1!=this.imageOpacity_&&(T.globalAlpha=b*this.imageOpacity_);let J=this.imageRotation_;0===this.transformRotation_&&(J-=this.viewRotation_),this.imageRotateWithView_&&(J+=this.viewRotation_);for(let st=0,_t=d.length;st<_t;st+=2){const ft=d[st]-this.imageAnchorX_,Rt=d[st+1]-this.imageAnchorY_;if(0!==J||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const Lt=ft+this.imageAnchorX_,Ot=Rt+this.imageAnchorY_;(0,Se.qC)(M,Lt,Ot,1,1,J,-Lt,-Ot),T.save(),T.transform.apply(T,M),T.translate(Lt,Ot),T.scale(this.imageScale_[0],this.imageScale_[1]),T.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),T.restore()}else T.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,ft,Rt,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(T.globalAlpha=b)}drawText_(t,i,s,_){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const d=(0,ti.vT)(t,i,s,_,this.transform_,this.pixelCoordinates_),T=this.context_;let M=this.textRotation_;for(0===this.transformRotation_&&(M-=this.viewRotation_),this.textRotateWithView_&&(M+=this.viewRotation_);i<s;i+=_){const b=d[i]+this.textOffsetX_,J=d[i+1]+this.textOffsetY_;0!==M||1!=this.textScale_[0]||1!=this.textScale_[1]?(T.save(),T.translate(b-this.textOffsetX_,J-this.textOffsetY_),T.rotate(M),T.translate(this.textOffsetX_,this.textOffsetY_),T.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&T.strokeText(this.text_,0,0),this.textFillState_&&T.fillText(this.text_,0,0),T.restore()):(this.textStrokeState_&&T.strokeText(this.text_,b,J),this.textFillState_&&T.fillText(this.text_,b,J))}}moveToLineTo_(t,i,s,_,d){const T=this.context_,M=(0,ti.vT)(t,i,s,_,this.transform_,this.pixelCoordinates_);T.moveTo(M[0],M[1]);let b=M.length;d&&(b-=2);for(let J=2;J<b;J+=2)T.lineTo(M[J],M[J+1]);return d&&T.closePath(),s}drawRings_(t,i,s,_){for(let d=0,T=s.length;d<T;++d)i=this.moveToLineTo_(t,i,s[d],_,!0);return i}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,ce.kK)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const i=(0,yi.Kr)(t,this.transform_,this.pixelCoordinates_),s=i[2]-i[0],_=i[3]-i[1],d=Math.sqrt(s*s+_*_),T=this.context_;T.beginPath(),T.arc(i[0],i[1],d,0,2*Math.PI),this.fillState_&&T.fill(),this.strokeState_&&T.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}drawFeature(t,i){const s=i.getGeometryFunction()(t);s&&(this.setStyle(i),this.drawGeometry(s))}drawGeometryCollection(t){const i=t.getGeometriesArray();for(let s=0,_=i.length;s<_;++s)this.drawGeometry(i[s])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const i=t.getFlatCoordinates(),s=t.getStride();this.image_&&this.drawImages_(i,0,i.length,s),""!==this.text_&&this.drawText_(i,0,i.length,s)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const i=t.getFlatCoordinates(),s=t.getStride();this.image_&&this.drawImages_(i,0,i.length,s),""!==this.text_&&this.drawText_(i,0,i.length,s)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,ce.kK)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,s=t.getFlatCoordinates();i.beginPath(),this.moveToLineTo_(s,0,s.length,t.getStride(),!1),i.stroke()}if(""!==this.text_){const i=t.getFlatMidpoint();this.drawText_(i,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const i=t.getExtent();if((0,ce.kK)(this.extent_,i)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const s=this.context_,_=t.getFlatCoordinates();let d=0;const T=t.getEnds(),M=t.getStride();s.beginPath();for(let b=0,J=T.length;b<J;++b)d=this.moveToLineTo_(_,d,T[b],M,!1);s.stroke()}if(""!==this.text_){const s=t.getFlatMidpoints();this.drawText_(s,0,s.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,ce.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const i=this.context_;i.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(""!==this.text_){const i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,ce.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const i=this.context_,s=t.getOrientedFlatCoordinates();let _=0;const d=t.getEndss(),T=t.getStride();i.beginPath();for(let M=0,b=d.length;M<b;++M)_=this.drawRings_(s,_,d[M],T);this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(""!==this.text_){const i=t.getFlatInteriorPoints();this.drawText_(i,0,i.length,2)}}}setContextFillState_(t){const i=this.context_,s=this.contextFillState_;s?s.fillStyle!=t.fillStyle&&(s.fillStyle=t.fillStyle,i.fillStyle=t.fillStyle):(i.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const i=this.context_,s=this.contextStrokeState_;s?(s.lineCap!=t.lineCap&&(s.lineCap=t.lineCap,i.lineCap=t.lineCap),(0,n.fS)(s.lineDash,t.lineDash)||i.setLineDash(s.lineDash=t.lineDash),s.lineDashOffset!=t.lineDashOffset&&(s.lineDashOffset=t.lineDashOffset,i.lineDashOffset=t.lineDashOffset),s.lineJoin!=t.lineJoin&&(s.lineJoin=t.lineJoin,i.lineJoin=t.lineJoin),s.lineWidth!=t.lineWidth&&(s.lineWidth=t.lineWidth,i.lineWidth=t.lineWidth),s.miterLimit!=t.miterLimit&&(s.miterLimit=t.miterLimit,i.miterLimit=t.miterLimit),s.strokeStyle!=t.strokeStyle&&(s.strokeStyle=t.strokeStyle,i.strokeStyle=t.strokeStyle)):(i.lineCap=t.lineCap,i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset,i.lineJoin=t.lineJoin,i.lineWidth=t.lineWidth,i.miterLimit=t.miterLimit,i.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const i=this.context_,s=this.contextTextState_,_=t.textAlign?t.textAlign:kt.PH;s?(s.font!=t.font&&(s.font=t.font,i.font=t.font),s.textAlign!=_&&(s.textAlign=_,i.textAlign=_),s.textBaseline!=t.textBaseline&&(s.textBaseline=t.textBaseline,i.textBaseline=t.textBaseline)):(i.font=t.font,i.textAlign=_,i.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:_,textBaseline:t.textBaseline})}setFillStrokeStyle(t,i){if(t){const s=t.getColor();this.fillState_={fillStyle:(0,Be.y)(s||kt.bL)}}else this.fillState_=null;if(i){const s=i.getColor(),_=i.getLineCap(),d=i.getLineDash(),T=i.getLineDashOffset(),M=i.getLineJoin(),b=i.getWidth(),J=i.getMiterLimit(),st=d||kt.X9;this.strokeState_={lineCap:void 0!==_?_:kt.mb,lineDash:1===this.pixelRatio_?st:st.map(_t=>_t*this.pixelRatio_),lineDashOffset:(T||kt.He)*this.pixelRatio_,lineJoin:void 0!==M?M:kt.rc,lineWidth:(void 0!==b?b:kt.yC)*this.pixelRatio_,miterLimit:void 0!==J?J:kt.V4,strokeStyle:(0,Be.y)(s||kt.Tx)}}else this.strokeState_=null}setImageStyle(t){let i;if(!t||!(i=t.getSize()))return void(this.image_=null);const s=t.getPixelRatio(this.pixelRatio_),_=t.getAnchor(),d=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=_[0]*s,this.imageAnchorY_=_[1]*s,this.imageHeight_=i[1]*s,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=d[0],this.imageOriginY_=d[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const T=t.getScaleArray();this.imageScale_=[T[0]*this.pixelRatio_/s,T[1]*this.pixelRatio_/s],this.imageWidth_=i[0]*s}setTextStyle(t){if(t){const i=t.getFill();if(i){const Rt=i.getColor();this.textFillState_={fillStyle:(0,Be.y)(Rt||kt.bL)}}else this.textFillState_=null;const s=t.getStroke();if(s){const Rt=s.getColor(),Lt=s.getLineCap(),Ot=s.getLineDash(),wt=s.getLineDashOffset(),Pt=s.getLineJoin(),jt=s.getWidth(),Kt=s.getMiterLimit();this.textStrokeState_={lineCap:void 0!==Lt?Lt:kt.mb,lineDash:Ot||kt.X9,lineDashOffset:wt||kt.He,lineJoin:void 0!==Pt?Pt:kt.rc,lineWidth:void 0!==jt?jt:kt.yC,miterLimit:void 0!==Kt?Kt:kt.V4,strokeStyle:(0,Be.y)(Rt||kt.Tx)}}else this.textStrokeState_=null;const _=t.getFont(),d=t.getOffsetX(),T=t.getOffsetY(),M=t.getRotateWithView(),b=t.getRotation(),J=t.getScaleArray(),st=t.getText(),_t=t.getTextAlign(),ft=t.getTextBaseline();this.textState_={font:void 0!==_?_:kt.Df,textAlign:void 0!==_t?_t:kt.PH,textBaseline:void 0!==ft?ft:kt.ru},this.text_=void 0!==st?Array.isArray(st)?st.reduce((Rt,Lt,Ot)=>Rt+(Ot%2?" ":Lt),""):st:"",this.textOffsetX_=void 0!==d?this.pixelRatio_*d:0,this.textOffsetY_=void 0!==T?this.pixelRatio_*T:0,this.textRotateWithView_=void 0!==M&&M,this.textRotation_=void 0!==b?b:0,this.textScale_=[this.pixelRatio_*J[0],this.pixelRatio_*J[1]]}else this.text_=""}},Te=.5;var ni=h(1084);const pi={Point:function An(x,t,i,s,_){const d=i.getImage(),T=i.getText();let M;if(d){if(d.getImageState()!=ni.Z.LOADED)return;let b=x;if(_){const st=d.getDeclutterMode();if("none"!==st)if(b=_,"obstacle"===st){const _t=x.getBuilder(i.getZIndex(),"Image");_t.setImageStyle(d,M),_t.drawPoint(t,s)}else T&&T.getText()&&(M={})}const J=b.getBuilder(i.getZIndex(),"Image");J.setImageStyle(d,M),J.drawPoint(t,s)}if(T&&T.getText()){let b=x;_&&(b=_);const J=b.getBuilder(i.getZIndex(),"Text");J.setTextStyle(T,M),J.drawText(t,s)}},LineString:function Pn(x,t,i,s,_){const d=i.getStroke();if(d){const M=x.getBuilder(i.getZIndex(),"LineString");M.setFillStrokeStyle(null,d),M.drawLineString(t,s)}const T=i.getText();if(T&&T.getText()){const M=(_||x).getBuilder(i.getZIndex(),"Text");M.setTextStyle(T),M.drawText(t,s)}},Polygon:function Dn(x,t,i,s,_){const d=i.getFill(),T=i.getStroke();if(d||T){const b=x.getBuilder(i.getZIndex(),"Polygon");b.setFillStrokeStyle(d,T),b.drawPolygon(t,s)}const M=i.getText();if(M&&M.getText()){const b=(_||x).getBuilder(i.getZIndex(),"Text");b.setTextStyle(M),b.drawText(t,s)}},MultiPoint:function On(x,t,i,s,_){const d=i.getImage(),T=i.getText();let M;if(d){if(d.getImageState()!=ni.Z.LOADED)return;let b=x;if(_){const st=d.getDeclutterMode();if("none"!==st)if(b=_,"obstacle"===st){const _t=x.getBuilder(i.getZIndex(),"Image");_t.setImageStyle(d,M),_t.drawMultiPoint(t,s)}else T&&T.getText()&&(M={})}const J=b.getBuilder(i.getZIndex(),"Image");J.setImageStyle(d,M),J.drawMultiPoint(t,s)}if(T&&T.getText()){let b=x;_&&(b=_);const J=b.getBuilder(i.getZIndex(),"Text");J.setTextStyle(T,M),J.drawText(t,s)}},MultiLineString:function Mn(x,t,i,s,_){const d=i.getStroke();if(d){const M=x.getBuilder(i.getZIndex(),"LineString");M.setFillStrokeStyle(null,d),M.drawMultiLineString(t,s)}const T=i.getText();if(T&&T.getText()){const M=(_||x).getBuilder(i.getZIndex(),"Text");M.setTextStyle(T),M.drawText(t,s)}},MultiPolygon:function wn(x,t,i,s,_){const d=i.getFill(),T=i.getStroke();if(T||d){const b=x.getBuilder(i.getZIndex(),"Polygon");b.setFillStrokeStyle(d,T),b.drawMultiPolygon(t,s)}const M=i.getText();if(M&&M.getText()){const b=(_||x).getBuilder(i.getZIndex(),"Text");b.setTextStyle(M),b.drawText(t,s)}},GeometryCollection:function Ln(x,t,i,s,_){const d=t.getGeometriesArray();let T,M;for(T=0,M=d.length;T<M;++T)(0,pi[d[T].getType()])(x,d[T],i,s,_)},Circle:function In(x,t,i,s,_){const d=i.getFill(),T=i.getStroke();if(d||T){const b=x.getBuilder(i.getZIndex(),"Circle");b.setFillStrokeStyle(d,T),b.drawCircle(t,s)}const M=i.getText();if(M&&M.getText()){const b=(_||x).getBuilder(i.getZIndex(),"Text");b.setTextStyle(M),b.drawText(t,s)}}};function Ji(x,t){return parseInt((0,ri.sq)(x),10)-parseInt((0,ri.sq)(t),10)}function $i(x,t){return.5*x/t}function ln(x,t,i,s,_,d,T){let M=!1;const b=i.getImage();if(b){const J=b.getImageState();J==ni.Z.LOADED||J==ni.Z.ERROR?b.unlistenImageChange(_):(J==ni.Z.IDLE&&b.load(),b.listenImageChange(_),M=!0)}return function Sn(x,t,i,s,_,d){const T=i.getGeometryFunction()(t);if(!T)return;const M=T.simplifyTransformed(s,_);i.getRenderer()?hn(x,M,i,t):(0,pi[M.getType()])(x,M,i,t,d)}(x,t,i,s,d,T),M}function hn(x,t,i,s){if("GeometryCollection"!=t.getType())x.getBuilder(i.getZIndex(),"Default").drawCustom(t,s,i.getRenderer(),i.getHitDetectionRenderer());else{const d=t.getGeometries();for(let T=0,M=d.length;T<M;++T)hn(x,d[T],i,s)}}var ci=h(2064),bn=h(722);const Zn=class Fn extends li.Z{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,ce.lJ)(),this.wrappedRenderedExtent_=(0,ce.lJ)(),this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,i,s){const _=i.extent,d=i.viewState,T=d.center,M=d.resolution,b=d.projection,J=d.rotation,st=b.getExtent(),_t=this.getLayer().getSource(),ft=i.pixelRatio,Rt=i.viewHints,Lt=!(Rt[Ue.Z.ANIMATING]||Rt[Ue.Z.INTERACTING]),Ot=this.compositionContext_,wt=Math.round(i.size[0]*ft),Pt=Math.round(i.size[1]*ft),jt=_t.getWrapX()&&b.canWrapX(),Kt=jt?(0,ce.dz)(st):null,Jt=jt?Math.ceil((_[2]-st[2])/Kt)+1:1;let Qt=jt?Math.floor((_[0]-st[0])/Kt):0;do{const zt=this.getRenderTransform(T,M,J,ft,wt,Pt,Qt*Kt);t.execute(Ot,1,zt,J,Lt,void 0,s)}while(++Qt<Jt)}setupCompositionContext_(){if(1!==this.opacity_){const t=(0,pe.E4)(this.context.canvas.width,this.context.canvas.height,li.r);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,(0,pe.jy)(this.compositionContext_),li.r.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,i){const s=t.pixelRatio,_=t.layerStatesArray[t.layerIndex];(0,Se.n3)(this.pixelTransform,1/s,1/s),(0,Se.nb)(this.inversePixelTransform,this.pixelTransform);const d=(0,Se.BB)(this.pixelTransform);this.useContainer(i,d,this.getBackground(t));const T=this.context,M=T.canvas,b=this.replayGroup_,J=this.declutterExecutorGroup;let st=b&&!b.isEmpty()||J&&!J.isEmpty();if(!st&&!this.getLayer().hasListener(Mi.Z.PRERENDER)&&!this.getLayer().hasListener(Mi.Z.POSTRENDER))return null;const _t=Math.round(t.size[0]*s),ft=Math.round(t.size[1]*s);M.width!=_t||M.height!=ft?(M.width=_t,M.height=ft,M.style.transform!==d&&(M.style.transform=d)):this.containerReused||T.clearRect(0,0,_t,ft),this.preRender(T,t);const Rt=t.viewState,Lt=Rt.projection;this.opacity_=_.opacity,this.setupCompositionContext_();let Ot=!1;if(st&&_.extent&&this.clipping){const wt=(0,ci.dY)(_.extent,Lt);st=(0,ce.kK)(wt,t.extent),Ot=st&&!(0,ce.r4)(wt,t.extent),Ot&&this.clipUnrotated(this.compositionContext_,t,wt)}return st&&this.renderWorlds(b,t),Ot&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(T,t),this.renderedRotation_!==Rt.rotation&&(this.renderedRotation_=Rt.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(i=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const s=[this.context.canvas.width,this.context.canvas.height];(0,Se.nn)(this.pixelTransform,s);const _=this.renderedCenter_,d=this.renderedResolution_,T=this.renderedRotation_,M=this.renderedProjection_,b=this.wrappedRenderedExtent_,J=this.getLayer(),st=[],_t=s[0]*Te,ft=s[1]*Te;st.push(this.getRenderTransform(_,d,T,Te,_t,ft,0).slice());const Rt=J.getSource(),Lt=M.getExtent();if(Rt.getWrapX()&&M.canWrapX()&&!(0,ce.r4)(Lt,b)){let Ot=b[0];const wt=(0,ce.dz)(Lt);let jt,Pt=0;for(;Ot<Lt[0];)--Pt,jt=wt*Pt,st.push(this.getRenderTransform(_,d,T,Te,_t,ft,jt).slice()),Ot+=wt;for(Pt=0,Ot=b[2];Ot>Lt[2];)++Pt,jt=wt*Pt,st.push(this.getRenderTransform(_,d,T,Te,_t,ft,jt).slice()),Ot-=wt}this.hitDetectionImageData_=function oi(x,t,i,s,_,d,T){const J=(0,pe.E4)(x[0]*Te,x[1]*Te);J.imageSmoothingEnabled=!1;const st=J.canvas,_t=new Le(J,Te,_,null,T),ft=i.length,Rt=Math.floor(16777215/ft),Lt={};for(let wt=1;wt<=ft;++wt){const Pt=i[wt-1],jt=Pt.getStyleFunction()||s;if(!jt)continue;let Kt=jt(Pt,d);if(!Kt)continue;Array.isArray(Kt)||(Kt=[Kt]);const Qt=(wt*Rt).toString(16).padStart(7,"#00000");for(let zt=0,$t=Kt.length;zt<$t;++zt){const Yt=Kt[zt],fe=Yt.getGeometryFunction()(Pt);if(!fe||!(0,ce.kK)(_,fe.getExtent()))continue;const ge=Yt.clone(),Ie=ge.getFill();Ie&&Ie.setColor(Qt);const ve=ge.getStroke();ve&&(ve.setColor(Qt),ve.setLineDash(null)),ge.setText(void 0);const _e=Yt.getImage();if(_e){const ue=_e.getImageSize();if(!ue)continue;const he=(0,pe.E4)(ue[0],ue[1],void 0,{alpha:!1}),Re=he.canvas;he.fillStyle=Qt,he.fillRect(0,0,Re.width,Re.height),ge.setImage(new N.Z({img:Re,anchor:_e.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:_e.getOrigin(),opacity:1,size:_e.getSize(),scale:_e.getScale(),rotation:_e.getRotation(),rotateWithView:_e.getRotateWithView()}))}const Ze=ge.getZIndex()||0;let ye=Lt[Ze];ye||(ye={},Lt[Ze]=ye,ye.Polygon=[],ye.Circle=[],ye.LineString=[],ye.Point=[]);const oe=fe.getType();if("GeometryCollection"===oe){const ue=fe.getGeometriesArrayRecursive();for(let he=0,Re=ue.length;he<Re;++he){const Pe=ue[he];ye[Pe.getType().replace("Multi","")].push(Pe,ge)}}else ye[oe.replace("Multi","")].push(fe,ge)}}const Ot=Object.keys(Lt).map(Number).sort(n.j2);for(let wt=0,Pt=Ot.length;wt<Pt;++wt){const jt=Lt[Ot[wt]];for(const Kt in jt){const Jt=jt[Kt];for(let Qt=0,zt=Jt.length;Qt<zt;Qt+=2){_t.setStyle(Jt[Qt+1]);for(let $t=0,Yt=t.length;$t<Yt;++$t)_t.setTransform(t[$t]),_t.drawGeometry(Jt[Qt])}}}return J.getImageData(0,0,st.width,st.height)}(s,st,this.renderedFeatures_,J.getStyleFunction(),b,d,T)}i(function ii(x,t,i){const s=[];if(i){const _=Math.floor(Math.round(x[0])*Te),d=Math.floor(Math.round(x[1])*Te),T=4*((0,Ae.uZ)(_,0,i.width-1)+(0,Ae.uZ)(d,0,i.height-1)*i.width),st=i.data[T+2]+256*(i.data[T+1]+256*i.data[T]),_t=Math.floor(16777215/t.length);st&&st%_t==0&&s.push(t[st/_t-1])}return s}(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,i,s,_,d){if(!this.replayGroup_)return;const T=i.viewState.resolution,M=i.viewState.rotation,b=this.getLayer(),J={},st=function(Rt,Lt,Ot){const wt=(0,ri.sq)(Rt),Pt=J[wt];if(Pt){if(!0!==Pt&&Ot<Pt.distanceSq){if(0===Ot)return J[wt]=!0,d.splice(d.lastIndexOf(Pt),1),_(Rt,b,Lt);Pt.geometry=Lt,Pt.distanceSq=Ot}}else{if(0===Ot)return J[wt]=!0,_(Rt,b,Lt);d.push(J[wt]={feature:Rt,layer:b,geometry:Lt,distanceSq:Ot,callback:_})}};let _t;const ft=[this.replayGroup_];return this.declutterExecutorGroup&&ft.push(this.declutterExecutorGroup),ft.some(Rt=>_t=Rt.forEachFeatureAtCoordinate(t,T,M,s,st,Rt===this.declutterExecutorGroup&&i.declutterTree?i.declutterTree.all().map(Lt=>Lt.value):null)),_t}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const i=this.getLayer(),s=i.getSource();if(!s)return!1;const _=t.viewHints[Ue.Z.ANIMATING],d=t.viewHints[Ue.Z.INTERACTING],T=i.getUpdateWhileAnimating(),M=i.getUpdateWhileInteracting();if(this.ready&&!T&&_||!M&&d)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const b=t.extent,J=t.viewState,st=J.projection,_t=J.resolution,ft=t.pixelRatio,Rt=i.getRevision(),Lt=i.getRenderBuffer();let Ot=i.getRenderOrder();void 0===Ot&&(Ot=Ji);const wt=J.center.slice(),Pt=(0,ce.f3)(b,Lt*_t),jt=Pt.slice(),Kt=[Pt.slice()],Jt=st.getExtent();if(s.getWrapX()&&st.canWrapX()&&!(0,ce.r4)(Jt,t.extent)){const oe=(0,ce.dz)(Jt),ue=Math.max((0,ce.dz)(Pt)/2,oe);Pt[0]=Jt[0]-ue,Pt[2]=Jt[2]+ue,(0,bn.Cf)(wt,st);const he=(0,ce.Cf)(Kt[0],st);he[0]<Jt[0]&&he[2]<Jt[2]?Kt.push([he[0]+oe,he[1],he[2]+oe,he[3]]):he[0]>Jt[0]&&he[2]>Jt[2]&&Kt.push([he[0]-oe,he[1],he[2]-oe,he[3]])}if(this.ready&&this.renderedResolution_==_t&&this.renderedRevision_==Rt&&this.renderedRenderOrder_==Ot&&(0,ce.r4)(this.wrappedRenderedExtent_,Pt))return(0,n.fS)(this.renderedExtent_,jt)||(this.hitDetectionImageData_=null,this.renderedExtent_=jt),this.renderedCenter_=wt,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const Qt=new Li($i(_t,ft),Pt,_t,ft);let zt;this.getLayer().getDeclutter()&&(zt=new Li($i(_t,ft),Pt,_t,ft));const $t=(0,ci.Cs)();let Yt;if($t){for(let oe=0,ue=Kt.length;oe<ue;++oe){const Re=(0,ci.Fj)(Kt[oe],st);s.loadFeatures(Re,(0,ci.on)(_t,st),$t)}Yt=(0,ci.WO)($t,st)}else for(let oe=0,ue=Kt.length;oe<ue;++oe)s.loadFeatures(Kt[oe],_t,st);const fe=function Rn(x,t){const i=$i(x,t);return i*i}(_t,ft);let ge=!0;const Ie=oe=>{let ue;const he=oe.getStyleFunction()||i.getStyleFunction();if(he&&(ue=he(oe,_t)),ue){const Re=this.renderFeature(oe,fe,ue,Qt,Yt,zt);ge=ge&&!Re}},ve=(0,ci.Fj)(Pt,st),_e=s.getFeaturesInExtent(ve);Ot&&_e.sort(Ot);for(let oe=0,ue=_e.length;oe<ue;++oe)Ie(_e[oe]);this.renderedFeatures_=_e,this.ready=ge;const Ze=Qt.finish(),ye=new Ei(Pt,_t,ft,s.getOverlaps(),Ze,i.getRenderBuffer());return zt&&(this.declutterExecutorGroup=new Ei(Pt,_t,ft,s.getOverlaps(),zt.finish(),i.getRenderBuffer())),this.renderedResolution_=_t,this.renderedRevision_=Rt,this.renderedRenderOrder_=Ot,this.renderedExtent_=jt,this.wrappedRenderedExtent_=Pt,this.renderedCenter_=wt,this.renderedProjection_=st,this.replayGroup_=ye,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,i,s,_,d,T){if(!s)return!1;let M=!1;if(Array.isArray(s))for(let b=0,J=s.length;b<J;++b)M=ln(_,t,s[b],i,this.boundHandleStyleImageChange_,d,T)||M;else M=ln(_,t,s,i,this.boundHandleStyleImageChange_,d,T);return M}},Wn=class Nn extends me{constructor(t){super(t)}createRenderer(){return new Zn(this)}}},3469:(Gt,mt,h)=>{"use strict";function Q(n,R,g){return Math.min(Math.max(n,R),g)}function W(n,R,g,y,p,w){const m=p-g,I=w-y;if(0!==m||0!==I){const f=((n-g)*m+(R-y)*I)/(m*m+I*I);f>1?(g=p,y=w):f>0&&(g+=m*f,y+=I*f)}return nt(n,R,g,y)}function nt(n,R,g,y){const p=g-n,w=y-R;return p*p+w*w}function H(n){const R=n.length;for(let y=0;y<R;y++){let p=y,w=Math.abs(n[y][y]);for(let I=y+1;I<R;I++){const f=Math.abs(n[I][y]);f>w&&(w=f,p=I)}if(0===w)return null;const m=n[p];n[p]=n[y],n[y]=m;for(let I=y+1;I<R;I++){const f=-n[I][y]/n[y][y];for(let F=y;F<R+1;F++)y==F?n[I][F]=0:n[I][F]+=f*n[y][F]}}const g=new Array(R);for(let y=R-1;y>=0;y--){g[y]=n[y][R]/n[y][y];for(let p=y-1;p>=0;p--)n[p][R]-=n[p][y]*g[y]}return g}function N(n){return n*Math.PI/180}function G(n,R){const g=n%R;return g*R<0?g+R:g}function O(n,R,g){return n+g*(R-n)}function u(n,R){const g=Math.pow(10,R);return Math.round(n*g)/g}function l(n,R){return Math.floor(u(n,R))}function a(n,R){return Math.ceil(u(n,R))}h.d(mt,{$W:()=>G,FH:()=>u,GW:()=>l,SV:()=>H,Yr:()=>N,bI:()=>nt,mD:()=>a,rU:()=>W,t7:()=>O,uZ:()=>Q})},925:(Gt,mt,h)=>{"use strict";function Q(nt){for(const H in nt)delete nt[H]}function W(nt){let H;for(H in nt)return!1;return!H}h.d(mt,{Z:()=>Q,x:()=>W})},2064:(Gt,mt,h)=>{"use strict";h.d(mt,{Wm:()=>nt,UQ:()=>P,h_:()=>K,OP:()=>ie,Vs:()=>te,dY:()=>be,U2:()=>St,_Q:()=>bt,Ck:()=>vt,WO:()=>le,Cs:()=>Wt,lO:()=>Ht,Fj:()=>xe,on:()=>Ke,vs:()=>c,eL:()=>Vt});const nt={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},S=class H{constructor(gt){this.code_=gt.code,this.units_=gt.units,this.extent_=void 0!==gt.extent?gt.extent:null,this.worldExtent_=void 0!==gt.worldExtent?gt.worldExtent:null,this.axisOrientation_=void 0!==gt.axisOrientation?gt.axisOrientation:"enu",this.global_=void 0!==gt.global&&gt.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=gt.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=gt.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||nt[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(gt){this.global_=gt,this.canWrapX_=!(!gt||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(gt){this.defaultTileGrid_=gt}setExtent(gt){this.extent_=gt,this.canWrapX_=!(!this.global_||!gt)}setWorldExtent(gt){this.worldExtent_=gt}setGetPointResolution(gt){this.getPointResolutionFunc_=gt}getPointResolutionFunc(){return this.getPointResolutionFunc_}},N=6378137,G=Math.PI*N,O=[-G,-G,G,G],u=[-180,-85,180,85],o=N*Math.log(Math.tan(Math.PI/2));class l extends S{constructor(gt){super({code:gt,units:"m",extent:O,global:!0,worldExtent:u,getPointResolution:function(Ct,Mt){return Ct/Math.cosh(Mt[1]/N)}})}}const a=[new l("EPSG:3857"),new l("EPSG:102100"),new l("EPSG:102113"),new l("EPSG:900913"),new l("http://www.opengis.net/def/crs/EPSG/0/3857"),new l("http://www.opengis.net/gml/srs/epsg.xml#3857")];function n(ct,gt,Ct){const Mt=ct.length;Ct=Ct>1?Ct:2,void 0===gt&&(gt=Ct>2?ct.slice():new Array(Mt));for(let Zt=0;Zt<Mt;Zt+=Ct){gt[Zt]=G*ct[Zt]/180;let qt=N*Math.log(Math.tan(Math.PI*(+ct[Zt+1]+90)/360));qt>o?qt=o:qt<-o&&(qt=-o),gt[Zt+1]=qt}return gt}function R(ct,gt,Ct){const Mt=ct.length;Ct=Ct>1?Ct:2,void 0===gt&&(gt=Ct>2?ct.slice():new Array(Mt));for(let Zt=0;Zt<Mt;Zt+=Ct)gt[Zt]=180*ct[Zt]/G,gt[Zt+1]=360*Math.atan(Math.exp(ct[Zt+1]/N))/Math.PI-90;return gt}const y=[-180,-90,180,90],p=6378137*Math.PI/180;class w extends S{constructor(gt,Ct){super({code:gt,units:"degrees",extent:y,axisOrientation:Ct,global:!0,metersPerUnit:p,worldExtent:y})}}const m=[new w("CRS:84"),new w("EPSG:4326","neu"),new w("urn:ogc:def:crs:OGC:1.3:CRS84"),new w("urn:ogc:def:crs:OGC:2:84"),new w("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new w("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new w("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let I={},U={};function tt(ct,gt,Ct){const Mt=ct.getCode(),Zt=gt.getCode();Mt in U||(U[Mt]={}),U[Mt][Zt]=Ct}var at=h(4654),D=h(722),C=h(3469);const r=6371008.8;function E(ct,gt,Ct){Ct=Ct||r;const Mt=(0,C.Yr)(ct[1]),Zt=(0,C.Yr)(gt[1]),qt=(Zt-Mt)/2,ee=(0,C.Yr)(gt[0]-ct[0])/2,de=Math.sin(qt)*Math.sin(qt)+Math.sin(ee)*Math.sin(ee)*Math.cos(Mt)*Math.cos(Zt);return 2*Ct*Math.atan2(Math.sqrt(de),Math.sqrt(1-de))}var L=h(9608);let z=!0;function K(ct){z=!(void 0===ct||ct)}function j(ct,gt){if(void 0!==gt)for(let Ct=0,Mt=ct.length;Ct<Mt;++Ct)gt[Ct]=ct[Ct];else gt=ct.slice();return gt}function it(ct,gt){if(void 0!==gt&&ct!==gt){for(let Ct=0,Mt=ct.length;Ct<Mt;++Ct)gt[Ct]=ct[Ct];ct=gt}return ct}function lt(ct){(function ot(ct,gt){I[ct]=gt})(ct.getCode(),ct),tt(ct,ct,j)}function St(ct){return"string"==typeof ct?function F(ct){return I[ct]||I[ct.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(ct):ct||null}function bt(ct,gt,Ct,Mt){let Zt;const qt=(ct=St(ct)).getPointResolutionFunc();if(qt){if(Zt=qt(gt,Ct),Mt&&Mt!==ct.getUnits()){const ee=ct.getMetersPerUnit();ee&&(Zt=Zt*ee/nt[Mt])}}else{const ee=ct.getUnits();if("degrees"==ee&&!Mt||"degrees"==Mt)Zt=gt;else{const de=le(ct,St("EPSG:4326"));if(de===it&&"degrees"!==ee)Zt=gt*ct.getMetersPerUnit();else{let me=[Ct[0]-gt/2,Ct[1],Ct[0]+gt/2,Ct[1],Ct[0],Ct[1]-gt/2,Ct[0],Ct[1]+gt/2];me=de(me,me,2),Zt=(E(me.slice(0,2),me.slice(2,4))+E(me.slice(4,6),me.slice(6,8)))/2}const re=Mt?nt[Mt]:ct.getMetersPerUnit();void 0!==re&&(Zt/=re)}}return Zt}function Ft(ct){(function yt(ct){ct.forEach(lt)})(ct),ct.forEach(function(gt){ct.forEach(function(Ct){gt!==Ct&&tt(gt,Ct,j)})})}function P(ct,gt){return ct?"string"==typeof ct?St(ct):ct:St(gt)}function ie(ct,gt){if(ct===gt)return!0;const Ct=ct.getUnits()===gt.getUnits();return(ct.getCode()===gt.getCode()||le(ct,gt)===j)&&Ct}function le(ct,gt){let Zt=function xt(ct,gt){let Ct;return ct in U&&gt in U[ct]&&(Ct=U[ct][gt]),Ct}(ct.getCode(),gt.getCode());return Zt||(Zt=it),Zt}function vt(ct,gt){return le(St(ct),St(gt))}function c(ct,gt,Ct){return vt(gt,Ct)(ct,void 0,ct.length)}function X(ct,gt,Ct,Mt){const Zt=vt(gt,Ct);return(0,at.Ne)(ct,Zt,void 0,Mt)}let Et=null;function Wt(){return Et}function Vt(){!function Tt(ct){Et=St(ct)}("EPSG:4326")}function Ht(ct,gt){return Et?c(ct,gt,Et):ct}function te(ct,gt){return Et?c(ct,Et,gt):(z&&!(0,D.fS)(ct,[0,0])&&ct[0]>=-180&&ct[0]<=180&&ct[1]>=-90&&ct[1]<=90&&(z=!1,(0,L.ZK)("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),ct)}function xe(ct,gt){return Et?X(ct,gt,Et):ct}function be(ct,gt){return Et?X(ct,Et,gt):ct}function Ke(ct,gt){if(!Et)return ct;const Ct=St(gt).getUnits(),Mt=Et.getUnits();return Ct&&Mt?ct*nt[Ct]/nt[Mt]:ct}!function Xe(){Ft(a),Ft(m),function Xt(ct,gt,Ct,Mt){ct.forEach(function(Zt){gt.forEach(function(qt){tt(Zt,qt,Ct),tt(qt,Zt,Mt)})})}(m,a,n,R)}()},6008:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>nt});var Q=h(9395);const nt=class W extends Q.ZP{constructor(S,N,G,O){super(S),this.inversePixelTransform=N,this.frameState=G,this.context=O}}},4074:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>Q});const Q={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},748:(Gt,mt,h)=>{"use strict";h.d(mt,{Df:()=>N,He:()=>o,Kd:()=>tt,PH:()=>R,Qx:()=>F,Tx:()=>n,V4:()=>a,X9:()=>u,Zw:()=>ht,_f:()=>at,bL:()=>G,mb:()=>O,oB:()=>y,rc:()=>l,ru:()=>g,sG:()=>w,yC:()=>p});var Q=h(7221),W=h(8072),nt=h(925),H=h(7120),S=h(4096);const N="10px sans-serif",G="#000",O="round",u=[],o=0,l="round",a=10,n="#000",R="center",g="middle",y=[0,0,0,0],p=1,w=new Q.Z;let I,m=null;const f={},F=function(){const r="32px ",E=["monospace","serif"],A=E.length,B="wmytzilWMYTZIL@#/&?$%10\uf013";let $,et;function k(z,K,j){let it=!0;for(let lt=0;lt<A;++lt){const yt=E[lt];if(et=q(z+" "+K+" "+r+yt,B),j!=yt){const St=q(z+" "+K+" "+r+j+","+yt,B);it=it&&St!=et}}return!!it}function L(){let z=!0;const K=w.getKeys();for(let j=0,it=K.length;j<it;++j){const lt=K[j];w.get(lt)<100&&(k.apply(this,lt.split("\n"))?((0,nt.Z)(f),m=null,I=void 0,w.set(lt,100)):(w.set(lt,w.get(lt)+1,!0),z=!1))}z&&(clearInterval($),$=void 0)}return function(z){const K=(0,S.p)(z);if(!K)return;const j=K.families;for(let it=0,lt=j.length;it<lt;++it){const yt=j[it],St=K.style+"\n"+K.weight+"\n"+yt;void 0===w.get(St)&&(w.set(St,100,!0),k(K.style,K.weight,yt)||(w.set(St,0,!0),void 0===$&&($=setInterval(L,32))))}}}(),ot=function(){let C;return function(r){let E=f[r];if(null==E){if(W.Id){const A=(0,S.p)(r),B=U(r,"\u017dg");E=(isNaN(Number(A.lineHeight))?1.2:Number(A.lineHeight))*(B.actualBoundingBoxAscent+B.actualBoundingBoxDescent)}else C||(C=document.createElement("div"),C.innerHTML="M",C.style.minHeight="0",C.style.maxHeight="none",C.style.height="auto",C.style.padding="0",C.style.border="none",C.style.position="absolute",C.style.display="block",C.style.left="-99999px"),C.style.font=r,document.body.appendChild(C),E=C.offsetHeight,document.body.removeChild(C);f[r]=E}return E}}();function U(C,r){return m||(m=(0,H.E4)(1,1)),C!=I&&(m.font=C,I=m.font),m.measureText(r)}function q(C,r){return U(C,r).width}function tt(C,r,E){if(r in E)return E[r];const A=r.split("\n").reduce((B,$)=>Math.max(B,q(C,$)),0);return E[r]=A,A}function ht(C,r){const E=[],A=[],B=[];let $=0,et=0,k=0,L=0;for(let z=0,K=r.length;z<=K;z+=2){const j=r[z];if("\n"===j||z===K){$=Math.max($,et),B.push(et),et=0,k+=L;continue}const it=r[z+1]||C.font,lt=q(it,j);E.push(lt),et+=lt;const yt=ot(it);A.push(yt),L=Math.max(L,yt)}return{width:$,height:k,widths:E,heights:A,lineWidths:B}}function at(C,r,E,A,B,$,et,k,L,z,K){C.save(),1!==E&&(C.globalAlpha*=E),r&&C.transform.apply(C,r),A.contextInstructions?(C.translate(L,z),C.scale(K[0],K[1]),function D(C,r){const E=C.contextInstructions;for(let A=0,B=E.length;A<B;A+=2)Array.isArray(E[A+1])?r[E[A]].apply(r,E[A+1]):r[E[A]]=E[A+1]}(A,C)):K[0]<0||K[1]<0?(C.translate(L,z),C.scale(K[0],K[1]),C.drawImage(A,B,$,et,k,0,0,et,k)):C.drawImage(A,B,$,et,k,L,z,et*K[0],k*K[1]),C.restore()}},5717:(Gt,mt,h)=>{"use strict";h.d(mt,{r:()=>R,Z:()=>w});var Q=h(8688),W=h(1084),nt=h(7210),H=h(9070);const N=class S extends nt.Z{constructor(I){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=I,this.declutterExecutorGroup=null}getFeatures(I){return(0,H.O3)()}getData(I){return null}prepareFrame(I){return(0,H.O3)()}renderFrame(I,f){return(0,H.O3)()}loadedTileCallback(I,f,F){I[f]||(I[f]={}),I[f][F.tileCoord.toString()]=F}createLoadedTileFinder(I,f,F){return(ot,U)=>{const q=this.loadedTileCallback.bind(this,F,ot);return I.forEachLoadedTile(f,ot,U,q)}}forEachFeatureAtCoordinate(I,f,F,ot,U){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(I){const f=I.target;(f.getState()===W.Z.LOADED||f.getState()===W.Z.ERROR)&&this.renderIfReadyAndVisible()}loadImage(I){let f=I.getState();return f!=W.Z.LOADED&&f!=W.Z.ERROR&&I.addEventListener(Q.Z.CHANGE,this.boundHandleImageChange_),f==W.Z.IDLE&&(I.load(),f=I.getState()),f==W.Z.LOADED}renderIfReadyAndVisible(){const I=this.getLayer();I&&I.getVisible()&&"ready"===I.getSourceState()&&I.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}};var G=h(6008),O=h(4074),u=h(9664),o=h(9145),l=h(7120),a=h(7555),n=h(4654);const R=[];let g=null;const w=class p extends N{constructor(I){super(I),this.container=null,this.tempTransform=(0,u.Ue)(),this.pixelTransform=(0,u.Ue)(),this.inversePixelTransform=(0,u.Ue)(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(I,f,F){let ot;g||function y(){g=(0,l.E4)(1,1,void 0,{willReadFrequently:!0})}(),g.clearRect(0,0,1,1);try{g.drawImage(I,f,F,1,1,0,0,1,1),ot=g.getImageData(0,0,1,1).data}catch{return g=null,null}return ot}getBackground(I){let F=this.getLayer().getBackground();return"function"==typeof F&&(F=F(I.viewState.resolution)),F||void 0}useContainer(I,f,F){const ot=this.getLayer().getClassName();let U,q;if(I&&I.className===ot&&(!F||I&&I.style.backgroundColor&&(0,a.fS)((0,o._2)(I.style.backgroundColor),(0,o._2)(F)))){const tt=I.firstElementChild;tt instanceof HTMLCanvasElement&&(q=tt.getContext("2d"))}if(q&&q.canvas.style.transform===f?(this.container=I,this.context=q,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){U=document.createElement("div"),U.className=ot;let tt=U.style;tt.position="absolute",tt.width="100%",tt.height="100%",q=(0,l.E4)();const ht=q.canvas;U.appendChild(ht),tt=ht.style,tt.position="absolute",tt.left="0",tt.transformOrigin="top left",this.container=U,this.context=q}!this.containerReused&&F&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=F)}clipUnrotated(I,f,F){const ot=(0,n.rL)(F),U=(0,n.Xv)(F),q=(0,n.w$)(F),tt=(0,n.hC)(F);(0,u.nn)(f.coordinateToPixelTransform,ot),(0,u.nn)(f.coordinateToPixelTransform,U),(0,u.nn)(f.coordinateToPixelTransform,q),(0,u.nn)(f.coordinateToPixelTransform,tt);const ht=this.inversePixelTransform;(0,u.nn)(ht,ot),(0,u.nn)(ht,U),(0,u.nn)(ht,q),(0,u.nn)(ht,tt),I.save(),I.beginPath(),I.moveTo(Math.round(ot[0]),Math.round(ot[1])),I.lineTo(Math.round(U[0]),Math.round(U[1])),I.lineTo(Math.round(q[0]),Math.round(q[1])),I.lineTo(Math.round(tt[0]),Math.round(tt[1])),I.clip()}dispatchRenderEvent_(I,f,F){const ot=this.getLayer();if(ot.hasListener(I)){const U=new G.Z(I,this.inversePixelTransform,F,f);ot.dispatchEvent(U)}}preRender(I,f){this.frameState=f,this.dispatchRenderEvent_(O.Z.PRERENDER,I,f)}postRender(I,f){this.dispatchRenderEvent_(O.Z.POSTRENDER,I,f)}getRenderTransform(I,f,F,ot,U,q,tt){const at=ot/f;return(0,u.qC)(this.tempTransform,U/2,q/2,at,-at,-F,-I[0]+tt,-I[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}}},9788:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>ot});var W=h(8688),nt=h(6323),H=h(6614),S=h(4654),N=h(2064),G=h(3469);var a=h(7120);let n;const R=[];function g(U,q,tt,ht,xt){U.beginPath(),U.moveTo(0,0),U.lineTo(q,tt),U.lineTo(ht,xt),U.closePath(),U.save(),U.clip(),U.fillRect(0,0,Math.max(q,ht)+1,Math.max(tt,xt)),U.restore()}function y(U,q){return Math.abs(U[4*q]-210)>2||Math.abs(U[4*q+3]-191.25)>2}function w(U,q,tt,ht){const xt=(0,N.vs)(tt,q,U);let at=(0,N._Q)(q,ht,tt);const D=q.getMetersPerUnit();void 0!==D&&(at*=D);const C=U.getMetersPerUnit();void 0!==C&&(at/=C);const r=U.getExtent();if(!r||(0,S.b8)(r,xt)){const E=(0,N._Q)(U,at,xt)/at;isFinite(E)&&E>0&&(at/=E)}return at}var f=h(7796);const ot=class F extends nt.Z{constructor(q,tt,ht,xt,at,D,C,r,E,A,B,$){super(at,H.Z.IDLE,{interpolate:!!$}),this.renderEdges_=void 0!==B&&B,this.pixelRatio_=C,this.gutter_=r,this.canvas_=null,this.sourceTileGrid_=tt,this.targetTileGrid_=xt,this.wrappedTileCoord_=D||at,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const et=xt.getTileCoordExtent(this.wrappedTileCoord_),k=this.targetTileGrid_.getExtent();let L=this.sourceTileGrid_.getExtent();const z=k?(0,S.Ed)(et,k):et;if(0===(0,S.bg)(z))return void(this.state=H.Z.EMPTY);const K=q.getExtent();K&&(L=L?(0,S.Ed)(L,K):K);const j=xt.getResolution(this.wrappedTileCoord_[0]),it=function m(U,q,tt,ht){const xt=(0,S.qg)(tt);let at=w(U,q,xt,ht);return(!isFinite(at)||at<=0)&&(0,S.H6)(tt,function(D){return at=w(U,q,D,ht),isFinite(at)&&at>0}),at}(q,ht,z,j);if(!isFinite(it)||it<=0)return void(this.state=H.Z.EMPTY);if(this.triangulation_=new class o{constructor(q,tt,ht,xt,at,D){this.sourceProj_=q,this.targetProj_=tt;let C={};const r=(0,N.Ck)(this.targetProj_,this.sourceProj_);this.transformInv_=function(j){const it=j[0]+"/"+j[1];return C[it]||(C[it]=r(j)),C[it]},this.maxSourceExtent_=xt,this.errorThresholdSquared_=at*at,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!xt&&!!this.sourceProj_.getExtent()&&(0,S.dz)(xt)>=(0,S.dz)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,S.dz)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,S.dz)(this.targetProj_.getExtent()):null;const E=(0,S.rL)(ht),A=(0,S.Xv)(ht),B=(0,S.w$)(ht),$=(0,S.hC)(ht),et=this.transformInv_(E),k=this.transformInv_(A),L=this.transformInv_(B),z=this.transformInv_($),K=10+(D?Math.max(0,Math.ceil(Math.log2((0,S.bg)(ht)/(D*D*256*256)))):0);if(this.addQuad_(E,A,B,$,et,k,L,z,K),this.wrapsXInSource_){let j=1/0;this.triangles_.forEach(function(it,lt,yt){j=Math.min(j,it.source[0][0],it.source[1][0],it.source[2][0])}),this.triangles_.forEach(it=>{if(Math.max(it.source[0][0],it.source[1][0],it.source[2][0])-j>this.sourceWorldWidth_/2){const lt=[[it.source[0][0],it.source[0][1]],[it.source[1][0],it.source[1][1]],[it.source[2][0],it.source[2][1]]];lt[0][0]-j>this.sourceWorldWidth_/2&&(lt[0][0]-=this.sourceWorldWidth_),lt[1][0]-j>this.sourceWorldWidth_/2&&(lt[1][0]-=this.sourceWorldWidth_),lt[2][0]-j>this.sourceWorldWidth_/2&&(lt[2][0]-=this.sourceWorldWidth_);const yt=Math.min(lt[0][0],lt[1][0],lt[2][0]);Math.max(lt[0][0],lt[1][0],lt[2][0])-yt<this.sourceWorldWidth_/2&&(it.source=lt)}})}C={}}addTriangle_(q,tt,ht,xt,at,D){this.triangles_.push({source:[xt,at,D],target:[q,tt,ht]})}addQuad_(q,tt,ht,xt,at,D,C,r,E){const A=(0,S.hI)([at,D,C,r]),B=this.sourceWorldWidth_?(0,S.dz)(A)/this.sourceWorldWidth_:null,$=this.sourceWorldWidth_,et=this.sourceProj_.canWrapX()&&B>.5&&B<1;let k=!1;if(E>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const z=(0,S.hI)([q,tt,ht,xt]);k=(0,S.dz)(z)/this.targetWorldWidth_>.25||k}!et&&this.sourceProj_.isGlobal()&&B&&(k=B>.25||k)}if(!k&&this.maxSourceExtent_&&isFinite(A[0])&&isFinite(A[1])&&isFinite(A[2])&&isFinite(A[3])&&!(0,S.kK)(A,this.maxSourceExtent_))return;let L=0;if(!(k||isFinite(at[0])&&isFinite(at[1])&&isFinite(D[0])&&isFinite(D[1])&&isFinite(C[0])&&isFinite(C[1])&&isFinite(r[0])&&isFinite(r[1])))if(E>0)k=!0;else if(L=(isFinite(at[0])&&isFinite(at[1])?0:8)+(isFinite(D[0])&&isFinite(D[1])?0:4)+(isFinite(C[0])&&isFinite(C[1])?0:2)+(isFinite(r[0])&&isFinite(r[1])?0:1),1!=L&&2!=L&&4!=L&&8!=L)return;if(E>0){if(!k){const K=this.transformInv_([(q[0]+ht[0])/2,(q[1]+ht[1])/2]);let j;j=et?((0,G.$W)(at[0],$)+(0,G.$W)(C[0],$))/2-(0,G.$W)(K[0],$):(at[0]+C[0])/2-K[0];const it=(at[1]+C[1])/2-K[1];k=j*j+it*it>this.errorThresholdSquared_}if(k){if(Math.abs(q[0]-ht[0])<=Math.abs(q[1]-ht[1])){const z=[(tt[0]+ht[0])/2,(tt[1]+ht[1])/2],K=this.transformInv_(z),j=[(xt[0]+q[0])/2,(xt[1]+q[1])/2],it=this.transformInv_(j);this.addQuad_(q,tt,z,j,at,D,K,it,E-1),this.addQuad_(j,z,ht,xt,it,K,C,r,E-1)}else{const z=[(q[0]+tt[0])/2,(q[1]+tt[1])/2],K=this.transformInv_(z),j=[(ht[0]+xt[0])/2,(ht[1]+xt[1])/2],it=this.transformInv_(j);this.addQuad_(q,z,j,xt,at,K,it,r,E-1),this.addQuad_(z,tt,ht,j,K,D,C,it,E-1)}return}}if(et){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}11&L||this.addTriangle_(q,ht,xt,at,C,r),14&L||this.addTriangle_(q,ht,tt,at,C,D),L&&(13&L||this.addTriangle_(tt,xt,q,D,r,at),7&L||this.addTriangle_(tt,xt,ht,D,r,C))}calculateSourceExtent(){const q=(0,S.lJ)();return this.triangles_.forEach(function(tt,ht,xt){const at=tt.source;(0,S.Wj)(q,at[0]),(0,S.Wj)(q,at[1]),(0,S.Wj)(q,at[2])}),q}getTriangles(){return this.triangles_}}(q,ht,z,L,it*(void 0!==A?A:.5),j),0===this.triangulation_.getTriangles().length)return void(this.state=H.Z.EMPTY);this.sourceZ_=tt.getZForResolution(it);let yt=this.triangulation_.calculateSourceExtent();if(L&&(q.canWrapX()?(yt[1]=(0,G.uZ)(yt[1],L[1],L[3]),yt[3]=(0,G.uZ)(yt[3],L[1],L[3])):yt=(0,S.Ed)(yt,L)),(0,S.bg)(yt)){const St=tt.getTileRangeForExtentAndZ(yt,this.sourceZ_);for(let bt=St.minX;bt<=St.maxX;bt++)for(let Ft=St.minY;Ft<=St.maxY;Ft++){const Xt=E(this.sourceZ_,bt,Ft,C);Xt&&this.sourceTiles_.push(Xt)}0===this.sourceTiles_.length&&(this.state=H.Z.EMPTY)}else this.state=H.Z.EMPTY}getImage(){return this.canvas_}reproject_(){const q=[];if(this.sourceTiles_.forEach(tt=>{tt&&tt.getState()==H.Z.LOADED&&q.push({extent:this.sourceTileGrid_.getTileCoordExtent(tt.tileCoord),image:tt.getImage()})}),this.sourceTiles_.length=0,0===q.length)this.state=H.Z.ERROR;else{const tt=this.wrappedTileCoord_[0],ht=this.targetTileGrid_.getTileSize(tt),xt="number"==typeof ht?ht:ht[0],at="number"==typeof ht?ht:ht[1],D=this.targetTileGrid_.getResolution(tt),C=this.sourceTileGrid_.getResolution(this.sourceZ_),r=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function I(U,q,tt,ht,xt,at,D,C,r,E,A,B){const $=(0,a.E4)(Math.round(tt*U),Math.round(tt*q),R);if(B||($.imageSmoothingEnabled=!1),0===r.length)return $.canvas;function et(lt){return Math.round(lt*tt)/tt}$.scale(tt,tt),$.globalCompositeOperation="lighter";const k=(0,S.lJ)();r.forEach(function(lt,yt,St){(0,S.l7)(k,lt.extent)});const L=(0,S.dz)(k),z=(0,S.Cr)(k),K=(0,a.E4)(Math.round(tt*L/ht),Math.round(tt*z/ht),R);B||(K.imageSmoothingEnabled=!1);const j=tt/ht;r.forEach(function(lt,yt,St){const bt=lt.extent[0]-k[0],Ft=-(lt.extent[3]-k[3]),Xt=(0,S.dz)(lt.extent),ae=(0,S.Cr)(lt.extent);lt.image.width>0&&lt.image.height>0&&K.drawImage(lt.image,E,E,lt.image.width-2*E,lt.image.height-2*E,bt*j,Ft*j,Xt*j,ae*j)});const it=(0,S.rL)(D);return C.getTriangles().forEach(function(lt,yt,St){const bt=lt.source,Ft=lt.target;let Xt=bt[0][0],ae=bt[0][1],P=bt[1][0],rt=bt[1][1],ut=bt[2][0],Dt=bt[2][1];const Ut=et((Ft[0][0]-it[0])/at),ie=et(-(Ft[0][1]-it[1])/at),le=et((Ft[1][0]-it[0])/at),vt=et(-(Ft[1][1]-it[1])/at),c=et((Ft[2][0]-it[0])/at),X=et(-(Ft[2][1]-it[1])/at),V=Xt,Et=ae;Xt=0,ae=0,P-=V,rt-=Et,ut-=V,Dt-=Et;const It=(0,G.SV)([[P,rt,0,0,le-Ut],[ut,Dt,0,0,c-Ut],[0,0,P,rt,vt-ie],[0,0,ut,Dt,X-ie]]);if(It){if($.save(),$.beginPath(),function p(){if(void 0===n){const U=(0,a.E4)(6,6,R);U.globalCompositeOperation="lighter",U.fillStyle="rgba(210, 0, 0, 0.75)",g(U,4,5,4,0),g(U,4,5,0,5);const q=U.getImageData(0,0,3,3).data;n=y(q,0)||y(q,4)||y(q,8),(0,a.jy)(U),R.push(U.canvas)}return n}()||!B){$.moveTo(le,vt);const Wt=4,Vt=Ut-le,Ht=ie-vt;for(let te=0;te<Wt;te++)$.lineTo(le+et((te+1)*Vt/Wt),vt+et(te*Ht/(Wt-1))),te!=Wt-1&&$.lineTo(le+et((te+1)*Vt/Wt),vt+et((te+1)*Ht/(Wt-1)));$.lineTo(c,X)}else $.moveTo(le,vt),$.lineTo(Ut,ie),$.lineTo(c,X);$.clip(),$.transform(It[0],It[2],It[1],It[3],Ut,ie),$.translate(k[0]-V,k[3]-Et),$.scale(ht/tt,-ht/tt),$.drawImage(K.canvas,0,0),$.restore()}}),(0,a.jy)(K),R.push(K.canvas),A&&($.save(),$.globalCompositeOperation="source-over",$.strokeStyle="black",$.lineWidth=1,C.getTriangles().forEach(function(lt,yt,St){const bt=lt.target,Ft=(bt[0][0]-it[0])/at,Xt=-(bt[0][1]-it[1])/at,ae=(bt[1][0]-it[0])/at,P=-(bt[1][1]-it[1])/at,rt=(bt[2][0]-it[0])/at,ut=-(bt[2][1]-it[1])/at;$.beginPath(),$.moveTo(ae,P),$.lineTo(Ft,Xt),$.lineTo(rt,ut),$.closePath(),$.stroke()}),$.restore()),$.canvas}(xt,at,this.pixelRatio_,C,this.sourceTileGrid_.getExtent(),D,r,this.triangulation_,q,this.gutter_,this.renderEdges_,this.interpolate),this.state=H.Z.LOADED}this.changed()}load(){if(this.state==H.Z.IDLE){this.state=H.Z.LOADING,this.changed();let q=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(tt=>{const ht=tt.getState();if(ht==H.Z.IDLE||ht==H.Z.LOADING){q++;const xt=(0,f.oL)(tt,W.Z.CHANGE,function(at){const D=tt.getState();(D==H.Z.LOADED||D==H.Z.ERROR||D==H.Z.EMPTY)&&((0,f.bN)(xt),q--,0===q&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(xt)}}),0===q?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(tt,ht,xt){tt.getState()==H.Z.IDLE&&tt.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(f.bN),this.sourcesListenerKeys_=null}release(){this.canvas_&&((0,a.jy)(this.canvas_.getContext("2d")),R.push(this.canvas_),this.canvas_=null),super.release()}}},1781:(Gt,mt,h)=>{"use strict";h.d(mt,{Gw:()=>S,YP:()=>nt,gE:()=>H,h$:()=>W});var Q=h(3469);function W(N){if(void 0!==N)return 0}function nt(N){if(void 0!==N)return N}function H(N){const G=2*Math.PI/N;return function(O,u){return u?O:void 0!==O?O=Math.floor(O/G+.5)*G:void 0}}function S(N){return N=N||(0,Q.Yr)(5),function(G,O){return O?G:void 0!==G?Math.abs(G)<=N?0:G:void 0}}},2518:(Gt,mt,h)=>{"use strict";function W(S){return S[0]>0&&S[1]>0}function nt(S,N,G){return void 0===G&&(G=[0,0]),G[0]=S[0]*N+.5|0,G[1]=S[1]*N+.5|0,G}function H(S,N){return Array.isArray(S)?S:(void 0===N?N=[S,S]:(N[0]=S,N[1]=S),N)}h.d(mt,{Pq:()=>H,bA:()=>nt,py:()=>W})},8536:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>le});var Q=h(8688),W=h(4961),nt=h(9788),H=h(2780);const N=class S{constructor(c){this.highWaterMark=void 0!==c?c:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(c){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(c){return this.entries_.hasOwnProperty(c)}forEach(c){let X=this.oldest_;for(;X;)c(X.value_,X.key_,this),X=X.newer}get(c,X){const V=this.entries_[c];return(0,H.h)(void 0!==V,"Tried to get a value for a key that does not exist in the cache"),V===this.newest_||(V===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(V.newer.older=V.older,V.older.newer=V.newer),V.newer=null,V.older=this.newest_,this.newest_.newer=V,this.newest_=V),V.value_}remove(c){const X=this.entries_[c];return(0,H.h)(void 0!==X,"Tried to get a value for a key that does not exist in the cache"),X===this.newest_?(this.newest_=X.older,this.newest_&&(this.newest_.newer=null)):X===this.oldest_?(this.oldest_=X.newer,this.oldest_&&(this.oldest_.older=null)):(X.newer.older=X.older,X.older.newer=X.newer),delete this.entries_[c],--this.count_,X.value_}getCount(){return this.count_}getKeys(){const c=new Array(this.count_);let V,X=0;for(V=this.newest_;V;V=V.older)c[X++]=V.key_;return c}getValues(){const c=new Array(this.count_);let V,X=0;for(V=this.newest_;V;V=V.older)c[X++]=V.value_;return c}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(c){if(this.containsKey(c))return this.entries_[c].value_}pop(){const c=this.oldest_;return delete this.entries_[c.key_],c.newer&&(c.newer.older=null),this.oldest_=c.newer,this.oldest_||(this.newest_=null),--this.count_,c.value_}replace(c,X){this.get(c),this.entries_[c].value_=X}set(c,X){(0,H.h)(!(c in this.entries_),"Tried to set a value for a key that is used already");const V={key_:c,newer:null,older:this.newest_,value_:X};this.newest_?this.newest_.newer=V:this.oldest_=V,this.newest_=V,this.entries_[c]=V,++this.count_}setSize(c){this.highWaterMark=c}};function G(vt,c,X,V){return void 0!==V?(V[0]=vt,V[1]=c,V[2]=X,V):[vt,c,X]}function O(vt,c,X){return vt+"/"+c+"/"+X}function u(vt){return O(vt[0],vt[1],vt[2])}const g=class R extends N{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(c){for(;this.canExpireCache()&&!(this.peekLast().getKey()in c);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const V=function l(vt){return vt.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(Et=>{Et.tileCoord[0]!==V&&(this.remove(u(Et.tileCoord)),Et.release())})}};var y=h(6614);var w=h(9395),m=h(5347),I=h(9070),f=h(2064),F=h(1047),ot=h(8834),U=h(3469),q=h(4654),tt=h(2574),ht=h(7555),xt=h(2518);const at=[0,0,0],r=class C{constructor(c){let X;if(this.minZoom=void 0!==c.minZoom?c.minZoom:0,this.resolutions_=c.resolutions,(0,H.h)((0,ht.pT)(this.resolutions_,function(Et,Tt){return Tt-Et},!0),"`resolutions` must be sorted in descending order"),!c.origins)for(let Et=0,Tt=this.resolutions_.length-1;Et<Tt;++Et)if(X){if(this.resolutions_[Et]/this.resolutions_[Et+1]!==X){X=void 0;break}}else X=this.resolutions_[Et]/this.resolutions_[Et+1];this.zoomFactor_=X,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==c.origin?c.origin:null,this.origins_=null,void 0!==c.origins&&(this.origins_=c.origins,(0,H.h)(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const V=c.extent;void 0!==V&&!this.origin_&&!this.origins_&&(this.origin_=(0,q.rL)(V)),(0,H.h)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==c.tileSizes&&(this.tileSizes_=c.tileSizes,(0,H.h)(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==c.tileSize?c.tileSize:this.tileSizes_?null:ot.S,(0,H.h)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==V?V:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==c.sizes?this.fullTileRanges_=c.sizes.map(function(Et,Tt){const It=new F.Z(Math.min(0,Et[0]),Math.max(Et[0]-1,-1),Math.min(0,Et[1]),Math.max(Et[1]-1,-1));if(V){const Wt=this.getTileRangeForExtentAndZ(V,Tt);It.minX=Math.max(Wt.minX,It.minX),It.maxX=Math.min(Wt.maxX,It.maxX),It.minY=Math.max(Wt.minY,It.minY),It.maxY=Math.min(Wt.maxY,It.maxY)}return It},this):V&&this.calculateTileRanges_(V)}forEachTileCoord(c,X,V){const Et=this.getTileRangeForExtentAndZ(c,X);for(let Tt=Et.minX,It=Et.maxX;Tt<=It;++Tt)for(let Wt=Et.minY,Vt=Et.maxY;Wt<=Vt;++Wt)V([X,Tt,Wt])}forEachTileCoordParentTileRange(c,X,V,Et){let Tt,It,Wt,Vt=null,Ht=c[0]-1;for(2===this.zoomFactor_?(It=c[1],Wt=c[2]):Vt=this.getTileCoordExtent(c,Et);Ht>=this.minZoom;){if(2===this.zoomFactor_?(It=Math.floor(It/2),Wt=Math.floor(Wt/2),Tt=(0,F.T)(It,It,Wt,Wt,V)):Tt=this.getTileRangeForExtentAndZ(Vt,Ht,V),X(Ht,Tt))return!0;--Ht}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(c){return this.origin_?this.origin_:this.origins_[c]}getResolution(c){return this.resolutions_[c]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(c,X,V){if(c[0]<this.maxZoom){if(2===this.zoomFactor_){const Tt=2*c[1],It=2*c[2];return(0,F.T)(Tt,Tt+1,It,It+1,X)}const Et=this.getTileCoordExtent(c,V||this.tmpExtent_);return this.getTileRangeForExtentAndZ(Et,c[0]+1,X)}return null}getTileRangeForTileCoordAndZ(c,X,V){if(X>this.maxZoom||X<this.minZoom)return null;const Et=c[0],Tt=c[1],It=c[2];if(X===Et)return(0,F.T)(Tt,It,Tt,It,V);if(this.zoomFactor_){const Vt=Math.pow(this.zoomFactor_,X-Et),Ht=Math.floor(Tt*Vt),te=Math.floor(It*Vt);if(X<Et)return(0,F.T)(Ht,Ht,te,te,V);const xe=Math.floor(Vt*(Tt+1))-1,be=Math.floor(Vt*(It+1))-1;return(0,F.T)(Ht,xe,te,be,V)}const Wt=this.getTileCoordExtent(c,this.tmpExtent_);return this.getTileRangeForExtentAndZ(Wt,X,V)}getTileRangeForExtentAndZ(c,X,V){this.getTileCoordForXYAndZ_(c[0],c[3],X,!1,at);const Et=at[1],Tt=at[2];return this.getTileCoordForXYAndZ_(c[2],c[1],X,!0,at),(0,F.T)(Et,at[1],Tt,at[2],V)}getTileCoordCenter(c){const X=this.getOrigin(c[0]),V=this.getResolution(c[0]),Et=(0,xt.Pq)(this.getTileSize(c[0]),this.tmpSize_);return[X[0]+(c[1]+.5)*Et[0]*V,X[1]-(c[2]+.5)*Et[1]*V]}getTileCoordExtent(c,X){const V=this.getOrigin(c[0]),Et=this.getResolution(c[0]),Tt=(0,xt.Pq)(this.getTileSize(c[0]),this.tmpSize_),It=V[0]+c[1]*Tt[0]*Et,Wt=V[1]-(c[2]+1)*Tt[1]*Et;return(0,q.T9)(It,Wt,It+Tt[0]*Et,Wt+Tt[1]*Et,X)}getTileCoordForCoordAndResolution(c,X,V){return this.getTileCoordForXYAndResolution_(c[0],c[1],X,!1,V)}getTileCoordForXYAndResolution_(c,X,V,Et,Tt){const It=this.getZForResolution(V),Wt=V/this.getResolution(It),Vt=this.getOrigin(It),Ht=(0,xt.Pq)(this.getTileSize(It),this.tmpSize_);let te=Wt*(c-Vt[0])/V/Ht[0],xe=Wt*(Vt[1]-X)/V/Ht[1];return Et?(te=(0,U.mD)(te,5)-1,xe=(0,U.mD)(xe,5)-1):(te=(0,U.GW)(te,5),xe=(0,U.GW)(xe,5)),G(It,te,xe,Tt)}getTileCoordForXYAndZ_(c,X,V,Et,Tt){const It=this.getOrigin(V),Wt=this.getResolution(V),Vt=(0,xt.Pq)(this.getTileSize(V),this.tmpSize_);let Ht=(c-It[0])/Wt/Vt[0],te=(It[1]-X)/Wt/Vt[1];return Et?(Ht=(0,U.mD)(Ht,5)-1,te=(0,U.mD)(te,5)-1):(Ht=(0,U.GW)(Ht,5),te=(0,U.GW)(te,5)),G(V,Ht,te,Tt)}getTileCoordForCoordAndZ(c,X,V){return this.getTileCoordForXYAndZ_(c[0],c[1],X,!1,V)}getTileCoordResolution(c){return this.resolutions_[c[0]]}getTileSize(c){return this.tileSize_?this.tileSize_:this.tileSizes_[c]}getFullTileRange(c){return this.fullTileRanges_?this.fullTileRanges_[c]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,c):null}getZForResolution(c,X){const V=(0,ht.h7)(this.resolutions_,c,X||0);return(0,U.uZ)(V,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(c,X){return(0,tt.mV)(X,0,X.length,2,this.getTileCoordExtent(c))}calculateTileRanges_(c){const X=this.resolutions_.length,V=new Array(X);for(let Et=this.minZoom;Et<X;++Et)V[Et]=this.getTileRangeForExtentAndZ(c,Et);this.fullTileRanges_=V}};function E(vt){let c=vt.getDefaultTileGrid();return c||(c=function k(vt,c,X,V){return function B(vt,c,X,V){V=void 0!==V?V:"top-left";const Et=et(vt,c,X);return new r({extent:vt,origin:(0,q.g0)(vt,V),resolutions:Et,tileSize:X})}(L(vt),c,X,V)}(vt),vt.setDefaultTileGrid(c)),c}function et(vt,c,X,V){c=void 0!==c?c:ot.e,X=(0,xt.Pq)(void 0!==X?X:ot.S);const Et=(0,q.Cr)(vt),Tt=(0,q.dz)(vt);V=V>0?V:Math.max(Tt/X[0],Et/X[1]);const It=c+1,Wt=new Array(It);for(let Vt=0;Vt<It;++Vt)Wt[Vt]=V/Math.pow(2,Vt);return Wt}function L(vt){let c=(vt=(0,f.U2)(vt)).getExtent();if(!c){const X=180*f.Wm.degrees/vt.getMetersPerUnit();c=(0,q.T9)(-X,-X,X,X)}return c}class K extends w.ZP{constructor(c,X){super(c),this.tile=X}}const j=class z extends m.Z{constructor(c){super({attributions:c.attributions,attributionsCollapsible:c.attributionsCollapsible,projection:c.projection,state:c.state,wrapX:c.wrapX,interpolate:c.interpolate}),this.opaque_=void 0!==c.opaque&&c.opaque,this.tilePixelRatio_=void 0!==c.tilePixelRatio?c.tilePixelRatio:1,this.tileGrid=void 0!==c.tileGrid?c.tileGrid:null,this.tileGrid&&(0,xt.Pq)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new g(c.cacheSize||0),this.tmpSize=[0,0],this.key_=c.key||"",this.tileOptions={transition:c.transition,interpolate:c.interpolate},this.zDirection=c.zDirection?c.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(c,X){const V=this.getTileCacheForProjection(c);V&&V.expireCache(X)}forEachLoadedTile(c,X,V,Et){const Tt=this.getTileCacheForProjection(c);if(!Tt)return!1;let Wt,Vt,Ht,It=!0;for(let te=V.minX;te<=V.maxX;++te)for(let xe=V.minY;xe<=V.maxY;++xe)Vt=O(X,te,xe),Ht=!1,Tt.containsKey(Vt)&&(Wt=Tt.get(Vt),Ht=Wt.getState()===y.Z.LOADED,Ht&&(Ht=!1!==Et(Wt))),Ht||(It=!1);return It}getGutterForProjection(c){return 0}getKey(){return this.key_}setKey(c){this.key_!==c&&(this.key_=c,this.changed())}getOpaque(c){return this.opaque_}getResolutions(c){const X=c?this.getTileGridForProjection(c):this.tileGrid;return X?X.getResolutions():null}getTile(c,X,V,Et,Tt){return(0,I.O3)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(c){return this.tileGrid?this.tileGrid:E(c)}getTileCacheForProjection(c){const X=this.getProjection();return(0,H.h)(null===X||(0,f.OP)(X,c),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(c){return this.tilePixelRatio_}getTilePixelSize(c,X,V){const Et=this.getTileGridForProjection(V),Tt=this.getTilePixelRatio(X),It=(0,xt.Pq)(Et.getTileSize(c),this.tmpSize);return 1==Tt?It:(0,xt.bA)(It,Tt,this.tmpSize)}getTileCoordForTileUrlFunction(c,X){X=void 0!==X?X:this.getProjection();const V=this.getTileGridForProjection(X);return this.getWrapX()&&X.isGlobal()&&(c=function A(vt,c,X){const V=c[0],Et=vt.getTileCoordCenter(c),Tt=L(X);if(!(0,q.b8)(Tt,Et)){const It=(0,q.dz)(Tt),Wt=Math.ceil((Tt[0]-Et[0])/It);return Et[0]+=It*Wt,vt.getTileCoordForCoordAndZ(Et,V)}return c}(V,c,X)),function n(vt,c){const X=vt[0],V=vt[1],Et=vt[2];if(c.getMinZoom()>X||X>c.getMaxZoom())return!1;const Tt=c.getFullTileRange(X);return!Tt||Tt.containsXY(V,Et)}(c,V)?c:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(c,X){const V=this.getTileCacheForProjection(X);c>V.highWaterMark&&(V.highWaterMark=c)}useTile(c,X,V,Et){}};function it(vt,c){const X=/\{z\}/g,V=/\{x\}/g,Et=/\{y\}/g,Tt=/\{-y\}/g;return function(It,Wt,Vt){if(It)return vt.replace(X,It[0].toString()).replace(V,It[1].toString()).replace(Et,It[2].toString()).replace(Tt,function(){const te=c.getFullTileRange(It[0]);return(0,H.h)(te,"The {-y} placeholder requires a tile grid with extent"),(te.getHeight()-It[2]-1).toString()})}}class Ft extends j{constructor(c){super({attributions:c.attributions,cacheSize:c.cacheSize,opaque:c.opaque,projection:c.projection,state:c.state,tileGrid:c.tileGrid,tilePixelRatio:c.tilePixelRatio,wrapX:c.wrapX,transition:c.transition,interpolate:c.interpolate,key:c.key,attributionsCollapsible:c.attributionsCollapsible,zDirection:c.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Ft.prototype.tileUrlFunction,this.tileLoadFunction=c.tileLoadFunction,c.tileUrlFunction&&(this.tileUrlFunction=c.tileUrlFunction),this.urls=null,c.urls?this.setUrls(c.urls):c.url&&this.setUrl(c.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(c){const X=c.target,V=(0,I.sq)(X),Et=X.getState();let Tt;Et==y.Z.LOADING?(this.tileLoadingKeys_[V]=!0,Tt="tileloadstart"):V in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[V],Tt=Et==y.Z.ERROR?"tileloaderror":Et==y.Z.LOADED?"tileloadend":void 0),null!=Tt&&this.dispatchEvent(new K(Tt,X))}setTileLoadFunction(c){this.tileCache.clear(),this.tileLoadFunction=c,this.changed()}setTileUrlFunction(c,X){this.tileUrlFunction=c,this.tileCache.pruneExceptNewestZ(),typeof X<"u"?this.setKey(X):this.changed()}setUrl(c){const X=function bt(vt){const c=[];let X=/\{([a-z])-([a-z])\}/.exec(vt);if(X){const V=X[1].charCodeAt(0),Et=X[2].charCodeAt(0);let Tt;for(Tt=V;Tt<=Et;++Tt)c.push(vt.replace(X[0],String.fromCharCode(Tt)));return c}if(X=/\{(\d+)-(\d+)\}/.exec(vt),X){const V=parseInt(X[2],10);for(let Et=parseInt(X[1],10);Et<=V;Et++)c.push(vt.replace(X[0],Et.toString()));return c}return c.push(vt),c}(c);this.urls=X,this.setUrls(X)}setUrls(c){this.urls=c;const X=c.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function lt(vt,c){const X=vt.length,V=new Array(X);for(let Et=0;Et<X;++Et)V[Et]=it(vt[Et],c);return function yt(vt){return 1===vt.length?vt[0]:function(c,X,V){if(!c)return;const Et=function a(vt){return(vt[1]<<vt[0])+vt[2]}(c),Tt=(0,U.$W)(Et,vt.length);return vt[Tt](c,X,V)}}(V)}(c,this.tileGrid),X):this.setKey(X)}tileUrlFunction(c,X,V){}useTile(c,X,V){const Et=O(c,X,V);this.tileCache.containsKey(Et)&&this.tileCache.get(Et)}}const Xt=Ft;function P(vt,c){vt.getImage().src=c}const rt=class ae extends Xt{constructor(c){super({attributions:c.attributions,cacheSize:c.cacheSize,opaque:c.opaque,projection:c.projection,state:c.state,tileGrid:c.tileGrid,tileLoadFunction:c.tileLoadFunction?c.tileLoadFunction:P,tilePixelRatio:c.tilePixelRatio,tileUrlFunction:c.tileUrlFunction,url:c.url,urls:c.urls,wrapX:c.wrapX,transition:c.transition,interpolate:void 0===c.interpolate||c.interpolate,key:c.key,attributionsCollapsible:c.attributionsCollapsible,zDirection:c.zDirection}),this.crossOrigin=void 0!==c.crossOrigin?c.crossOrigin:null,this.tileClass=void 0!==c.tileClass?c.tileClass:W.Z,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=c.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const c in this.tileCacheForProjection)if(this.tileCacheForProjection[c].canExpireCache())return!0;return!1}expireCache(c,X){const V=this.getTileCacheForProjection(c);this.tileCache.expireCache(this.tileCache==V?X:{});for(const Et in this.tileCacheForProjection){const Tt=this.tileCacheForProjection[Et];Tt.expireCache(Tt==V?X:{})}}getGutterForProjection(c){return this.getProjection()&&c&&!(0,f.OP)(this.getProjection(),c)?0:this.getGutter()}getGutter(){return 0}getKey(){let c=super.getKey();return this.getInterpolate()||(c+=":disable-interpolation"),c}getOpaque(c){return!(this.getProjection()&&c&&!(0,f.OP)(this.getProjection(),c))&&super.getOpaque(c)}getTileGridForProjection(c){const X=this.getProjection();if(this.tileGrid&&(!X||(0,f.OP)(X,c)))return this.tileGrid;const V=(0,I.sq)(c);return V in this.tileGridForProjection||(this.tileGridForProjection[V]=E(c)),this.tileGridForProjection[V]}getTileCacheForProjection(c){const X=this.getProjection();if(!X||(0,f.OP)(X,c))return this.tileCache;const V=(0,I.sq)(c);return V in this.tileCacheForProjection||(this.tileCacheForProjection[V]=new g(this.tileCache.highWaterMark)),this.tileCacheForProjection[V]}createTile_(c,X,V,Et,Tt,It){const Wt=[c,X,V],Vt=this.getTileCoordForTileUrlFunction(Wt,Tt),Ht=Vt?this.tileUrlFunction(Vt,Et,Tt):void 0,te=new this.tileClass(Wt,void 0!==Ht?y.Z.IDLE:y.Z.EMPTY,void 0!==Ht?Ht:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return te.key=It,te.addEventListener(Q.Z.CHANGE,this.handleTileChange.bind(this)),te}getTile(c,X,V,Et,Tt){const It=this.getProjection();if(!It||!Tt||(0,f.OP)(It,Tt))return this.getTileInternal(c,X,V,Et,It||Tt);const Wt=this.getTileCacheForProjection(Tt),Vt=[c,X,V];let Ht;const te=u(Vt);Wt.containsKey(te)&&(Ht=Wt.get(te));const xe=this.getKey();if(Ht&&Ht.key==xe)return Ht;const be=this.getTileGridForProjection(It),Ke=this.getTileGridForProjection(Tt),Fe=this.getTileCoordForTileUrlFunction(Vt,Tt),we=new nt.Z(It,be,Tt,Ke,Vt,Fe,this.getTilePixelRatio(Et),this.getGutter(),(Xe,ct,gt,Ct)=>this.getTileInternal(Xe,ct,gt,Ct,It),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return we.key=xe,Ht?(we.interimTile=Ht,we.refreshInterimChain(),Wt.replace(te,we)):Wt.set(te,we),we}getTileInternal(c,X,V,Et,Tt){let It=null;const Wt=O(c,X,V),Vt=this.getKey();if(this.tileCache.containsKey(Wt)){if(It=this.tileCache.get(Wt),It.key!=Vt){const Ht=It;It=this.createTile_(c,X,V,Et,Tt,Vt),It.interimTile=Ht.getState()==y.Z.IDLE?Ht.interimTile:Ht,It.refreshInterimChain(),this.tileCache.replace(Wt,It)}}else It=this.createTile_(c,X,V,Et,Tt,Vt),this.tileCache.set(Wt,It);return It}setRenderReprojectionEdges(c){if(this.renderReprojectionEdges_!=c){this.renderReprojectionEdges_=c;for(const X in this.tileCacheForProjection)this.tileCacheForProjection[X].clear();this.changed()}}setTileGridForProjection(c,X){const V=(0,f.U2)(c);if(V){const Et=(0,I.sq)(V);Et in this.tileGridForProjection||(this.tileGridForProjection[Et]=X)}}clear(){super.clear();for(const c in this.tileCacheForProjection)this.tileCacheForProjection[c].clear()}},Dt=class ut extends rt{constructor(c){const X=void 0!==(c=c||{}).projection?c.projection:"EPSG:3857",V=void 0!==c.tileGrid?c.tileGrid:function $(vt){const c=vt||{},X=c.extent||(0,f.U2)("EPSG:3857").getExtent(),V={extent:X,minZoom:c.minZoom,tileSize:c.tileSize,resolutions:et(X,c.maxZoom,c.tileSize,c.maxResolution)};return new r(V)}({extent:L(X),maxResolution:c.maxResolution,maxZoom:c.maxZoom,minZoom:c.minZoom,tileSize:c.tileSize});super({attributions:c.attributions,cacheSize:c.cacheSize,crossOrigin:c.crossOrigin,interpolate:c.interpolate,opaque:c.opaque,projection:X,reprojectionErrorThreshold:c.reprojectionErrorThreshold,tileGrid:V,tileLoadFunction:c.tileLoadFunction,tilePixelRatio:c.tilePixelRatio,tileUrlFunction:c.tileUrlFunction,url:c.url,urls:c.urls,wrapX:void 0===c.wrapX||c.wrapX,transition:c.transition,attributionsCollapsible:c.attributionsCollapsible,zDirection:c.zDirection}),this.gutter_=void 0!==c.gutter?c.gutter:0}getGutter(){return this.gutter_}},le=class ie extends Dt{constructor(c){let X;X=void 0!==(c=c||{}).attributions?c.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],super({attributions:X,attributionsCollapsible:!1,cacheSize:c.cacheSize,crossOrigin:void 0!==c.crossOrigin?c.crossOrigin:"anonymous",interpolate:c.interpolate,maxZoom:void 0!==c.maxZoom?c.maxZoom:19,opaque:void 0===c.opaque||c.opaque,reprojectionErrorThreshold:c.reprojectionErrorThreshold,tileLoadFunction:c.tileLoadFunction,transition:c.transition,url:void 0!==c.url?c.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:c.wrapX,zDirection:c.zDirection})}}},5347:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>S});var Q=h(7221),W=h(2064);function H(N){return N?Array.isArray(N)?function(G){return N}:"function"==typeof N?N:function(G){return[N]}:null}const S=class nt extends Q.Z{constructor(G){super(),this.projection=(0,W.U2)(G.projection),this.attributions_=H(G.attributions),this.attributionsCollapsible_=void 0===G.attributionsCollapsible||G.attributionsCollapsible,this.loading=!1,this.state_=void 0!==G.state?G.state:"ready",this.wrapX_=void 0!==G.wrapX&&G.wrapX,this.interpolate_=!!G.interpolate,this.viewResolver=null,this.viewRejector=null;const O=this;this.viewPromise_=new Promise(function(u,o){O.viewResolver=u,O.viewRejector=o})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(G){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(G){this.attributions_=H(G),this.changed()}setState(G){this.state_=G,this.changed()}}},9593:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>xt});var Q=h(1165),W=h(9529),nt=h(9395),H=h(8688),S=h(3196),N=h(1414),G=h(4654),O=h(9070),u=h(925);const l=class o{constructor(D){this.rbush_=new N(D),this.items_={}}insert(D,C){const r={minX:D[0],minY:D[1],maxX:D[2],maxY:D[3],value:C};this.rbush_.insert(r),this.items_[(0,O.sq)(C)]=r}load(D,C){const r=new Array(C.length);for(let E=0,A=C.length;E<A;E++){const B=D[E],$=C[E],et={minX:B[0],minY:B[1],maxX:B[2],maxY:B[3],value:$};r[E]=et,this.items_[(0,O.sq)($)]=et}this.rbush_.load(r)}remove(D){const C=(0,O.sq)(D),r=this.items_[C];return delete this.items_[C],null!==this.rbush_.remove(r)}update(D,C){const r=this.items_[(0,O.sq)(C)];(0,G.fS)([r.minX,r.minY,r.maxX,r.maxY],D)||(this.remove(C),this.insert(D,C))}getAll(){return this.rbush_.all().map(function(C){return C.value})}getInExtent(D){return this.rbush_.search({minX:D[0],minY:D[1],maxX:D[2],maxY:D[3]}).map(function(E){return E.value})}forEach(D){return this.forEach_(this.getAll(),D)}forEachInExtent(D,C){return this.forEach_(this.getInExtent(D),C)}forEach_(D,C){let r;for(let E=0,A=D.length;E<A;E++)if(r=C(D[E]),r)return r;return r}isEmpty(){return(0,u.x)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(D){const C=this.rbush_.toJSON();return(0,G.T9)(C.minX,C.minY,C.maxX,C.maxY,D)}concat(D){this.rbush_.load(D.rbush_.all());for(const C in D.items_)this.items_[C]=D.items_[C]}};var a=h(5347);var R=h(589);function y(at,D){return[[-1/0,-1/0,1/0,1/0]]}h(2064);var m=h(2780),I=h(7555),f=h(7796);function U(at,D){return function(C,r,E,A,B){const $=this;!function ot(at,D,C,r,E,A,B){const $=new XMLHttpRequest;$.open("GET","function"==typeof at?at(C,r,E):at,!0),"arraybuffer"==D.getType()&&($.responseType="arraybuffer"),$.withCredentials=false,$.onload=function(et){if(!$.status||$.status>=200&&$.status<300){const k=D.getType();let L;"json"==k||"text"==k?L=$.responseText:"xml"==k?(L=$.responseXML,L||(L=(new DOMParser).parseFromString($.responseText,"application/xml"))):"arraybuffer"==k&&(L=$.response),L?A(D.readFeatures(L,{extent:C,featureProjection:E}),D.readProjection(L)):B()}else B()},$.onerror=B,$.send()}(at,D,C,r,E,function(et,k){$.addFeatures(et),void 0!==A&&A(et)},B||R.Zn)}}class tt extends nt.ZP{constructor(D,C,r){super(D),this.feature=C,this.features=r}}const xt=class ht extends a.Z{constructor(D){super({attributions:(D=D||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===D.wrapX||D.wrapX}),this.loader_=R.Zn,this.format_=D.format,this.overlaps_=void 0===D.overlaps||D.overlaps,this.url_=D.url,void 0!==D.loader?this.loader_=D.loader:void 0!==this.url_&&((0,m.h)(this.format_,"`format` must be set when `url` is set"),this.loader_=U(this.url_,this.format_)),this.strategy_=void 0!==D.strategy?D.strategy:y;const C=void 0===D.useSpatialIndex||D.useSpatialIndex;let r,E;this.featuresRtree_=C?new l:null,this.loadedExtentsRtree_=new l,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(D.features)?E=D.features:D.features&&(r=D.features,E=r.getArray()),!C&&void 0===r&&(r=new Q.Z(E)),void 0!==E&&this.addFeaturesInternal(E),void 0!==r&&this.bindFeaturesCollection_(r)}addFeature(D){this.addFeatureInternal(D),this.changed()}addFeatureInternal(D){const C=(0,O.sq)(D);if(!this.addToIndex_(C,D))return void(this.featuresCollection_&&this.featuresCollection_.remove(D));this.setupChangeEvents_(C,D);const r=D.getGeometry();if(r){const E=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(E,D)}else this.nullGeometryFeatures_[C]=D;this.dispatchEvent(new tt("addfeature",D))}setupChangeEvents_(D,C){this.featureChangeKeys_[D]=[(0,f.oL)(C,H.Z.CHANGE,this.handleFeatureChange_,this),(0,f.oL)(C,S.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(D,C){let r=!0;const E=C.getId();return void 0!==E&&(E.toString()in this.idIndex_?r=!1:this.idIndex_[E.toString()]=C),r&&((0,m.h)(!(D in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[D]=C),r}addFeatures(D){this.addFeaturesInternal(D),this.changed()}addFeaturesInternal(D){const C=[],r=[],E=[];for(let A=0,B=D.length;A<B;A++){const $=D[A],et=(0,O.sq)($);this.addToIndex_(et,$)&&r.push($)}for(let A=0,B=r.length;A<B;A++){const $=r[A],et=(0,O.sq)($);this.setupChangeEvents_(et,$);const k=$.getGeometry();if(k){const L=k.getExtent();C.push(L),E.push($)}else this.nullGeometryFeatures_[et]=$}if(this.featuresRtree_&&this.featuresRtree_.load(C,E),this.hasListener("addfeature"))for(let A=0,B=r.length;A<B;A++)this.dispatchEvent(new tt("addfeature",r[A]))}bindFeaturesCollection_(D){let C=!1;this.addEventListener("addfeature",function(r){C||(C=!0,D.push(r.feature),C=!1)}),this.addEventListener("removefeature",function(r){C||(C=!0,D.remove(r.feature),C=!1)}),D.addEventListener(W.Z.ADD,r=>{C||(C=!0,this.addFeature(r.element),C=!1)}),D.addEventListener(W.Z.REMOVE,r=>{C||(C=!0,this.removeFeature(r.element),C=!1)}),this.featuresCollection_=D}clear(D){if(D){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(f.bN);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(E=>{this.removeFeatureInternal(E)});for(const E in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[E])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const C=new tt("clear");this.dispatchEvent(C),this.changed()}forEachFeature(D){if(this.featuresRtree_)return this.featuresRtree_.forEach(D);this.featuresCollection_&&this.featuresCollection_.forEach(D)}forEachFeatureAtCoordinateDirect(D,C){return this.forEachFeatureInExtent([D[0],D[1],D[0],D[1]],function(E){if(E.getGeometry().intersectsCoordinate(D))return C(E)})}forEachFeatureInExtent(D,C){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(D,C);this.featuresCollection_&&this.featuresCollection_.forEach(C)}forEachFeatureIntersectingExtent(D,C){return this.forEachFeatureInExtent(D,function(r){if(r.getGeometry().intersectsExtent(D)){const A=C(r);if(A)return A}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let D;return this.featuresCollection_?D=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(D=this.featuresRtree_.getAll(),(0,u.x)(this.nullGeometryFeatures_)||(0,I.l7)(D,Object.values(this.nullGeometryFeatures_))),D}getFeaturesAtCoordinate(D){const C=[];return this.forEachFeatureAtCoordinateDirect(D,function(r){C.push(r)}),C}getFeaturesInExtent(D,C){if(this.featuresRtree_){if(!(C&&C.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(D);const E=(0,G.MV)(D,C);return[].concat(...E.map(A=>this.featuresRtree_.getInExtent(A)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(D,C){const r=D[0],E=D[1];let A=null;const B=[NaN,NaN];let $=1/0;const et=[-1/0,-1/0,1/0,1/0];return C=C||R.uX,this.featuresRtree_.forEachInExtent(et,function(k){if(C(k)){const L=k.getGeometry(),z=$;if($=L.closestPointXY(r,E,B,$),$<z){A=k;const K=Math.sqrt($);et[0]=r-K,et[1]=E-K,et[2]=r+K,et[3]=E+K}}}),A}getExtent(D){return this.featuresRtree_.getExtent(D)}getFeatureById(D){const C=this.idIndex_[D.toString()];return void 0!==C?C:null}getFeatureByUid(D){const C=this.uidIndex_[D];return void 0!==C?C:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(D){const C=D.target,r=(0,O.sq)(C),E=C.getGeometry();if(E){const B=E.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(B,C)):this.featuresRtree_&&this.featuresRtree_.update(B,C)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(C),this.nullGeometryFeatures_[r]=C);const A=C.getId();if(void 0!==A){const B=A.toString();this.idIndex_[B]!==C&&(this.removeFromIdIndex_(C),this.idIndex_[B]=C)}else this.removeFromIdIndex_(C),this.uidIndex_[r]=C;this.changed(),this.dispatchEvent(new tt("changefeature",C))}hasFeature(D){const C=D.getId();return void 0!==C?C in this.idIndex_:(0,O.sq)(D)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,u.x)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(D,C,r){const E=this.loadedExtentsRtree_,A=this.strategy_(D,C,r);for(let B=0,$=A.length;B<$;++B){const et=A[B];E.forEachInExtent(et,function(L){return(0,G.r4)(L.extent,et)})||(++this.loadingExtentsCount_,this.dispatchEvent(new tt("featuresloadstart")),this.loader_.call(this,et,C,r,L=>{--this.loadingExtentsCount_,this.dispatchEvent(new tt("featuresloadend",void 0,L))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new tt("featuresloaderror"))}),E.insert(et,{extent:et.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(D){const C=this.loadedExtentsRtree_;let r;C.forEachInExtent(D,function(E){if((0,G.fS)(E.extent,D))return r=E,!0}),r&&C.remove(r)}removeFeature(D){if(!D)return;const C=(0,O.sq)(D);C in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[C]:this.featuresRtree_&&this.featuresRtree_.remove(D),this.removeFeatureInternal(D)&&this.changed()}removeFeatureInternal(D){const C=(0,O.sq)(D),r=this.featureChangeKeys_[C];if(!r)return;r.forEach(f.bN),delete this.featureChangeKeys_[C];const E=D.getId();return void 0!==E&&delete this.idIndex_[E.toString()],delete this.uidIndex_[C],this.dispatchEvent(new tt("removefeature",D)),D}removeFromIdIndex_(D){let C=!1;for(const r in this.idIndex_)if(this.idIndex_[r]===D){delete this.idIndex_[r],C=!0;break}return C}setLoader(D){this.loader_=D}setUrl(D){(0,m.h)(this.format_,"`format` must be set when `url` is set"),this.url_=D,this.setLoader(U(D,this.format_))}}},9443:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>nt});var Q=h(5729);class W extends Q.Z{constructor(S){super({points:1/0,fill:(S=S||{radius:5}).fill,radius:S.radius,stroke:S.stroke,scale:void 0!==S.scale?S.scale:1,rotation:void 0!==S.rotation?S.rotation:0,rotateWithView:void 0!==S.rotateWithView&&S.rotateWithView,displacement:void 0!==S.displacement?S.displacement:[0,0],declutterMode:S.declutterMode})}clone(){const S=this.getScale(),N=new W({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(S)?S.slice():S,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return N.setOpacity(this.getOpacity()),N}setRadius(S){this.radius_=S,this.render()}}const nt=W},1059:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>W});class Q{constructor(H){this.color_=void 0!==(H=H||{}).color?H.color:null}clone(){const H=this.getColor();return new Q({color:Array.isArray(H)?H.slice():H||void 0})}getColor(){return this.color_}setColor(H){this.color_=H}}const W=Q},3822:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>p});var Q=h(8688),W=h(1084),nt=h(660),H=h(9145),S=h(2780),N=h(9078),G=h(7120),O=h(5605),u=h(1075);let o=null;class l extends N.Z{constructor(m,I,f,F,ot){super(),this.hitDetectionImage_=null,this.image_=m,this.crossOrigin_=f,this.canvas_={},this.color_=ot,this.imageState_=void 0===F?W.Z.IDLE:F,this.size_=m&&m.width&&m.height?[m.width,m.height]:null,this.src_=I}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===W.Z.LOADED){o||(o=(0,G.E4)(1,1,void 0,{willReadFrequently:!0})),o.drawImage(this.image_,0,0);try{o.getImageData(0,0,1,1),this.tainted_=!1}catch{o=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(Q.Z.CHANGE)}handleImageError_(){this.imageState_=W.Z.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=W.Z.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(m){return this.image_||this.initializeImage_(),this.replaceColor_(m),this.canvas_[m]?this.canvas_[m]:this.image_}getPixelRatio(m){return this.replaceColor_(m),this.canvas_[m]?m:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const m=this.size_[0],I=this.size_[1],f=(0,G.E4)(m,I);f.fillRect(0,0,m,I),this.hitDetectionImage_=f.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===W.Z.IDLE){this.image_||this.initializeImage_(),this.imageState_=W.Z.LOADING;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&(0,O.Q9)(this.image_,this.src_).then(m=>{this.image_=m,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(m){if(!this.color_||this.canvas_[m]||this.imageState_!==W.Z.LOADED)return;const I=this.image_,f=document.createElement("canvas");f.width=Math.ceil(I.width*m),f.height=Math.ceil(I.height*m);const F=f.getContext("2d");F.scale(m,m),F.drawImage(I,0,0),F.globalCompositeOperation="multiply",F.fillStyle=(0,H.XC)(this.color_),F.fillRect(0,0,f.width/m,f.height/m),F.globalCompositeOperation="destination-in",F.drawImage(I,0,0),this.canvas_[m]=f}}var R=h(9070);function g(w,m,I,f){return void 0!==I&&void 0!==f?[I/w,f/m]:void 0!==I?I/w:void 0!==f?f/m:1}class y extends nt.Z{constructor(m){super({opacity:void 0!==(m=m||{}).opacity?m.opacity:1,rotation:void 0!==m.rotation?m.rotation:0,scale:void 0!==m.scale?m.scale:1,displacement:void 0!==m.displacement?m.displacement:[0,0],rotateWithView:void 0!==m.rotateWithView&&m.rotateWithView,declutterMode:m.declutterMode}),this.anchor_=void 0!==m.anchor?m.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==m.anchorOrigin?m.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==m.anchorXUnits?m.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==m.anchorYUnits?m.anchorYUnits:"fraction",this.crossOrigin_=void 0!==m.crossOrigin?m.crossOrigin:null;const U=void 0!==m.img?m.img:null;let tt,q=m.src;if((0,S.h)(!(void 0!==q&&U),"`image` and `src` cannot be provided at the same time"),(void 0===q||0===q.length)&&U&&(q=U.src||(0,R.sq)(U)),(0,S.h)(void 0!==q&&q.length>0,"A defined and non-empty `src` or `image` must be provided"),(0,S.h)(!((void 0!==m.width||void 0!==m.height)&&void 0!==m.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==m.src?tt=W.Z.IDLE:void 0!==U&&(tt=U instanceof HTMLImageElement?U.complete?U.src?W.Z.LOADED:W.Z.IDLE:W.Z.LOADING:W.Z.LOADED),this.color_=void 0!==m.color?(0,H._2)(m.color):null,this.iconImage_=function a(w,m,I,f,F){let ot=void 0===m?void 0:u.c.get(m,I,F);return ot||(ot=new l(w,w instanceof HTMLImageElement?w.src||void 0:m,I,f,F),u.c.set(m,I,F,ot)),ot}(U,q,this.crossOrigin_,tt,this.color_),this.offset_=void 0!==m.offset?m.offset:[0,0],this.offsetOrigin_=void 0!==m.offsetOrigin?m.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==m.size?m.size:null,void 0!==m.width||void 0!==m.height){let ht,xt;if(m.size)[ht,xt]=m.size;else{const at=this.getImage(1);if(at.width&&at.height)ht=at.width,xt=at.height;else if(at instanceof HTMLImageElement){this.initialOptions_=m;const D=()=>{if(this.unlistenImageChange(D),!this.initialOptions_)return;const C=this.iconImage_.getSize();this.setScale(g(C[0],C[1],m.width,m.height))};return void this.listenImageChange(D)}}void 0!==ht&&this.setScale(g(ht,xt,m.width,m.height))}}clone(){let m,I,f;return this.initialOptions_?(I=this.initialOptions_.width,f=this.initialOptions_.height):(m=this.getScale(),m=Array.isArray(m)?m.slice():m),new y({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:m,width:I,height:f,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let m=this.normalizedAnchor_;if(!m){m=this.anchor_;const F=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!F)return null;m=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(m[0]*=F[0]),"fraction"==this.anchorYUnits_&&(m[1]*=F[1])}if("top-left"!=this.anchorOrigin_){if(!F)return null;m===this.anchor_&&(m=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(m[0]=-m[0]+F[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(m[1]=-m[1]+F[1])}this.normalizedAnchor_=m}const I=this.getDisplacement(),f=this.getScaleArray();return[m[0]-I[0]/f[0],m[1]+I[1]/f[1]]}setAnchor(m){this.anchor_=m,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(m){return this.iconImage_.getImage(m)}getPixelRatio(m){return this.iconImage_.getPixelRatio(m)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let m=this.offset_;if("top-left"!=this.offsetOrigin_){const I=this.getSize(),f=this.iconImage_.getSize();if(!I||!f)return null;m=m.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(m[0]=f[0]-I[0]-m[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(m[1]=f[1]-I[1]-m[1])}return this.origin_=m,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const m=this.getScaleArray();return this.size_?this.size_[0]*m[0]:this.iconImage_.getImageState()==W.Z.LOADED?this.iconImage_.getSize()[0]*m[0]:void 0}getHeight(){const m=this.getScaleArray();return this.size_?this.size_[1]*m[1]:this.iconImage_.getImageState()==W.Z.LOADED?this.iconImage_.getSize()[1]*m[1]:void 0}setScale(m){delete this.initialOptions_,super.setScale(m)}listenImageChange(m){this.iconImage_.addEventListener(Q.Z.CHANGE,m)}load(){this.iconImage_.load()}unlistenImageChange(m){this.iconImage_.removeEventListener(Q.Z.CHANGE,m)}}const p=y},1075:(Gt,mt,h)=>{"use strict";h.d(mt,{c:()=>S});var Q=h(9145);function nt(N,G,O){return G+":"+N+":"+(O?(0,Q.XC)(O):"null")}const S=new class W{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let G=0;for(const O in this.cache_)!(3&G++)&&!this.cache_[O].hasListener()&&(delete this.cache_[O],--this.cacheSize_)}}get(G,O,u){const o=nt(G,O,u);return o in this.cache_?this.cache_[o]:null}set(G,O,u,o){const l=nt(G,O,u);this.cache_[l]=o,++this.cacheSize_}setSize(G){this.maxCacheSize_=G,this.expire()}}},660:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>H});var Q=h(9070),W=h(2518);class nt{constructor(N){this.opacity_=N.opacity,this.rotateWithView_=N.rotateWithView,this.rotation_=N.rotation,this.scale_=N.scale,this.scaleArray_=(0,W.Pq)(N.scale),this.displacement_=N.displacement,this.declutterMode_=N.declutterMode}clone(){const N=this.getScale();return new nt({opacity:this.getOpacity(),scale:Array.isArray(N)?N.slice():N,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,Q.O3)()}getImage(N){return(0,Q.O3)()}getHitDetectionImage(){return(0,Q.O3)()}getPixelRatio(N){return 1}getImageState(){return(0,Q.O3)()}getImageSize(){return(0,Q.O3)()}getOrigin(){return(0,Q.O3)()}getSize(){return(0,Q.O3)()}setDisplacement(N){this.displacement_=N}setOpacity(N){this.opacity_=N}setRotateWithView(N){this.rotateWithView_=N}setRotation(N){this.rotation_=N}setScale(N){this.scale_=N,this.scaleArray_=(0,W.Pq)(N)}listenImageChange(N){(0,Q.O3)()}load(){(0,Q.O3)()}unlistenImageChange(N){(0,Q.O3)()}}const H=nt},5729:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>O});var Q=h(1084),W=h(660),nt=h(9145),H=h(9886),S=h(7120),N=h(748);class G extends W.Z{constructor(o){super({opacity:1,rotateWithView:void 0!==o.rotateWithView&&o.rotateWithView,rotation:void 0!==o.rotation?o.rotation:0,scale:void 0!==o.scale?o.scale:1,displacement:void 0!==o.displacement?o.displacement:[0,0],declutterMode:o.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==o.fill?o.fill:null,this.origin_=[0,0],this.points_=o.points,this.radius_=void 0!==o.radius?o.radius:o.radius1,this.radius2_=o.radius2,this.angle_=void 0!==o.angle?o.angle:0,this.stroke_=void 0!==o.stroke?o.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const o=this.getScale(),l=new G({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(o)?o.slice():o,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return l.setOpacity(this.getOpacity()),l}getAnchor(){const o=this.size_;if(!o)return null;const l=this.getDisplacement(),a=this.getScaleArray();return[o[0]/2-l[0]/a[0],o[1]/2+l[1]/a[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(o){this.fill_=o,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(o){let l=this.canvas_[o];if(!l){const a=this.renderOptions_,n=(0,S.E4)(a.size*o,a.size*o);this.draw_(a,n,o),l=n.canvas,this.canvas_[o]=l}return l}getPixelRatio(o){return o}getImageSize(){return this.size_}getImageState(){return Q.Z.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(o){this.stroke_=o,this.render()}listenImageChange(o){}load(){}unlistenImageChange(o){}calculateLineJoinSize_(o,l,a){if(0===l||this.points_===1/0||"bevel"!==o&&"miter"!==o)return l;let n=this.radius_,R=void 0===this.radius2_?n:this.radius2_;if(n<R){const C=n;n=R,R=C}const y=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),p=R*Math.sin(y),m=n-Math.sqrt(R*R-p*p),I=Math.sqrt(p*p+m*m),f=I/p;if("miter"===o&&f<=a)return f*l;const F=l/2/f,ot=l/2*(m/I),q=Math.sqrt((n+F)*(n+F)+ot*ot)-n;if(void 0===this.radius2_||"bevel"===o)return 2*q;const tt=n*Math.sin(y),xt=R-Math.sqrt(n*n-tt*tt),D=Math.sqrt(tt*tt+xt*xt)/tt;return D<=a?2*Math.max(q,D*l/2-R-n):2*q}createRenderOptions(){let g,o=N.mb,l=N.rc,a=0,n=null,R=0,y=0;this.stroke_&&(g=this.stroke_.getColor(),null===g&&(g=N.Tx),g=(0,H.y)(g),y=this.stroke_.getWidth(),void 0===y&&(y=N.yC),n=this.stroke_.getLineDash(),R=this.stroke_.getLineDashOffset(),l=this.stroke_.getLineJoin(),void 0===l&&(l=N.rc),o=this.stroke_.getLineCap(),void 0===o&&(o=N.mb),a=this.stroke_.getMiterLimit(),void 0===a&&(a=N.V4));const p=this.calculateLineJoinSize_(l,y,a),w=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:g,strokeWidth:y,size:Math.ceil(2*w+p),lineCap:o,lineDash:n,lineDashOffset:R,lineJoin:l,miterLimit:a}}render(){this.renderOptions_=this.createRenderOptions();const o=this.renderOptions_.size;this.canvas_={},this.size_=[o,o]}draw_(o,l,a){if(l.scale(a,a),l.translate(o.size/2,o.size/2),this.createPath_(l),this.fill_){let n=this.fill_.getColor();null===n&&(n=N.bL),l.fillStyle=(0,H.y)(n),l.fill()}this.stroke_&&(l.strokeStyle=o.strokeStyle,l.lineWidth=o.strokeWidth,o.lineDash&&(l.setLineDash(o.lineDash),l.lineDashOffset=o.lineDashOffset),l.lineCap=o.lineCap,l.lineJoin=o.lineJoin,l.miterLimit=o.miterLimit,l.stroke())}createHitDetectionCanvas_(o){if(this.fill_){let l=this.fill_.getColor(),a=0;if("string"==typeof l&&(l=(0,nt._2)(l)),null===l?a=1:Array.isArray(l)&&(a=4===l.length?l[3]:1),0===a){const n=(0,S.E4)(o.size,o.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(o,n)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(o){let l=this.points_;const a=this.radius_;if(l===1/0)o.arc(0,0,a,0,2*Math.PI);else{const n=void 0===this.radius2_?a:this.radius2_;void 0!==this.radius2_&&(l*=2);const R=this.angle_-Math.PI/2,g=2*Math.PI/l;for(let y=0;y<l;y++){const p=R+y*g,w=y%2==0?a:n;o.lineTo(w*Math.cos(p),w*Math.sin(p))}o.closePath()}}drawHitDetectionCanvas_(o,l){l.translate(o.size/2,o.size/2),this.createPath_(l),l.fillStyle=N.bL,l.fill(),this.stroke_&&(l.strokeStyle=o.strokeStyle,l.lineWidth=o.strokeWidth,o.lineDash&&(l.setLineDash(o.lineDash),l.lineDashOffset=o.lineDashOffset),l.lineJoin=o.lineJoin,l.miterLimit=o.miterLimit,l.stroke())}}const O=G},8648:(Gt,mt,h)=>{"use strict";h.d(mt,{Z:()=>W});class Q{constructor(H){this.color_=void 0!==(H=H||{}).color?H.color:null,this.lineCap_=H.lineCap,this.lineDash_=void 0!==H.lineDash?H.lineDash:null,this.lineDashOffset_=H.lineDashOffset,this.lineJoin_=H.lineJoin,this.miterLimit_=H.miterLimit,this.width_=H.width}clone(){const H=this.getColor();return new Q({color:Array.isArray(H)?H.slice():H||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(H){this.color_=H}setLineCap(H){this.lineCap_=H}setLineDash(H){this.lineDash_=H}setLineDashOffset(H){this.lineDashOffset_=H}setLineJoin(H){this.lineJoin_=H}setMiterLimit(H){this.miterLimit_=H}setWidth(H){this.width_=H}}const W=Q},6093:(Gt,mt,h)=>{"use strict";h.d(mt,{J$:()=>N,ZP:()=>l,yF:()=>O});var Q=h(9443),W=h(1059),nt=h(8648),H=h(2780);class S{constructor(n){n=n||{},this.geometry_=null,this.geometryFunction_=o,void 0!==n.geometry&&this.setGeometry(n.geometry),this.fill_=void 0!==n.fill?n.fill:null,this.image_=void 0!==n.image?n.image:null,this.renderer_=void 0!==n.renderer?n.renderer:null,this.hitDetectionRenderer_=void 0!==n.hitDetectionRenderer?n.hitDetectionRenderer:null,this.stroke_=void 0!==n.stroke?n.stroke:null,this.text_=void 0!==n.text?n.text:null,this.zIndex_=n.zIndex}clone(){let n=this.getGeometry();return n&&"object"==typeof n&&(n=n.clone()),new S({geometry:n,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(n){this.renderer_=n}setHitDetectionRenderer(n){this.hitDetectionRenderer_=n}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(n){this.fill_=n}getImage(){return this.image_}setImage(n){this.image_=n}getStroke(){return this.stroke_}setStroke(n){this.stroke_=n}getText(){return this.text_}setText(n){this.text_=n}getZIndex(){return this.zIndex_}setGeometry(n){"function"==typeof n?this.geometryFunction_=n:"string"==typeof n?this.geometryFunction_=function(R){return R.get(n)}:n?void 0!==n&&(this.geometryFunction_=function(){return n}):this.geometryFunction_=o,this.geometry_=n}setZIndex(n){this.zIndex_=n}}function N(a){let n;if("function"==typeof a)n=a;else{let R;Array.isArray(a)?R=a:((0,H.h)("function"==typeof a.getZIndex,"Expected an `Style` or an array of `Style`"),R=[a]),n=function(){return R}}return n}let G=null;function O(a,n){if(!G){const R=new W.Z({color:"rgba(255,255,255,0.4)"}),g=new nt.Z({color:"#3399CC",width:1.25});G=[new S({image:new Q.Z({fill:R,stroke:g,radius:5}),fill:R,stroke:g})]}return G}function o(a){return a.getGeometry()}const l=S},8834:(Gt,mt,h)=>{"use strict";h.d(mt,{S:()=>W,e:()=>Q});const Q=42,W=256},9664:(Gt,mt,h)=>{"use strict";h.d(mt,{BB:()=>I,Ue:()=>H,lk:()=>O,n3:()=>a,nb:()=>p,nn:()=>u,qC:()=>R});var Q=h(8072),W=h(2780);function H(){return[1,0,0,1,0,0]}function O(f,F){return f[0]=F[0],f[1]=F[1],f[2]=F[2],f[3]=F[3],f[4]=F[4],f[5]=F[5],f}function u(f,F){const ot=F[0],U=F[1];return F[0]=f[0]*ot+f[2]*U+f[4],F[1]=f[1]*ot+f[3]*U+f[5],F}function a(f,F,ot){return function G(f,F,ot,U,q,tt,ht){return f[0]=F,f[1]=ot,f[2]=U,f[3]=q,f[4]=tt,f[5]=ht,f}(f,F,0,0,ot,0,0)}function R(f,F,ot,U,q,tt,ht,xt){const at=Math.sin(tt),D=Math.cos(tt);return f[0]=U*D,f[1]=q*at,f[2]=-U*at,f[3]=q*D,f[4]=ht*U*D-xt*U*at+F,f[5]=ht*q*at+xt*q*D+ot,f}function p(f,F){const ot=function w(f){return f[0]*f[3]-f[1]*f[2]}(F);(0,W.h)(0!==ot,"Transformation matrix cannot be inverted");const U=F[0],q=F[1],tt=F[2],ht=F[3],xt=F[4],at=F[5];return f[0]=ht/ot,f[1]=-q/ot,f[2]=-tt/ot,f[3]=U/ot,f[4]=(tt*at-ht*xt)/ot,f[5]=-(U*at-q*xt)/ot,f}let m;function I(f){const F="matrix("+f.join(", ")+")";if(Q.Id)return F;const ot=m||(m=document.createElement("div"));return ot.style.transform=F,ot.style.transform}new Array(6)},9070:(Gt,mt,h)=>{"use strict";function Q(){throw new Error("Unimplemented abstract method.")}h.d(mt,{O3:()=>Q,sq:()=>nt});let W=0;function nt(S){return S.ol_uid||(S.ol_uid=String(++W))}}}]);