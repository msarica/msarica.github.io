"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1519],{1519:(me,T,u)=>{u.r(T),u.d(T,{GamePage:()=>he});var g=u(5861),f=u(6814),Z=u(6223),h=u(7027),G=u(4475),I=u(1828),N=u(902),L=u(5311),D=u(2620),$=u(8039),k=u(9489),x=u(8645),v=u(9773),B=u(6306),z=u(2096),R=u(8536),Q=u(9593),Y=u(8182),H=u(6093),J=u(3822),S=u(7285),j=u(2064),C=u(3911),e=u(2029),V=u(7157),O=u(6546),M=u(8939),X=u(8001);const q=["mapElementRef"];let W=(()=>{var r;class m{constructor(t,i,o,d,l){this.locationService=t,this.gameService=i,this.info=o,this.loading=d,this.menuController=l,this.destroy$=new x.x,this.playerFeature=null,this.markerSource=null,this.features={},this.points=null,this.game$=this.gameService.gameLoaded$.pipe((0,v.R)(this.destroy$)).subscribe(a=>{this.points=null,this.setUpMap(a),this.points={},a.points.forEach(c=>{this.points[c.id]={point:c}})}),this.pointChanges$=this.gameService.pointsSnapshot$.pipe((0,v.R)(this.destroy$)).subscribe(a=>{this.latestUpdate=a,this.updateMarkers()})}updateMarkers(){if(!this.points||!this.latestUpdate)return;const t=this.latestUpdate;Object.keys(t).forEach(i=>{const o=t[i],d=this.points[i];if(!d)return void console.debug(i," not found");const l=d.point,a=l.id,c=l.img||S.PP.point,s=o.explored?S.PP.explored:o.selectable?c:S.PP.notSelectable;var p;if(!o.enabled||this.features[a])if(o.enabled||!this.features[a])if(o.explored&&this.features[a])null===(p=this.features[a])||void 0===p||p.setStyle(this.getStyle(S.PP.explored));else if(o.selectable&&this.features[a]){var y,P;null===(y=this.features[a])||void 0===y||y.setStyle(this.getStyle(c)),(null===(P=this.features[a])||void 0===P?void 0:P.get("data")).notSelectable=!1}else if(o.selectable||!this.features[a]);else{var b,E;null===(b=this.features[a])||void 0===b||b.setStyle(this.getStyle(S.PP.notSelectable)),(null===(E=this.features[a])||void 0===E?void 0:E.get("data")).notSelectable=!0}else this.removeMarker(a);else this.addMarker(l.location,{img:s,clickable:!0,pointId:a,location:l.location,notSelectable:!o.selectable})})}ngOnInit(){var t=this;return(0,g.Z)(function*(){t.setupSubscriptions()})()}setupSubscriptions(){var t=this;return(0,g.Z)(function*(){const i=yield t.info.translate("Loading...\nSetting up markers"),o=yield t.loading.present2(i,2e5);t.locationService.watchLocation().pipe((0,v.R)(t.destroy$),(0,B.K)(l=>(console.log(l),o.dismiss(),(0,z.of)(null)))).subscribe(l=>{l&&(t.lastUserLocation||o.dismiss(),t.lastUserLocation=l,t.playerFeature&&t.updateUserLocation(l))}),t.gameService.gameEnded$.pipe((0,v.R)(t.destroy$)).subscribe(l=>{t.info.alert(l.finishMessage,"END")})})()}setUpMap(t){this.map&&(this.map.dispose(),this.markerSource.dispose(),this.playerFeature.dispose(),this.features={},this.markerSource=null,this.playerFeature=null),(0,j.eL)();const i=t.zoom,o=t.location,d=new $.Z({collapsible:!0});this.map=new G.Z({view:new I.ZP({center:o,zoom:i}),layers:[new D.Z({source:new R.Z})],target:"ol-map",controls:(0,k.c)({attribution:!1}).extend([d])}),d.setCollapsible(!0),d.setCollapsed(!0);const l=new Q.Z({features:[]});this.markerSource=l;const a=new Y.Z({source:l});this.map.addLayer(a),this.playerFeature=this.setUpUser(),this.lastUserLocation&&this.updateUserLocation(this.lastUserLocation),this.map.on("moveend",c=>{var s;null===(s=this.map)||void 0===s||s.getView().getZoom()}),this.map.on("click",c=>{var s;const p=null===(s=this.map)||void 0===s?void 0:s.forEachFeatureAtPixel(c.pixel,y=>y);p&&this.onFeatureClicked(c,p)}),setTimeout(()=>{var c,s;null===(c=this.map)||void 0===c||c.setTarget(null===(s=this.mapElementRef)||void 0===s?void 0:s.nativeElement)})}onFeatureClicked(t,i){var o,d;if(!i)throw new Error("feature not found");if(!this.playerFeature)throw new Error("user location not found yet");const l=i.get("data");if(!l.clickable)return;const a=null===(o=i.getGeometry())||void 0===o?void 0:o.getCoordinates(),c=null===(d=this.playerFeature.getGeometry())||void 0===d?void 0:d.getCoordinates();if(!a||!c)throw new Error(`featureCoord ${a} userCoord ${c}`);const y=this.locationService.distance(a[1],c[1],a[0],c[0]),P=this.gameService.isCloseEnough(y);console.log(y,P),this.gameService.pointSelected({pointId:l.pointId,point:this.points[l.pointId].point,distance:y,isClose:P,notSelectable:l.notSelectable})}setUpUser(t){return this.addMarker([0,0],{clickable:!1,img:S.PP.current})}ngOnDestroy(){console.debug("destroying map component"),this.destroy$.next(),this.destroy$.unsubscribe()}getStyle(t){return new H.ZP({image:new J.Z({anchor:[.5,.5],anchorXUnits:"fraction",anchorYUnits:"fraction",size:[70,70],src:t})})}addMarker(t,i){if(!i)throw new Error("Data not found");const[o,d]=t,a=new N.Z({geometry:new L.Z([o,d]),data:i}),c=this.getStyle(i.img);a.setStyle(c),this.markerSource.addFeature(a);const s=i.pointId;return this.features[s]&&this.markerSource.removeFeature(this.features[s]),this.features[s]=a,a}removeMarker(t){if(!t)throw new Error("pointid cannot be null");const i=this.features[t];if(!i)throw new Error("feature not found");this.markerSource.removeFeature(i),delete this.features[t]}updateUserLocation(t){var i;if(!this.playerFeature)throw new Error("player not present");console.log(t);const o=this.locationService.transformFromGeoLocation(t);null===(i=this.playerFeature.getGeometry())||void 0===i||i.setCoordinates(o)}}return(r=m).\u0275fac=function(t){return new(t||r)(e.Y36(V.a),e.Y36(O.h),e.Y36(M.C),e.Y36(X.b),e.Y36(h._q))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-map"]],viewQuery:function(t,i){if(1&t&&e.Gf(q,7),2&t){let o;e.iGM(o=e.CRH())&&(i.mapElementRef=o.first)}},standalone:!0,features:[e.jDz],decls:3,vars:0,consts:[["id","ol-map",1,"map-container"],["mapElementRef",""]],template:function(t,i){1&t&&(e.ynx(0),e._UZ(1,"div",0,1),e.BQk())},dependencies:[h.Pc,Z.u5,C.aw,f.ez],styles:["[_nghost-%COMP%]{display:flex;flex-grow:1;flex-direction:column;height:86vh}.map-container[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0}),m})();var K=u(5619),U=u(8658),_=u(9025);const ee=["accordionGroup"];function te(r,m){if(1&r&&(e.TgZ(0,"ion-accordion",8)(1,"ion-item",1)(2,"ion-label"),e._uU(3),e.qZA()(),e.TgZ(4,"div",9),e._UZ(5,"app-story-history-item",10),e.qZA()()),2&r){const n=m.$implicit,t=m.index;e.Q6J("value",t),e.xp6(3),e.Oqu(n.title),e.xp6(2),e.Q6J("item",n)("index",t)("showHeader",!1)}}function ne(r,m){1&r&&(e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"ion-card-content"),e._uU(6),e.ALo(7,"translate"),e.qZA()()),2&r&&(e.xp6(3),e.Oqu(e.lcZ(4,2,"No History")),e.xp6(3),e.hij(" ",e.lcZ(7,4,"No history found yet")," "))}let ie=(()=>{var r;class m{constructor(t){this.gameService=t,this.destroy$=new x.x,this.points={},this.gameName="",this.hist=[],this.game$=this.gameService.gameLoaded$.pipe((0,v.R)(this.destroy$)).subscribe(i=>{this.gameName=i.name,this.gameDescription=i.description,this.points={},i.points.forEach(o=>{this.points[o.id]=o})}),this.gameHistory$=this.gameService.historyChanged$.pipe((0,v.R)(this.destroy$)).subscribe(i=>{this.hist=[],i.history.forEach(o=>{this.hist.push(U.H.toHistItem(this.points[o.pointId],o))})})}ngOnInit(){}ngOnDestroy(){console.debug("destroying story-history"),this.destroy$.next(),this.destroy$.unsubscribe()}}return(r=m).\u0275fac=function(t){return new(t||r)(e.Y36(O.h))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-story-history"]],viewQuery:function(t,i){if(1&t&&e.Gf(ee,7),2&t){let o;e.iGM(o=e.CRH())&&(i.accordionGroup=o.first)}},standalone:!0,features:[e.jDz],decls:12,vars:4,consts:[["value","first"],["slot","header","color","light"],["slot","content",1,"ion-padding"],[3,"bodyText"],["multiple","true"],["accordionGroup",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],["slot","content"],[3,"item","index","showHeader"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-accordion-group")(1,"ion-accordion",0)(2,"ion-item",1)(3,"ion-label"),e._uU(4),e.qZA()(),e.TgZ(5,"div",2),e._UZ(6,"app-html-show",3),e.qZA()()(),e._UZ(7,"hr"),e.TgZ(8,"ion-accordion-group",4,5),e.YNc(10,te,6,5,"ion-accordion",6),e.qZA(),e.YNc(11,ne,8,6,"ion-card",7)),2&t&&(e.xp6(4),e.Oqu(i.gameName),e.xp6(2),e.Q6J("bodyText",i.gameDescription),e.xp6(4),e.Q6J("ngForOf",i.hist),e.xp6(1),e.Q6J("ngIf",!(null!=i.hist&&i.hist.length)))},dependencies:[h.Pc,h.We,h.eh,h.PM,h.FN,h.Zi,h.Dq,h.Ie,h.Q$,f.ez,f.sg,f.O5,Z.u5,C.aw,C.X$,U.H,_.u]}),m})();var oe=u(662);const re=["payPalButtonContainer"];let w=(()=>{class r{constructor(n){this.zone=n}registerScript(n,t,i){const o=window[t];if(o)return void this.zone.run(()=>{i(o)});const d=document.createElement("script");d.id=this.getElemId(t),d.innerHTML="",d.onload=()=>{this.zone.run(()=>{i(window[t])})},d.src=n,d.async=!0,d.defer=!0,document.getElementsByTagName("head")[0].appendChild(d)}cleanup(n){const t=document.getElementById(this.getElemId(n));t&&t.remove()}getElemId(n){return`ngx-paypal-script-elem-${n}`}}return r.\u0275fac=function(n){return new(n||r)(e.LFG(e.R0b))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})(),F=(()=>{class r{constructor(n){this.scriptService=n,this.paypalWindowName="paypal"}registerPayPalScript(n,t){this.scriptService.registerScript(this.getUrlForConfig(n),this.paypalWindowName,t)}destroyPayPalScript(){this.scriptService.cleanup(this.paypalWindowName)}getUrlForConfig(n){const t=[{name:"client-id",value:n.clientId}];return n.locale&&t.push({name:"locale",value:n.locale}),n.currency&&t.push({name:"currency",value:n.currency}),n.commit&&t.push({name:"commit",value:n.commit}),n.vault&&t.push({name:"vault",value:n.vault}),n.intent&&t.push({name:"intent",value:n.intent}),n.funding&&t.push({name:"components",value:"buttons,funding-eligibility"}),n.extraParams&&t.push(...n.extraParams),`https://www.paypal.com/sdk/js${this.getQueryString(t)}`}getQueryString(n){let t="";for(let i=0;i<n.length;i++){const o=n[i];t+=0===i?"?":"&",t+=`${o.name}=${o.value}`}return t}}return r.\u0275fac=function(n){return new(n||r)(e.LFG(w))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})(),ae=(()=>{class r{constructor(n,t,i){this.paypalScriptService=n,this.cdr=t,this.ngZone=i,this.registerScript=!0,this.scriptLoaded=new e.vpe,this.ngUnsubscribe=new x.x,this.initializePayPal=!0}set payPalButtonContainer(n){this.payPalButtonContainerElem=n}ngOnChanges(n){this.payPalButtonContainerId||(this.payPalButtonContainerId=this.generateElementId());const t=this.config;n.config.isFirstChange()&&t&&this.registerScript&&this.initPayPalScript(t,i=>{this.payPal=i,this.doPayPalCheck()}),n.config.isFirstChange()||this.reinitialize(t)}ngOnDestroy(){this.paypalScriptService.destroyPayPalScript(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.doPayPalCheck()}customInit(n){this.payPal=n,this.doPayPalCheck()}reinitialize(n){if(this.config=n,this.payPal=void 0,this.paypalScriptService.destroyPayPalScript(),this.payPalButtonContainerId=this.generateElementId(),this.initializePayPal=!0,this.payPalButtonContainerElem)try{for(;this.payPalButtonContainerElem.nativeElement.firstChild;)this.payPalButtonContainerElem.nativeElement.removeChild(this.payPalButtonContainerElem.nativeElement.firstChild)}catch(t){console.error(t)}this.cdr.detectChanges(),this.config&&(this.payPal?this.doPayPalCheck():this.initPayPalScript(this.config,t=>{this.payPal=t,this.doPayPalCheck()}))}doPayPalCheck(){this.initializePayPal&&this.config&&this.payPal&&this.payPalButtonContainerElem&&this.payPalButtonContainerElem.nativeElement.id&&(this.initializePayPal=!1,this.initPayPal(this.config,this.payPal))}initPayPalScript(n,t){var i;this.paypalScriptService.registerPayPalScript({clientId:n.clientId,locale:null===(i=n.advanced)||void 0===i?void 0:i.locale,commit:n.advanced&&n.advanced.commit?n.advanced.commit:void 0,currency:n.currency,vault:n.vault,intent:n.intent,funding:null!=n.fundingSource||null!=n.fundingSource,extraParams:n.advanced&&n.advanced.extraQueryParams?n.advanced.extraQueryParams:[]},o=>{this.scriptLoaded.next(o),t(o)})}generateElementId(){return`ngx-captcha-id-${this.generateGuid()}`}initPayPal(n,t){this.ngZone.runOutsideAngular(()=>{const l={style:n.style,fundingSource:void 0,onApprove:(s,p)=>this.ngZone.run(()=>{if(n.onApprove&&n.onApprove(s,p),n.authorizeOnServer)return n.authorizeOnServer(s,p);const y=n.onClientAuthorization;y&&p.order.capture().then(P=>{this.ngZone.run(()=>{y(P)})})}),onError:s=>{this.ngZone.run(()=>{n.onError&&n.onError(s)})},onCancel:(s,p)=>{this.ngZone.run(()=>{n.onCancel&&n.onCancel(s,p)})},onClick:(s,p)=>{this.ngZone.run(()=>{n.onClick&&n.onClick(s,p)})},onInit:(s,p)=>{this.ngZone.run(()=>{n.onInit&&n.onInit(s,p)})},...(n.createOrderOnClient||n.createOrderOnServer)&&{createOrder:(s,p)=>this.ngZone.run(()=>{if(n.createOrderOnClient&&n.createOrderOnServer)throw Error("Both 'createOrderOnClient' and 'createOrderOnServer' are defined.\n                    Please choose one or the other.");if(!n.createOrderOnClient&&!n.createOrderOnServer)throw Error("Neither 'createOrderOnClient' or 'createOrderOnServer' are defined.\n                    Please define one of these to create order.");if(n.createOrderOnClient)return p.order.create(n.createOrderOnClient(s));if(n.createOrderOnServer)return n.createOrderOnServer(s);throw Error("Invalid state for 'createOrder'.")})},...n.createSubscriptionOnClient&&{createSubscription:(s,p)=>this.ngZone.run(()=>{if(n.createSubscriptionOnClient)return p.subscription.create(n.createSubscriptionOnClient(s))})},...n.onShippingChange&&{onShippingChange:(s,p)=>this.ngZone.run(()=>{if(n.onShippingChange)return n.onShippingChange(s,p)})}};let a;switch(n.fundingSource){case"PAYPAL":a=t.FUNDING.PAYPAL;break;case"CARD":a=t.FUNDING.CARD;break;case"PAYLATER":a=t.FUNDING.PAYLATER;break;case"CREDIT":a=t.FUNDING.CREDIT;break;case"VENMO":a=t.FUNDING.VENMO}var c;null!=a&&(l.fundingSource=a,"PAYPAL"!==n.fundingSource&&(null===(c=l.style)||void 0===c||delete c.color)),t.Buttons(l).render(`#${this.payPalButtonContainerId}`)})}generateGuid(){let n=(new Date).getTime(),t=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{let o=16*Math.random();return n>0?(o=(n+o)%16|0,n=Math.floor(n/16)):(o=(t+o)%16|0,t=Math.floor(t/16)),("x"==i?o:7&o|8).toString(16)})}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(F),e.Y36(e.sBO),e.Y36(e.R0b))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ngx-paypal"]],viewQuery:function(n,t){if(1&n&&e.Gf(re,5),2&n){let i;e.iGM(i=e.CRH())&&(t.payPalButtonContainer=i.first)}},inputs:{config:"config",registerScript:"registerScript"},outputs:{scriptLoaded:"scriptLoaded"},features:[e.TTD],decls:2,vars:1,consts:[[3,"id"],["payPalButtonContainer",""]],template:function(n,t){1&n&&e._UZ(0,"div",0,1),2&n&&e.Q6J("id",t.payPalButtonContainerId)},encapsulation:2,changeDetection:0}),r})(),se=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[w,F],imports:[f.ez]}),r})();var le=u(3308);function ce(r,m){if(1&r&&(e.ynx(0),e._UZ(1,"app-game-point",13),e.BQk()),2&r){const n=e.oxw();e.xp6(1),e.Q6J("selectedPoint",n.selectedPoint)}}function ue(r,m){if(1&r&&(e.ynx(0),e.TgZ(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),e._uU(4),e.qZA(),e.TgZ(5,"ion-card-subtitle"),e._uU(6),e.qZA()(),e.TgZ(7,"ion-card-content"),e._UZ(8,"ngx-paypal",14),e.qZA()(),e.BQk()),2&r){const n=e.oxw();e.xp6(4),e.Oqu(null==n.game?null:n.game.name),e.xp6(2),e.hij("Enjoyed the story? Please pay $",null==n._tempPoint||null==n._tempPoint.paymentRequired||null==n._tempPoint.paymentRequired.amount?null:n._tempPoint.paymentRequired.amount.toFixed(2)," to continue playing..."),e.xp6(2),e.Q6J("config",n.payPalConfig)}}function de(r,m){if(1&r){const n=e.EpF();e.TgZ(0,"ion-button",9),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.goBack2Builder())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"To Builder")," "))}function pe(r,m){1&r&&(e.ynx(0),e._UZ(1,"app-map"),e.BQk())}let he=(()=>{var r;class m{constructor(t,i,o,d){this.gameService=t,this.menuController=i,this.info=o,this.storage=d,this.gameName="",this.destroy$=new x.x,this.title$=new K.X("Menu"),this.isTestingGame=!1,this.askForExit=!0,this.pointSelected$=this.gameService.pointSelected$.pipe((0,v.R)(this.destroy$)).subscribe(l=>{var a;this.selectedPoint=void 0,console.log(l),l.paymentRequired?(this.loadPaypalConfig((null===(a=this.game)||void 0===a?void 0:a.name)||"",l.paymentRequired.amount),this._tempPoint=l):this.selectedPoint=l,this.openPointMenu()})}ngOnInit(){this.gameService.gameLoaded$.pipe((0,v.R)(this.destroy$)).subscribe(t=>{this.gameName=t.name,this.game=t}),this.gameService.closeMenu$.pipe((0,v.R)(this.destroy$)).subscribe(()=>{this.closeMenu()})}ngOnDestroy(){console.debug("destroying gamepage"),this.destroy$.next(),this.destroy$.unsubscribe()}openMenu(t){var i=this;return(0,g.Z)(function*(){const d=["point","story"].map(l=>i.menuController.enable(l===t,l));yield Promise.all(d),i.menuController.open()})()}openStory(){var t=this;return(0,g.Z)(function*(){yield t.closeMenu(),t.openMenu("story")})()}openPointMenu(){var t=this;return(0,g.Z)(function*(){yield t.closeMenu(),t.openMenu("point")})()}ionViewDidEnter(){var t=this;return(0,g.Z)(function*(){t.closeMenu(),t.isTestingGame=t.gameService.isTestingGame,t.askForExit=!0})()}goBack2Builder(){this.askForExit=!1,this.gameService.endTestGame()}closeMenu(){var t=this;return(0,g.Z)(function*(){const i="point";yield t.menuController.enable(!0,i),yield t.menuController.close(i)})()}canLeave(){var t=this;return(0,g.Z)(function*(){return!t.askForExit||!!(yield t.info.confirmYesNo("Leave Game","Are you sure to leave?"))})()}loadPaypalConfig(t,i){var o=this;return(0,g.Z)(function*(){const d=yield o.gameService.getPaymentClientId(),l=i.toFixed(2),a="USD";o.payPalConfig={currency:a,clientId:d,createOrderOnClient:c=>({intent:"CAPTURE",purchase_units:[{amount:{currency_code:a,value:l,breakdown:{item_total:{currency_code:a,value:l}}},items:[{name:t,quantity:"1",category:"DIGITAL_GOODS",unit_amount:{currency_code:a,value:l}}]}]}),advanced:{commit:"true"},style:{label:"paypal",layout:"vertical"},onApprove:(c,s)=>{console.log("onApprove - transaction was approved, but not authorized",c,s),s.order.get().then(p=>{console.log("onApprove - you can get full order details inside onApprove: ",p)})},onClientAuthorization:c=>{console.log("onClientAuthorization",c),o.game&&(o.gameService.setPaid(o.game.id),o.selectedPoint=o._tempPoint,o._tempPoint=void 0,o.payPalConfig=void 0)},onCancel:(c,s)=>{console.log("OnCancel",c,s),o.info.alert("Payment cancelled")},onError:c=>{console.log("OnError",c),o.info.alert(null==c?void 0:c.message)},onClick:(c,s)=>{console.log("onClick",c,s)}}})()}}return(r=m).\u0275fac=function(t){return new(t||r)(e.Y36(O.h),e.Y36(h._q),e.Y36(M.C),e.Y36(le.V))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-game"]],standalone:!0,features:[e.jDz],decls:41,vars:21,consts:[["menuId","point","contentId","main-content"],[1,"ion-text-center"],["slot","secondary"],[4,"ngIf"],["menuId","story","contentId","main-content"],[1,"ion-padding"],["id","main-content",3,"translucent"],["slot","primary"],[3,"click",4,"ngIf"],[3,"click"],[3,"fullscreen"],["collapse","condense"],["size","large"],[3,"selectedPoint"],[3,"config"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-menu",0)(1,"ion-header",1)(2,"ion-toolbar")(3,"ion-buttons",2)(4,"ion-menu-toggle")(5,"ion-button"),e._uU(6),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"ion-title"),e._uU(9),e.ALo(10,"async"),e.qZA()()(),e.TgZ(11,"ion-content"),e.YNc(12,ce,2,1,"ng-container",3),e.YNc(13,ue,9,3,"ng-container",3),e.qZA()(),e.TgZ(14,"ion-menu",4)(15,"ion-header",1)(16,"ion-toolbar")(17,"ion-buttons",2)(18,"ion-menu-toggle")(19,"ion-button"),e._uU(20),e.ALo(21,"translate"),e.qZA()()(),e.TgZ(22,"ion-title"),e._uU(23),e.qZA()()(),e.TgZ(24,"ion-content",5),e._UZ(25,"app-story-history"),e.qZA()(),e.TgZ(26,"ion-header",6)(27,"ion-toolbar")(28,"ion-title"),e._uU(29),e.qZA(),e.TgZ(30,"ion-buttons",7),e.YNc(31,de,3,3,"ion-button",8),e.TgZ(32,"ion-button",9),e.NdJ("click",function(){return i.openStory()}),e._uU(33),e.ALo(34,"translate"),e.qZA()()()(),e.TgZ(35,"ion-content",10)(36,"ion-header",11)(37,"ion-toolbar")(38,"ion-title",12),e._uU(39),e.qZA()()(),e.YNc(40,pe,2,0,"ng-container",3),e.qZA()),2&t&&(e.xp6(6),e.Oqu(e.lcZ(7,13,"Close")),e.xp6(3),e.Oqu(e.lcZ(10,15,i.title$)),e.xp6(3),e.Q6J("ngIf",i.selectedPoint),e.xp6(1),e.Q6J("ngIf",i.payPalConfig),e.xp6(7),e.Oqu(e.lcZ(21,17,"Close")),e.xp6(3),e.Oqu(null==i.game?null:i.game.name),e.xp6(3),e.Q6J("translucent",!0),e.xp6(3),e.hij(" ",i.gameName," "),e.xp6(2),e.Q6J("ngIf",i.isTestingGame),e.xp6(2),e.hij(" ",e.lcZ(34,19,"Story")," "),e.xp6(2),e.Q6J("fullscreen",!0),e.xp6(4),e.hij(" ",i.gameName," "),e.xp6(1),e.Q6J("ngIf",i.game))},dependencies:[h.Pc,h.YG,h.Sm,h.PM,h.FN,h.Zi,h.tO,h.Dq,h.W2,h.Gu,h.z0,h.zc,h.wd,h.sr,f.ez,f.O5,f.Ov,Z.u5,C.aw,C.X$,se,ae,W,ie,oe.v]}),m})()}}]);