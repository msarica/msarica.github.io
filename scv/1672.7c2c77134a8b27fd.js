(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1672],{2402:function(kt){kt.exports=function(){"use strict";function dt(_,R,v,m,G){!function T(u,B,tt,W,$){for(;W>tt;){if(W-tt>600){var F=W-tt+1,at=B-tt+1,St=Math.log(F),lt=.5*Math.exp(2*St/3),Tt=.5*Math.sqrt(St*lt*(F-lt)/F)*(at-F/2<0?-1:1);T(u,B,Math.max(tt,Math.floor(B-at*lt/F+Tt)),Math.min(W,Math.floor(B+(F-at)*lt/F+Tt)),$)}var f=u[B],O=tt,H=W;for(c(u,tt,B),$(u[W],f)>0&&c(u,tt,W);O<H;){for(c(u,O,H),O++,H--;$(u[O],f)<0;)O++;for(;$(u[H],f)>0;)H--}0===$(u[tt],f)?c(u,tt,H):c(u,++H,W),H<=B&&(tt=H+1),B<=H&&(W=H-1)}}(_,R,v||0,m||_.length-1,G||st)}function c(_,R,v){var m=_[R];_[R]=_[v],_[v]=m}function st(_,R){return _<R?-1:_>R?1:0}var b=function(_){void 0===_&&(_=9),this._maxEntries=Math.max(4,_),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function q(_,R,v){if(!v)return R.indexOf(_);for(var m=0;m<R.length;m++)if(v(_,R[m]))return m;return-1}function V(_,R){x(_,0,_.children.length,R,_)}function x(_,R,v,m,G){G||(G=d(null)),G.minX=1/0,G.minY=1/0,G.maxX=-1/0,G.maxY=-1/0;for(var T=R;T<v;T++){var u=_.children[T];A(G,_.leaf?m(u):u)}return G}function A(_,R){return _.minX=Math.min(_.minX,R.minX),_.minY=Math.min(_.minY,R.minY),_.maxX=Math.max(_.maxX,R.maxX),_.maxY=Math.max(_.maxY,R.maxY),_}function j(_,R){return _.minX-R.minX}function L(_,R){return _.minY-R.minY}function y(_){return(_.maxX-_.minX)*(_.maxY-_.minY)}function i(_){return _.maxX-_.minX+(_.maxY-_.minY)}function n(_,R){return _.minX<=R.minX&&_.minY<=R.minY&&R.maxX<=_.maxX&&R.maxY<=_.maxY}function h(_,R){return R.minX<=_.maxX&&R.minY<=_.maxY&&R.maxX>=_.minX&&R.maxY>=_.minY}function d(_){return{children:_,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function S(_,R,v,m,G){for(var T=[R,v];T.length;)if(!((v=T.pop())-(R=T.pop())<=m)){var u=R+Math.ceil((v-R)/m/2)*m;dt(_,u,R,v,G),T.push(R,u,u,v)}}return b.prototype.all=function(){return this._all(this.data,[])},b.prototype.search=function(_){var R=this.data,v=[];if(!h(_,R))return v;for(var m=this.toBBox,G=[];R;){for(var T=0;T<R.children.length;T++){var u=R.children[T],B=R.leaf?m(u):u;h(_,B)&&(R.leaf?v.push(u):n(_,B)?this._all(u,v):G.push(u))}R=G.pop()}return v},b.prototype.collides=function(_){var R=this.data;if(!h(_,R))return!1;for(var v=[];R;){for(var m=0;m<R.children.length;m++){var G=R.children[m],T=R.leaf?this.toBBox(G):G;if(h(_,T)){if(R.leaf||n(_,T))return!0;v.push(G)}}R=v.pop()}return!1},b.prototype.load=function(_){if(!_||!_.length)return this;if(_.length<this._minEntries){for(var R=0;R<_.length;R++)this.insert(_[R]);return this}var v=this._build(_.slice(),0,_.length-1,0);if(this.data.children.length)if(this.data.height===v.height)this._splitRoot(this.data,v);else{if(this.data.height<v.height){var m=this.data;this.data=v,v=m}this._insert(v,this.data.height-v.height-1,!0)}else this.data=v;return this},b.prototype.insert=function(_){return _&&this._insert(_,this.data.height-1),this},b.prototype.clear=function(){return this.data=d([]),this},b.prototype.remove=function(_,R){if(!_)return this;for(var v,m,G,T=this.data,u=this.toBBox(_),B=[],tt=[];T||B.length;){if(T||(T=B.pop(),m=B[B.length-1],v=tt.pop(),G=!0),T.leaf){var W=q(_,T.children,R);if(-1!==W)return T.children.splice(W,1),B.push(T),this._condense(B),this}G||T.leaf||!n(T,u)?m?(v++,T=m.children[v],G=!1):T=null:(B.push(T),tt.push(v),v=0,m=T,T=T.children[0])}return this},b.prototype.toBBox=function(_){return _},b.prototype.compareMinX=function(_,R){return _.minX-R.minX},b.prototype.compareMinY=function(_,R){return _.minY-R.minY},b.prototype.toJSON=function(){return this.data},b.prototype.fromJSON=function(_){return this.data=_,this},b.prototype._all=function(_,R){for(var v=[];_;)_.leaf?R.push.apply(R,_.children):v.push.apply(v,_.children),_=v.pop();return R},b.prototype._build=function(_,R,v,m){var G,T=v-R+1,u=this._maxEntries;if(T<=u)return V(G=d(_.slice(R,v+1)),this.toBBox),G;m||(m=Math.ceil(Math.log(T)/Math.log(u)),u=Math.ceil(T/Math.pow(u,m-1))),(G=d([])).leaf=!1,G.height=m;var B=Math.ceil(T/u),tt=B*Math.ceil(Math.sqrt(u));S(_,R,v,tt,this.compareMinX);for(var W=R;W<=v;W+=tt){var $=Math.min(W+tt-1,v);S(_,W,$,B,this.compareMinY);for(var F=W;F<=$;F+=B){var at=Math.min(F+B-1,$);G.children.push(this._build(_,F,at,m-1))}}return V(G,this.toBBox),G},b.prototype._chooseSubtree=function(_,R,v,m){for(;m.push(R),!R.leaf&&m.length-1!==v;){for(var G=1/0,T=1/0,u=void 0,B=0;B<R.children.length;B++){var tt=R.children[B],W=y(tt),$=(F=_,at=tt,(Math.max(at.maxX,F.maxX)-Math.min(at.minX,F.minX))*(Math.max(at.maxY,F.maxY)-Math.min(at.minY,F.minY))-W);$<T?(T=$,G=W<G?W:G,u=tt):$===T&&W<G&&(G=W,u=tt)}R=u||R.children[0]}var F,at;return R},b.prototype._insert=function(_,R,v){var m=v?_:this.toBBox(_),G=[],T=this._chooseSubtree(m,this.data,R,G);for(T.children.push(_),A(T,m);R>=0&&G[R].children.length>this._maxEntries;)this._split(G,R),R--;this._adjustParentBBoxes(m,G,R)},b.prototype._split=function(_,R){var v=_[R],m=v.children.length,G=this._minEntries;this._chooseSplitAxis(v,G,m);var T=this._chooseSplitIndex(v,G,m),u=d(v.children.splice(T,v.children.length-T));u.height=v.height,u.leaf=v.leaf,V(v,this.toBBox),V(u,this.toBBox),R?_[R-1].children.push(u):this._splitRoot(v,u)},b.prototype._splitRoot=function(_,R){this.data=d([_,R]),this.data.height=_.height+1,this.data.leaf=!1,V(this.data,this.toBBox)},b.prototype._chooseSplitIndex=function(_,R,v){for(var m,G,T,u,B,tt,W,$=1/0,F=1/0,at=R;at<=v-R;at++){var St=x(_,0,at,this.toBBox),lt=x(_,at,v,this.toBBox),Tt=(G=St,T=lt,void 0,void 0,void 0,void 0,u=Math.max(G.minX,T.minX),B=Math.max(G.minY,T.minY),tt=Math.min(G.maxX,T.maxX),W=Math.min(G.maxY,T.maxY),Math.max(0,tt-u)*Math.max(0,W-B)),M=y(St)+y(lt);Tt<$?($=Tt,m=at,F=M<F?M:F):Tt===$&&M<F&&(F=M,m=at)}return m||v-R},b.prototype._chooseSplitAxis=function(_,R,v){var m=_.leaf?this.compareMinX:j,G=_.leaf?this.compareMinY:L;this._allDistMargin(_,R,v,m)<this._allDistMargin(_,R,v,G)&&_.children.sort(m)},b.prototype._allDistMargin=function(_,R,v,m){_.children.sort(m);for(var G=this.toBBox,T=x(_,0,R,G),u=x(_,v-R,v,G),B=i(T)+i(u),tt=R;tt<v-R;tt++){var W=_.children[tt];A(T,_.leaf?G(W):W),B+=i(T)}for(var $=v-R-1;$>=R;$--){var F=_.children[$];A(u,_.leaf?G(F):F),B+=i(u)}return B},b.prototype._adjustParentBBoxes=function(_,R,v){for(var m=v;m>=0;m--)A(R[m],_)},b.prototype._condense=function(_){for(var R=_.length-1,v=void 0;R>=0;R--)0===_[R].children.length?R>0?(v=_[R-1].children).splice(v.indexOf(_[R]),1):this.clear():V(_[R],this.toBBox)},b}()},2815:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>L});var st=c(6978),b=c(3632),q=c(9889),V=c(8214);class A extends V.ZP{constructor(i,n,h){super(i),this.element=n,this.index=h}}const L=class j extends b.Z{constructor(i,n){if(super(),this.unique_=!!(n=n||{}).unique,this.array_=i||[],this.unique_)for(let h=0,d=this.array_.length;h<d;++h)this.assertUnique_(this.array_[h],h);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(i){for(let n=0,h=i.length;n<h;++n)this.push(i[n]);return this}forEach(i){const n=this.array_;for(let h=0,d=n.length;h<d;++h)i(n[h],h,n)}getArray(){return this.array_}item(i){return this.array_[i]}getLength(){return this.get("length")}insertAt(i,n){if(i<0||i>this.getLength())throw new Error("Index out of bounds: "+i);this.unique_&&this.assertUnique_(n),this.array_.splice(i,0,n),this.updateLength_(),this.dispatchEvent(new A(q.Z.ADD,n,i))}pop(){return this.removeAt(this.getLength()-1)}push(i){this.unique_&&this.assertUnique_(i);const n=this.getLength();return this.insertAt(n,i),this.getLength()}remove(i){const n=this.array_;for(let h=0,d=n.length;h<d;++h)if(n[h]===i)return this.removeAt(h)}removeAt(i){if(i<0||i>=this.getLength())return;const n=this.array_[i];return this.array_.splice(i,1),this.updateLength_(),this.dispatchEvent(new A(q.Z.REMOVE,n,i)),n}setAt(i,n){if(i>=this.getLength())return void this.insertAt(i,n);if(i<0)throw new Error("Index out of bounds: "+i);this.unique_&&this.assertUnique_(n,i);const d=this.array_[i];this.array_[i]=n,this.dispatchEvent(new A(q.Z.REMOVE,d,i)),this.dispatchEvent(new A(q.Z.ADD,n,i))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(i,n){for(let h=0,d=this.array_.length;h<d;++h)if(this.array_[h]===i&&h!==n)throw new st.Z(58)}}},9889:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>st});const st={ADD:"add",REMOVE:"remove"}},625:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>b});const b=class st{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}},3641:(kt,dt,c)=>{"use strict";c.d(dt,{K:()=>x});var st=c(9972),b=c(9996),q=c(1729);function x(j,L,y){const i=j;let n=!0,h=!1,d=!1;const S=[(0,q.Vx)(i,st.Z.LOAD,function(){d=!0,h||L()})];return i.src&&b.Tp?(h=!0,i.decode().then(function(){n&&L()}).catch(function(_){n&&(d?L():y())})):S.push((0,q.Vx)(i,st.Z.ERROR,y)),function(){n=!1,S.forEach(q.bN)}}},521:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>st});const st={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},9001:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>j});var st=c(1299),b=c(1999),q=c(1992),V=c(3641);const j=class x extends st.Z{constructor(y,i,n,h,d,S){super(y,i,S),this.crossOrigin_=h,this.src_=n,this.key=n,this.image_=new Image,null!==h&&(this.image_.crossOrigin=h),this.unlisten_=null,this.tileLoadFunction_=d}getImage(){return this.image_}setImage(y){this.image_=y,this.state=b.Z.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=b.Z.ERROR,this.unlistenImage_(),this.image_=function A(){const L=(0,q.E4)(1,1);return L.fillStyle="rgba(0,0,0,0)",L.fillRect(0,0,1,1),L.canvas}(),this.changed()}handleImageLoad_(){const y=this.image_;this.state=y.naturalWidth&&y.naturalHeight?b.Z.LOADED:b.Z.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==b.Z.ERROR&&(this.state=b.Z.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==b.Z.IDLE&&(this.state=b.Z.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,V.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}},5485:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>Vt});var st=c(3632),b=c(2815),q=c(9889),V=c(625),x=c(1345),A=c(119),j=c(483),L=c(760),y=c(2956),i=c(4593),n=c(3481);function d(z,t){y.c.expire()}const S=class h extends V.Z{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,o){(0,A.O3)()}calculateMatrices2D(t){const o=t.viewState,g=t.coordinateToPixelTransform,P=t.pixelToCoordinateTransform;(0,j.qC)(g,t.size[0]/2,t.size[1]/2,1/o.resolution,-1/o.resolution,-o.rotation,-o.center[0],-o.center[1]),(0,j.nb)(P,g)}forEachFeatureAtCoordinate(t,o,g,P,it,ct,_t,mt){let Zt;const Dt=o.viewState;function Gt(ee,ae,Pe,Oe){return it.call(ct,ae,ee?Pe:null,Oe)}const $t=Dt.projection,ne=(0,n.Cf)(t.slice(),$t),Mt=[[0,0]];if($t.canWrapX()&&P){const ee=$t.getExtent(),ae=(0,L.dz)(ee);Mt.push([-ae,0],[ae,0])}const Be=o.layerStatesArray,pe=Be.length,fe=[],Xe=[];for(let ee=0;ee<Mt.length;ee++)for(let ae=pe-1;ae>=0;--ae){const Pe=Be[ae],Oe=Pe.layer;if(Oe.hasRenderer()&&(0,i.j)(Pe,Dt)&&_t.call(mt,Oe)){const Qe=Oe.getRenderer(),je=Oe.getSource();if(Qe&&je){const Me=je.getWrapX()?ne:t,ze=Gt.bind(null,Pe.managed);Xe[0]=Me[0]+Mt[ee][0],Xe[1]=Me[1]+Mt[ee][1],Zt=Qe.forEachFeatureAtCoordinate(Xe,o,g,ze,fe)}if(Zt)return Zt}}if(0===fe.length)return;const gi=1/fe.length;return fe.forEach((ee,ae)=>ee.distanceSq+=ae*gi),fe.sort((ee,ae)=>ee.distanceSq-ae.distanceSq),fe.some(ee=>Zt=ee.callback(ee.feature,ee.layer,ee.geometry)),Zt}hasFeatureAtCoordinate(t,o,g,P,it,ct){return void 0!==this.forEachFeatureAtCoordinate(t,o,g,P,x.uX,this,it,ct)}getMap(){return this.map_}renderFrame(t){(0,A.O3)()}scheduleExpireIconCache(t){y.c.canExpireCache()&&t.postRenderFunctions.push(d)}};var _=c(4587),R=c(2919),v=c(2526),m=c(5263),G=c(4686),T=c(1729),u=c(1992);const tt=class B extends S{constructor(t){super(t),this.fontChangeListenerKey_=(0,T.oL)(G.sG,_.Z.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const o=this.element_.style;o.position="absolute",o.width="100%",o.height="100%",o.zIndex="0",this.element_.className=m.XV+" ol-layers";const g=t.getViewport();g.insertBefore(this.element_,g.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,o){const g=this.getMap();if(g.hasListener(t)){const P=new R.Z(t,void 0,o);g.dispatchEvent(P)}}disposeInternal(){(0,T.bN)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent(v.Z.PRECOMPOSE,t);const o=t.layerStatesArray.sort(function(ct,_t){return ct.zIndex-_t.zIndex}),g=t.viewState;this.children_.length=0;const P=[];let it=null;for(let ct=0,_t=o.length;ct<_t;++ct){const mt=o[ct];t.layerIndex=ct;const Zt=mt.layer,Dt=Zt.getSourceState();if(!(0,i.j)(mt,g)||"ready"!=Dt&&"undefined"!=Dt){Zt.unrender();continue}const Gt=Zt.render(t,it);!Gt||(Gt!==it&&(this.children_.push(Gt),it=Gt),"getDeclutter"in Zt&&P.push(Zt))}for(let ct=P.length-1;ct>=0;--ct)P[ct].renderDeclutter(t);(0,u.hF)(this.element_,this.children_),this.dispatchRenderEvent(v.Z.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}};var W=c(9972),$=c(5560),F=c(8214),at=c(1911),St=c(9466);class lt extends F.ZP{constructor(t,o){super(t),this.layer=o}}class M extends $.Z{constructor(t){t=t||{};const o=Object.assign({},t);delete o.layers;let g=t.layers;super(o),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),g?Array.isArray(g)?g=new b.Z(g.slice(),{unique:!0}):(0,at.h)("function"==typeof g.getArray,43):g=new b.Z(void 0,{unique:!0}),this.setLayers(g)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(T.bN),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push((0,T.oL)(t,q.Z.ADD,this.handleLayersAdd_,this),(0,T.oL)(t,q.Z.REMOVE,this.handleLayersRemove_,this));for(const g in this.listenerKeys_)this.listenerKeys_[g].forEach(T.bN);(0,St.Z)(this.listenerKeys_);const o=t.getArray();for(let g=0,P=o.length;g<P;g++){const it=o[g];this.registerLayerListeners_(it),this.dispatchEvent(new lt("addlayer",it))}this.changed()}registerLayerListeners_(t){const o=[(0,T.oL)(t,_.Z.PROPERTYCHANGE,this.handleLayerChange_,this),(0,T.oL)(t,W.Z.CHANGE,this.handleLayerChange_,this)];t instanceof M&&o.push((0,T.oL)(t,"addlayer",this.handleLayerGroupAdd_,this),(0,T.oL)(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,A.sq)(t)]=o}handleLayerGroupAdd_(t){this.dispatchEvent(new lt("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new lt("removelayer",t.layer))}handleLayersAdd_(t){const o=t.element;this.registerLayerListeners_(o),this.dispatchEvent(new lt("addlayer",o)),this.changed()}handleLayersRemove_(t){const o=t.element,g=(0,A.sq)(o);this.listenerKeys_[g].forEach(T.bN),delete this.listenerKeys_[g],this.dispatchEvent(new lt("removelayer",o)),this.changed()}getLayers(){return this.get("layers")}setLayers(t){const o=this.getLayers();if(o){const g=o.getArray();for(let P=0,it=g.length;P<it;++P)this.dispatchEvent(new lt("removelayer",g[P]))}this.set("layers",t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach(function(o){o.getLayersArray(t)}),t}getLayerStatesArray(t){const o=void 0!==t?t:[],g=o.length;this.getLayers().forEach(function(ct){ct.getLayerStatesArray(o)});const P=this.getLayerState();let it=P.zIndex;!t&&void 0===P.zIndex&&(it=0);for(let ct=g,_t=o.length;ct<_t;ct++){const mt=o[ct];mt.opacity*=P.opacity,mt.visible=mt.visible&&P.visible,mt.maxResolution=Math.min(mt.maxResolution,P.maxResolution),mt.minResolution=Math.max(mt.minResolution,P.minResolution),mt.minZoom=Math.max(mt.minZoom,P.minZoom),mt.maxZoom=Math.min(mt.maxZoom,P.maxZoom),void 0!==P.extent&&(mt.extent=void 0!==mt.extent?(0,L.Ed)(mt.extent,P.extent):P.extent),void 0===mt.zIndex&&(mt.zIndex=it)}return o}getSourceState(){return"ready"}}const l=M,O=class f extends F.ZP{constructor(t,o,g){super(t),this.map=o,this.frameState=void 0!==g?g:null}},nt=class H extends O{constructor(t,o,g,P,it,ct){super(t,o,it),this.originalEvent=g,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==P&&P,this.activePointers=ct}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},ot={SINGLECLICK:"singleclick",CLICK:W.Z.CLICK,DBLCLICK:W.Z.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var C=c(8007),k=c(9996);const K=class Z extends C.Z{constructor(t,o){super(t),this.map_=t,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===o?1:o,this.down_=null;const g=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=g,this.pointerdownListenerKey_=(0,T.oL)(g,"pointerdown",this.handlePointerDown_,this),this.relayedListenerKey_=(0,T.oL)(g,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(W.Z.TOUCHMOVE,this.boundHandleTouchMove_,!!k.bM&&{passive:!1})}emulateClick_(t){let o=new nt(ot.CLICK,this.map_,t);this.dispatchEvent(o),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,o=new nt(ot.DBLCLICK,this.map_,t),this.dispatchEvent(o)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;const g=new nt(ot.SINGLECLICK,this.map_,t);this.dispatchEvent(g)}.bind(this),250)}updateActivePointers_(t){const o=t,g=o.pointerId;if(o.type==ot.POINTERUP||o.type==ot.POINTERCANCEL){delete this.trackedTouches_[g];for(const P in this.trackedTouches_)if(this.trackedTouches_[P].target!==o.target){delete this.trackedTouches_[P];break}}else(o.type==ot.POINTERDOWN||o.type==ot.POINTERMOVE)&&(this.trackedTouches_[g]=o);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const o=new nt(ot.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(o),this.emulateClicks_&&!o.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(T.bN),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const o=new nt(ot.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(o),this.down_={};for(const g in t){const P=t[g];this.down_[g]="function"==typeof P?x.Zn:P}if(0===this.dragListenerKeys_.length){const g=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,T.oL)(g,ot.POINTERMOVE,this.handlePointerMove_,this),(0,T.oL)(g,ot.POINTERUP,this.handlePointerUp_,this),(0,T.oL)(this.element_,ot.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==g&&this.dragListenerKeys_.push((0,T.oL)(this.element_.getRootNode(),ot.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const o=new nt(ot.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(o)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const o=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new nt(ot.POINTERMOVE,this.map_,t,o))}handleTouchMove_(t){const o=this.originalPointerMoveEvent_;(!o||o.defaultPrevented)&&("boolean"!=typeof t.cancelable||!0===t.cancelable)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&((0,T.bN)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(W.Z.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,T.bN)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(T.bN),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},ht=1/0;var Ot=c(1999);var Ht=c(2811),Wt=c(8587);const Qt=class Jt extends st.Z{constructor(t){super();const o=t.element;o&&!t.target&&!o.style.pointerEvents&&(o.style.pointerEvents="auto"),this.element=o||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){(0,u.ZF)(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&(0,u.ZF)(this.element);for(let o=0,g=this.listenerKeys.length;o<g;++o)(0,T.bN)(this.listenerKeys[o]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==x.Zn&&this.listenerKeys.push((0,T.oL)(t,"postrender",this.render,this)),t.render())}render(t){}setTarget(t){this.target_="string"==typeof t?document.getElementById(t):t}};var qt=c(2456);const Rt=class ie extends Qt{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);const o=void 0!==t.className?t.className:"ol-attribution",g=void 0!==t.tipLabel?t.tipLabel:"Attributions",P=void 0!==t.expandClassName?t.expandClassName:o+"-expand",it=void 0!==t.collapseLabel?t.collapseLabel:"\u203a",ct=void 0!==t.collapseClassName?t.collapseClassName:o+"-collapse";"string"==typeof it?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=it,this.collapseLabel_.className=ct):this.collapseLabel_=it;const _t=void 0!==t.label?t.label:"i";"string"==typeof _t?(this.label_=document.createElement("span"),this.label_.textContent=_t,this.label_.className=P):this.label_=_t;const mt=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=g,this.toggleButton_.appendChild(mt),this.toggleButton_.addEventListener(W.Z.CLICK,this.handleClick_.bind(this),!1);const Dt=this.element;Dt.className=o+" "+m.XV+" "+m.hg+(this.collapsed_&&this.collapsible_?" "+m.hN:"")+(this.collapsible_?"":" ol-uncollapsible"),Dt.appendChild(this.toggleButton_),Dt.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const o={},g=[];let P=!0;const it=t.layerStatesArray;for(let ct=0,_t=it.length;ct<_t;++ct){const mt=it[ct];if(!(0,i.j)(mt,t.viewState))continue;const Zt=mt.layer.getSource();if(!Zt)continue;const Dt=Zt.getAttributions();if(!Dt)continue;const Gt=Dt(t);if(Gt)if(P=P&&!1!==Zt.getAttributionsCollapsible(),Array.isArray(Gt))for(let $t=0,ne=Gt.length;$t<ne;++$t)Gt[$t]in o||(g.push(Gt[$t]),o[Gt[$t]]=!0);else Gt in o||(g.push(Gt),o[Gt]=!0)}return this.overrideCollapsible_||this.setCollapsible(P),g}updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const o=this.collectSourceAttributions_(t),g=o.length>0;if(this.renderedVisible_!=g&&(this.element.style.display=g?"":"none",this.renderedVisible_=g),!(0,qt.fS)(o,this.renderedAttributions_)){(0,u.ep)(this.ulElement_);for(let P=0,it=o.length;P<it;++P){const ct=document.createElement("li");ct.innerHTML=o[P],this.ulElement_.appendChild(ct)}this.renderedAttributions_=o}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(m.hN),this.collapsed_?(0,u.$H)(this.collapseLabel_,this.label_):(0,u.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}};var a=c(6299);const X=class w extends Qt{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const o=void 0!==t.className?t.className:"ol-rotate",g=void 0!==t.label?t.label:"\u21e7",P=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"==typeof g?(this.label_=document.createElement("span"),this.label_.className=P,this.label_.textContent=g):(this.label_=g,this.label_.classList.add(P));const it=t.tipLabel?t.tipLabel:"Reset rotation",ct=document.createElement("button");ct.className=o+"-reset",ct.setAttribute("type","button"),ct.title=it,ct.appendChild(this.label_),ct.addEventListener(W.Z.CLICK,this.handleClick_.bind(this),!1);const mt=this.element;mt.className=o+" "+m.XV+" "+m.hg,mt.appendChild(ct),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(m.oj)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const o=this.getMap().getView();if(!o)return;const g=o.getRotation();void 0!==g&&(this.duration_>0&&g%(2*Math.PI)!=0?o.animate({rotation:0,duration:this.duration_,easing:a.Vv}):o.setRotation(0))}render(t){const o=t.frameState;if(!o)return;const g=o.viewState.rotation;if(g!=this.rotation_){const P="rotate("+g+"rad)";if(this.autoHide_){const it=this.element.classList.contains(m.oj);it||0!==g?it&&0!==g&&this.element.classList.remove(m.oj):this.element.classList.add(m.oj)}this.label_.style.transform=P}this.rotation_=g}},pt=class ut extends Qt{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const o=void 0!==t.className?t.className:"ol-zoom",g=void 0!==t.delta?t.delta:1,P=void 0!==t.zoomInClassName?t.zoomInClassName:o+"-in",it=void 0!==t.zoomOutClassName?t.zoomOutClassName:o+"-out",ct=void 0!==t.zoomInLabel?t.zoomInLabel:"+",_t=void 0!==t.zoomOutLabel?t.zoomOutLabel:"\u2013",mt=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",Zt=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",Dt=document.createElement("button");Dt.className=P,Dt.setAttribute("type","button"),Dt.title=mt,Dt.appendChild("string"==typeof ct?document.createTextNode(ct):ct),Dt.addEventListener(W.Z.CLICK,this.handleClick_.bind(this,g),!1);const Gt=document.createElement("button");Gt.className=it,Gt.setAttribute("type","button"),Gt.title=Zt,Gt.appendChild("string"==typeof _t?document.createTextNode(_t):_t),Gt.addEventListener(W.Z.CLICK,this.handleClick_.bind(this,-g),!1);const ne=this.element;ne.className=o+" "+m.XV+" "+m.hg,ne.appendChild(Dt),ne.appendChild(Gt),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,o){o.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const g=this.getMap().getView();if(!g)return;const P=g.getZoom();if(void 0!==P){const it=g.getConstrainedZoom(P+t);this.duration_>0?(g.getAnimating()&&g.cancelAnimations(),g.animate({zoom:it,duration:this.duration_,easing:a.Vv})):g.setZoom(it)}}};function Bt(z,t,o,g){const P=z.getZoom();if(void 0===P)return;const it=z.getConstrainedZoom(P+t),ct=z.getResolutionForZoom(it);z.getAnimating()&&z.cancelAnimations(),z.animate({resolution:ct,anchor:o,duration:void 0!==g?g:250,easing:a.Vv})}const te=class Kt extends st.Z{constructor(t){super(),t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set("active",t)}setMap(t){this.map_=t}},De=class le extends te{constructor(t){super(),this.delta_=(t=t||{}).delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let o=!1;if(t.type==ot.DBLCLICK){const g=t.originalEvent,it=t.coordinate,ct=g.shiftKey?-this.delta_:this.delta_;Bt(t.map.getView(),ct,it,this.duration_),g.preventDefault(),o=!0}return!o}};function oe(z){const t=z.length;let o=0,g=0;for(let P=0;P<t;P++)o+=z[P].clientX,g+=z[P].clientY;return[o/t,g/t]}const ce=class he extends te{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let o=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==ot.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==ot.POINTERUP){const g=this.handleUpEvent(t);this.handlingDownUpSequence=g&&this.targetPointers.length>0}}else if(t.type==ot.POINTERDOWN){const g=this.handleDownEvent(t);this.handlingDownUpSequence=g,o=this.stopDown(g)}else t.type==ot.POINTERMOVE&&this.handleMoveEvent(t);return!o}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}};function Te(z){const t=arguments;return function(o){let g=!0;for(let P=0,it=t.length;P<it&&(g=g&&t[P](o),g);++P);return g}}const xe=function(z){const t=z.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},ue=function(z){return!z.map.getTargetElement().hasAttribute("tabindex")||function(z){const t=z.map.getTargetElement(),o=z.map.getOwnerDocument().activeElement;return t.contains(o)}(z)},ve=x.uX,Ae=function(z){const t=z.originalEvent;return 0==t.button&&!(k.G$&&k.tK&&t.ctrlKey)},re=function(z){const t=z.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},Ne=function(z){const t=z.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},He=function(z){const t=z.originalEvent,o=t.target.tagName;return"INPUT"!==o&&"SELECT"!==o&&"TEXTAREA"!==o&&!t.target.isContentEditable},be=function(z){const t=z.originalEvent;return(0,at.h)(void 0!==t,56),"mouse"==t.pointerType},si=function(z){const t=z.originalEvent;return(0,at.h)(void 0!==t,56),t.isPrimary&&0===t.button},oi=class ri extends ce{constructor(t){super({stopDown:x.Dv}),this.kinetic_=(t=t||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const o=t.condition?t.condition:Te(re,si);this.condition_=t.onFocusOnly?Te(ue,o):o,this.noKinetic_=!1}handleDragEvent(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());const o=this.targetPointers,g=oe(o);if(o.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(g[0],g[1]),this.lastCentroid){const P=[this.lastCentroid[0]-g[0],g[1]-this.lastCentroid[1]],ct=t.map.getView();(0,n.bA)(P,ct.getResolution()),(0,n.U1)(P,ct.getRotation()),ct.adjustCenterInternal(P)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=g,this.lastPointersCount_=o.length,t.originalEvent.preventDefault()}handleUpEvent(t){const o=t.map,g=o.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const P=this.kinetic_.getDistance(),it=this.kinetic_.getAngle(),ct=g.getCenterInternal(),_t=o.getPixelFromCoordinateInternal(ct),mt=o.getCoordinateFromPixelInternal([_t[0]-P*Math.cos(it),_t[1]-P*Math.sin(it)]);g.animateInternal({center:g.getConstrainedCenter(mt),duration:500,easing:a.Vv})}return this.panning_&&(this.panning_=!1,g.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const g=t.map.getView();return this.lastCentroid=null,g.getAnimating()&&g.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}};var Je=c(9857);const li=class ai extends ce{constructor(t){t=t||{},super({stopDown:x.Dv}),this.condition_=t.condition?t.condition:xe,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!be(t))return;const o=t.map,g=o.getView();if(g.getConstraints().rotation===Je.h$)return;const P=o.getSize(),it=t.pixel,ct=Math.atan2(P[1]/2-it[1],it[0]-P[0]/2);void 0!==this.lastAngle_&&g.adjustRotationInternal(-(ct-this.lastAngle_)),this.lastAngle_=ct}handleUpEvent(t){return!be(t)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){return!!(be(t)&&Ae(t)&&this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}};var hi=c(617);const ci=class Le extends V.Z{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,o=this.endPixel_,g="px",P=this.element_.style;P.left=Math.min(t[0],o[0])+g,P.top=Math.min(t[1],o[1])+g,P.width=Math.abs(o[0]-t[0])+g,P.height=Math.abs(o[1]-t[1])+g}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const o=this.element_.style;o.left="inherit",o.top="inherit",o.width="inherit",o.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,o){this.startPixel_=t,this.endPixel_=o,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,o=this.endPixel_,P=[t,[t[0],o[1]],o,[o[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);P[4]=P[0].slice(),this.geometry_?this.geometry_.setCoordinates([P]):this.geometry_=new hi.ZP([P])}getGeometry(){return this.geometry_}};class Ke extends F.ZP{constructor(t,o,g){super(t),this.coordinate=o,this.mapBrowserEvent=g}}const di=class ui extends ce{constructor(t){super(),this.box_=new ci((t=t||{}).className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:Ae,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,o,g){const P=g[0]-o[0],it=g[1]-o[1];return P*P+it*it>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Ke("boxdrag",t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const o=this.boxEndCondition_(t,this.startPixel_,t.pixel);return o&&this.onBoxEnd(t),this.dispatchEvent(new Ke(o?"boxend":"boxcancel",t.coordinate,t)),!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Ke("boxstart",t.coordinate,t)),!0)}onBoxEnd(t){}},e=class Q extends di{constructor(t){super({condition:(t=t||{}).condition?t.condition:Ne,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const g=this.getMap().getView();let P=this.getGeometry();if(this.out_){const it=g.rotatedExtentForGeometry(P),ct=g.getResolutionForExtentInternal(it),_t=g.getResolution()/ct;P=P.clone(),P.scale(_t*_t)}g.fitInternal(P,{duration:this.duration_,easing:a.Vv})}},E=class r extends te{constructor(t){super(),t=t||{},this.defaultCondition_=function(o){return re(o)&&He(o)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let o=!1;if(t.type==W.Z.KEYDOWN){const g=t.originalEvent,P=g.keyCode;if(this.condition_(t)&&(40==P||37==P||39==P||38==P)){const ct=t.map.getView(),_t=ct.getResolution()*this.pixelDelta_;let mt=0,Zt=0;40==P?Zt=-_t:37==P?mt=-_t:39==P?mt=_t:Zt=_t;const Dt=[mt,Zt];(0,n.U1)(Dt,ct.getRotation()),function Nt(z,t,o){const g=z.getCenterInternal();g&&z.animateInternal({duration:void 0!==o?o:250,easing:a.GE,center:z.getConstrainedCenter([g[0]+t[0],g[1]+t[1]])})}(ct,Dt,this.duration_),g.preventDefault(),o=!0}}return!o}},I=class p extends te{constructor(t){super(),this.condition_=(t=t||{}).condition?t.condition:He,this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let o=!1;if(t.type==W.Z.KEYDOWN||t.type==W.Z.KEYPRESS){const g=t.originalEvent,P=g.charCode;if(this.condition_(t)&&(P=="+".charCodeAt(0)||P=="-".charCodeAt(0))){const it=t.map,ct=P=="+".charCodeAt(0)?this.delta_:-this.delta_;Bt(it.getView(),ct,void 0,this.duration_),g.preventDefault(),o=!0}}return!o}};var J=c(2156);const gt=class rt extends te{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const o=t.condition?t.condition:ve;this.condition_=t.onFocusOnly?Te(ue,o):o,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==W.Z.WHEEL)return!0;const g=t.map,P=t.originalEvent;let it;if(P.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==W.Z.WHEEL&&(it=P.deltaY,k.V&&P.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(it/=k.MP),P.deltaMode===WheelEvent.DOM_DELTA_LINE&&(it*=40)),0===it)return!1;this.lastDelta_=it;const ct=Date.now();void 0===this.startTime_&&(this.startTime_=ct),(!this.mode_||ct-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(it)<4?"trackpad":"wheel");const _t=g.getView();if("trackpad"===this.mode_&&!_t.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(_t.getAnimating()&&_t.cancelAnimations(),_t.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),_t.adjustZoom(-it/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=ct,!1;this.totalDelta_+=it;const mt=Math.max(this.timeout_-(ct-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,g),mt),!1}handleWheelZoom_(t){const o=t.getView();o.getAnimating()&&o.cancelAnimations();let g=-(0,J.uZ)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(o.getConstrainResolution()||this.constrainResolution_)&&(g=g?g>0?1:-1:0),Bt(o,g,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}},yt=class ft extends ce{constructor(t){const o=t=t||{};o.stopDown||(o.stopDown=x.Dv),super(o),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let o=0;const g=this.targetPointers[0],P=this.targetPointers[1],it=Math.atan2(P.clientY-g.clientY,P.clientX-g.clientX);if(void 0!==this.lastAngle_){const Dt=it-this.lastAngle_;this.rotationDelta_+=Dt,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),o=Dt}this.lastAngle_=it;const ct=t.map,_t=ct.getView();if(_t.getConstraints().rotation===Je.h$)return;const mt=ct.getViewport().getBoundingClientRect(),Zt=oe(this.targetPointers);Zt[0]-=mt.left,Zt[1]-=mt.top,this.anchor_=ct.getCoordinateFromPixelInternal(Zt),this.rotating_&&(ct.render(),_t.adjustRotationInternal(o,this.anchor_))}handleUpEvent(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))}handleDownEvent(t){if(this.targetPointers.length>=2){const o=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||o.getView().beginInteraction(),!0}return!1}},Lt=class vt extends ce{constructor(t){const o=t=t||{};o.stopDown||(o.stopDown=x.Dv),super(o),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let o=1;const g=this.targetPointers[0],P=this.targetPointers[1],it=g.clientX-P.clientX,ct=g.clientY-P.clientY,_t=Math.sqrt(it*it+ct*ct);void 0!==this.lastDistance_&&(o=this.lastDistance_/_t),this.lastDistance_=_t;const mt=t.map,Zt=mt.getView();1!=o&&(this.lastScaleDelta_=o);const Dt=mt.getViewport().getBoundingClientRect(),Gt=oe(this.targetPointers);Gt[0]-=Dt.left,Gt[1]-=Dt.top,this.anchor_=mt.getCoordinateFromPixelInternal(Gt),mt.render(),Zt.adjustResolutionInternal(o,this.anchor_)}handleUpEvent(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(t){if(this.targetPointers.length>=2){const o=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||o.getView().beginInteraction(),!0}return!1}};var It=c(6003),wt=c(1750);function Ft(z){z instanceof i.Z?z.setMapInternal(null):z instanceof l&&z.getLayers().forEach(Ft)}function jt(z,t){if(z instanceof i.Z)z.setMapInternal(t);else if(z instanceof l){const o=z.getLayers().getArray();for(let g=0,P=o.length;g<P;++g)jt(o[g],t)}}const Vt=class Xt extends st.Z{constructor(t){super();const o=function Ut(z){let t=null;void 0!==z.keyboardEventTarget&&(t="string"==typeof z.keyboardEventTarget?document.getElementById(z.keyboardEventTarget):z.keyboardEventTarget);const o={},g=z.layers&&"function"==typeof z.layers.getLayers?z.layers:new l({layers:z.layers});let P,it,ct;return o.layergroup=g,o.target=z.target,o.view=z.view instanceof Ht.ZP?z.view:new Ht.ZP,void 0!==z.controls&&(Array.isArray(z.controls)?P=new b.Z(z.controls.slice()):((0,at.h)("function"==typeof z.controls.getArray,47),P=z.controls)),void 0!==z.interactions&&(Array.isArray(z.interactions)?it=new b.Z(z.interactions.slice()):((0,at.h)("function"==typeof z.interactions.getArray,48),it=z.interactions)),void 0!==z.overlays?Array.isArray(z.overlays)?ct=new b.Z(z.overlays.slice()):((0,at.h)("function"==typeof z.overlays.getArray,49),ct=z.overlays):ct=new b.Z,{controls:P,interactions:it,keyboardEventTarget:t,overlays:ct,values:o}}(t=t||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:k.MP,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=(0,j.Ue)(),this.pixelToCoordinateTransform_=(0,j.Ue)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=o.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.controls=o.controls||function Et(z){z=z||{};const t=new b.Z;return(void 0===z.zoom||z.zoom)&&t.push(new pt(z.zoomOptions)),(void 0===z.rotate||z.rotate)&&t.push(new X(z.rotateOptions)),(void 0===z.attribution||z.attribution)&&t.push(new Rt(z.attributionOptions)),t}(),this.interactions=o.interactions||function Ct(z){z=z||{};const t=new b.Z,o=new class D{constructor(t,o,g){this.decay_=t,this.minVelocity_=o,this.delay_=g,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,o){this.points_.push(t,o,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,o=this.points_.length-3;if(this.points_[o+2]<t)return!1;let g=o-3;for(;g>0&&this.points_[g+2]>t;)g-=3;const P=this.points_[o+2]-this.points_[g+2];if(P<1e3/60)return!1;const it=this.points_[o]-this.points_[g],ct=this.points_[o+1]-this.points_[g+1];return this.angle_=Math.atan2(ct,it),this.initialVelocity_=Math.sqrt(it*it+ct*ct)/P,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}(-.005,.05,100);return(void 0===z.altShiftDragRotate||z.altShiftDragRotate)&&t.push(new li),(void 0===z.doubleClickZoom||z.doubleClickZoom)&&t.push(new De({delta:z.zoomDelta,duration:z.zoomDuration})),(void 0===z.dragPan||z.dragPan)&&t.push(new oi({onFocusOnly:z.onFocusOnly,kinetic:o})),(void 0===z.pinchRotate||z.pinchRotate)&&t.push(new yt),(void 0===z.pinchZoom||z.pinchZoom)&&t.push(new Lt({duration:z.zoomDuration})),(void 0===z.keyboard||z.keyboard)&&(t.push(new E),t.push(new I({delta:z.zoomDelta,duration:z.zoomDuration}))),(void 0===z.mouseWheelZoom||z.mouseWheelZoom)&&t.push(new gt({onFocusOnly:z.onFocusOnly,duration:z.zoomDuration})),(void 0===z.shiftDragZoom||z.shiftDragZoom)&&t.push(new e({duration:z.zoomDuration})),t}({onFocusOnly:!0}),this.overlays_=o.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new class At extends class xt{constructor(t,o){this.priorityFunction_=t,this.keyFunction_=o,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,(0,St.Z)(this.queuedElements_)}dequeue(){const t=this.elements_,o=this.priorities_,g=t[0];1==t.length?(t.length=0,o.length=0):(t[0]=t.pop(),o[0]=o.pop(),this.siftUp_(0));const P=this.keyFunction_(g);return delete this.queuedElements_[P],g}enqueue(t){(0,at.h)(!(this.keyFunction_(t)in this.queuedElements_),31);const o=this.priorityFunction_(t);return o!=ht&&(this.elements_.push(t),this.priorities_.push(o),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const o=this.elements_,g=this.priorities_,P=o.length,it=o[t],ct=g[t],_t=t;for(;t<P>>1;){const mt=this.getLeftChildIndex_(t),Zt=this.getRightChildIndex_(t),Dt=Zt<P&&g[Zt]<g[mt]?Zt:mt;o[t]=o[Dt],g[t]=g[Dt],t=Dt}o[t]=it,g[t]=ct,this.siftDown_(_t,t)}siftDown_(t,o){const g=this.elements_,P=this.priorities_,it=g[o],ct=P[o];for(;o>t;){const _t=this.getParentIndex_(o);if(!(P[_t]>ct))break;g[o]=g[_t],P[o]=P[_t],o=_t}g[o]=it,P[o]=ct}reprioritize(){const t=this.priorityFunction_,o=this.elements_,g=this.priorities_;let P=0;const it=o.length;let ct,_t,mt;for(_t=0;_t<it;++_t)ct=o[_t],mt=t(ct),mt==ht?delete this.queuedElements_[this.keyFunction_(ct)]:(g[P]=mt,o[P++]=ct);o.length=P,g.length=P,this.heapify_()}}{constructor(t,o){super(function(g){return t.apply(null,g)},function(g){return g[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=o,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const o=super.enqueue(t);return o&&t[0].addEventListener(W.Z.CHANGE,this.boundHandleTileChange_),o}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const o=t.target,g=o.getState();if(g===Ot.Z.LOADED||g===Ot.Z.ERROR||g===Ot.Z.EMPTY){g!==Ot.Z.ERROR&&o.removeEventListener(W.Z.CHANGE,this.boundHandleTileChange_);const P=o.getKey();P in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[P],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,o){let P,it,ct,g=0;for(;this.tilesLoading_<t&&g<o&&this.getCount()>0;)it=this.dequeue()[0],ct=it.getKey(),P=it.getState(),P===Ot.Z.IDLE&&!(ct in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[ct]=!0,++this.tilesLoading_,++g,it.load())}}(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener("layergroup",this.handleLayerGroupChanged_),this.addChangeListener("view",this.handleViewChanged_),this.addChangeListener("size",this.handleSizeChanged_),this.addChangeListener("target",this.handleTargetChanged_),this.setProperties(o.values);const g=this;t.view&&!(t.view instanceof Ht.ZP)&&t.view.then(function(P){g.setView(new Ht.ZP(P))}),this.controls.addEventListener(q.Z.ADD,function(P){P.element.setMap(this)}.bind(this)),this.controls.addEventListener(q.Z.REMOVE,function(P){P.element.setMap(null)}.bind(this)),this.interactions.addEventListener(q.Z.ADD,function(P){P.element.setMap(this)}.bind(this)),this.interactions.addEventListener(q.Z.REMOVE,function(P){P.element.setMap(null)}.bind(this)),this.overlays_.addEventListener(q.Z.ADD,function(P){this.addOverlayInternal_(P.element)}.bind(this)),this.overlays_.addEventListener(q.Z.REMOVE,function(P){const it=P.element.getId();void 0!==it&&delete this.overlayIdIndex_[it.toString()],P.element.setMap(null)}.bind(this)),this.controls.forEach(function(P){P.setMap(this)}.bind(this)),this.interactions.forEach(function(P){P.setMap(this)}.bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){jt(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const o=t.getId();void 0!==o&&(this.overlayIdIndex_[o.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,o,g){if(!this.frameState_||!this.renderer_)return;const P=this.getCoordinateFromPixelInternal(t);return this.renderer_.forEachFeatureAtCoordinate(P,this.frameState_,void 0!==(g=void 0!==g?g:{}).hitTolerance?g.hitTolerance:0,!1!==g.checkWrapped,o,null,void 0!==g.layerFilter?g.layerFilter:x.uX,null)}getFeaturesAtPixel(t,o){const g=[];return this.forEachFeatureAtPixel(t,function(P){g.push(P)},o),g}getAllLayers(){const t=[];return function o(g){g.forEach(function(P){P instanceof l?o(P.getLayers()):t.push(P)})}(this.getLayers()),t}hasFeatureAtPixel(t,o){if(!this.frameState_||!this.renderer_)return!1;const g=this.getCoordinateFromPixelInternal(t);return this.renderer_.hasFeatureAtCoordinate(g,this.frameState_,void 0!==(o=void 0!==o?o:{}).hitTolerance?o.hitTolerance:0,!1!==o.checkWrapped,void 0!==o.layerFilter?o.layerFilter:x.uX,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const o=this.viewport_.getBoundingClientRect(),g="changedTouches"in t?t.changedTouches[0]:t;return[g.clientX-o.left,g.clientY-o.top]}getTarget(){return this.get("target")}getTargetElement(){const t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null}getCoordinateFromPixel(t){return(0,It.lO)(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const o=this.frameState_;return o?(0,j.nn)(o.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const o=this.overlayIdIndex_[t.toString()];return void 0!==o?o:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get("layergroup")}setLayers(t){const o=this.getLayerGroup();if(t instanceof b.Z)return void o.setLayers(t);const g=o.getLayers();g.clear(),g.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let o=0,g=t.length;o<g;++o){const P=t[o];if(!P.visible)continue;const it=P.layer.getRenderer();if(it&&!it.ready)return!0;const ct=P.layer.getSource();if(ct&&ct.loading)return!0}return!1}getPixelFromCoordinate(t){const o=(0,It.Vs)(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(o)}getPixelFromCoordinateInternal(t){const o=this.frameState_;return o?(0,j.nn)(o.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get("size")}getView(){return this.get("view")}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,o,g,P){return function Yt(z,t,o,g,P){if(!z||!(o in z.wantedTiles)||!z.wantedTiles[o][t.getKey()])return ht;const it=z.viewState.center,ct=g[0]-it[0],_t=g[1]-it[1];return 65536*Math.log(P)+Math.sqrt(ct*ct+_t*_t)/P}(this.frameState_,t,o,g,P)}handleBrowserEvent(t,o){const g=new nt(o=o||t.type,this,t);this.handleMapBrowserEvent(g)}handleMapBrowserEvent(t){if(!this.frameState_)return;const o=t.originalEvent,g=o.type;if("pointerdown"===g||g===W.Z.WHEEL||g===W.Z.KEYDOWN){const P=this.getOwnerDocument(),it=this.viewport_.getRootNode?this.viewport_.getRootNode():P,ct=o.target;if(this.overlayContainerStopEvent_.contains(ct)||!(it===P?P.documentElement:it).contains(ct))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const P=this.getInteractions().getArray().slice();for(let it=P.length-1;it>=0;it--){const ct=P[it];if(ct.getMap()===this&&ct.getActive()&&this.getTargetElement()&&(!ct.handleEvent(t)||t.propagationStopped))break}}}handlePostRender(){const t=this.frameState_,o=this.tileQueue_;if(!o.isEmpty()){let P=this.maxTilesLoading_,it=P;if(t){const ct=t.viewHints;if(ct[Wt.Z.ANIMATING]||ct[Wt.Z.INTERACTING]){const _t=Date.now()-t.time>8;P=_t?0:8,it=_t?0:2}}o.getTilesLoading()<P&&(o.reprioritize(),o.loadMoreTiles(P,it))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(v.Z.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(v.Z.RENDERCOMPLETE,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new O("loadend",this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new O("loadstart",this,t))));const g=this.postRenderFunctions_;for(let P=0,it=g.length;P<it;++P)g[P](this,t);g.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let o=0,g=this.targetChangeHandlerKeys_.length;o<g;++o)(0,T.bN)(this.targetChangeHandlerKeys_[o]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(W.Z.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(W.Z.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,u.ZF)(this.viewport_)}const t=this.getTargetElement();if(t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new tt(this)),this.mapBrowserEventHandler_=new K(this,this.moveTolerance_);for(const P in ot)this.mapBrowserEventHandler_.addEventListener(ot[P],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(W.Z.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(W.Z.WHEEL,this.boundHandleBrowserEvent_,!!k.bM&&{passive:!1});const o=this.getOwnerDocument().defaultView,g=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[(0,T.oL)(g,W.Z.KEYDOWN,this.handleBrowserEvent,this),(0,T.oL)(g,W.Z.KEYPRESS,this.handleBrowserEvent,this),(0,T.oL)(o,W.Z.RESIZE,this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&((0,T.bN)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,T.bN)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=(0,T.oL)(t,_.Z.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,T.oL)(t,W.Z.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(T.bN),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new lt("addlayer",t)),this.layerGroupPropertyListenerKeys_=[(0,T.oL)(t,_.Z.PROPERTYCHANGE,this.render,this),(0,T.oL)(t,W.Z.CHANGE,this.render,this),(0,T.oL)(t,"addlayer",this.handleLayerAdd_,this),(0,T.oL)(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let o=0,g=t.length;o<g;++o){const P=t[o].layer;P.hasRenderer()&&P.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Ft(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const o=this.getSize(),g=this.getView(),P=this.frameState_;let it=null;if(void 0!==o&&(0,wt.py)(o)&&g&&g.isDef()){const ct=g.getHints(this.frameState_?this.frameState_.viewHints:void 0),_t=g.getState();if(it={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:(0,L.p8)(_t.center,_t.resolution,_t.rotation,o),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:o,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:_t,viewHints:ct,wantedTiles:{},mapId:(0,A.sq)(this),renderTargets:{}},_t.nextCenter&&_t.nextResolution){const mt=isNaN(_t.nextRotation)?_t.rotation:_t.nextRotation;it.nextExtent=(0,L.p8)(_t.nextCenter,_t.nextResolution,mt,o)}}this.frameState_=it,this.renderer_.renderFrame(it),it&&(it.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,it.postRenderFunctions),P&&(!this.previousExtent_||!(0,L.xb)(this.previousExtent_)&&!(0,L.fS)(it.extent,this.previousExtent_))&&(this.dispatchEvent(new O("movestart",this,P)),this.previousExtent_=(0,L.YN)(this.previousExtent_)),this.previousExtent_&&!it.viewHints[Wt.Z.ANIMATING]&&!it.viewHints[Wt.Z.INTERACTING]&&!(0,L.fS)(it.extent,this.previousExtent_)&&(this.dispatchEvent(new O("moveend",this,it)),(0,L.d9)(it.extent,this.previousExtent_))),this.dispatchEvent(new O("postrender",this,it)),this.renderComplete_=this.hasListener("loadstart")||this.hasListener("loadend")||this.hasListener(v.Z.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const o=this.getLayerGroup();o&&this.handleLayerRemove_(new lt("removelayer",o)),this.set("layergroup",t)}setSize(t){this.set("size",t)}setTarget(t){this.set("target",t)}setView(t){if(!t||t instanceof Ht.ZP)return void this.set("view",t);this.set("view",new Ht.ZP);const o=this;t.then(function(g){o.setView(new Ht.ZP(g))})}updateSize(){const t=this.getTargetElement();let o;if(t){const g=getComputedStyle(t),P=t.offsetWidth-parseFloat(g.borderLeftWidth)-parseFloat(g.paddingLeft)-parseFloat(g.paddingRight)-parseFloat(g.borderRightWidth),it=t.offsetHeight-parseFloat(g.borderTopWidth)-parseFloat(g.paddingTop)-parseFloat(g.paddingBottom)-parseFloat(g.borderBottomWidth);!isNaN(P)&&!isNaN(it)&&(o=[P,it],!(0,wt.py)(o)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(o),this.updateViewportSize_()}updateViewportSize_(){const t=this.getView();if(t){let o;const g=getComputedStyle(this.viewport_);g.width&&g.height&&(o=[parseInt(g.width,10),parseInt(g.height,10)]),t.setViewportSize(o)}}}},3632:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>L});var st=c(8214),b=c(4587),q=c(4272),V=c(119),x=c(9466);class A extends st.ZP{constructor(i,n,h){super(i),this.key=n,this.oldValue=h}}const L=class j extends q.Z{constructor(i){super(),(0,V.sq)(this),this.values_=null,void 0!==i&&this.setProperties(i)}get(i){let n;return this.values_&&this.values_.hasOwnProperty(i)&&(n=this.values_[i]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(i,n){let h;h=`change:${i}`,this.hasListener(h)&&this.dispatchEvent(new A(h,i,n)),h=b.Z.PROPERTYCHANGE,this.hasListener(h)&&this.dispatchEvent(new A(h,i,n))}addChangeListener(i,n){this.addEventListener(`change:${i}`,n)}removeChangeListener(i,n){this.removeEventListener(`change:${i}`,n)}set(i,n,h){const d=this.values_||(this.values_={});if(h)d[i]=n;else{const S=d[i];d[i]=n,S!==n&&this.notify(i,S)}}setProperties(i,n){for(const h in i)this.set(h,i[h],n)}applyProperties(i){!i.values_||Object.assign(this.values_||(this.values_={}),i.values_)}unset(i,n){if(this.values_&&i in this.values_){const h=this.values_[i];delete this.values_[i],(0,x.x)(this.values_)&&(this.values_=null),n||this.notify(i,h)}}}},4587:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>st});const st={PROPERTYCHANGE:"propertychange"}},4272:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>A});var st=c(8007),b=c(9972),q=c(1729);const A=class V extends st.Z{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(b.Z.CHANGE)}getRevision(){return this.revision_}onInternal(L,y){if(Array.isArray(L)){const i=L.length,n=new Array(i);for(let h=0;h<i;++h)n[h]=(0,q.oL)(this,L[h],y);return n}return(0,q.oL)(this,L,y)}onceInternal(L,y){let i;if(Array.isArray(L)){const n=L.length;i=new Array(n);for(let h=0;h<n;++h)i[h]=(0,q.Vx)(this,L[h],y)}else i=(0,q.Vx)(this,L,y);return y.ol_key=i,i}unInternal(L,y){const i=y.ol_key;if(i)!function x(j){if(Array.isArray(j))for(let L=0,y=j.length;L<y;++L)(0,q.bN)(j[L]);else(0,q.bN)(j)}(i);else if(Array.isArray(L))for(let n=0,h=L.length;n<h;++n)this.removeEventListener(L[n],y);else this.removeEventListener(L,y)}}},1299:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>j});var st=c(8007),b=c(9972),q=c(1999),V=c(119),x=c(6299);const j=class A extends st.Z{constructor(y,i,n){super(),n=n||{},this.tileCoord=y,this.state=i,this.interimTile=null,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(b.Z.CHANGE)}release(){this.state===q.Z.ERROR&&this.setState(q.Z.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let y=this.interimTile;do{if(y.getState()==q.Z.LOADED)return this.transition_=0,y;y=y.interimTile}while(y);return this}refreshInterimChain(){if(!this.interimTile)return;let y=this.interimTile,i=this;do{if(y.getState()==q.Z.LOADED){y.interimTile=null;break}y.getState()==q.Z.LOADING?i=y:y.getState()==q.Z.IDLE?i.interimTile=y.interimTile:i=y,y=i.interimTile}while(y)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(y){if(this.state!==q.Z.ERROR&&this.state>y)throw new Error("Tile load sequence violation");this.state=y,this.changed()}load(){(0,V.O3)()}getAlpha(y,i){if(!this.transition_)return 1;let n=this.transitionStarts_[y];if(n){if(-1===n)return 1}else n=i,this.transitionStarts_[y]=n;const h=i-n+1e3/60;return h>=this.transition_?1:(0,x.YQ)(h/this.transition_)}inTransition(y){return!!this.transition_&&-1!==this.transitionStarts_[y]}endTransition(y){this.transition_&&(this.transitionStarts_[y]=-1)}}},6609:(kt,dt,c)=>{"use strict";c.d(dt,{T:()=>b,Z:()=>q});class st{constructor(x,A,j,L){this.minX=x,this.maxX=A,this.minY=j,this.maxY=L}contains(x){return this.containsXY(x[1],x[2])}containsTileRange(x){return this.minX<=x.minX&&x.maxX<=this.maxX&&this.minY<=x.minY&&x.maxY<=this.maxY}containsXY(x,A){return this.minX<=x&&x<=this.maxX&&this.minY<=A&&A<=this.maxY}equals(x){return this.minX==x.minX&&this.minY==x.minY&&this.maxX==x.maxX&&this.maxY==x.maxY}extend(x){x.minX<this.minX&&(this.minX=x.minX),x.maxX>this.maxX&&(this.maxX=x.maxX),x.minY<this.minY&&(this.minY=x.minY),x.maxY>this.maxY&&(this.maxY=x.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(x){return this.minX<=x.maxX&&this.maxX>=x.minX&&this.minY<=x.maxY&&this.maxY>=x.minY}}function b(V,x,A,j,L){return void 0!==L?(L.minX=V,L.maxX=x,L.minY=A,L.maxY=j,L):new st(V,x,A,j)}const q=st},1999:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>st});const st={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},2811:(kt,dt,c)=>{"use strict";c.d(dt,{ZP:()=>Tt});var st=c(3632),b=c(8587);const q={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var V=c(9302),x=c(6003),A=c(1345),j=c(3481),L=c(1911),y=c(2156);function i(M,l,f){return function(O,H,nt,ot,Y){if(!O)return;if(!H&&!l)return O;const C=l?0:nt[0]*H,k=l?0:nt[1]*H,Z=Y?Y[0]:0,K=Y?Y[1]:0;let U=M[0]+C/2+Z,et=M[2]-C/2+Z,ht=M[1]+k/2+K,xt=M[3]-k/2+K;U>et&&(U=(et+U)/2,et=U),ht>xt&&(ht=(xt+ht)/2,xt=ht);let Pt=(0,y.uZ)(O[0],U,et),Ot=(0,y.uZ)(O[1],ht,xt);if(ot&&f&&H){const At=30*H;Pt+=-At*Math.log(1+Math.max(0,U-O[0])/At)+At*Math.log(1+Math.max(0,O[0]-et)/At),Ot+=-At*Math.log(1+Math.max(0,ht-O[1])/At)+At*Math.log(1+Math.max(0,O[1]-xt)/At)}return[Pt,Ot]}}function n(M){return M}var h=c(760),d=c(2456);function S(M,l,f,O){const H=(0,h.dz)(l)/f[0],nt=(0,h.Cr)(l)/f[1];return O?Math.min(M,Math.max(H,nt)):Math.min(M,Math.min(H,nt))}function _(M,l,f){let O=Math.min(M,l);return O*=Math.log(1+50*Math.max(0,M/l-1))/50+1,f&&(O=Math.max(O,f),O/=Math.log(1+50*Math.max(0,f/M-1))/50+1),(0,y.uZ)(O,f/2,2*l)}function m(M,l,f,O,H){return f=void 0===f||f,function(nt,ot,Y,C){if(void 0!==nt){const k=O?S(M,O,Y,H):M;return f&&C?_(nt,k,l):(0,y.uZ)(nt,l,k)}}}var G=c(9857),T=c(6299),u=c(617);function W(M,l){setTimeout(function(){M(l)},0)}function lt(M,l,f,O,H){const nt=Math.cos(-H);let ot=Math.sin(-H),Y=M[0]*nt-M[1]*ot,C=M[1]*nt+M[0]*ot;return Y+=(l[0]/2-f[0])*O,C+=(f[1]-l[1]/2)*O,ot=-ot,[Y*nt-C*ot,C*nt+Y*ot]}const Tt=class tt extends st.Z{constructor(l){super(),l=Object.assign({},l),this.hints_=[0,0],this.animations_=[],this.projection_=(0,x.UQ)(l.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,l.projection&&(0,x.h_)(),l.center&&(l.center=(0,x.Vs)(l.center,this.projection_)),l.extent&&(l.extent=(0,x.dY)(l.extent,this.projection_)),this.applyOptions_(l)}applyOptions_(l){const f=Object.assign({},l);for(const Y in q)delete f[Y];this.setProperties(f,!0);const O=function F(M){let l,f,O,ot=void 0!==M.minZoom?M.minZoom:0,Y=void 0!==M.maxZoom?M.maxZoom:28;const C=void 0!==M.zoomFactor?M.zoomFactor:2,k=void 0!==M.multiWorld&&M.multiWorld,Z=void 0===M.smoothResolutionConstraint||M.smoothResolutionConstraint,K=void 0!==M.showFullExtent&&M.showFullExtent,U=(0,x.UQ)(M.projection,"EPSG:3857"),et=U.getExtent();let ht=M.constrainOnlyCenter,xt=M.extent;if(!k&&!xt&&U.isGlobal()&&(ht=!1,xt=et),void 0!==M.resolutions){const Pt=M.resolutions;f=Pt[ot],O=void 0!==Pt[Y]?Pt[Y]:Pt[Pt.length-1],l=M.constrainResolution?function R(M,l,f,O){return l=void 0===l||l,function(H,nt,ot,Y){if(void 0!==H){const C=M[0],k=M[M.length-1],Z=f?S(C,f,ot,O):C;if(Y)return l?_(H,Z,k):(0,y.uZ)(H,k,Z);const K=Math.min(Z,H),U=Math.floor((0,d.h7)(M,K,nt));return M[U]>Z&&U<M.length-1?M[U+1]:M[U]}}}(Pt,Z,!ht&&xt,K):m(f,O,Z,!ht&&xt,K)}else{const Ot=(et?Math.max((0,h.dz)(et),(0,h.Cr)(et)):360*x.Wm.degrees/U.getMetersPerUnit())/V.S/Math.pow(2,0),At=Ot/Math.pow(2,28);f=M.maxResolution,void 0!==f?ot=0:f=Ot/Math.pow(C,ot),O=M.minResolution,void 0===O&&(O=void 0!==M.maxZoom?void 0!==M.maxResolution?f/Math.pow(C,Y):Ot/Math.pow(C,Y):At),Y=ot+Math.floor(Math.log(f/O)/Math.log(C)),O=f/Math.pow(C,Y-ot),l=M.constrainResolution?function v(M,l,f,O,H,nt){return O=void 0===O||O,f=void 0!==f?f:0,function(ot,Y,C,k){if(void 0!==ot){const Z=H?S(l,H,C,nt):l;if(k)return O?_(ot,Z,f):(0,y.uZ)(ot,f,Z);const K=1e-9,U=Math.ceil(Math.log(l/Z)/Math.log(M)-K),et=-Y*(.5-K)+.5,ht=Math.min(Z,ot),xt=Math.floor(Math.log(l/ht)/Math.log(M)+et),Pt=Math.max(U,xt),Ot=l/Math.pow(M,Pt);return(0,y.uZ)(Ot,f,Z)}}}(C,f,O,Z,!ht&&xt,K):m(f,O,Z,!ht&&xt,K)}return{constraint:l,maxResolution:f,minResolution:O,minZoom:ot,zoomFactor:C}}(l);this.maxResolution_=O.maxResolution,this.minResolution_=O.minResolution,this.zoomFactor_=O.zoomFactor,this.resolutions_=l.resolutions,this.padding_=l.padding,this.minZoom_=O.minZoom;const H=function $(M){if(void 0!==M.extent)return i(M.extent,M.constrainOnlyCenter,void 0===M.smoothExtentConstraint||M.smoothExtentConstraint);const l=(0,x.UQ)(M.projection,"EPSG:3857");if(!0!==M.multiWorld&&l.isGlobal()){const f=l.getExtent().slice();return f[0]=-1/0,f[2]=1/0,i(f,!1,!1)}return n}(l),nt=O.constraint,ot=function at(M){if(void 0===M.enableRotation||M.enableRotation){const f=M.constrainRotation;return void 0===f||!0===f?(0,G.Gw)():!1===f?G.YP:"number"==typeof f?(0,G.gE)(f):G.YP}return G.h$}(l);this.constraints_={center:H,resolution:nt,rotation:ot},this.setRotation(void 0!==l.rotation?l.rotation:0),this.setCenterInternal(void 0!==l.center?l.center:null),void 0!==l.resolution?this.setResolution(l.resolution):void 0!==l.zoom&&this.setZoom(l.zoom)}get padding(){return this.padding_}set padding(l){let f=this.padding_;this.padding_=l;const O=this.getCenter();if(O){const H=l||[0,0,0,0];f=f||[0,0,0,0];const nt=this.getResolution();this.setCenterInternal([O[0]+nt/2*(H[3]-f[3]+f[1]-H[1]),O[1]-nt/2*(H[0]-f[0]+f[2]-H[2])])}}getUpdatedOptions_(l){const f=this.getProperties();return void 0!==f.resolution?f.resolution=this.getResolution():f.zoom=this.getZoom(),f.center=this.getCenterInternal(),f.rotation=this.getRotation(),Object.assign({},f,l)}animate(l){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const f=new Array(arguments.length);for(let O=0;O<f.length;++O){let H=arguments[O];H.center&&(H=Object.assign({},H),H.center=(0,x.Vs)(H.center,this.getProjection())),H.anchor&&(H=Object.assign({},H),H.anchor=(0,x.Vs)(H.anchor,this.getProjection())),f[O]=H}this.animateInternal.apply(this,f)}animateInternal(l){let O,f=arguments.length;f>1&&"function"==typeof arguments[f-1]&&(O=arguments[f-1],--f);let H=0;for(;H<f&&!this.isDef();++H){const Z=arguments[H];Z.center&&this.setCenterInternal(Z.center),void 0!==Z.zoom?this.setZoom(Z.zoom):Z.resolution&&this.setResolution(Z.resolution),void 0!==Z.rotation&&this.setRotation(Z.rotation)}if(H===f)return void(O&&W(O,!0));let nt=Date.now(),ot=this.targetCenter_.slice(),Y=this.targetResolution_,C=this.targetRotation_;const k=[];for(;H<f;++H){const Z=arguments[H],K={start:nt,complete:!1,anchor:Z.anchor,duration:void 0!==Z.duration?Z.duration:1e3,easing:Z.easing||T.rd,callback:O};if(Z.center&&(K.sourceCenter=ot,K.targetCenter=Z.center.slice(),ot=K.targetCenter),void 0!==Z.zoom?(K.sourceResolution=Y,K.targetResolution=this.getResolutionForZoom(Z.zoom),Y=K.targetResolution):Z.resolution&&(K.sourceResolution=Y,K.targetResolution=Z.resolution,Y=K.targetResolution),void 0!==Z.rotation){K.sourceRotation=C;const U=(0,y.$W)(Z.rotation-C+Math.PI,2*Math.PI)-Math.PI;K.targetRotation=C+U,C=K.targetRotation}(M=K).sourceCenter&&M.targetCenter&&!(0,j.fS)(M.sourceCenter,M.targetCenter)||M.sourceResolution!==M.targetResolution||M.sourceRotation!==M.targetRotation?nt+=K.duration:K.complete=!0,k.push(K)}var M;this.animations_.push(k),this.setHint(b.Z.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[b.Z.ANIMATING]>0}getInteracting(){return this.hints_[b.Z.INTERACTING]>0}cancelAnimations(){let l;this.setHint(b.Z.ANIMATING,-this.hints_[b.Z.ANIMATING]);for(let f=0,O=this.animations_.length;f<O;++f){const H=this.animations_[f];if(H[0].callback&&W(H[0].callback,!1),!l)for(let nt=0,ot=H.length;nt<ot;++nt){const Y=H[nt];if(!Y.complete){l=Y.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=l,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const l=Date.now();let f=!1;for(let O=this.animations_.length-1;O>=0;--O){const H=this.animations_[O];let nt=!0;for(let ot=0,Y=H.length;ot<Y;++ot){const C=H[ot];if(C.complete)continue;const k=l-C.start;let Z=C.duration>0?k/C.duration:1;Z>=1?(C.complete=!0,Z=1):nt=!1;const K=C.easing(Z);if(C.sourceCenter){const U=C.sourceCenter[0],et=C.sourceCenter[1],ht=C.targetCenter[0],xt=C.targetCenter[1];this.nextCenter_=C.targetCenter,this.targetCenter_=[U+K*(ht-U),et+K*(xt-et)]}if(C.sourceResolution&&C.targetResolution){const U=1===K?C.targetResolution:C.sourceResolution+K*(C.targetResolution-C.sourceResolution);if(C.anchor){const et=this.getViewportSize_(this.getRotation()),ht=this.constraints_.resolution(U,0,et,!0);this.targetCenter_=this.calculateCenterZoom(ht,C.anchor)}this.nextResolution_=C.targetResolution,this.targetResolution_=U,this.applyTargetState_(!0)}if(void 0!==C.sourceRotation&&void 0!==C.targetRotation){const U=1===K?(0,y.$W)(C.targetRotation+Math.PI,2*Math.PI)-Math.PI:C.sourceRotation+K*(C.targetRotation-C.sourceRotation);if(C.anchor){const et=this.constraints_.rotation(U,!0);this.targetCenter_=this.calculateCenterRotate(et,C.anchor)}this.nextRotation_=C.targetRotation,this.targetRotation_=U}if(this.applyTargetState_(!0),f=!0,!C.complete)break}if(nt){this.animations_[O]=null,this.setHint(b.Z.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const ot=H[0].callback;ot&&W(ot,!0)}}this.animations_=this.animations_.filter(Boolean),f&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(l,f){let O;const H=this.getCenterInternal();return void 0!==H&&(O=[H[0]-f[0],H[1]-f[1]],(0,j.U1)(O,l-this.getRotation()),(0,j.IH)(O,f)),O}calculateCenterZoom(l,f){let O;const H=this.getCenterInternal(),nt=this.getResolution();return void 0!==H&&void 0!==nt&&(O=[f[0]-l*(f[0]-H[0])/nt,f[1]-l*(f[1]-H[1])/nt]),O}getViewportSize_(l){const f=this.viewportSize_;if(l){const O=f[0],H=f[1];return[Math.abs(O*Math.cos(l))+Math.abs(H*Math.sin(l)),Math.abs(O*Math.sin(l))+Math.abs(H*Math.cos(l))]}return f}setViewportSize(l){this.viewportSize_=Array.isArray(l)?l.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const l=this.getCenterInternal();return l&&(0,x.lO)(l,this.getProjection())}getCenterInternal(){return this.get(q.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(l){return void 0!==l?(l[0]=this.hints_[0],l[1]=this.hints_[1],l):this.hints_.slice()}calculateExtent(l){const f=this.calculateExtentInternal(l);return(0,x.Fj)(f,this.getProjection())}calculateExtentInternal(l){l=l||this.getViewportSizeMinusPadding_();const f=this.getCenterInternal();(0,L.h)(f,1);const O=this.getResolution();(0,L.h)(void 0!==O,2);const H=this.getRotation();return(0,L.h)(void 0!==H,3),(0,h.p8)(f,O,H,l)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(l){this.applyOptions_(this.getUpdatedOptions_({maxZoom:l}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(l){this.applyOptions_(this.getUpdatedOptions_({minZoom:l}))}setConstrainResolution(l){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:l}))}getProjection(){return this.projection_}getResolution(){return this.get(q.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(l,f){return this.getResolutionForExtentInternal((0,x.dY)(l,this.getProjection()),f)}getResolutionForExtentInternal(l,f){f=f||this.getViewportSizeMinusPadding_();const O=(0,h.dz)(l)/f[0],H=(0,h.Cr)(l)/f[1];return Math.max(O,H)}getResolutionForValueFunction(l){l=l||2;const f=this.getConstrainedResolution(this.maxResolution_),H=Math.log(f/this.minResolution_)/Math.log(l);return function(nt){return f/Math.pow(l,nt*H)}}getRotation(){return this.get(q.ROTATION)}getValueForResolutionFunction(l){const f=Math.log(l||2),O=this.getConstrainedResolution(this.maxResolution_),nt=Math.log(O/this.minResolution_)/f;return function(ot){return Math.log(O/ot)/f/nt}}getViewportSizeMinusPadding_(l){let f=this.getViewportSize_(l);const O=this.padding_;return O&&(f=[f[0]-O[1]-O[3],f[1]-O[0]-O[2]]),f}getState(){const l=this.getProjection(),f=this.getResolution(),O=this.getRotation();let H=this.getCenterInternal();const nt=this.padding_;if(nt){const ot=this.getViewportSizeMinusPadding_();H=lt(H,this.getViewportSize_(),[ot[0]/2+nt[3],ot[1]/2+nt[0]],f,O)}return{center:H.slice(0),projection:void 0!==l?l:null,resolution:f,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:O,zoom:this.getZoom()}}getZoom(){let l;const f=this.getResolution();return void 0!==f&&(l=this.getZoomForResolution(f)),l}getZoomForResolution(l){let O,H,f=this.minZoom_||0;if(this.resolutions_){const nt=(0,d.h7)(this.resolutions_,l,1);f=nt,O=this.resolutions_[nt],H=nt==this.resolutions_.length-1?2:O/this.resolutions_[nt+1]}else O=this.maxResolution_,H=this.zoomFactor_;return f+Math.log(O/l)/Math.log(H)}getResolutionForZoom(l){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const f=(0,y.uZ)(Math.floor(l),0,this.resolutions_.length-2);return this.resolutions_[f]/Math.pow(this.resolutions_[f]/this.resolutions_[f+1],(0,y.uZ)(l-f,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,l-this.minZoom_)}fit(l,f){let O;if((0,L.h)(Array.isArray(l)||"function"==typeof l.getSimplifiedGeometry,24),Array.isArray(l)){(0,L.h)(!(0,h.xb)(l),25);const H=(0,x.dY)(l,this.getProjection());O=(0,u.oJ)(H)}else if("Circle"===l.getType()){const H=(0,x.dY)(l.getExtent(),this.getProjection());O=(0,u.oJ)(H),O.rotate(this.getRotation(),(0,h.qg)(H))}else{const H=(0,x.Cs)();O=H?l.clone().transform(H,this.getProjection()):l}this.fitInternal(O,f)}rotatedExtentForGeometry(l){const f=this.getRotation(),O=Math.cos(f),H=Math.sin(-f),nt=l.getFlatCoordinates(),ot=l.getStride();let Y=1/0,C=1/0,k=-1/0,Z=-1/0;for(let K=0,U=nt.length;K<U;K+=ot){const et=nt[K]*O-nt[K+1]*H,ht=nt[K]*H+nt[K+1]*O;Y=Math.min(Y,et),C=Math.min(C,ht),k=Math.max(k,et),Z=Math.max(Z,ht)}return[Y,C,k,Z]}fitInternal(l,f){let O=(f=f||{}).size;O||(O=this.getViewportSizeMinusPadding_());const H=void 0!==f.padding?f.padding:[0,0,0,0],nt=void 0!==f.nearest&&f.nearest;let ot;ot=void 0!==f.minResolution?f.minResolution:void 0!==f.maxZoom?this.getResolutionForZoom(f.maxZoom):0;const Y=this.rotatedExtentForGeometry(l);let C=this.getResolutionForExtentInternal(Y,[O[0]-H[1]-H[3],O[1]-H[0]-H[2]]);C=isNaN(C)?ot:Math.max(C,ot),C=this.getConstrainedResolution(C,nt?0:1);const k=this.getRotation(),Z=Math.sin(k),K=Math.cos(k),U=(0,h.qg)(Y);U[0]+=(H[1]-H[3])/2*C,U[1]+=(H[0]-H[2])/2*C;const xt=this.getConstrainedCenter([U[0]*K-U[1]*Z,U[1]*K+U[0]*Z],C),Pt=f.callback?f.callback:A.Zn;void 0!==f.duration?this.animateInternal({resolution:C,center:xt,duration:f.duration,easing:f.easing},Pt):(this.targetResolution_=C,this.targetCenter_=xt,this.applyTargetState_(!1,!0),W(Pt,!0))}centerOn(l,f,O){this.centerOnInternal((0,x.Vs)(l,this.getProjection()),f,O)}centerOnInternal(l,f,O){this.setCenterInternal(lt(l,f,O,this.getResolution(),this.getRotation()))}calculateCenterShift(l,f,O,H){let nt;const ot=this.padding_;if(ot&&l){const Y=this.getViewportSizeMinusPadding_(-O),C=lt(l,H,[Y[0]/2+ot[3],Y[1]/2+ot[0]],f,O);nt=[l[0]-C[0],l[1]-C[1]]}return nt}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(l){const f=(0,x.lO)(this.targetCenter_,this.getProjection());this.setCenter([f[0]+l[0],f[1]+l[1]])}adjustCenterInternal(l){const f=this.targetCenter_;this.setCenterInternal([f[0]+l[0],f[1]+l[1]])}adjustResolution(l,f){f=f&&(0,x.Vs)(f,this.getProjection()),this.adjustResolutionInternal(l,f)}adjustResolutionInternal(l,f){const O=this.getAnimating()||this.getInteracting(),H=this.getViewportSize_(this.getRotation()),nt=this.constraints_.resolution(this.targetResolution_*l,0,H,O);f&&(this.targetCenter_=this.calculateCenterZoom(nt,f)),this.targetResolution_*=l,this.applyTargetState_()}adjustZoom(l,f){this.adjustResolution(Math.pow(this.zoomFactor_,-l),f)}adjustRotation(l,f){f&&(f=(0,x.Vs)(f,this.getProjection())),this.adjustRotationInternal(l,f)}adjustRotationInternal(l,f){const O=this.getAnimating()||this.getInteracting(),H=this.constraints_.rotation(this.targetRotation_+l,O);f&&(this.targetCenter_=this.calculateCenterRotate(H,f)),this.targetRotation_+=l,this.applyTargetState_()}setCenter(l){this.setCenterInternal(l&&(0,x.Vs)(l,this.getProjection()))}setCenterInternal(l){this.targetCenter_=l,this.applyTargetState_()}setHint(l,f){return this.hints_[l]+=f,this.changed(),this.hints_[l]}setResolution(l){this.targetResolution_=l,this.applyTargetState_()}setRotation(l){this.targetRotation_=l,this.applyTargetState_()}setZoom(l){this.setResolution(this.getResolutionForZoom(l))}applyTargetState_(l,f){const O=this.getAnimating()||this.getInteracting()||f,H=this.constraints_.rotation(this.targetRotation_,O),nt=this.getViewportSize_(H),ot=this.constraints_.resolution(this.targetResolution_,0,nt,O),Y=this.constraints_.center(this.targetCenter_,ot,nt,O,this.calculateCenterShift(this.targetCenter_,ot,H,nt));this.get(q.ROTATION)!==H&&this.set(q.ROTATION,H),this.get(q.RESOLUTION)!==ot&&(this.set(q.RESOLUTION,ot),this.set("zoom",this.getZoom(),!0)),(!Y||!this.get(q.CENTER)||!(0,j.fS)(this.get(q.CENTER),Y))&&this.set(q.CENTER,Y),this.getAnimating()&&!l&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(l,f,O){l=void 0!==l?l:200;const H=f||0,nt=this.constraints_.rotation(this.targetRotation_),ot=this.getViewportSize_(nt),Y=this.constraints_.resolution(this.targetResolution_,H,ot),C=this.constraints_.center(this.targetCenter_,Y,ot,!1,this.calculateCenterShift(this.targetCenter_,Y,nt,ot));if(0===l&&!this.cancelAnchor_)return this.targetResolution_=Y,this.targetRotation_=nt,this.targetCenter_=C,void this.applyTargetState_();O=O||(0===l?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==Y||this.getRotation()!==nt||!this.getCenterInternal()||!(0,j.fS)(this.getCenterInternal(),C))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:nt,center:C,resolution:Y,duration:l,easing:T.Vv,anchor:O}))}beginInteraction(){this.resolveConstraints(0),this.setHint(b.Z.INTERACTING,1)}endInteraction(l,f,O){O=O&&(0,x.Vs)(O,this.getProjection()),this.endInteractionInternal(l,f,O)}endInteractionInternal(l,f,O){this.setHint(b.Z.INTERACTING,-1),this.resolveConstraints(l,f,O)}getConstrainedCenter(l,f){const O=this.getViewportSize_(this.getRotation());return this.constraints_.center(l,f||this.getResolution(),O)}getConstrainedZoom(l,f){const O=this.getResolutionForZoom(l);return this.getZoomForResolution(this.getConstrainedResolution(O,f))}getConstrainedResolution(l,f){f=f||0;const O=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(l,f,O)}}},8587:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>st});const st={ANIMATING:0,INTERACTING:1}},2456:(kt,dt,c)=>{"use strict";function b(i,n){return i>n?1:i<n?-1:0}function q(i,n,h){const d=i.length;if(i[0]<=n)return 0;if(n<=i[d-1])return d-1;{let S;if(h>0){for(S=1;S<d;++S)if(i[S]<n)return S-1}else if(h<0){for(S=1;S<d;++S)if(i[S]<=n)return S}else for(S=1;S<d;++S){if(i[S]==n)return S;if(i[S]<n)return"function"==typeof h?h(n,i[S-1],i[S])>0?S-1:S:i[S-1]-n<n-i[S]?S-1:S}return d-1}}function V(i,n,h){for(;n<h;){const d=i[n];i[n]=i[h],i[h]=d,++n,--h}}function x(i,n){const h=Array.isArray(n)?n:[n],d=h.length;for(let S=0;S<d;S++)i[i.length]=h[S]}function j(i,n){const h=i.length;if(h!==n.length)return!1;for(let d=0;d<h;d++)if(i[d]!==n[d])return!1;return!0}function y(i,n,h){const d=n||b;return i.every(function(S,_){if(0===_)return!0;const R=d(i[_-1],S);return!(R>0||h&&0===R)})}c.d(dt,{FZ:()=>V,fS:()=>j,h7:()=>q,kK:()=>b,l7:()=>x,pT:()=>y})},3783:(kt,dt,c)=>{"use strict";c.d(dt,{BB:()=>n,XC:()=>x,_2:()=>L});var st=c(1911),b=c(2156);const q=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,V=/^([a-z]*)$|^hsla?\(.*\)$/i;function x(d){return"string"==typeof d?d:n(d)}const j=function(){const S={};let _=0;return function(R){let v;if(S.hasOwnProperty(R))v=S[R];else{if(_>=1024){let m=0;for(const G in S)0==(3&m++)&&(delete S[G],--_)}v=function y(d){let S,_,R,v,m;if(V.exec(d)&&(d=function A(d){const S=document.createElement("div");if(S.style.color=d,""!==S.style.color){document.body.appendChild(S);const _=getComputedStyle(S).color;return document.body.removeChild(S),_}return""}(d)),q.exec(d)){const G=d.length-1;let T;T=G<=4?1:2;const u=4===G||8===G;S=parseInt(d.substr(1+0*T,T),16),_=parseInt(d.substr(1+1*T,T),16),R=parseInt(d.substr(1+2*T,T),16),v=u?parseInt(d.substr(1+3*T,T),16):255,1==T&&(S=(S<<4)+S,_=(_<<4)+_,R=(R<<4)+R,u&&(v=(v<<4)+v)),m=[S,_,R,v/255]}else d.startsWith("rgba(")?(m=d.slice(5,-1).split(",").map(Number),i(m)):d.startsWith("rgb(")?(m=d.slice(4,-1).split(",").map(Number),m.push(1),i(m)):(0,st.h)(!1,14);return m}(R),S[R]=v,++_}return v}}();function L(d){return Array.isArray(d)?d:j(d)}function i(d){return d[0]=(0,b.uZ)(d[0]+.5|0,0,255),d[1]=(0,b.uZ)(d[1]+.5|0,0,255),d[2]=(0,b.uZ)(d[2]+.5|0,0,255),d[3]=(0,b.uZ)(d[3],0,1),d}function n(d){let S=d[0];S!=(0|S)&&(S=S+.5|0);let _=d[1];_!=(0|_)&&(_=_+.5|0);let R=d[2];return R!=(0|R)&&(R=R+.5|0),"rgba("+S+","+_+","+R+","+(void 0===d[3]?1:Math.round(100*d[3])/100)+")"}},5813:(kt,dt,c)=>{"use strict";c.d(dt,{y:()=>b});var st=c(3783);function b(q){return Array.isArray(q)?(0,st.BB)(q):q}},5263:(kt,dt,c)=>{"use strict";c.d(dt,{XV:()=>q,hN:()=>A,hg:()=>x,oj:()=>st,p:()=>y});const st="ol-hidden",q="ol-unselectable",x="ol-control",A="ol-collapsed",j=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),L=["style","variant","weight","size","lineHeight","family"],y=function(i){const n=i.match(j);if(!n)return null;const h={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let d=0,S=L.length;d<S;++d){const _=n[d+1];void 0!==_&&(h[L[d]]=_)}return h.families=h.family.split(/,\s?/),h}},1992:(kt,dt,c)=>{"use strict";c.d(dt,{$H:()=>A,E4:()=>b,ZF:()=>j,ep:()=>L,hF:()=>y,jy:()=>q});var st=c(9996);function b(i,n,h,d){let S;return S=h&&h.length?h.shift():st.Id?new OffscreenCanvas(i||300,n||300):document.createElement("canvas"),i&&(S.width=i),n&&(S.height=n),S.getContext("2d",d)}function q(i){const n=i.canvas;n.width=1,n.height=1,i.clearRect(0,0,1,1)}function A(i,n){const h=n.parentNode;h&&h.replaceChild(i,n)}function j(i){return i&&i.parentNode?i.parentNode.removeChild(i):null}function L(i){for(;i.lastChild;)i.removeChild(i.lastChild)}function y(i,n){const h=i.childNodes;for(let d=0;;++d){const S=h[d],_=n[d];if(!S&&!_)break;if(S!==_){if(!S){i.appendChild(_);continue}if(!_){i.removeChild(S),--d;continue}i.insertBefore(_,S)}}}},6299:(kt,dt,c)=>{"use strict";function st(A){return Math.pow(A,3)}function b(A){return 1-st(1-A)}function q(A){return 3*A*A-2*A*A*A}function V(A){return A}c.d(dt,{GE:()=>V,Vv:()=>b,YQ:()=>st,rd:()=>q})},1729:(kt,dt,c)=>{"use strict";c.d(dt,{Vx:()=>q,bN:()=>V,oL:()=>b});var st=c(9466);function b(x,A,j,L,y){if(L&&L!==x&&(j=j.bind(L)),y){const n=j;j=function(){x.removeEventListener(A,j),n.apply(this,arguments)}}const i={target:x,type:A,listener:j};return x.addEventListener(A,j),i}function q(x,A,j,L){return b(x,A,j,L,!0)}function V(x){x&&x.target&&(x.target.removeEventListener(x.type,x.listener),(0,st.Z)(x))}},8214:(kt,dt,c)=>{"use strict";c.d(dt,{ZP:()=>V});const V=class st{constructor(A){this.type=A,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}},9972:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>st});const st={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},8007:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>A});var st=c(625),b=c(8214),q=c(1345),V=c(9466);const A=class x extends st.Z{constructor(L){super(),this.eventTarget_=L,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(L,y){if(!L||!y)return;const i=this.listeners_||(this.listeners_={}),n=i[L]||(i[L]=[]);n.includes(y)||n.push(y)}dispatchEvent(L){const y="string"==typeof L,i=y?L:L.type,n=this.listeners_&&this.listeners_[i];if(!n)return;const h=y?new b.ZP(L):L;h.target||(h.target=this.eventTarget_||this);const d=this.dispatching_||(this.dispatching_={}),S=this.pendingRemovals_||(this.pendingRemovals_={});let _;i in d||(d[i]=0,S[i]=0),++d[i];for(let R=0,v=n.length;R<v;++R)if(_="handleEvent"in n[R]?n[R].handleEvent(h):n[R].call(this,h),!1===_||h.propagationStopped){_=!1;break}if(0==--d[i]){let R=S[i];for(delete S[i];R--;)this.removeEventListener(i,q.Zn);delete d[i]}return _}disposeInternal(){this.listeners_&&(0,V.Z)(this.listeners_)}getListeners(L){return this.listeners_&&this.listeners_[L]||void 0}hasListener(L){return!!this.listeners_&&(L?L in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(L,y){const i=this.listeners_&&this.listeners_[L];if(i){const n=i.indexOf(y);-1!==n&&(this.pendingRemovals_&&L in this.pendingRemovals_?(i[n]=q.Zn,++this.pendingRemovals_[L]):(i.splice(n,1),0===i.length&&delete this.listeners_[L]))}}}},1345:(kt,dt,c)=>{"use strict";c.d(dt,{Dv:()=>q,Zn:()=>V,qe:()=>x,uX:()=>b});var st=c(2456);function b(){return!0}function q(){return!1}function V(){}function x(j){let y,i,n,L=!1;return function(){const h=Array.prototype.slice.call(arguments);return(!L||this!==n||!(0,st.fS)(h,i))&&(L=!0,n=this,i=h,y=j.apply(this,arguments)),y}}},187:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>A});var st=c(9235),b=c(760),q=c(8999),V=c(2156);class x extends st.ZP{constructor(L,y){super(),this.setCoordinates(L,y)}clone(){const L=new x(this.flatCoordinates.slice(),this.layout);return L.applyProperties(this),L}closestPointXY(L,y,i,n){const h=this.flatCoordinates,d=(0,V.bI)(L,y,h[0],h[1]);if(d<n){const S=this.stride;for(let _=0;_<S;++_)i[_]=h[_];return i.length=S,d}return n}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(L){return(0,b.HK)(this.flatCoordinates,L)}getType(){return"Point"}intersectsExtent(L){return(0,b.jE)(L,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(L,y){this.setLayout(y,L,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,q.IG)(this.flatCoordinates,0,L,this.stride),this.changed()}}const A=x},617:(kt,dt,c)=>{"use strict";c.d(dt,{ZP:()=>f,oJ:()=>H});var st=c(9235),b=c(2156);function q(Y,C,k,Z,K,U,et){const ht=Y[C],xt=Y[C+1],Pt=Y[k]-ht,Ot=Y[k+1]-xt;let At;if(0===Pt&&0===Ot)At=C;else{const zt=((K-ht)*Pt+(U-xt)*Ot)/(Pt*Pt+Ot*Ot);if(zt>1)At=k;else{if(zt>0){for(let Yt=0;Yt<Z;++Yt)et[Yt]=(0,b.t7)(Y[C+Yt],Y[k+Yt],zt);return void(et.length=Z)}At=C}}for(let zt=0;zt<Z;++zt)et[zt]=Y[At+zt];et.length=Z}function V(Y,C,k,Z,K){let U=Y[C],et=Y[C+1];for(C+=Z;C<k;C+=Z){const ht=Y[C],xt=Y[C+1],Pt=(0,b.bI)(U,et,ht,xt);Pt>K&&(K=Pt),U=ht,et=xt}return K}function j(Y,C,k,Z,K,U,et,ht,xt,Pt,Ot){if(C==k)return Pt;let At,zt;if(0===K){if(zt=(0,b.bI)(et,ht,Y[C],Y[C+1]),zt<Pt){for(At=0;At<Z;++At)xt[At]=Y[C+At];return xt.length=Z,zt}return Pt}Ot=Ot||[NaN,NaN];let Yt=C+Z;for(;Yt<k;)if(q(Y,Yt-Z,Yt,Z,et,ht,Ot),zt=(0,b.bI)(et,ht,Ot[0],Ot[1]),zt<Pt){for(Pt=zt,At=0;At<Z;++At)xt[At]=Ot[At];xt.length=Z,Yt+=Z}else Yt+=Z*Math.max((Math.sqrt(zt)-Math.sqrt(Pt))/K|0,1);if(U&&(q(Y,k-Z,C,Z,et,ht,Ot),zt=(0,b.bI)(et,ht,Ot[0],Ot[1]),zt<Pt)){for(Pt=zt,At=0;At<Z;++At)xt[At]=Ot[At];xt.length=Z}return Pt}var i=c(760),n=c(8999),h=c(9182),d=c(392);function S(Y,C,k,Z){let K=0,U=Y[k-Z],et=Y[k-Z+1];for(;C<k;C+=Z){const ht=Y[C],xt=Y[C+1];K+=et*ht-U*xt,U=ht,et=xt}return K/2}class v extends st.ZP{constructor(C,k){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===k||Array.isArray(C[0])?this.setCoordinates(C,k):this.setFlatCoordinates(k,C)}clone(){return new v(this.flatCoordinates.slice(),this.layout)}closestPointXY(C,k,Z,K){return K<(0,i.qf)(this.getExtent(),C,k)?K:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(V(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),j(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,C,k,Z,K))}getArea(){return S(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return(0,d.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(C){const k=[];return k.length=(0,h.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,C,k,0),new v(k,"XY")}getType(){return"LinearRing"}intersectsExtent(C){return!1}setCoordinates(C,k){this.setLayout(k,C,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,n.Sg)(this.flatCoordinates,0,C,this.stride),this.changed()}}const m=v;var G=c(187),T=c(2456),u=c(4325);var W=c(2750);function $(Y,C,k,Z){for(;C<k-Z;){for(let K=0;K<Z;++K){const U=Y[C+K];Y[C+K]=Y[k-Z+K],Y[k-Z+K]=U}C+=Z,k-=Z}}function F(Y,C,k,Z){let K=0,U=Y[k-Z],et=Y[k-Z+1];for(;C<k;C+=Z){const ht=Y[C],xt=Y[C+1];K+=(ht-U)*(xt+et),U=ht,et=xt}return 0===K?void 0:K>0}function lt(Y,C,k,Z,K){K=void 0!==K&&K;for(let U=0,et=k.length;U<et;++U){const ht=k[U],xt=F(Y,C,ht,Z);(0===U?K&&xt||!K&&!xt:K&&!xt||!K&&xt)&&$(Y,C,ht,Z),C=ht}return C}class l extends st.ZP{constructor(C,k,Z){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==k&&Z?(this.setFlatCoordinates(k,C),this.ends_=Z):this.setCoordinates(C,k)}appendLinearRing(C){this.flatCoordinates?(0,T.l7)(this.flatCoordinates,C.getFlatCoordinates()):this.flatCoordinates=C.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const C=new l(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return C.applyProperties(this),C}closestPointXY(C,k,Z,K){return K<(0,i.qf)(this.getExtent(),C,k)?K:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function x(Y,C,k,Z,K){for(let U=0,et=k.length;U<et;++U){const ht=k[U];K=V(Y,C,ht,Z,K),C=ht}return K}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function L(Y,C,k,Z,K,U,et,ht,xt,Pt,Ot){Ot=Ot||[NaN,NaN];for(let At=0,zt=k.length;At<zt;++At){const Yt=k[At];Pt=j(Y,C,Yt,Z,K,U,et,ht,xt,Pt,Ot),C=Yt}return Pt}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,C,k,Z,K))}containsXY(C,k){return(0,u.wY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,C,k)}getArea(){return function _(Y,C,k,Z){let K=0;for(let U=0,et=k.length;U<et;++U){const ht=k[U];K+=S(Y,C,ht,Z),C=ht}return K}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(C){let k;return void 0!==C?(k=this.getOrientedFlatCoordinates().slice(),lt(k,0,this.ends_,this.stride,C)):k=this.flatCoordinates,(0,d.o1)(k,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const C=(0,i.qg)(this.getExtent());this.flatInteriorPoint_=function B(Y,C,k,Z,K,U,et){let ht,xt,Pt,Ot,At,zt,Yt;const Ht=K[U+1],Wt=[];for(let qt=0,ie=k.length;qt<ie;++qt){const Rt=k[qt];for(Ot=Y[Rt-Z],zt=Y[Rt-Z+1],ht=C;ht<Rt;ht+=Z)At=Y[ht],Yt=Y[ht+1],(Ht<=zt&&Yt<=Ht||zt<=Ht&&Ht<=Yt)&&(Pt=(Ht-zt)/(Yt-zt)*(At-Ot)+Ot,Wt.push(Pt)),Ot=At,zt=Yt}let Jt=NaN,Qt=-1/0;for(Wt.sort(T.kK),Ot=Wt[0],ht=1,xt=Wt.length;ht<xt;++ht){At=Wt[ht];const qt=Math.abs(At-Ot);qt>Qt&&(Pt=(Ot+At)/2,(0,u.wY)(Y,C,k,Z,Pt,Ht)&&(Jt=Pt,Qt=qt)),Ot=At}return isNaN(Jt)&&(Jt=K[U]),et?(et.push(Jt,Ht,Qt),et):[Jt,Ht,Qt]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,C,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new G.Z(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(C){return C<0||this.ends_.length<=C?null:new m(this.flatCoordinates.slice(0===C?0:this.ends_[C-1],this.ends_[C]),this.layout)}getLinearRings(){const C=this.layout,k=this.flatCoordinates,Z=this.ends_,K=[];let U=0;for(let et=0,ht=Z.length;et<ht;++et){const xt=Z[et],Pt=new m(k.slice(U,xt),C);K.push(Pt),U=xt}return K}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const C=this.flatCoordinates;!function at(Y,C,k,Z,K){K=void 0!==K&&K;for(let U=0,et=k.length;U<et;++U){const ht=k[U],xt=F(Y,C,ht,Z);if(0===U){if(K&&xt||!K&&!xt)return!1}else if(K&&!xt||!K&&xt)return!1;C=ht}return!0}(C,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=C.slice(),this.orientedFlatCoordinates_.length=lt(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=C,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(C){const k=[],Z=[];return k.length=(0,h.Zh)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(C),k,0,Z),new l(k,"XY",Z)}getType(){return"Polygon"}intersectsExtent(C){return(0,W.ac)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,C)}setCoordinates(C,k){this.setLayout(k,C,2),this.flatCoordinates||(this.flatCoordinates=[]);const Z=(0,n._5)(this.flatCoordinates,0,C,this.stride,this.ends_);this.flatCoordinates.length=0===Z.length?0:Z[Z.length-1],this.changed()}}const f=l;function H(Y){const C=Y[0],k=Y[1],Z=Y[2],K=Y[3],U=[C,k,C,K,Z,K,Z,k,C,k];return new l(U,"XY",[U.length])}},9235:(kt,dt,c)=>{"use strict";c.d(dt,{ZP:()=>_,Kr:()=>S});var st=c(3632),b=c(119),q=c(483),V=c(760),x=c(6003),A=c(1345),j=c(874);const L=(0,q.Ue)(),i=class y extends st.Z{constructor(){super(),this.extent_=(0,V.lJ)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=(0,A.qe)(function(v,m,G){if(!G)return this.getSimplifiedGeometry(m);const T=this.clone();return T.applyTransform(G),T.getSimplifiedGeometry(m)})}simplifyTransformed(v,m){return this.simplifyTransformedInternal(this.getRevision(),v,m)}clone(){return(0,b.O3)()}closestPointXY(v,m,G,T){return(0,b.O3)()}containsXY(v,m){const G=this.getClosestPoint([v,m]);return G[0]===v&&G[1]===m}getClosestPoint(v,m){return this.closestPointXY(v[0],v[1],m=m||[NaN,NaN],1/0),m}intersectsCoordinate(v){return this.containsXY(v[0],v[1])}computeExtent(v){return(0,b.O3)()}getExtent(v){if(this.extentRevision_!=this.getRevision()){const m=this.computeExtent(this.extent_);(isNaN(m[0])||isNaN(m[1]))&&(0,V.YN)(m),this.extentRevision_=this.getRevision()}return(0,V.EO)(this.extent_,v)}rotate(v,m){(0,b.O3)()}scale(v,m,G){(0,b.O3)()}simplify(v){return this.getSimplifiedGeometry(v*v)}getSimplifiedGeometry(v){return(0,b.O3)()}getType(){return(0,b.O3)()}applyTransform(v){(0,b.O3)()}intersectsExtent(v){return(0,b.O3)()}translate(v,m){(0,b.O3)()}transform(v,m){const G=(0,x.U2)(v),T="tile-pixels"==G.getUnits()?function(u,B,tt){const W=G.getExtent(),$=G.getWorldExtent(),F=(0,V.Cr)($)/(0,V.Cr)(W);return(0,q.qC)(L,$[0],$[3],F,-F,0,0,0),(0,j.vT)(u,0,u.length,tt,L,B),(0,x.Ck)(G,m)(u,B,tt)}:(0,x.Ck)(G,m);return this.applyTransform(T),this}};function d(R){let v;return"XY"==R?v=2:"XYZ"==R||"XYM"==R?v=3:"XYZM"==R&&(v=4),v}function S(R,v,m){const G=R.getFlatCoordinates();if(G){const T=R.getStride();return(0,j.vT)(G,0,G.length,T,v,m)}return null}const _=class n extends i{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(v){return(0,V.GN)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,v)}getCoordinates(){return(0,b.O3)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(v){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),v<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&v<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const m=this.getSimplifiedGeometryInternal(v);return m.getFlatCoordinates().length<this.flatCoordinates.length?m:(this.simplifiedGeometryMaxMinSquaredTolerance=v,this)}getSimplifiedGeometryInternal(v){return this}getStride(){return this.stride}setFlatCoordinates(v,m){this.stride=d(v),this.layout=v,this.flatCoordinates=m}setCoordinates(v,m){(0,b.O3)()}setLayout(v,m,G){let T;if(v)T=d(v);else{for(let u=0;u<G;++u){if(0===m.length)return this.layout="XY",void(this.stride=2);m=m[0]}T=m.length,v=function h(R){let v;return 2==R?v="XY":3==R?v="XYZ":4==R&&(v="XYZM"),v}(T)}this.layout=v,this.stride=T}applyTransform(v){this.flatCoordinates&&(v(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(v,m){const G=this.getFlatCoordinates();if(G){const T=this.getStride();(0,j.U1)(G,0,G.length,T,v,m,G),this.changed()}}scale(v,m,G){void 0===m&&(m=v),G||(G=(0,V.qg)(this.getExtent()));const T=this.getFlatCoordinates();if(T){const u=this.getStride();(0,j.bA)(T,0,T.length,u,v,m,G,T),this.changed()}}translate(v,m){const G=this.getFlatCoordinates();if(G){const T=this.getStride();(0,j.Iu)(G,0,G.length,T,v,m,G),this.changed()}}}},4325:(kt,dt,c)=>{"use strict";c.d(dt,{TG:()=>q,uG:()=>b,wY:()=>V});var st=c(760);function b(A,j,L,y,i){return!(0,st.H6)(i,function(h){return!q(A,j,L,y,h[0],h[1])})}function q(A,j,L,y,i,n){let h=0,d=A[L-y],S=A[L-y+1];for(;j<L;j+=y){const _=A[j],R=A[j+1];S<=n?R>n&&(_-d)*(n-S)-(i-d)*(R-S)>0&&h++:R<=n&&(_-d)*(n-S)-(i-d)*(R-S)<0&&h--,d=_,S=R}return 0!==h}function V(A,j,L,y,i,n){if(0===L.length||!q(A,j,L[0],y,i,n))return!1;for(let h=1,d=L.length;h<d;++h)if(q(A,L[h-1],L[h],y,i,n))return!1;return!0}},8999:(kt,dt,c)=>{"use strict";function st(x,A,j,L){for(let y=0,i=j.length;y<i;++y)x[A++]=j[y];return A}function b(x,A,j,L){for(let y=0,i=j.length;y<i;++y){const n=j[y];for(let h=0;h<L;++h)x[A++]=n[h]}return A}function q(x,A,j,L,y){y=y||[];let i=0;for(let n=0,h=j.length;n<h;++n){const d=b(x,A,j[n],L);y[i++]=d,A=d}return y.length=i,y}c.d(dt,{IG:()=>st,Sg:()=>b,_5:()=>q})},392:(kt,dt,c)=>{"use strict";function st(V,x,A,j,L){L=void 0!==L?L:[];let y=0;for(let i=x;i<A;i+=j)L[y++]=V.slice(i,i+j);return L.length=y,L}function b(V,x,A,j,L){L=void 0!==L?L:[];let y=0;for(let i=0,n=A.length;i<n;++i){const h=A[i];L[y++]=st(V,x,h,j,L[y]),x=h}return L.length=y,L}function q(V,x,A,j,L){L=void 0!==L?L:[];let y=0;for(let i=0,n=A.length;i<n;++i){const h=A[i];L[y++]=1===h.length&&h[0]===x?[]:b(V,x,h,j,L[y]),x=h[h.length-1]}return L.length=y,L}c.d(dt,{Ml:()=>st,o1:()=>b,ug:()=>q})},2750:(kt,dt,c)=>{"use strict";c.d(dt,{mV:()=>A,ac:()=>j});var st=c(760),q=c(4325);function V(y,i,n,h,d){const S=(0,st.qP)((0,st.lJ)(),y,i,n,h);return!!(0,st.kK)(d,S)&&(!!((0,st.r4)(d,S)||S[0]>=d[0]&&S[2]<=d[2]||S[1]>=d[1]&&S[3]<=d[3])||function b(y,i,n,h,d){let S;for(i+=h;i<n;i+=h)if(S=d(y.slice(i-h,i),y.slice(i,i+h)),S)return S;return!1}(y,i,n,h,function(_,R){return(0,st.I7)(d,_,R)}))}function A(y,i,n,h,d){return!!(V(y,i,n,h,d)||(0,q.TG)(y,i,n,h,d[0],d[1])||(0,q.TG)(y,i,n,h,d[0],d[3])||(0,q.TG)(y,i,n,h,d[2],d[1])||(0,q.TG)(y,i,n,h,d[2],d[3]))}function j(y,i,n,h,d){if(!A(y,i,n[0],h,d))return!1;if(1===n.length)return!0;for(let S=1,_=n.length;S<_;++S)if((0,q.uG)(y,n[S-1],n[S],h,d)&&!V(y,n[S-1],n[S],h,d))return!1;return!0}},9182:(kt,dt,c)=>{"use strict";c.d(dt,{Zh:()=>y,dt:()=>q,uZ:()=>j});var st=c(2156);function q(n,h,d,S,_,R,v){const m=(d-h)/S;if(m<3){for(;h<d;h+=S)R[v++]=n[h],R[v++]=n[h+1];return v}const G=new Array(m);G[0]=1,G[m-1]=1;const T=[h,d-S];let u=0;for(;T.length>0;){const B=T.pop(),tt=T.pop();let W=0;const $=n[tt],F=n[tt+1],at=n[B],St=n[B+1];for(let lt=tt+S;lt<B;lt+=S){const l=(0,st.rU)(n[lt],n[lt+1],$,F,at,St);l>W&&(u=lt,W=l)}W>_&&(G[(u-h)/S]=1,tt+S<u&&T.push(tt,u),u+S<B&&T.push(u,B))}for(let B=0;B<m;++B)G[B]&&(R[v++]=n[h+B*S],R[v++]=n[h+B*S+1]);return v}function j(n,h){return h*Math.round(n/h)}function L(n,h,d,S,_,R,v){if(h==d)return v;let T,u,m=j(n[h],_),G=j(n[h+1],_);h+=S,R[v++]=m,R[v++]=G;do{if(T=j(n[h],_),u=j(n[h+1],_),(h+=S)==d)return R[v++]=T,R[v++]=u,v}while(T==m&&u==G);for(;h<d;){const B=j(n[h],_),tt=j(n[h+1],_);if(h+=S,B==T&&tt==u)continue;const W=T-m,$=u-G,F=B-m,at=tt-G;W*at==$*F&&(W<0&&F<W||W==F||W>0&&F>W)&&($<0&&at<$||$==at||$>0&&at>$)?(T=B,u=tt):(R[v++]=T,R[v++]=u,m=T,G=u,T=B,u=tt)}return R[v++]=T,R[v++]=u,v}function y(n,h,d,S,_,R,v,m){for(let G=0,T=d.length;G<T;++G){const u=d[G];v=L(n,h,u,S,_,R,v),m.push(v),h=u}return v}},874:(kt,dt,c)=>{"use strict";function st(x,A,j,L,y,i){i=i||[];let n=0;for(let h=A;h<j;h+=L){const d=x[h],S=x[h+1];i[n++]=y[0]*d+y[2]*S+y[4],i[n++]=y[1]*d+y[3]*S+y[5]}return i&&i.length!=n&&(i.length=n),i}function b(x,A,j,L,y,i,n){n=n||[];const h=Math.cos(y),d=Math.sin(y),S=i[0],_=i[1];let R=0;for(let v=A;v<j;v+=L){const m=x[v]-S,G=x[v+1]-_;n[R++]=S+m*h-G*d,n[R++]=_+m*d+G*h;for(let T=v+2;T<v+L;++T)n[R++]=x[T]}return n&&n.length!=R&&(n.length=R),n}function q(x,A,j,L,y,i,n,h){h=h||[];const d=n[0],S=n[1];let _=0;for(let R=A;R<j;R+=L){const m=x[R+1]-S;h[_++]=d+y*(x[R]-d),h[_++]=S+i*m;for(let G=R+2;G<R+L;++G)h[_++]=x[G]}return h&&h.length!=_&&(h.length=_),h}function V(x,A,j,L,y,i,n){n=n||[];let h=0;for(let d=A;d<j;d+=L){n[h++]=x[d]+y,n[h++]=x[d+1]+i;for(let S=d+2;S<d+L;++S)n[h++]=x[S]}return n&&n.length!=h&&(n.length=h),n}c.d(dt,{Iu:()=>V,U1:()=>b,bA:()=>q,vT:()=>st})},9996:(kt,dt,c)=>{"use strict";c.d(dt,{G$:()=>x,Id:()=>L,MP:()=>j,Tp:()=>y,V:()=>b,bM:()=>i,tK:()=>A});const st="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",b=st.includes("firefox"),x=(st.includes("safari")&&!st.includes("chrom")&&(st.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(st)),st.includes("webkit")&&!st.includes("edge")),A=st.includes("macintosh"),j="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,L="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,y="undefined"!=typeof Image&&Image.prototype.decode,i=function(){let n=!1;try{const h=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,h),window.removeEventListener("_",null,h)}catch(h){}return n}()},5560:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>j});var st=c(3632),b=c(2683),q=c(119),V=c(1911),x=c(2156);const j=class A extends st.Z{constructor(y){super(),this.background_=y.background;const i=Object.assign({},y);"object"==typeof y.properties&&(delete i.properties,Object.assign(i,y.properties)),i[b.Z.OPACITY]=void 0!==y.opacity?y.opacity:1,(0,V.h)("number"==typeof i[b.Z.OPACITY],64),i[b.Z.VISIBLE]=void 0===y.visible||y.visible,i[b.Z.Z_INDEX]=y.zIndex,i[b.Z.MAX_RESOLUTION]=void 0!==y.maxResolution?y.maxResolution:1/0,i[b.Z.MIN_RESOLUTION]=void 0!==y.minResolution?y.minResolution:0,i[b.Z.MIN_ZOOM]=void 0!==y.minZoom?y.minZoom:-1/0,i[b.Z.MAX_ZOOM]=void 0!==y.maxZoom?y.maxZoom:1/0,this.className_=void 0!==i.className?i.className:"ol-layer",delete i.className,this.setProperties(i),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(y){const i=this.state_||{layer:this,managed:void 0===y||y},n=this.getZIndex();return i.opacity=(0,x.uZ)(Math.round(100*this.getOpacity())/100,0,1),i.visible=this.getVisible(),i.extent=this.getExtent(),i.zIndex=void 0!==n||i.managed?n:1/0,i.maxResolution=this.getMaxResolution(),i.minResolution=Math.max(this.getMinResolution(),0),i.minZoom=this.getMinZoom(),i.maxZoom=this.getMaxZoom(),this.state_=i,i}getLayersArray(y){return(0,q.O3)()}getLayerStatesArray(y){return(0,q.O3)()}getExtent(){return this.get(b.Z.EXTENT)}getMaxResolution(){return this.get(b.Z.MAX_RESOLUTION)}getMinResolution(){return this.get(b.Z.MIN_RESOLUTION)}getMinZoom(){return this.get(b.Z.MIN_ZOOM)}getMaxZoom(){return this.get(b.Z.MAX_ZOOM)}getOpacity(){return this.get(b.Z.OPACITY)}getSourceState(){return(0,q.O3)()}getVisible(){return this.get(b.Z.VISIBLE)}getZIndex(){return this.get(b.Z.Z_INDEX)}setBackground(y){this.background_=y,this.changed()}setExtent(y){this.set(b.Z.EXTENT,y)}setMaxResolution(y){this.set(b.Z.MAX_RESOLUTION,y)}setMinResolution(y){this.set(b.Z.MIN_RESOLUTION,y)}setMaxZoom(y){this.set(b.Z.MAX_ZOOM,y)}setMinZoom(y){this.set(b.Z.MIN_ZOOM,y)}setOpacity(y){(0,V.h)("number"==typeof y,64),this.set(b.Z.OPACITY,y)}setVisible(y){this.set(b.Z.VISIBLE,y)}setZIndex(y){this.set(b.Z.Z_INDEX,y)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}},4593:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>y,j:()=>L});var st=c(5560),b=c(9972),q=c(2683),V=c(2526),x=c(1911),A=c(1729);function L(i,n){if(!i.visible)return!1;const h=n.resolution;if(h<i.minResolution||h>=i.maxResolution)return!1;const d=n.zoom;return d>i.minZoom&&d<=i.maxZoom}const y=class j extends st.Z{constructor(n){const h=Object.assign({},n);delete h.source,super(h),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,n.render&&(this.render=n.render),n.map&&this.setMap(n.map),this.addChangeListener(q.Z.SOURCE,this.handleSourcePropertyChange_),this.setSource(n.source?n.source:null)}getLayersArray(n){return(n=n||[]).push(this),n}getLayerStatesArray(n){return(n=n||[]).push(this.getLayerState()),n}getSource(){return this.get(q.Z.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const n=this.getSource();return n?n.getState():"undefined"}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,A.bN)(this.sourceChangeKey_),this.sourceChangeKey_=null);const n=this.getSource();n&&(this.sourceChangeKey_=(0,A.oL)(n,b.Z.CHANGE,this.handleSourceChange_,this)),this.changed()}getFeatures(n){return this.renderer_?this.renderer_.getFeatures(n):new Promise(h=>h([]))}getData(n){return this.renderer_&&this.rendered?this.renderer_.getData(n):null}render(n,h){const d=this.getRenderer();if(d.prepareFrame(n))return this.rendered=!0,d.renderFrame(n,h)}unrender(){this.rendered=!1}setMapInternal(n){n||this.unrender(),this.set(q.Z.MAP,n)}getMapInternal(){return this.get(q.Z.MAP)}setMap(n){this.mapPrecomposeKey_&&((0,A.bN)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),n||this.changed(),this.mapRenderKey_&&((0,A.bN)(this.mapRenderKey_),this.mapRenderKey_=null),n&&(this.mapPrecomposeKey_=(0,A.oL)(n,V.Z.PRECOMPOSE,function(h){const S=h.frameState.layerStatesArray,_=this.getLayerState(!1);(0,x.h)(!S.some(function(R){return R.layer===_.layer}),67),S.push(_)},this),this.mapRenderKey_=(0,A.oL)(this,b.Z.CHANGE,n.render,n),this.changed())}setSource(n){this.set(q.Z.SOURCE,n)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}},2683:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>st});const st={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},4848:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>G});var st=c(4593);const V=class q extends st.Z{constructor(u){u=u||{};const B=Object.assign({},u);delete B.preload,delete B.useInterimTilesOnError,super(B),this.setPreload(void 0!==u.preload?u.preload:0),this.setUseInterimTilesOnError(void 0===u.useInterimTilesOnError||u.useInterimTilesOnError)}getPreload(){return this.get("preload")}setPreload(u){this.set("preload",u)}getUseInterimTilesOnError(){return this.get("useInterimTilesOnError")}setUseInterimTilesOnError(u){this.set("useInterimTilesOnError",u)}getData(u){return super.getData(u)}};var x=c(2121),A=c(9001),j=c(8252),L=c(6609),y=c(1999),i=c(483),n=c(760),h=c(6003),d=c(119),S=c(2456),_=c(1750);const v=class R extends x.Z{constructor(u){super(u),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,n.lJ)(),this.tmpTileRange_=new L.Z(0,0,0,0)}isDrawableTile(u){const B=this.getLayer(),tt=u.getState(),W=B.getUseInterimTilesOnError();return tt==y.Z.LOADED||tt==y.Z.EMPTY||tt==y.Z.ERROR&&!W}getTile(u,B,tt,W){const $=W.pixelRatio,F=W.viewState.projection,at=this.getLayer();let lt=at.getSource().getTile(u,B,tt,$,F);return lt.getState()==y.Z.ERROR&&at.getUseInterimTilesOnError()&&at.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(lt)||(lt=lt.getInterimTile()),lt}getData(u){const B=this.frameState;if(!B)return null;const tt=this.getLayer(),W=(0,i.nn)(B.pixelToCoordinateTransform,u.slice()),$=tt.getExtent();if($&&!(0,n.b8)($,W))return null;const F=B.pixelRatio,at=B.viewState.projection,St=B.viewState,lt=tt.getRenderSource(),Tt=lt.getTileGridForProjection(St.projection),M=lt.getTilePixelRatio(B.pixelRatio);for(let l=Tt.getZForResolution(St.resolution);l>=Tt.getMinZoom();--l){const f=Tt.getTileCoordForCoordAndZ(W,l),O=lt.getTile(l,f[1],f[2],F,at);if(!(O instanceof A.Z||O instanceof j.Z)||O instanceof j.Z&&O.getState()===y.Z.EMPTY)return null;if(O.getState()!==y.Z.LOADED)continue;const H=Tt.getOrigin(l),nt=(0,_.Pq)(Tt.getTileSize(l)),ot=Tt.getResolution(l),Y=Math.floor(M*((W[0]-H[0])/ot-f[1]*nt[0])),C=Math.floor(M*((H[1]-W[1])/ot-f[2]*nt[1])),k=Math.round(M*lt.getGutterForProjection(St.projection));return this.getImageData(O.getImage(),Y+k,C+k)}return null}loadedTileCallback(u,B,tt){return!!this.isDrawableTile(tt)&&super.loadedTileCallback(u,B,tt)}prepareFrame(u){return!!this.getLayer().getSource()}renderFrame(u,B){const tt=u.layerStatesArray[u.layerIndex],W=u.viewState,$=W.projection,F=W.resolution,at=W.center,St=W.rotation,lt=u.pixelRatio,Tt=this.getLayer(),M=Tt.getSource(),l=M.getRevision(),f=M.getTileGridForProjection($),O=f.getZForResolution(F,M.zDirection),H=f.getResolution(O);let nt=u.extent;const ot=u.viewState.resolution,Y=M.getTilePixelRatio(lt),C=Math.round((0,n.dz)(nt)/ot*lt),k=Math.round((0,n.Cr)(nt)/ot*lt),Z=tt.extent&&(0,h.dY)(tt.extent,$);Z&&(nt=(0,n.Ed)(nt,(0,h.dY)(tt.extent,$)));const K=H*C/2/Y,U=H*k/2/Y,et=[at[0]-K,at[1]-U,at[0]+K,at[1]+U],ht=f.getTileRangeForExtentAndZ(nt,O),xt={};xt[O]={};const Pt=this.createLoadedTileFinder(M,$,xt),Ot=this.tmpExtent,At=this.tmpTileRange_;this.newTiles_=!1;const zt=St?(0,n.dY)(W.center,ot,St,u.size):void 0;for(let a=ht.minX;a<=ht.maxX;++a)for(let w=ht.minY;w<=ht.maxY;++w){if(St&&!f.tileCoordIntersectsViewport([O,a,w],zt))continue;const X=this.getTile(O,a,w,u);if(this.isDrawableTile(X)){const Et=(0,d.sq)(this);if(X.getState()==y.Z.LOADED){xt[O][X.tileCoord.toString()]=X;let bt=X.inTransition(Et);bt&&1!==tt.opacity&&(X.endTransition(Et),bt=!1),!this.newTiles_&&(bt||!this.renderedTiles.includes(X))&&(this.newTiles_=!0)}if(1===X.getAlpha(Et,u.time))continue}const ut=f.getTileCoordChildTileRange(X.tileCoord,At,Ot);let pt=!1;ut&&(pt=Pt(O+1,ut)),pt||f.forEachTileCoordParentTileRange(X.tileCoord,Pt,At,Ot)}const Yt=H/F*lt/Y;(0,i.qC)(this.pixelTransform,u.size[0]/2,u.size[1]/2,1/lt,1/lt,St,-C/2,-k/2);const Ht=(0,i.BB)(this.pixelTransform);this.useContainer(B,Ht,this.getBackground(u));const Wt=this.context,Jt=Wt.canvas;(0,i.nb)(this.inversePixelTransform,this.pixelTransform),(0,i.qC)(this.tempTransform,C/2,k/2,Yt,Yt,0,-C/2,-k/2),Jt.width!=C||Jt.height!=k?(Jt.width=C,Jt.height=k):this.containerReused||Wt.clearRect(0,0,C,k),Z&&this.clipUnrotated(Wt,u,Z),M.getInterpolate()||(Wt.imageSmoothingEnabled=!1),this.preRender(Wt,u),this.renderedTiles.length=0;let qt,ie,Rt,Qt=Object.keys(xt).map(Number);Qt.sort(S.kK),1!==tt.opacity||this.containerReused&&!M.getOpaque(u.viewState.projection)?(qt=[],ie=[]):Qt=Qt.reverse();for(let a=Qt.length-1;a>=0;--a){const w=Qt[a],X=M.getTilePixelSize(w,lt,$),pt=f.getResolution(w)/H,Et=X[0]*pt*Yt,bt=X[1]*pt*Yt,Kt=f.getTileCoordForCoordAndZ((0,n.rL)(et),w),Nt=f.getTileCoordExtent(Kt),Bt=(0,i.nn)(this.tempTransform,[Y*(Nt[0]-et[0])/H,Y*(et[3]-Nt[3])/H]),te=Y*M.getGutterForProjection($),le=xt[w];for(const De in le){const he=le[De],oe=he.tileCoord,ce=Kt[1]-oe[1],Te=Math.round(Bt[0]-(ce-1)*Et),Se=Kt[2]-oe[2],xe=Math.round(Bt[1]-(Se-1)*bt),ge=Math.round(Bt[0]-ce*Et),ue=Math.round(Bt[1]-Se*bt),ve=Te-ge,se=xe-ue,Ae=O===w,ke=Ae&&1!==he.getAlpha((0,d.sq)(this),u.time);let Ce=!1;if(!ke)if(qt){Rt=[ge,ue,ge+ve,ue,ge+ve,ue+se,ge,ue+se];for(let we=0,We=qt.length;we<We;++we)if(O!==w&&w<ie[we]){const re=qt[we];(0,n.kK)([ge,ue,ge+ve,ue+se],[re[0],re[3],re[4],re[7]])&&(Ce||(Wt.save(),Ce=!0),Wt.beginPath(),Wt.moveTo(Rt[0],Rt[1]),Wt.lineTo(Rt[2],Rt[3]),Wt.lineTo(Rt[4],Rt[5]),Wt.lineTo(Rt[6],Rt[7]),Wt.moveTo(re[6],re[7]),Wt.lineTo(re[4],re[5]),Wt.lineTo(re[2],re[3]),Wt.lineTo(re[0],re[1]),Wt.clip())}qt.push(Rt),ie.push(w)}else Wt.clearRect(ge,ue,ve,se);this.drawTileImage(he,u,ge,ue,ve,se,te,Ae),qt&&!ke?(Ce&&Wt.restore(),this.renderedTiles.unshift(he)):this.renderedTiles.push(he),this.updateUsedTiles(u.usedTiles,M,he)}}return this.renderedRevision=l,this.renderedResolution=H,this.extentChanged=!this.renderedExtent_||!(0,n.fS)(this.renderedExtent_,et),this.renderedExtent_=et,this.renderedPixelRatio=lt,this.renderedProjection=$,this.manageTilePyramid(u,M,f,lt,$,nt,O,Tt.getPreload()),this.scheduleExpireCache(u,M),this.postRender(Wt,u),tt.extent&&Wt.restore(),Wt.imageSmoothingEnabled=!0,Ht!==Jt.style.transform&&(Jt.style.transform=Ht),this.container}drawTileImage(u,B,tt,W,$,F,at,St){const lt=this.getTileImage(u);if(!lt)return;const Tt=(0,d.sq)(this),M=B.layerStatesArray[B.layerIndex],l=M.opacity*(St?u.getAlpha(Tt,B.time):1),f=l!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=l),this.context.drawImage(lt,at,at,lt.width-2*at,lt.height-2*at,tt,W,$,F),f&&this.context.restore(),l!==M.opacity?B.animate=!0:St&&u.endTransition(Tt)}getImage(){const u=this.context;return u?u.canvas:null}getTileImage(u){return u.getImage()}scheduleExpireCache(u,B){if(B.canExpireCache()){const tt=function(W,$,F){const at=(0,d.sq)(W);at in F.usedTiles&&W.expireCache(F.viewState.projection,F.usedTiles[at])}.bind(null,B);u.postRenderFunctions.push(tt)}}updateUsedTiles(u,B,tt){const W=(0,d.sq)(B);W in u||(u[W]={}),u[W][tt.getKey()]=!0}manageTilePyramid(u,B,tt,W,$,F,at,St,lt){const Tt=(0,d.sq)(B);Tt in u.wantedTiles||(u.wantedTiles[Tt]={});const M=u.wantedTiles[Tt],l=u.tileQueue,f=tt.getMinZoom(),O=u.viewState.rotation,H=O?(0,n.dY)(u.viewState.center,u.viewState.resolution,O,u.size):void 0;let ot,Y,C,k,Z,K,nt=0;for(K=f;K<=at;++K)for(Y=tt.getTileRangeForExtentAndZ(F,K,Y),C=tt.getResolution(K),k=Y.minX;k<=Y.maxX;++k)for(Z=Y.minY;Z<=Y.maxY;++Z)O&&!tt.tileCoordIntersectsViewport([K,k,Z],H)||(at-K<=St?(++nt,ot=B.getTile(K,k,Z,W,$),ot.getState()==y.Z.IDLE&&(M[ot.getKey()]=!0,l.isKeyQueued(ot.getKey())||l.enqueue([ot,Tt,tt.getTileCoordCenter(ot.tileCoord),C])),void 0!==lt&&lt(ot)):B.useTile(K,k,Z,$));B.updateCacheSize(nt,$)}},G=class m extends V{constructor(u){super(u)}createRenderer(){return new v(this)}}},759:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>di});var st=c(4593),b=c(2402),q=c(109),V=c(7392),x=c(5044),A=c(9570),j=c(8225),L=c(6785),y=c(1750);class n{constructor(e){this.font_=(e=e||{}).font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=(0,y.Pq)(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new x.Z({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}clone(){const e=this.getScale();return new n({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=(0,y.Pq)(void 0!==e?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const h=n;function d(Q){return new q.ZP({fill:S(Q,""),stroke:_(Q,""),text:R(Q),image:v(Q)})}function S(Q,e){const s=Q[e+"fill-color"];if(s)return new x.Z({color:s})}function _(Q,e){const s=Q[e+"stroke-width"],r=Q[e+"stroke-color"];if(s||r)return new L.Z({width:s,color:r,lineCap:Q[e+"stroke-line-cap"],lineJoin:Q[e+"stroke-line-join"],lineDash:Q[e+"stroke-line-dash"],lineDashOffset:Q[e+"stroke-line-dash-offset"],miterLimit:Q[e+"stroke-miter-limit"]})}function R(Q){const e=Q["text-value"];return e?new h({text:e,font:Q["text-font"],maxAngle:Q["text-max-angle"],offsetX:Q["text-offset-x"],offsetY:Q["text-offset-y"],overflow:Q["text-overflow"],placement:Q["text-placement"],scale:Q["text-scale"],rotateWithView:Q["text-rotate-with-view"],rotation:Q["text-rotation"],textAlign:Q["text-align"],justify:Q["text-justify"],textBaseline:Q["text-baseline"],padding:Q["text-padding"],fill:S(Q,"text-"),backgroundFill:S(Q,"text-background-"),stroke:_(Q,"text-"),backgroundStroke:_(Q,"text-background-")}):void 0}function v(Q){const e=Q["icon-src"],s=Q["icon-img"];if(e||s)return new A.Z({src:e,img:s,imgSize:Q["icon-img-size"],anchor:Q["icon-anchor"],anchorOrigin:Q["icon-anchor-origin"],anchorXUnits:Q["icon-anchor-x-units"],anchorYUnits:Q["icon-anchor-y-units"],color:Q["icon-color"],crossOrigin:Q["icon-cross-origin"],offset:Q["icon-offset"],displacement:Q["icon-displacement"],opacity:Q["icon-opacity"],scale:Q["icon-scale"],rotation:Q["icon-rotation"],rotateWithView:Q["icon-rotate-with-view"],size:Q["icon-size"],declutterMode:Q["icon-declutter-mode"]});const r=Q["shape-points"];if(r){const p="shape-";return new j.Z({points:r,fill:S(Q,p),stroke:_(Q,p),radius:Q["shape-radius"],radius1:Q["shape-radius1"],radius2:Q["shape-radius2"],angle:Q["shape-angle"],displacement:Q["shape-displacement"],rotation:Q["shape-rotation"],rotateWithView:Q["shape-rotate-with-view"],scale:Q["shape-scale"],declutterMode:Q["shape-declutter-mode"]})}const E=Q["circle-radius"];if(E){const p="circle-";return new V.Z({radius:E,fill:S(Q,p),stroke:_(Q,p),displacement:Q["circle-displacement"],scale:Q["circle-scale"],rotation:Q["circle-rotation"],rotateWithView:Q["circle-rotate-with-view"],declutterMode:Q["circle-declutter-mode"]})}}const T=class G extends st.Z{constructor(e){e=e||{};const s=Object.assign({},e);delete s.style,delete s.renderBuffer,delete s.updateWhileAnimating,delete s.updateWhileInteracting,super(s),this.declutter_=void 0!==e.declutter&&e.declutter,this.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,this.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new b(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set("renderOrder",e)}setStyle(e){let s;if(void 0===e)s=q.yF;else if(null===e)s=null;else if("function"==typeof e)s=e;else if(e instanceof q.ZP)s=e;else if(Array.isArray(e)){const r=e.length,E=new Array(r);for(let p=0;p<r;++p){const I=e[p];E[p]=I instanceof q.ZP?I:d(I)}s=E}else s=d(e);this.style_=s,this.styleFunction_=null===e?void 0:(0,q.J$)(this.style_),this.changed()}},u={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},B=[u.FILL],tt=[u.STROKE],W=[u.BEGIN_PATH],$=[u.CLOSE_PATH],F=u;var at=c(2401);const lt=class St{drawCustom(e,s,r,E){}drawGeometry(e){}setStyle(e){}drawCircle(e,s){}drawFeature(e,s){}drawGeometryCollection(e,s){}drawLineString(e,s){}drawMultiLineString(e,s){}drawMultiPoint(e,s){}drawMultiPolygon(e,s){}drawPoint(e,s){}drawPolygon(e,s){}drawText(e,s){}setFillStrokeStyle(e,s){}setImageStyle(e,s){}setTextStyle(e,s){}};var Tt=c(5813),M=c(760),l=c(4686),f=c(2456),O=c(392);const nt=class H extends lt{constructor(e,s,r,E){super(),this.tolerance=e,this.maxExtent=s,this.pixelRatio=E,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const s=this.pixelRatio;return 1==s?e:e.map(function(r){return r*s})}appendFlatPointCoordinates(e,s){const r=this.getBufferedMaxExtent(),E=this.tmpCoordinate_,p=this.coordinates;let I=p.length;for(let D=0,N=e.length;D<N;D+=s)E[0]=e[D],E[1]=e[D+1],(0,M.b8)(r,E)&&(p[I++]=E[0],p[I++]=E[1]);return I}appendFlatLineCoordinates(e,s,r,E,p,I){const D=this.coordinates;let N=D.length;const J=this.getBufferedMaxExtent();I&&(s+=E);let rt=e[s],gt=e[s+1];const ft=this.tmpCoordinate_;let vt,Lt,Ct,yt=!0;for(vt=s+E;vt<r;vt+=E)ft[0]=e[vt],ft[1]=e[vt+1],Ct=(0,M.pX)(J,ft),Ct!==Lt?(yt&&(D[N++]=rt,D[N++]=gt,yt=!1),D[N++]=ft[0],D[N++]=ft[1]):Ct===at.Z.INTERSECTING?(D[N++]=ft[0],D[N++]=ft[1],yt=!1):yt=!0,rt=ft[0],gt=ft[1],Lt=Ct;return(p&&yt||vt===s+E)&&(D[N++]=rt,D[N++]=gt),N}drawCustomCoordinates_(e,s,r,E,p){for(let I=0,D=r.length;I<D;++I){const N=r[I],J=this.appendFlatLineCoordinates(e,s,N,E,!1,!1);p.push(J),s=N}return s}drawCustom(e,s,r,E){this.beginGeometry(e,s);const p=e.getType(),I=e.getStride(),D=this.coordinates.length;let N,J,rt,gt,ft;switch(p){case"MultiPolygon":N=e.getOrientedFlatCoordinates(),gt=[];const yt=e.getEndss();ft=0;for(let vt=0,Lt=yt.length;vt<Lt;++vt){const Ct=[];ft=this.drawCustomCoordinates_(N,ft,yt[vt],I,Ct),gt.push(Ct)}this.instructions.push([F.CUSTOM,D,gt,e,r,O.ug]),this.hitDetectionInstructions.push([F.CUSTOM,D,gt,e,E||r,O.ug]);break;case"Polygon":case"MultiLineString":rt=[],N="Polygon"==p?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),ft=this.drawCustomCoordinates_(N,0,e.getEnds(),I,rt),this.instructions.push([F.CUSTOM,D,rt,e,r,O.o1]),this.hitDetectionInstructions.push([F.CUSTOM,D,rt,e,E||r,O.o1]);break;case"LineString":case"Circle":N=e.getFlatCoordinates(),J=this.appendFlatLineCoordinates(N,0,N.length,I,!1,!1),this.instructions.push([F.CUSTOM,D,J,e,r,O.Ml]),this.hitDetectionInstructions.push([F.CUSTOM,D,J,e,E||r,O.Ml]);break;case"MultiPoint":N=e.getFlatCoordinates(),J=this.appendFlatPointCoordinates(N,I),J>D&&(this.instructions.push([F.CUSTOM,D,J,e,r,O.Ml]),this.hitDetectionInstructions.push([F.CUSTOM,D,J,e,E||r,O.Ml]));break;case"Point":N=e.getFlatCoordinates(),this.coordinates.push(N[0],N[1]),J=this.coordinates.length,this.instructions.push([F.CUSTOM,D,J,e,r]),this.hitDetectionInstructions.push([F.CUSTOM,D,J,e,E||r])}this.endGeometry(s)}beginGeometry(e,s){this.beginGeometryInstruction1_=[F.BEGIN_GEOMETRY,s,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[F.BEGIN_GEOMETRY,s,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;let s;e.reverse();const r=e.length;let E,p,I=-1;for(s=0;s<r;++s)E=e[s],p=E[0],p==F.END_GEOMETRY?I=s:p==F.BEGIN_GEOMETRY&&(E[2]=s,(0,f.FZ)(this.hitDetectionInstructions,I,s),I=-1)}setFillStrokeStyle(e,s){const r=this.state;if(e){const E=e.getColor();r.fillStyle=(0,Tt.y)(E||l.bL)}else r.fillStyle=void 0;if(s){const E=s.getColor();r.strokeStyle=(0,Tt.y)(E||l.Tx);const p=s.getLineCap();r.lineCap=void 0!==p?p:l.mb;const I=s.getLineDash();r.lineDash=I?I.slice():l.X9;const D=s.getLineDashOffset();r.lineDashOffset=D||l.He;const N=s.getLineJoin();r.lineJoin=void 0!==N?N:l.rc;const J=s.getWidth();r.lineWidth=void 0!==J?J:l.yC;const rt=s.getMiterLimit();r.miterLimit=void 0!==rt?rt:l.V4,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0}createFill(e){const s=e.fillStyle,r=[F.SET_FILL_STYLE,s];return"string"!=typeof s&&r.push(!0),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[F.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,s){const r=e.fillStyle;("string"!=typeof r||e.currentFillStyle!=r)&&(void 0!==r&&this.instructions.push(s.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,s){const r=e.strokeStyle,E=e.lineCap,p=e.lineDash,I=e.lineDashOffset,D=e.lineJoin,N=e.lineWidth,J=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=E||p!=e.currentLineDash&&!(0,f.fS)(e.currentLineDash,p)||e.currentLineDashOffset!=I||e.currentLineJoin!=D||e.currentLineWidth!=N||e.currentMiterLimit!=J)&&(void 0!==r&&s.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=E,e.currentLineDash=p,e.currentLineDashOffset=I,e.currentLineJoin=D,e.currentLineWidth=N,e.currentMiterLimit=J)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const s=[F.END_GEOMETRY,e];this.instructions.push(s),this.hitDetectionInstructions.push(s)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,M.d9)(this.maxExtent),this.maxLineWidth>0)&&(0,M.f3)(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}};var Z=c(9182);const U=class K extends nt{constructor(e,s,r,E){super(e,s,r,E)}drawFlatCoordinatess_(e,s,r,E){const p=this.state,I=void 0!==p.fillStyle,D=void 0!==p.strokeStyle,N=r.length;this.instructions.push(W),this.hitDetectionInstructions.push(W);for(let J=0;J<N;++J){const rt=r[J],gt=this.coordinates.length,ft=this.appendFlatLineCoordinates(e,s,rt,E,!0,!D),yt=[F.MOVE_TO_LINE_TO,gt,ft];this.instructions.push(yt),this.hitDetectionInstructions.push(yt),D&&(this.instructions.push($),this.hitDetectionInstructions.push($)),s=rt}return I&&(this.instructions.push(B),this.hitDetectionInstructions.push(B)),D&&(this.instructions.push(tt),this.hitDetectionInstructions.push(tt)),s}drawCircle(e,s){const r=this.state;if(void 0===r.fillStyle&&void 0===r.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,s),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([F.SET_FILL_STYLE,l.bL]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([F.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);const I=e.getFlatCoordinates(),D=e.getStride(),N=this.coordinates.length;this.appendFlatLineCoordinates(I,0,I.length,D,!1,!1);const J=[F.CIRCLE,N];this.instructions.push(W,J),this.hitDetectionInstructions.push(W,J),void 0!==r.fillStyle&&(this.instructions.push(B),this.hitDetectionInstructions.push(B)),void 0!==r.strokeStyle&&(this.instructions.push(tt),this.hitDetectionInstructions.push(tt)),this.endGeometry(s)}drawPolygon(e,s){const r=this.state;if(void 0===r.fillStyle&&void 0===r.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,s),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([F.SET_FILL_STYLE,l.bL]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([F.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);const I=e.getEnds(),D=e.getOrientedFlatCoordinates(),N=e.getStride();this.drawFlatCoordinatess_(D,0,I,N),this.endGeometry(s)}drawMultiPolygon(e,s){const r=this.state;if(void 0===r.fillStyle&&void 0===r.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,s),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([F.SET_FILL_STYLE,l.bL]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([F.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);const I=e.getEndss(),D=e.getOrientedFlatCoordinates(),N=e.getStride();let J=0;for(let rt=0,gt=I.length;rt<gt;++rt)J=this.drawFlatCoordinatess_(D,J,I[rt],N);this.endGeometry(s)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(0!==e){const s=this.coordinates;for(let r=0,E=s.length;r<E;++r)s[r]=(0,Z.uZ)(s[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)}};var et=c(119);function ht(Q,e,s,r,E){let rt,gt,ft,yt,vt,Lt,Ct,It,wt,Ft,p=s,I=s,D=0,N=0,J=s;for(gt=s;gt<r;gt+=E){const jt=e[gt],Xt=e[gt+1];void 0!==vt&&(wt=jt-vt,Ft=Xt-Lt,yt=Math.sqrt(wt*wt+Ft*Ft),void 0!==Ct&&(N+=ft,rt=Math.acos((Ct*wt+It*Ft)/(ft*yt)),rt>Q&&(N>D&&(D=N,p=J,I=gt),N=0,J=gt-E)),ft=yt,Ct=wt,It=Ft),vt=jt,Lt=Xt}return N+=yt,N>D?[J,gt]:[p,I]}const xt={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},At={Circle:U,Default:nt,Image:class ot extends nt{constructor(e,s,r,E){super(e,s,r,E),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,s){if(!this.image_)return;this.beginGeometry(e,s);const r=e.getFlatCoordinates(),E=e.getStride(),p=this.coordinates.length,I=this.appendFlatPointCoordinates(r,E);this.instructions.push([F.DRAW_IMAGE,p,I,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([F.DRAW_IMAGE,p,I,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(s)}drawMultiPoint(e,s){if(!this.image_)return;this.beginGeometry(e,s);const r=e.getFlatCoordinates(),E=e.getStride(),p=this.coordinates.length,I=this.appendFlatPointCoordinates(r,E);this.instructions.push([F.DRAW_IMAGE,p,I,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([F.DRAW_IMAGE,p,I,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(s)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,s){const r=e.getAnchor(),E=e.getSize(),p=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=E[1],this.opacity_=e.getOpacity(),this.originX_=p[0],this.originY_=p[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=E[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=s}},LineString:class C extends nt{constructor(e,s,r,E){super(e,s,r,E)}drawFlatCoordinates_(e,s,r,E){const p=this.coordinates.length,I=this.appendFlatLineCoordinates(e,s,r,E,!1,!1),D=[F.MOVE_TO_LINE_TO,p,I];return this.instructions.push(D),this.hitDetectionInstructions.push(D),r}drawLineString(e,s){const r=this.state;if(void 0===r.strokeStyle||void 0===r.lineWidth)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,s),this.hitDetectionInstructions.push([F.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,l.X9,l.He],W);const I=e.getFlatCoordinates(),D=e.getStride();this.drawFlatCoordinates_(I,0,I.length,D),this.hitDetectionInstructions.push(tt),this.endGeometry(s)}drawMultiLineString(e,s){const r=this.state;if(void 0===r.strokeStyle||void 0===r.lineWidth)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,s),this.hitDetectionInstructions.push([F.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],W);const I=e.getEnds(),D=e.getFlatCoordinates(),N=e.getStride();let J=0;for(let rt=0,gt=I.length;rt<gt;++rt)J=this.drawFlatCoordinates_(D,J,I[rt],N);this.hitDetectionInstructions.push(tt),this.endGeometry(s)}finish(){const e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(tt),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(tt),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(W)}},Polygon:U,Text:class Pt extends nt{constructor(e,s,r,E){super(e,s,r,E),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,s){const p=this.textState_;if(""===this.text_||!p||!this.textFillState_&&!this.textStrokeState_)return;const I=this.coordinates;let D=I.length;const N=e.getType();let J=null,rt=e.getStride();if("line"!==p.placement||"LineString"!=N&&"MultiLineString"!=N&&"Polygon"!=N&&"MultiPolygon"!=N){let gt=p.overflow?null:[];switch(N){case"Point":case"MultiPoint":J=e.getFlatCoordinates();break;case"LineString":J=e.getFlatMidpoint();break;case"Circle":J=e.getCenter();break;case"MultiLineString":J=e.getFlatMidpoints(),rt=2;break;case"Polygon":J=e.getFlatInteriorPoint(),p.overflow||gt.push(J[2]/this.resolution),rt=3;break;case"MultiPolygon":const Ct=e.getFlatInteriorPoints();J=[];for(let It=0,wt=Ct.length;It<wt;It+=3)p.overflow||gt.push(Ct[It+2]/this.resolution),J.push(Ct[It],Ct[It+1]);if(0===J.length)return;rt=2}const ft=this.appendFlatPointCoordinates(J,rt);if(ft===D)return;if(gt&&(ft-D)/2!=J.length/rt){let Ct=D/2;gt=gt.filter((It,wt)=>{const Ft=I[2*(Ct+wt)]===J[wt*rt]&&I[2*(Ct+wt)+1]===J[wt*rt+1];return Ft||--Ct,Ft})}this.saveTextStates_(),(p.backgroundFill||p.backgroundStroke)&&(this.setFillStrokeStyle(p.backgroundFill,p.backgroundStroke),p.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),p.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,s);let yt=p.padding;if(yt!=l.oB&&(p.scale[0]<0||p.scale[1]<0)){let Ct=p.padding[0],It=p.padding[1],wt=p.padding[2],Ft=p.padding[3];p.scale[0]<0&&(It=-It,Ft=-Ft),p.scale[1]<0&&(Ct=-Ct,wt=-wt),yt=[Ct,It,wt,Ft]}const vt=this.pixelRatio;this.instructions.push([F.DRAW_IMAGE,D,ft,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,yt==l.oB?l.oB:yt.map(function(Ct){return Ct*vt}),!!p.backgroundFill,!!p.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,gt]);const Lt=1/vt;this.hitDetectionInstructions.push([F.DRAW_IMAGE,D,ft,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[Lt,Lt],NaN,void 0,this.declutterImageWithText_,yt,!!p.backgroundFill,!!p.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,gt]),this.endGeometry(s)}else{if(!(0,M.kK)(this.getBufferedMaxExtent(),e.getExtent()))return;let gt;if(J=e.getFlatCoordinates(),"LineString"==N)gt=[J.length];else if("MultiLineString"==N)gt=e.getEnds();else if("Polygon"==N)gt=e.getEnds().slice(0,1);else if("MultiPolygon"==N){const Lt=e.getEndss();gt=[];for(let Ct=0,It=Lt.length;Ct<It;++Ct)gt.push(Lt[Ct][0])}this.beginGeometry(e,s);const ft=p.textAlign;let vt,yt=0;for(let Lt=0,Ct=gt.length;Lt<Ct;++Lt){if(null==ft){const wt=ht(p.maxAngle,J,yt,gt[Lt],rt);yt=wt[0],vt=wt[1]}else vt=gt[Lt];for(let wt=yt;wt<vt;wt+=rt)I.push(J[wt],J[wt+1]);const It=I.length;yt=gt[Lt],this.drawChars_(D,It),D=It}this.endGeometry(s)}}saveTextStates_(){const e=this.textStrokeState_,s=this.textState_,r=this.textFillState_,E=this.strokeKey_;e&&(E in this.strokeStates||(this.strokeStates[E]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const p=this.textKey_;p in this.textStates||(this.textStates[p]={font:s.font,textAlign:s.textAlign||l.PH,justify:s.justify,textBaseline:s.textBaseline||l.ru,scale:s.scale});const I=this.fillKey_;r&&(I in this.fillStates||(this.fillStates[I]={fillStyle:r.fillStyle}))}drawChars_(e,s){const r=this.textStrokeState_,E=this.textState_,p=this.strokeKey_,I=this.textKey_,D=this.fillKey_;this.saveTextStates_();const N=this.pixelRatio,J=xt[E.textBaseline],rt=this.textOffsetY_*N,gt=this.text_,ft=r?r.lineWidth*Math.abs(E.scale[0])/2:0;this.instructions.push([F.DRAW_CHARS,e,s,J,E.overflow,D,E.maxAngle,N,rt,p,ft*N,gt,I,1]),this.hitDetectionInstructions.push([F.DRAW_CHARS,e,s,J,E.overflow,D,E.maxAngle,1,rt,p,ft,gt,I,1/N])}setTextStyle(e,s){let r,E,p;if(e){const I=e.getFill();I?(E=this.textFillState_,E||(E={},this.textFillState_=E),E.fillStyle=(0,Tt.y)(I.getColor()||l.bL)):(E=null,this.textFillState_=E);const D=e.getStroke();if(D){p=this.textStrokeState_,p||(p={},this.textStrokeState_=p);const vt=D.getLineDash(),Lt=D.getLineDashOffset(),Ct=D.getWidth(),It=D.getMiterLimit();p.lineCap=D.getLineCap()||l.mb,p.lineDash=vt?vt.slice():l.X9,p.lineDashOffset=void 0===Lt?l.He:Lt,p.lineJoin=D.getLineJoin()||l.rc,p.lineWidth=void 0===Ct?l.yC:Ct,p.miterLimit=void 0===It?l.V4:It,p.strokeStyle=(0,Tt.y)(D.getColor()||l.Tx)}else p=null,this.textStrokeState_=p;r=this.textState_;const N=e.getFont()||l.Df;(0,l.Qx)(N);const J=e.getScaleArray();r.overflow=e.getOverflow(),r.font=N,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||l.ru,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||l.oB,r.scale=void 0===J?[1,1]:J;const rt=e.getOffsetX(),gt=e.getOffsetY(),ft=e.getRotateWithView(),yt=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=void 0===rt?0:rt,this.textOffsetY_=void 0===gt?0:gt,this.textRotateWithView_=void 0!==ft&&ft,this.textRotation_=void 0===yt?0:yt,this.strokeKey_=p?("string"==typeof p.strokeStyle?p.strokeStyle:(0,et.sq)(p.strokeStyle))+p.lineCap+p.lineDashOffset+"|"+p.lineWidth+p.lineJoin+p.miterLimit+"["+p.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=E?"string"==typeof E.fillStyle?E.fillStyle:"|"+(0,et.sq)(E.fillStyle):""}else this.text_="";this.declutterImageWithText_=s}}},Yt=class zt{constructor(e,s,r,E){this.tolerance_=e,this.maxExtent_=s,this.pixelRatio_=E,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const s in this.buildersByZIndex_){e[s]=e[s]||{};const r=this.buildersByZIndex_[s];for(const E in r){const p=r[E].finish();e[s][E]=p}}return e}getBuilder(e,s){const r=void 0!==e?e.toString():"0";let E=this.buildersByZIndex_[r];void 0===E&&(E={},this.buildersByZIndex_[r]=E);let p=E[s];return void 0===p&&(p=new(0,At[s])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),E[s]=p),p}};var Ht=c(2121),Wt=c(483),Jt=c(2156),Qt=c(874);function qt(Q,e,s,r,E,p,I,D,N,J,rt,gt){let ft=Q[e],yt=Q[e+1],vt=0,Lt=0,Ct=0,It=0;function wt(){vt=ft,Lt=yt,ft=Q[e+=r],yt=Q[e+1],It+=Ct,Ct=Math.sqrt((ft-vt)*(ft-vt)+(yt-Lt)*(yt-Lt))}do{wt()}while(e<s-r&&It+Ct<p);let Ft=0===Ct?0:(p-It)/Ct;const jt=(0,Jt.t7)(vt,ft,Ft),Xt=(0,Jt.t7)(Lt,yt,Ft),Ut=e-r,Vt=It,z=p+D*N(J,E,rt);for(;e<s-r&&It+Ct<z;)wt();Ft=0===Ct?0:(z-It)/Ct;const t=(0,Jt.t7)(vt,ft,Ft),o=(0,Jt.t7)(Lt,yt,Ft);let g;if(gt){const mt=[jt,Xt,t,o];(0,Qt.U1)(mt,0,4,2,gt,mt,mt),g=mt[0]>mt[2]}else g=jt>t;const P=Math.PI,it=[],ct=Ut+r===e;let _t;if(Ct=0,It=Vt,ft=Q[e=Ut],yt=Q[e+1],ct)return wt(),_t=Math.atan2(yt-Lt,ft-vt),g&&(_t+=_t>0?-P:P),it[0]=[(t+jt)/2,(o+Xt)/2,(z-p)/2,_t,E],it;for(let mt=0,Zt=(E=E.replace(/\n/g," ")).length;mt<Zt;){wt();let Dt=Math.atan2(yt-Lt,ft-vt);if(g&&(Dt+=Dt>0?-P:P),void 0!==_t){let pe=Dt-_t;if(pe+=pe>P?-2*P:pe<-P?2*P:0,Math.abs(pe)>I)return null}_t=Dt;const Gt=mt;let $t=0;for(;mt<Zt;++mt){const fe=D*N(J,E[g?Zt-mt-1:mt],rt);if(e+r<s&&It+Ct<p+$t+fe/2)break;$t+=fe}if(mt===Gt)continue;const ne=g?E.substring(Zt-Gt,Zt-mt):E.substring(Gt,mt);Ft=0===Ct?0:(p+$t/2-It)/Ct;const Mt=(0,Jt.t7)(vt,ft,Ft),Be=(0,Jt.t7)(Lt,yt,Ft);it.push([Mt,Be,$t/2,Dt,ne]),p+=$t}return it}function ie(Q,e,s,r){let E=Q[e],p=Q[e+1],I=0;for(let D=e+r;D<s;D+=r){const N=Q[D],J=Q[D+1];I+=Math.sqrt((N-E)*(N-E)+(J-p)*(J-p)),E=N,p=J}return I}const a=(0,M.lJ)(),w=[],X=[],ut=[],pt=[];function Et(Q){return Q[3].declutterBox}const bt=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Kt(Q,e){return("start"===e||"end"===e)&&!bt.test(Q)&&(e="start"===e?"left":"right"),xt[e]}function Nt(Q,e,s){return s>0&&Q.push("\n",""),Q.push(e,""),Q}const te=class Bt{constructor(e,s,r,E){this.overlaps=r,this.pixelRatio=s,this.resolution=e,this.instructions=E.instructions,this.coordinates=E.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,Wt.Ue)(),this.hitDetectionInstructions=E.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=E.fillStates||{},this.strokeStates=E.strokeStates||{},this.textStates=E.textStates||{},this.widths_={},this.labels_={}}createLabel(e,s,r,E){const p=e+s+r+E;if(this.labels_[p])return this.labels_[p];const I=E?this.strokeStates[E]:null,D=r?this.fillStates[r]:null,N=this.textStates[s],J=this.pixelRatio,rt=[N.scale[0]*J,N.scale[1]*J],gt=Array.isArray(e),ft=N.justify?xt[N.justify]:Kt(Array.isArray(e)?e[0]:e,N.textAlign||l.PH),yt=E&&I.lineWidth?I.lineWidth:0,vt=gt?e:e.split("\n").reduce(Nt,[]),{width:Lt,height:Ct,widths:It,heights:wt,lineWidths:Ft}=(0,l.Zw)(N,vt),jt=Lt+yt,Xt=[],Ut=(jt+2)*rt[0],Vt=(Ct+yt)*rt[1],z={width:Ut<0?Math.floor(Ut):Math.ceil(Ut),height:Vt<0?Math.floor(Vt):Math.ceil(Vt),contextInstructions:Xt};(1!=rt[0]||1!=rt[1])&&Xt.push("scale",rt),E&&(Xt.push("strokeStyle",I.strokeStyle),Xt.push("lineWidth",yt),Xt.push("lineCap",I.lineCap),Xt.push("lineJoin",I.lineJoin),Xt.push("miterLimit",I.miterLimit),Xt.push("setLineDash",[I.lineDash]),Xt.push("lineDashOffset",I.lineDashOffset)),r&&Xt.push("fillStyle",D.fillStyle),Xt.push("textBaseline","middle"),Xt.push("textAlign","center");const t=.5-ft;let o=ft*jt+t*yt;const g=[],P=[];let Zt,it=0,ct=0,_t=0,mt=0;for(let Dt=0,Gt=vt.length;Dt<Gt;Dt+=2){const $t=vt[Dt];if("\n"===$t){ct+=it,it=0,o=ft*jt+t*yt,++mt;continue}const ne=vt[Dt+1]||N.font;ne!==Zt&&(E&&g.push("font",ne),r&&P.push("font",ne),Zt=ne),it=Math.max(it,wt[_t]);const Mt=[$t,o+t*It[_t]+ft*(It[_t]-Ft[mt]),.5*(yt+it)+ct];o+=It[_t],E&&g.push("strokeText",Mt),r&&P.push("fillText",Mt),++_t}return Array.prototype.push.apply(Xt,g),Array.prototype.push.apply(Xt,P),this.labels_[p]=z,z}replayTextBackground_(e,s,r,E,p,I,D){e.beginPath(),e.moveTo.apply(e,s),e.lineTo.apply(e,r),e.lineTo.apply(e,E),e.lineTo.apply(e,p),e.lineTo.apply(e,s),I&&(this.alignFill_=I[2],this.fill_(e)),D&&(this.setStrokeStyle_(e,D),e.stroke())}calculateImageOrLabelDimensions_(e,s,r,E,p,I,D,N,J,rt,gt,ft,yt,vt,Lt,Ct){let It=r-(D*=ft[0]),wt=E-(N*=ft[1]);const Ft=p+J>e?e-J:p,jt=I+rt>s?s-rt:I,Xt=vt[3]+Ft*ft[0]+vt[1],Ut=vt[0]+jt*ft[1]+vt[2],Vt=It-vt[3],z=wt-vt[0];let t;return(Lt||0!==gt)&&(w[0]=Vt,pt[0]=Vt,w[1]=z,X[1]=z,X[0]=Vt+Xt,ut[0]=X[0],ut[1]=z+Ut,pt[1]=ut[1]),0!==gt?(t=(0,Wt.qC)((0,Wt.Ue)(),r,E,1,1,gt,-r,-E),(0,Wt.nn)(t,w),(0,Wt.nn)(t,X),(0,Wt.nn)(t,ut),(0,Wt.nn)(t,pt),(0,M.T9)(Math.min(w[0],X[0],ut[0],pt[0]),Math.min(w[1],X[1],ut[1],pt[1]),Math.max(w[0],X[0],ut[0],pt[0]),Math.max(w[1],X[1],ut[1],pt[1]),a)):(0,M.T9)(Math.min(Vt,Vt+Xt),Math.min(z,z+Ut),Math.max(Vt,Vt+Xt),Math.max(z,z+Ut),a),yt&&(It=Math.round(It),wt=Math.round(wt)),{drawImageX:It,drawImageY:wt,drawImageW:Ft,drawImageH:jt,originX:J,originY:rt,declutterBox:{minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:Ct},canvasTransform:t,scale:ft}}replayImageOrLabel_(e,s,r,E,p,I,D){const J=E.declutterBox,rt=e.canvas,gt=D?D[2]*E.scale[0]/2:0;return J.minX-gt<=rt.width/s&&J.maxX+gt>=0&&J.minY-gt<=rt.height/s&&J.maxY+gt>=0&&(!(!I&&!D)&&this.replayTextBackground_(e,w,X,ut,pt,I,D),(0,l._f)(e,E.canvasTransform,p,r,E.originX,E.originY,E.drawImageW,E.drawImageH,E.drawImageX,E.drawImageY,E.scale)),!0}fill_(e){if(this.alignFill_){const s=(0,Wt.nn)(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(s[0]%r,s[1]%r),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,s){e.strokeStyle=s[1],e.lineWidth=s[2],e.lineCap=s[3],e.lineJoin=s[4],e.miterLimit=s[5],e.lineDashOffset=s[7],e.setLineDash(s[6])}drawLabelWithPointPlacement_(e,s,r,E){const p=this.textStates[s],I=this.createLabel(e,s,E,r),D=this.strokeStates[r],N=this.pixelRatio,J=Kt(Array.isArray(e)?e[0]:e,p.textAlign||l.PH),rt=xt[p.textBaseline||l.ru],gt=D&&D.lineWidth?D.lineWidth:0;return{label:I,anchorX:J*(I.width/N-2*p.scale[0])+2*(.5-J)*gt,anchorY:rt*I.height/N+2*(.5-rt)*gt}}execute_(e,s,r,E,p,I,D,N){let J;this.pixelCoordinates_&&(0,f.fS)(r,this.renderedTransform_)?J=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),J=(0,Qt.vT)(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),(0,Wt.lk)(this.renderedTransform_,r));let rt=0;const gt=E.length;let yt,vt,Lt,Ct,It,wt,Ft,jt,Xt,Ut,Vt,z,ft=0,t=0,o=0,g=null,P=null;const it=this.coordinateCache_,ct=this.viewRotation_,_t=Math.round(1e12*Math.atan2(-r[1],r[0]))/1e12,mt={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:ct},Zt=this.instructions!=E||this.overlaps?0:200;let Dt,Gt,$t,ne;for(;rt<gt;){const Mt=E[rt];switch(Mt[0]){case F.BEGIN_GEOMETRY:Dt=Mt[1],ne=Mt[3],Dt.getGeometry()?void 0===D||(0,M.kK)(D,ne.getExtent())?++rt:rt=Mt[2]+1:rt=Mt[2];break;case F.BEGIN_PATH:t>Zt&&(this.fill_(e),t=0),o>Zt&&(e.stroke(),o=0),!t&&!o&&(e.beginPath(),Ct=NaN,It=NaN),++rt;break;case F.CIRCLE:ft=Mt[1];const pe=J[ft],fe=J[ft+1],ee=J[ft+2]-pe,ae=J[ft+3]-fe,Pe=Math.sqrt(ee*ee+ae*ae);e.moveTo(pe+Pe,fe),e.arc(pe,fe,Pe,0,2*Math.PI,!0),++rt;break;case F.CLOSE_PATH:e.closePath(),++rt;break;case F.CUSTOM:ft=Mt[1],yt=Mt[2];const Qe=Mt[4],je=6==Mt.length?Mt[5]:void 0;mt.geometry=Mt[3],mt.feature=Dt,rt in it||(it[rt]=[]);const Me=it[rt];je?je(J,ft,yt,2,Me):(Me[0]=J[ft],Me[1]=J[ft+1],Me.length=2),Qe(Me,mt),++rt;break;case F.DRAW_IMAGE:ft=Mt[1],yt=Mt[2],jt=Mt[3],vt=Mt[4],Lt=Mt[5];let ze=Mt[6];const Di=Mt[7],Ai=Mt[8],wi=Mt[9],Ti=Mt[10];let fi=Mt[11];const bi=Mt[12];let $e=Mt[13];const vi=Mt[14],Ge=Mt[15];if(!jt&&Mt.length>=20){Xt=Mt[19],Ut=Mt[20],Vt=Mt[21],z=Mt[22];const _e=this.drawLabelWithPointPlacement_(Xt,Ut,Vt,z);jt=_e.label,Mt[3]=jt,vt=(_e.anchorX-Mt[23])*this.pixelRatio,Mt[4]=vt,Lt=(_e.anchorY-Mt[24])*this.pixelRatio,Mt[5]=Lt,ze=jt.height,Mt[6]=ze,$e=jt.width,Mt[13]=$e}let _i,mi,qe,ti;Mt.length>25&&(_i=Mt[25]),Mt.length>17?(mi=Mt[16],qe=Mt[17],ti=Mt[18]):(mi=l.oB,qe=!1,ti=!1),Ti&&_t?fi+=ct:!Ti&&!_t&&(fi-=ct);let Zi=0;for(;ft<yt;ft+=2){if(_i&&_i[Zi++]<$e/this.pixelRatio)continue;const _e=this.calculateImageOrLabelDimensions_(jt.width,jt.height,J[ft],J[ft+1],$e,ze,vt,Lt,Ai,wi,fi,bi,p,mi,qe||ti,Dt),Fe=[e,s,jt,_e,Di,qe?g:null,ti?P:null];if(N){if("none"===vi)continue;if("obstacle"===vi){N.insert(_e.declutterBox);continue}{let ye,Re;if(Ge){const me=yt-ft;if(!Ge[me]){Ge[me]=Fe;continue}if(ye=Ge[me],delete Ge[me],Re=Et(ye),N.collides(Re))continue}if(N.collides(_e.declutterBox))continue;ye&&(N.insert(Re),this.replayImageOrLabel_.apply(this,ye)),N.insert(_e.declutterBox)}}this.replayImageOrLabel_.apply(this,Fe)}++rt;break;case F.DRAW_CHARS:const Ri=Mt[1],Ii=Mt[2],pi=Mt[3],Fi=Mt[4];z=Mt[5];const ki=Mt[6],Si=Mt[7],Li=Mt[8];Vt=Mt[9];const yi=Mt[10];Xt=Mt[11],Ut=Mt[12];const Pi=[Mt[13],Mt[13]],Ei=this.textStates[Ut],Ye=Ei.font,Ue=[Ei.scale[0]*Si,Ei.scale[1]*Si];let Ve;Ye in this.widths_?Ve=this.widths_[Ye]:(Ve={},this.widths_[Ye]=Ve);const Oi=ie(J,Ri,Ii,2),Mi=Math.abs(Ue[0])*(0,l.Kd)(Ye,Xt,Ve);if(Fi||Mi<=Oi){const ye=qt(J,Ri,Ii,2,Xt,(Oi-Mi)*xt[this.textStates[Ut].textAlign],ki,Math.abs(Ue[0]),l.Kd,Ye,Ve,_t?0:this.viewRotation_);t:if(ye){const Re=[];let me,ei,ii,de,Ee;if(Vt)for(me=0,ei=ye.length;me<ei;++me){Ee=ye[me],ii=Ee[4],de=this.createLabel(ii,Ut,"",Vt),vt=Ee[2]+(Ue[0]<0?-yi:yi),Lt=pi*de.height+2*(.5-pi)*yi*Ue[1]/Ue[0]-Li;const Ie=this.calculateImageOrLabelDimensions_(de.width,de.height,Ee[0],Ee[1],de.width,de.height,vt,Lt,0,0,Ee[3],Pi,!1,l.oB,!1,Dt);if(N&&N.collides(Ie.declutterBox))break t;Re.push([e,s,de,Ie,1,null,null])}if(z)for(me=0,ei=ye.length;me<ei;++me){Ee=ye[me],ii=Ee[4],de=this.createLabel(ii,Ut,z,""),vt=Ee[2],Lt=pi*de.height-Li;const Ie=this.calculateImageOrLabelDimensions_(de.width,de.height,Ee[0],Ee[1],de.width,de.height,vt,Lt,0,0,Ee[3],Pi,!1,l.oB,!1,Dt);if(N&&N.collides(Ie.declutterBox))break t;Re.push([e,s,de,Ie,1,null,null])}N&&N.load(Re.map(Et));for(let Ie=0,Wi=Re.length;Ie<Wi;++Ie)this.replayImageOrLabel_.apply(this,Re[Ie])}}++rt;break;case F.END_GEOMETRY:if(void 0!==I){Dt=Mt[1];const _e=I(Dt,ne);if(_e)return _e}++rt;break;case F.FILL:Zt?t++:this.fill_(e),++rt;break;case F.MOVE_TO_LINE_TO:for(ft=Mt[1],yt=Mt[2],Gt=J[ft],$t=J[ft+1],wt=Gt+.5|0,Ft=$t+.5|0,(wt!==Ct||Ft!==It)&&(e.moveTo(Gt,$t),Ct=wt,It=Ft),ft+=2;ft<yt;ft+=2)Gt=J[ft],$t=J[ft+1],wt=Gt+.5|0,Ft=$t+.5|0,(ft==yt-2||wt!==Ct||Ft!==It)&&(e.lineTo(Gt,$t),Ct=wt,It=Ft);++rt;break;case F.SET_FILL_STYLE:g=Mt,this.alignFill_=Mt[2],t&&(this.fill_(e),t=0,o&&(e.stroke(),o=0)),e.fillStyle=Mt[1],++rt;break;case F.SET_STROKE_STYLE:P=Mt,o&&(e.stroke(),o=0),this.setStrokeStyle_(e,Mt),++rt;break;case F.STROKE:Zt?o++:e.stroke(),++rt;break;default:++rt}}t&&this.fill_(e),o&&e.stroke()}execute(e,s,r,E,p,I){this.viewRotation_=E,this.execute_(e,s,r,this.instructions,p,void 0,void 0,I)}executeHitDetection(e,s,r,E,p){return this.viewRotation_=r,this.execute_(e,1,s,this.hitDetectionInstructions,!0,E,p)}};var le=c(1992),De=c(9466);const he=["Polygon","Circle","LineString","Image","Text","Default"],ce={},Se=class oe{constructor(e,s,r,E,p,I){this.maxExtent_=e,this.overlaps_=E,this.pixelRatio_=r,this.resolution_=s,this.renderBuffer_=I,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,Wt.Ue)(),this.createExecutors_(p)}clip(e,s){const r=this.getClipCoords(s);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e){for(const s in e){let r=this.executorsByZIndex_[s];void 0===r&&(r={},this.executorsByZIndex_[s]=r);const E=e[s];for(const p in E)r[p]=new te(this.resolution_,this.pixelRatio_,this.overlaps_,E[p])}}hasExecutors(e){for(const s in this.executorsByZIndex_){const r=this.executorsByZIndex_[s];for(let E=0,p=e.length;E<p;++E)if(e[E]in r)return!0}return!1}forEachFeatureAtCoordinate(e,s,r,E,p,I){const D=2*(E=Math.round(E))+1,N=(0,Wt.qC)(this.hitDetectionTransform_,E+.5,E+.5,1/s,-1/s,-r,-e[0],-e[1]),J=!this.hitDetectionContext_;J&&(this.hitDetectionContext_=(0,le.E4)(D,D));const rt=this.hitDetectionContext_;let gt;rt.canvas.width!==D||rt.canvas.height!==D?(rt.canvas.width=D,rt.canvas.height=D):J||rt.clearRect(0,0,D,D),void 0!==this.renderBuffer_&&(gt=(0,M.lJ)(),(0,M.Wj)(gt,e),(0,M.f3)(gt,s*(this.renderBuffer_+E),gt));const ft=function Te(Q){if(void 0!==ce[Q])return ce[Q];const e=2*Q+1,s=Q*Q,r=new Array(s+1);for(let p=0;p<=Q;++p)for(let I=0;I<=Q;++I){const D=p*p+I*I;if(D>s)break;let N=r[D];N||(N=[],r[D]=N),N.push(4*((Q+p)*e+(Q+I))+3),p>0&&N.push(4*((Q-p)*e+(Q+I))+3),I>0&&(N.push(4*((Q+p)*e+(Q-I))+3),p>0&&N.push(4*((Q-p)*e+(Q-I))+3))}const E=[];for(let p=0,I=r.length;p<I;++p)r[p]&&E.push(...r[p]);return ce[Q]=E,E}(E);let yt;function vt(Xt,Ut){const Vt=rt.getImageData(0,0,D,D).data;for(let z=0,t=ft.length;z<t;z++)if(Vt[ft[z]]>0){if(!I||"Image"!==yt&&"Text"!==yt||I.includes(Xt)){const o=(ft[z]-3)/4,g=E-o%D,P=E-(o/D|0),it=p(Xt,Ut,g*g+P*P);if(it)return it}rt.clearRect(0,0,D,D);break}}const Lt=Object.keys(this.executorsByZIndex_).map(Number);let Ct,It,wt,Ft,jt;for(Lt.sort(f.kK),Ct=Lt.length-1;Ct>=0;--Ct){const Xt=Lt[Ct].toString();for(wt=this.executorsByZIndex_[Xt],It=he.length-1;It>=0;--It)if(yt=he[It],Ft=wt[yt],void 0!==Ft&&(jt=Ft.executeHitDetection(rt,N,r,vt,gt),jt))return jt}}getClipCoords(e){const s=this.maxExtent_;if(!s)return null;const r=s[0],E=s[1],p=s[2],I=s[3],D=[r,E,r,I,p,I,p,E];return(0,Qt.vT)(D,0,8,2,e,D),D}isEmpty(){return(0,De.x)(this.executorsByZIndex_)}execute(e,s,r,E,p,I,D){const N=Object.keys(this.executorsByZIndex_).map(Number);let J,rt,gt,ft,yt,vt;for(N.sort(f.kK),this.maxExtent_&&(e.save(),this.clip(e,r)),I=I||he,D&&N.reverse(),J=0,rt=N.length;J<rt;++J){const Lt=N[J].toString();for(yt=this.executorsByZIndex_[Lt],gt=0,ft=I.length;gt<ft;++gt)vt=yt[I[gt]],void 0!==vt&&vt.execute(e,s,r,E,p,D)}this.maxExtent_&&e.restore()}};var xe=c(8587),ge=c(9235);const ve=class ue extends lt{constructor(e,s,r,E,p,I,D){super(),this.context_=e,this.pixelRatio_=s,this.extent_=r,this.transform_=E,this.viewRotation_=p,this.squaredTolerance_=I,this.userTransform_=D,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,Wt.Ue)()}drawImages_(e,s,r,E){if(!this.image_)return;const p=(0,Qt.vT)(e,s,r,E,this.transform_,this.pixelCoordinates_),I=this.context_,D=this.tmpLocalTransform_,N=I.globalAlpha;1!=this.imageOpacity_&&(I.globalAlpha=N*this.imageOpacity_);let J=this.imageRotation_;this.imageRotateWithView_&&(J+=this.viewRotation_);for(let rt=0,gt=p.length;rt<gt;rt+=2){const ft=p[rt]-this.imageAnchorX_,yt=p[rt+1]-this.imageAnchorY_;if(0!==J||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const vt=ft+this.imageAnchorX_,Lt=yt+this.imageAnchorY_;(0,Wt.qC)(D,vt,Lt,1,1,J,-vt,-Lt),I.setTransform.apply(I,D),I.translate(vt,Lt),I.scale(this.imageScale_[0],this.imageScale_[1]),I.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),I.setTransform(1,0,0,1,0,0)}else I.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,ft,yt,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(I.globalAlpha=N)}drawText_(e,s,r,E){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const p=(0,Qt.vT)(e,s,r,E,this.transform_,this.pixelCoordinates_),I=this.context_;let D=this.textRotation_;for(this.textRotateWithView_&&(D+=this.viewRotation_);s<r;s+=E){const N=p[s]+this.textOffsetX_,J=p[s+1]+this.textOffsetY_;0!==D||1!=this.textScale_[0]||1!=this.textScale_[1]?(I.translate(N-this.textOffsetX_,J-this.textOffsetY_),I.rotate(D),I.translate(this.textOffsetX_,this.textOffsetY_),I.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&I.strokeText(this.text_,0,0),this.textFillState_&&I.fillText(this.text_,0,0),I.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&I.strokeText(this.text_,N,J),this.textFillState_&&I.fillText(this.text_,N,J))}}moveToLineTo_(e,s,r,E,p){const I=this.context_,D=(0,Qt.vT)(e,s,r,E,this.transform_,this.pixelCoordinates_);I.moveTo(D[0],D[1]);let N=D.length;p&&(N-=2);for(let J=2;J<N;J+=2)I.lineTo(D[J],D[J+1]);return p&&I.closePath(),r}drawRings_(e,s,r,E){for(let p=0,I=r.length;p<I;++p)s=this.moveToLineTo_(e,s,r[p],E,!0);return s}drawCircle(e){if((0,M.kK)(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const s=(0,ge.Kr)(e,this.transform_,this.pixelCoordinates_),r=s[2]-s[0],E=s[3]-s[1],p=Math.sqrt(r*r+E*E),I=this.context_;I.beginPath(),I.arc(s[0],s[1],p,0,2*Math.PI),this.fillState_&&I.fill(),this.strokeState_&&I.stroke()}""!==this.text_&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e)}}drawFeature(e,s){const r=s.getGeometryFunction()(e);!r||!(0,M.kK)(this.extent_,r.getExtent())||(this.setStyle(s),this.drawGeometry(r))}drawGeometryCollection(e){const s=e.getGeometriesArray();for(let r=0,E=s.length;r<E;++r)this.drawGeometry(s[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const s=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(s,0,s.length,r),""!==this.text_&&this.drawText_(s,0,s.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const s=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(s,0,s.length,r),""!==this.text_&&this.drawText_(s,0,s.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,M.kK)(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const s=this.context_,r=e.getFlatCoordinates();s.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),s.stroke()}if(""!==this.text_){const s=e.getFlatMidpoint();this.drawText_(s,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const s=e.getExtent();if((0,M.kK)(this.extent_,s)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,E=e.getFlatCoordinates();let p=0;const I=e.getEnds(),D=e.getStride();r.beginPath();for(let N=0,J=I.length;N<J;++N)p=this.moveToLineTo_(E,p,I[N],D,!1);r.stroke()}if(""!==this.text_){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,M.kK)(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const s=this.context_;s.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}if(""!==this.text_){const s=e.getFlatInteriorPoint();this.drawText_(s,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,M.kK)(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const s=this.context_,r=e.getOrientedFlatCoordinates();let E=0;const p=e.getEndss(),I=e.getStride();s.beginPath();for(let D=0,N=p.length;D<N;++D)E=this.drawRings_(r,E,p[D],I);this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}if(""!==this.text_){const s=e.getFlatInteriorPoints();this.drawText_(s,0,s.length,2)}}}setContextFillState_(e){const s=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,s.fillStyle=e.fillStyle):(s.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const s=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,s.lineCap=e.lineCap),(0,f.fS)(r.lineDash,e.lineDash)||s.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,s.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,s.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,s.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,s.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,s.strokeStyle=e.strokeStyle)):(s.lineCap=e.lineCap,s.setLineDash(e.lineDash),s.lineDashOffset=e.lineDashOffset,s.lineJoin=e.lineJoin,s.lineWidth=e.lineWidth,s.miterLimit=e.miterLimit,s.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const s=this.context_,r=this.contextTextState_,E=e.textAlign?e.textAlign:l.PH;r?(r.font!=e.font&&(r.font=e.font,s.font=e.font),r.textAlign!=E&&(r.textAlign=E,s.textAlign=E),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,s.textBaseline=e.textBaseline)):(s.font=e.font,s.textAlign=E,s.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:E,textBaseline:e.textBaseline})}setFillStrokeStyle(e,s){if(e){const r=e.getColor();this.fillState_={fillStyle:(0,Tt.y)(r||l.bL)}}else this.fillState_=null;if(s){const r=s.getColor(),E=s.getLineCap(),p=s.getLineDash(),I=s.getLineDashOffset(),D=s.getLineJoin(),N=s.getWidth(),J=s.getMiterLimit(),rt=p||l.X9;this.strokeState_={lineCap:void 0!==E?E:l.mb,lineDash:1===this.pixelRatio_?rt:rt.map(gt=>gt*this.pixelRatio_),lineDashOffset:(I||l.He)*this.pixelRatio_,lineJoin:void 0!==D?D:l.rc,lineWidth:(void 0!==N?N:l.yC)*this.pixelRatio_,miterLimit:void 0!==J?J:l.V4,strokeStyle:(0,Tt.y)(r||l.Tx)}}else this.strokeState_=null}setImageStyle(e){let s;if(!e||!(s=e.getSize()))return void(this.image_=null);const r=e.getPixelRatio(this.pixelRatio_),E=e.getAnchor(),p=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=E[0]*r,this.imageAnchorY_=E[1]*r,this.imageHeight_=s[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=p[0],this.imageOriginY_=p[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const I=e.getScaleArray();this.imageScale_=[I[0]*this.pixelRatio_/r,I[1]*this.pixelRatio_/r],this.imageWidth_=s[0]*r}setTextStyle(e){if(e){const s=e.getFill();if(s){const yt=s.getColor();this.textFillState_={fillStyle:(0,Tt.y)(yt||l.bL)}}else this.textFillState_=null;const r=e.getStroke();if(r){const yt=r.getColor(),vt=r.getLineCap(),Lt=r.getLineDash(),Ct=r.getLineDashOffset(),It=r.getLineJoin(),wt=r.getWidth(),Ft=r.getMiterLimit();this.textStrokeState_={lineCap:void 0!==vt?vt:l.mb,lineDash:Lt||l.X9,lineDashOffset:Ct||l.He,lineJoin:void 0!==It?It:l.rc,lineWidth:void 0!==wt?wt:l.yC,miterLimit:void 0!==Ft?Ft:l.V4,strokeStyle:(0,Tt.y)(yt||l.Tx)}}else this.textStrokeState_=null;const E=e.getFont(),p=e.getOffsetX(),I=e.getOffsetY(),D=e.getRotateWithView(),N=e.getRotation(),J=e.getScaleArray(),rt=e.getText(),gt=e.getTextAlign(),ft=e.getTextBaseline();this.textState_={font:void 0!==E?E:l.Df,textAlign:void 0!==gt?gt:l.PH,textBaseline:void 0!==ft?ft:l.ru},this.text_=void 0!==rt?Array.isArray(rt)?rt.reduce((yt,vt,Lt)=>yt+(Lt%2?" ":vt),""):rt:"",this.textOffsetX_=void 0!==p?this.pixelRatio_*p:0,this.textOffsetY_=void 0!==I?this.pixelRatio_*I:0,this.textRotateWithView_=void 0!==D&&D,this.textRotation_=void 0!==N?N:0,this.textScale_=[this.pixelRatio_*J[0],this.pixelRatio_*J[1]]}else this.text_=""}},se=.5;var Ce=c(521);const We={Point:function ai(Q,e,s,r,E){const p=s.getImage(),I=s.getText();let D;if(p){if(p.getImageState()!=Ce.Z.LOADED)return;let N=Q;if(E){const rt=p.getDeclutterMode();if("none"!==rt)if(N=E,"obstacle"===rt){const gt=Q.getBuilder(s.getZIndex(),"Image");gt.setImageStyle(p,D),gt.drawPoint(e,r)}else I&&I.getText()&&(D={})}const J=N.getBuilder(s.getZIndex(),"Image");J.setImageStyle(p,D),J.drawPoint(e,r)}if(I&&I.getText()){let N=Q;E&&(N=E);const J=N.getBuilder(s.getZIndex(),"Text");J.setTextStyle(I,D),J.drawText(e,r)}},LineString:function ri(Q,e,s,r,E){const p=s.getStroke();if(p){const D=Q.getBuilder(s.getZIndex(),"LineString");D.setFillStrokeStyle(null,p),D.drawLineString(e,r)}const I=s.getText();if(I&&I.getText()){const D=(E||Q).getBuilder(s.getZIndex(),"Text");D.setTextStyle(I),D.drawText(e,r)}},Polygon:function hi(Q,e,s,r,E){const p=s.getFill(),I=s.getStroke();if(p||I){const N=Q.getBuilder(s.getZIndex(),"Polygon");N.setFillStrokeStyle(p,I),N.drawPolygon(e,r)}const D=s.getText();if(D&&D.getText()){const N=(E||Q).getBuilder(s.getZIndex(),"Text");N.setTextStyle(D),N.drawText(e,r)}},MultiPoint:function li(Q,e,s,r,E){const p=s.getImage(),I=s.getText();let D;if(p){if(p.getImageState()!=Ce.Z.LOADED)return;let N=Q;if(E){const rt=p.getDeclutterMode();if("none"!==rt)if(N=E,"obstacle"===rt){const gt=Q.getBuilder(s.getZIndex(),"Image");gt.setImageStyle(p,D),gt.drawMultiPoint(e,r)}else I&&I.getText()&&(D={})}const J=N.getBuilder(s.getZIndex(),"Image");J.setImageStyle(p,D),J.drawMultiPoint(e,r)}if(I&&I.getText()){let N=Q;E&&(N=E);const J=N.getBuilder(s.getZIndex(),"Text");J.setTextStyle(I,D),J.drawText(e,r)}},MultiLineString:function oi(Q,e,s,r,E){const p=s.getStroke();if(p){const D=Q.getBuilder(s.getZIndex(),"LineString");D.setFillStrokeStyle(null,p),D.drawMultiLineString(e,r)}const I=s.getText();if(I&&I.getText()){const D=(E||Q).getBuilder(s.getZIndex(),"Text");D.setTextStyle(I),D.drawText(e,r)}},MultiPolygon:function Je(Q,e,s,r,E){const p=s.getFill(),I=s.getStroke();if(I||p){const N=Q.getBuilder(s.getZIndex(),"Polygon");N.setFillStrokeStyle(p,I),N.drawMultiPolygon(e,r)}const D=s.getText();if(D&&D.getText()){const N=(E||Q).getBuilder(s.getZIndex(),"Text");N.setTextStyle(D),N.drawText(e,r)}},GeometryCollection:function si(Q,e,s,r,E){const p=e.getGeometriesArray();let I,D;for(I=0,D=p.length;I<D;++I)(0,We[p[I].getType()])(Q,p[I],s,r,E)},Circle:function He(Q,e,s,r,E){const p=s.getFill(),I=s.getStroke();if(p||I){const N=Q.getBuilder(s.getZIndex(),"Circle");N.setFillStrokeStyle(p,I),N.drawCircle(e,r)}const D=s.getText();if(D&&D.getText()){const N=(E||Q).getBuilder(s.getZIndex(),"Text");N.setTextStyle(D),N.drawText(e,r)}}};function re(Q,e){return parseInt((0,et.sq)(Q),10)-parseInt((0,et.sq)(e),10)}function Ne(Q,e){return.5*Q/e}function be(Q,e,s,r,E,p,I){let D=!1;const N=s.getImage();if(N){const J=N.getImageState();J==Ce.Z.LOADED||J==Ce.Z.ERROR?N.unlistenImageChange(E):(J==Ce.Z.IDLE&&N.load(),N.listenImageChange(E),D=!0)}return function Ci(Q,e,s,r,E,p){const I=s.getGeometryFunction()(e);if(!I)return;const D=I.simplifyTransformed(r,E);s.getRenderer()?ni(Q,D,s,e):(0,We[D.getType()])(Q,D,s,e,p)}(Q,e,s,r,p,I),D}function ni(Q,e,s,r){if("GeometryCollection"!=e.getType())Q.getBuilder(s.getZIndex(),"Default").drawCustom(e,r,s.getRenderer(),s.getHitDetectionRenderer());else{const p=e.getGeometries();for(let I=0,D=p.length;I<D;++I)ni(Q,p[I],s,r)}}var Le=c(6003),ci=c(3481);const Ke=class Ze extends Ht.Z{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,M.lJ)(),this.wrappedRenderedExtent_=(0,M.lJ)(),this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,s,r){const E=s.extent,p=s.viewState,I=p.center,D=p.resolution,N=p.projection,J=p.rotation,rt=N.getExtent(),gt=this.getLayer().getSource(),ft=s.pixelRatio,yt=s.viewHints,vt=!(yt[xe.Z.ANIMATING]||yt[xe.Z.INTERACTING]),Lt=this.compositionContext_,Ct=Math.round(s.size[0]*ft),It=Math.round(s.size[1]*ft),wt=gt.getWrapX()&&N.canWrapX(),Ft=wt?(0,M.dz)(rt):null,jt=wt?Math.ceil((E[2]-rt[2])/Ft)+1:1;let Xt=wt?Math.floor((E[0]-rt[0])/Ft):0;do{const Ut=this.getRenderTransform(I,D,J,ft,Ct,It,Xt*Ft);e.execute(Lt,1,Ut,J,vt,void 0,r)}while(++Xt<jt)}setupCompositionContext_(){if(1!==this.opacity_){const e=(0,le.E4)(this.context.canvas.width,this.context.canvas.height,Ht.r);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,(0,le.jy)(this.compositionContext_),Ht.r.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,s){const r=e.pixelRatio,E=e.layerStatesArray[e.layerIndex];(0,Wt.n3)(this.pixelTransform,1/r,1/r),(0,Wt.nb)(this.inversePixelTransform,this.pixelTransform);const p=(0,Wt.BB)(this.pixelTransform);this.useContainer(s,p,this.getBackground(e));const I=this.context,D=I.canvas,N=this.replayGroup_,J=this.declutterExecutorGroup;if((!N||N.isEmpty())&&(!J||J.isEmpty()))return null;const rt=Math.round(e.size[0]*r),gt=Math.round(e.size[1]*r);D.width!=rt||D.height!=gt?(D.width=rt,D.height=gt,D.style.transform!==p&&(D.style.transform=p)):this.containerReused||I.clearRect(0,0,rt,gt),this.preRender(I,e);const ft=e.viewState,yt=ft.projection;this.opacity_=E.opacity,this.setupCompositionContext_();let vt=!1,Lt=!0;if(E.extent&&this.clipping){const Ct=(0,Le.dY)(E.extent,yt);Lt=(0,M.kK)(Ct,e.extent),vt=Lt&&!(0,M.r4)(Ct,e.extent),vt&&this.clipUnrotated(this.compositionContext_,e,Ct)}return Lt&&this.renderWorlds(N,e),vt&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(I,e),this.renderedRotation_!==ft.rotation&&(this.renderedRotation_=ft.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(function(s){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=[this.context.canvas.width,this.context.canvas.height];(0,Wt.nn)(this.pixelTransform,r);const E=this.renderedCenter_,p=this.renderedResolution_,I=this.renderedRotation_,D=this.renderedProjection_,N=this.wrappedRenderedExtent_,J=this.getLayer(),rt=[],gt=r[0]*se,ft=r[1]*se;rt.push(this.getRenderTransform(E,p,I,se,gt,ft,0).slice());const yt=J.getSource(),vt=D.getExtent();if(yt.getWrapX()&&D.canWrapX()&&!(0,M.r4)(vt,N)){let Lt=N[0];const Ct=(0,M.dz)(vt);let wt,It=0;for(;Lt<vt[0];)--It,wt=Ct*It,rt.push(this.getRenderTransform(E,p,I,se,gt,ft,wt).slice()),Lt+=Ct;for(It=0,Lt=N[2];Lt>vt[2];)++It,wt=Ct*It,rt.push(this.getRenderTransform(E,p,I,se,gt,ft,wt).slice()),Lt-=Ct}this.hitDetectionImageData_=function Ae(Q,e,s,r,E,p,I){const J=(0,le.E4)(Q[0]*se,Q[1]*se);J.imageSmoothingEnabled=!1;const rt=J.canvas,gt=new ve(J,se,E,null,I),ft=s.length,yt=Math.floor(16777215/ft),vt={};for(let Ct=1;Ct<=ft;++Ct){const It=s[Ct-1],wt=It.getStyleFunction()||r;if(!r)continue;let Ft=wt(It,p);if(!Ft)continue;Array.isArray(Ft)||(Ft=[Ft]);const Xt="#"+("000000"+(Ct*yt).toString(16)).slice(-6);for(let Ut=0,Vt=Ft.length;Ut<Vt;++Ut){const z=Ft[Ut],t=z.getGeometryFunction()(It);if(!t||!(0,M.kK)(E,t.getExtent()))continue;const o=z.clone(),g=o.getFill();g&&g.setColor(Xt);const P=o.getStroke();P&&(P.setColor(Xt),P.setLineDash(null)),o.setText(void 0);const it=z.getImage();if(it&&0!==it.getOpacity()){const mt=it.getImageSize();if(!mt)continue;const Zt=(0,le.E4)(mt[0],mt[1],void 0,{alpha:!1}),Dt=Zt.canvas;Zt.fillStyle=Xt,Zt.fillRect(0,0,Dt.width,Dt.height),o.setImage(new A.Z({img:Dt,imgSize:mt,anchor:it.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:it.getOrigin(),opacity:1,size:it.getSize(),scale:it.getScale(),rotation:it.getRotation(),rotateWithView:it.getRotateWithView()}))}const ct=o.getZIndex()||0;let _t=vt[ct];_t||(_t={},vt[ct]=_t,_t.Polygon=[],_t.Circle=[],_t.LineString=[],_t.Point=[]),_t[t.getType().replace("Multi","")].push(t,o)}}const Lt=Object.keys(vt).map(Number).sort(f.kK);for(let Ct=0,It=Lt.length;Ct<It;++Ct){const wt=vt[Lt[Ct]];for(const Ft in wt){const jt=wt[Ft];for(let Xt=0,Ut=jt.length;Xt<Ut;Xt+=2){gt.setStyle(jt[Xt+1]);for(let Vt=0,z=e.length;Vt<z;++Vt)gt.setTransform(e[Vt]),gt.drawGeometry(jt[Xt])}}}return J.getImageData(0,0,rt.width,rt.height)}(r,rt,this.renderedFeatures_,J.getStyleFunction(),N,p,I)}s(function ke(Q,e,s){const r=[];if(s){const E=Math.floor(Math.round(Q[0])*se),p=Math.floor(Math.round(Q[1])*se),I=4*((0,Jt.uZ)(E,0,s.width-1)+(0,Jt.uZ)(p,0,s.height-1)*s.width),rt=s.data[I+2]+256*(s.data[I+1]+256*s.data[I]),gt=Math.floor(16777215/e.length);rt&&rt%gt==0&&r.push(e[rt/gt-1])}return r}(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(e,s,r,E,p){if(!this.replayGroup_)return;const I=s.viewState.resolution,D=s.viewState.rotation,N=this.getLayer(),J={},rt=function(yt,vt,Lt){const Ct=(0,et.sq)(yt),It=J[Ct];if(It){if(!0!==It&&Lt<It.distanceSq){if(0===Lt)return J[Ct]=!0,p.splice(p.lastIndexOf(It),1),E(yt,N,vt);It.geometry=vt,It.distanceSq=Lt}}else{if(0===Lt)return J[Ct]=!0,E(yt,N,vt);p.push(J[Ct]={feature:yt,layer:N,geometry:vt,distanceSq:Lt,callback:E})}};let gt;const ft=[this.replayGroup_];return this.declutterExecutorGroup&&ft.push(this.declutterExecutorGroup),ft.some(yt=>gt=yt.forEachFeatureAtCoordinate(e,I,D,r,rt,yt===this.declutterExecutorGroup&&s.declutterTree?s.declutterTree.all().map(vt=>vt.value):null)),gt}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const s=this.getLayer(),r=s.getSource();if(!r)return!1;const E=e.viewHints[xe.Z.ANIMATING],p=e.viewHints[xe.Z.INTERACTING],I=s.getUpdateWhileAnimating(),D=s.getUpdateWhileInteracting();if(this.ready&&!I&&E||!D&&p)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const N=e.extent,J=e.viewState,rt=J.projection,gt=J.resolution,ft=e.pixelRatio,yt=s.getRevision(),vt=s.getRenderBuffer();let Lt=s.getRenderOrder();void 0===Lt&&(Lt=re);const Ct=J.center.slice(),It=(0,M.f3)(N,vt*gt),wt=It.slice(),Ft=[It.slice()],jt=rt.getExtent();if(r.getWrapX()&&rt.canWrapX()&&!(0,M.r4)(jt,e.extent)){const mt=(0,M.dz)(jt),Zt=Math.max((0,M.dz)(It)/2,mt);It[0]=jt[0]-Zt,It[2]=jt[2]+Zt,(0,ci.Cf)(Ct,rt);const Dt=(0,M.Cf)(Ft[0],rt);Dt[0]<jt[0]&&Dt[2]<jt[2]?Ft.push([Dt[0]+mt,Dt[1],Dt[2]+mt,Dt[3]]):Dt[0]>jt[0]&&Dt[2]>jt[2]&&Ft.push([Dt[0]-mt,Dt[1],Dt[2]-mt,Dt[3]])}if(this.ready&&this.renderedResolution_==gt&&this.renderedRevision_==yt&&this.renderedRenderOrder_==Lt&&(0,M.r4)(this.wrappedRenderedExtent_,It))return(0,f.fS)(this.renderedExtent_,wt)||(this.hitDetectionImageData_=null,this.renderedExtent_=wt),this.renderedCenter_=Ct,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const Xt=new Yt(Ne(gt,ft),It,gt,ft);let Ut;this.getLayer().getDeclutter()&&(Ut=new Yt(Ne(gt,ft),It,gt,ft));const Vt=(0,Le.Cs)();let z;if(Vt){for(let mt=0,Zt=Ft.length;mt<Zt;++mt){const Gt=(0,Le.Fj)(Ft[mt],rt);r.loadFeatures(Gt,(0,Le.on)(gt,rt),Vt)}z=(0,Le.WO)(Vt,rt)}else for(let mt=0,Zt=Ft.length;mt<Zt;++mt)r.loadFeatures(Ft[mt],gt,rt);const t=function xi(Q,e){const s=Ne(Q,e);return s*s}(gt,ft);let o=!0;const g=function(mt){let Zt;const Dt=mt.getStyleFunction()||s.getStyleFunction();if(Dt&&(Zt=Dt(mt,gt)),Zt){const Gt=this.renderFeature(mt,t,Zt,Xt,z,Ut);o=o&&!Gt}}.bind(this),P=(0,Le.Fj)(It,rt),it=r.getFeaturesInExtent(P);Lt&&it.sort(Lt);for(let mt=0,Zt=it.length;mt<Zt;++mt)g(it[mt]);this.renderedFeatures_=it,this.ready=o;const ct=Xt.finish(),_t=new Se(It,gt,ft,r.getOverlaps(),ct,s.getRenderBuffer());return Ut&&(this.declutterExecutorGroup=new Se(It,gt,ft,r.getOverlaps(),Ut.finish(),s.getRenderBuffer())),this.renderedResolution_=gt,this.renderedRevision_=yt,this.renderedRenderOrder_=Lt,this.renderedExtent_=wt,this.wrappedRenderedExtent_=It,this.renderedCenter_=Ct,this.renderedProjection_=rt,this.replayGroup_=_t,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,s,r,E,p,I){if(!r)return!1;let D=!1;if(Array.isArray(r))for(let N=0,J=r.length;N<J;++N)D=be(E,e,r[N],s,this.boundHandleStyleImageChange_,p,I)||D;else D=be(E,e,r,s,this.boundHandleStyleImageChange_,p,I);return D}},di=class ui extends T{constructor(e){super(e)}createRenderer(){return new Ke(this)}}},9466:(kt,dt,c)=>{"use strict";function st(q){for(const V in q)delete q[V]}function b(q){let V;for(V in q)return!1;return!V}c.d(dt,{Z:()=>st,x:()=>b})},2919:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>q});var st=c(8214);const q=class b extends st.ZP{constructor(x,A,j,L){super(x),this.inversePixelTransform=A,this.frameState=j,this.context=L}}},2526:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>st});const st={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},4686:(kt,dt,c)=>{"use strict";c.d(dt,{Df:()=>A,He:()=>i,Kd:()=>F,PH:()=>S,Qx:()=>B,Tx:()=>d,V4:()=>h,X9:()=>y,Zw:()=>at,_f:()=>lt,bL:()=>j,mb:()=>L,oB:()=>R,rc:()=>n,ru:()=>_,sG:()=>m,yC:()=>v});var st=c(3632),b=c(9996),q=c(9466),V=c(1992),x=c(5263);const A="10px sans-serif",j="#000",L="round",y=[],i=0,n="round",h=10,d="#000",S="center",_="middle",R=[0,0,0,0],v=1,m=new st.Z;let T,G=null;const u={},B=function(){const l="32px ",f=["monospace","serif"],O=f.length,H="wmytzilWMYTZIL@#/&?$%10\uf013";let nt,ot;function Y(k,Z,K){let U=!0;for(let et=0;et<O;++et){const ht=f[et];if(ot=$(k+" "+Z+" "+l+ht,H),K!=ht){const xt=$(k+" "+Z+" "+l+K+","+ht,H);U=U&&xt!=ot}}return!!U}function C(){let k=!0;const Z=m.getKeys();for(let K=0,U=Z.length;K<U;++K){const et=Z[K];m.get(et)<100&&(Y.apply(this,et.split("\n"))?((0,q.Z)(u),G=null,T=void 0,m.set(et,100)):(m.set(et,m.get(et)+1,!0),k=!1))}k&&(clearInterval(nt),nt=void 0)}return function(k){const Z=(0,x.p)(k);if(!Z)return;const K=Z.families;for(let U=0,et=K.length;U<et;++U){const ht=K[U],xt=Z.style+"\n"+Z.weight+"\n"+ht;void 0===m.get(xt)&&(m.set(xt,100,!0),Y(Z.style,Z.weight,ht)||(m.set(xt,0,!0),void 0===nt&&(nt=setInterval(C,32))))}}}(),tt=function(){let M;return function(l){let f=u[l];if(null==f){if(b.Id){const O=(0,x.p)(l),H=W(l,"\u017dg");f=(isNaN(Number(O.lineHeight))?1.2:Number(O.lineHeight))*(H.actualBoundingBoxAscent+H.actualBoundingBoxDescent)}else M||(M=document.createElement("div"),M.innerHTML="M",M.style.minHeight="0",M.style.maxHeight="none",M.style.height="auto",M.style.padding="0",M.style.border="none",M.style.position="absolute",M.style.display="block",M.style.left="-99999px"),M.style.font=l,document.body.appendChild(M),f=M.offsetHeight,document.body.removeChild(M);u[l]=f}return f}}();function W(M,l){return G||(G=(0,V.E4)(1,1)),M!=T&&(G.font=M,T=G.font),G.measureText(l)}function $(M,l){return W(M,l).width}function F(M,l,f){if(l in f)return f[l];const O=l.split("\n").reduce((H,nt)=>Math.max(H,$(M,nt)),0);return f[l]=O,O}function at(M,l){const f=[],O=[],H=[];let nt=0,ot=0,Y=0,C=0;for(let k=0,Z=l.length;k<=Z;k+=2){const K=l[k];if("\n"===K||k===Z){nt=Math.max(nt,ot),H.push(ot),ot=0,Y+=C;continue}const U=l[k+1]||M.font,et=$(U,K);f.push(et),ot+=et;const ht=tt(U);O.push(ht),C=Math.max(C,ht)}return{width:nt,height:Y,widths:f,heights:O,lineWidths:H}}function lt(M,l,f,O,H,nt,ot,Y,C,k,Z){M.save(),1!==f&&(M.globalAlpha*=f),l&&M.setTransform.apply(M,l),O.contextInstructions?(M.translate(C,k),M.scale(Z[0],Z[1]),function Tt(M,l){const f=M.contextInstructions;for(let O=0,H=f.length;O<H;O+=2)Array.isArray(f[O+1])?l[f[O]].apply(l,f[O+1]):l[f[O]]=f[O+1]}(O,M)):Z[0]<0||Z[1]<0?(M.translate(C,k),M.scale(Z[0],Z[1]),M.drawImage(O,H,nt,ot,Y,0,0,ot,Y)):M.drawImage(O,H,nt,ot,Y,C,k,ot*Z[0],Y*Z[1]),M.restore()}},2121:(kt,dt,c)=>{"use strict";c.d(dt,{r:()=>S,Z:()=>m});var st=c(9972),b=c(521),q=c(4272),V=c(119);const A=class x extends q.Z{constructor(T){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=T,this.declutterExecutorGroup=null}getFeatures(T){return(0,V.O3)()}getData(T){return null}prepareFrame(T){return(0,V.O3)()}renderFrame(T,u){return(0,V.O3)()}loadedTileCallback(T,u,B){T[u]||(T[u]={}),T[u][B.tileCoord.toString()]=B}createLoadedTileFinder(T,u,B){return function(tt,W){const $=this.loadedTileCallback.bind(this,B,tt);return T.forEachLoadedTile(u,tt,W,$)}.bind(this)}forEachFeatureAtCoordinate(T,u,B,tt,W){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(T){T.target.getState()===b.Z.LOADED&&this.renderIfReadyAndVisible()}loadImage(T){let u=T.getState();return u!=b.Z.LOADED&&u!=b.Z.ERROR&&T.addEventListener(st.Z.CHANGE,this.boundHandleImageChange_),u==b.Z.IDLE&&(T.load(),u=T.getState()),u==b.Z.LOADED}renderIfReadyAndVisible(){const T=this.getLayer();T&&T.getVisible()&&"ready"===T.getSourceState()&&T.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}};var j=c(2919),L=c(2526),y=c(483),i=c(3783),n=c(1992),h=c(2456),d=c(760);const S=[];let _=null;const m=class v extends A{constructor(T){super(T),this.container=null,this.tempTransform=(0,y.Ue)(),this.pixelTransform=(0,y.Ue)(),this.inversePixelTransform=(0,y.Ue)(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(T,u,B){let tt;_||function R(){const G=document.createElement("canvas");G.width=1,G.height=1,_=G.getContext("2d")}(),_.clearRect(0,0,1,1);try{_.drawImage(T,u,B,1,1,0,0,1,1),tt=_.getImageData(0,0,1,1).data}catch(W){return _=null,null}return tt}getBackground(T){let B=this.getLayer().getBackground();return"function"==typeof B&&(B=B(T.viewState.resolution)),B||void 0}useContainer(T,u,B){const tt=this.getLayer().getClassName();let W,$;if(T&&T.className===tt&&(!B||T&&T.style.backgroundColor&&(0,h.fS)((0,i._2)(T.style.backgroundColor),(0,i._2)(B)))){const F=T.firstElementChild;F instanceof HTMLCanvasElement&&($=F.getContext("2d"))}if($&&$.canvas.style.transform===u?(this.container=T,this.context=$,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){W=document.createElement("div"),W.className=tt;let F=W.style;F.position="absolute",F.width="100%",F.height="100%",$=(0,n.E4)();const at=$.canvas;W.appendChild(at),F=at.style,F.position="absolute",F.left="0",F.transformOrigin="top left",this.container=W,this.context=$}!this.containerReused&&B&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=B)}clipUnrotated(T,u,B){const tt=(0,d.rL)(B),W=(0,d.Xv)(B),$=(0,d.w$)(B),F=(0,d.hC)(B);(0,y.nn)(u.coordinateToPixelTransform,tt),(0,y.nn)(u.coordinateToPixelTransform,W),(0,y.nn)(u.coordinateToPixelTransform,$),(0,y.nn)(u.coordinateToPixelTransform,F);const at=this.inversePixelTransform;(0,y.nn)(at,tt),(0,y.nn)(at,W),(0,y.nn)(at,$),(0,y.nn)(at,F),T.save(),T.beginPath(),T.moveTo(Math.round(tt[0]),Math.round(tt[1])),T.lineTo(Math.round(W[0]),Math.round(W[1])),T.lineTo(Math.round($[0]),Math.round($[1])),T.lineTo(Math.round(F[0]),Math.round(F[1])),T.clip()}dispatchRenderEvent_(T,u,B){const tt=this.getLayer();if(tt.hasListener(T)){const W=new j.Z(T,this.inversePixelTransform,B,u);tt.dispatchEvent(W)}}preRender(T,u){this.frameState=u,this.dispatchRenderEvent_(L.Z.PRERENDER,T,u)}postRender(T,u){this.dispatchRenderEvent_(L.Z.POSTRENDER,T,u)}getRenderTransform(T,u,B,tt,W,$,F){const lt=tt/u;return(0,y.qC)(this.tempTransform,W/2,$/2,lt,-lt,-B,-T[0]+F,-T[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}}},8252:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>tt});var b=c(9972),q=c(1299),V=c(1999),x=c(760),A=c(6003),j=c(2156);var h=c(1992);let d;const S=[];function _(W,$,F,at,St){W.beginPath(),W.moveTo(0,0),W.lineTo($,F),W.lineTo(at,St),W.closePath(),W.save(),W.clip(),W.fillRect(0,0,Math.max($,at)+1,Math.max(F,St)),W.restore()}function R(W,$){return Math.abs(W[4*$]-210)>2||Math.abs(W[4*$+3]-191.25)>2}function m(W,$,F,at){const St=(0,A.vs)(F,$,W);let lt=(0,A._Q)($,at,F);const Tt=$.getMetersPerUnit();void 0!==Tt&&(lt*=Tt);const M=W.getMetersPerUnit();void 0!==M&&(lt/=M);const l=W.getExtent();if(!l||(0,x.b8)(l,St)){const f=(0,A._Q)(W,lt,St)/lt;isFinite(f)&&f>0&&(lt/=f)}return lt}var u=c(1729);const tt=class B extends q.Z{constructor($,F,at,St,lt,Tt,M,l,f,O,H,nt){super(lt,V.Z.IDLE,{interpolate:!!nt}),this.renderEdges_=void 0!==H&&H,this.pixelRatio_=M,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=F,this.targetTileGrid_=St,this.wrappedTileCoord_=Tt||lt,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const ot=St.getTileCoordExtent(this.wrappedTileCoord_),Y=this.targetTileGrid_.getExtent();let C=this.sourceTileGrid_.getExtent();const k=Y?(0,x.Ed)(ot,Y):ot;if(0===(0,x.bg)(k))return void(this.state=V.Z.EMPTY);const Z=$.getExtent();Z&&(C=C?(0,x.Ed)(C,Z):Z);const K=St.getResolution(this.wrappedTileCoord_[0]),U=function G(W,$,F,at){const St=(0,x.qg)(F);let lt=m(W,$,St,at);return(!isFinite(lt)||lt<=0)&&(0,x.H6)(F,function(Tt){return lt=m(W,$,Tt,at),isFinite(lt)&&lt>0}),lt}($,at,k,K);if(!isFinite(U)||U<=0)return void(this.state=V.Z.EMPTY);if(this.triangulation_=new class i{constructor($,F,at,St,lt,Tt){this.sourceProj_=$,this.targetProj_=F;let M={};const l=(0,A.Ck)(this.targetProj_,this.sourceProj_);this.transformInv_=function(K){const U=K[0]+"/"+K[1];return M[U]||(M[U]=l(K)),M[U]},this.maxSourceExtent_=St,this.errorThresholdSquared_=lt*lt,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!St&&!!this.sourceProj_.getExtent()&&(0,x.dz)(St)==(0,x.dz)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,x.dz)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,x.dz)(this.targetProj_.getExtent()):null;const f=(0,x.rL)(at),O=(0,x.Xv)(at),H=(0,x.w$)(at),nt=(0,x.hC)(at),ot=this.transformInv_(f),Y=this.transformInv_(O),C=this.transformInv_(H),k=this.transformInv_(nt),Z=10+(Tt?Math.max(0,Math.ceil(Math.log2((0,x.bg)(at)/(Tt*Tt*256*256)))):0);if(this.addQuad_(f,O,H,nt,ot,Y,C,k,Z),this.wrapsXInSource_){let K=1/0;this.triangles_.forEach(function(U,et,ht){K=Math.min(K,U.source[0][0],U.source[1][0],U.source[2][0])}),this.triangles_.forEach(function(U){if(Math.max(U.source[0][0],U.source[1][0],U.source[2][0])-K>this.sourceWorldWidth_/2){const et=[[U.source[0][0],U.source[0][1]],[U.source[1][0],U.source[1][1]],[U.source[2][0],U.source[2][1]]];et[0][0]-K>this.sourceWorldWidth_/2&&(et[0][0]-=this.sourceWorldWidth_),et[1][0]-K>this.sourceWorldWidth_/2&&(et[1][0]-=this.sourceWorldWidth_),et[2][0]-K>this.sourceWorldWidth_/2&&(et[2][0]-=this.sourceWorldWidth_);const ht=Math.min(et[0][0],et[1][0],et[2][0]);Math.max(et[0][0],et[1][0],et[2][0])-ht<this.sourceWorldWidth_/2&&(U.source=et)}}.bind(this))}M={}}addTriangle_($,F,at,St,lt,Tt){this.triangles_.push({source:[St,lt,Tt],target:[$,F,at]})}addQuad_($,F,at,St,lt,Tt,M,l,f){const O=(0,x.hI)([lt,Tt,M,l]),H=this.sourceWorldWidth_?(0,x.dz)(O)/this.sourceWorldWidth_:null,nt=this.sourceWorldWidth_,ot=this.sourceProj_.canWrapX()&&H>.5&&H<1;let Y=!1;if(f>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const k=(0,x.hI)([$,F,at,St]);Y=(0,x.dz)(k)/this.targetWorldWidth_>.25||Y}!ot&&this.sourceProj_.isGlobal()&&H&&(Y=H>.25||Y)}if(!Y&&this.maxSourceExtent_&&isFinite(O[0])&&isFinite(O[1])&&isFinite(O[2])&&isFinite(O[3])&&!(0,x.kK)(O,this.maxSourceExtent_))return;let C=0;if(!(Y||isFinite(lt[0])&&isFinite(lt[1])&&isFinite(Tt[0])&&isFinite(Tt[1])&&isFinite(M[0])&&isFinite(M[1])&&isFinite(l[0])&&isFinite(l[1])))if(f>0)Y=!0;else if(C=(isFinite(lt[0])&&isFinite(lt[1])?0:8)+(isFinite(Tt[0])&&isFinite(Tt[1])?0:4)+(isFinite(M[0])&&isFinite(M[1])?0:2)+(isFinite(l[0])&&isFinite(l[1])?0:1),1!=C&&2!=C&&4!=C&&8!=C)return;if(f>0){if(!Y){const Z=this.transformInv_([($[0]+at[0])/2,($[1]+at[1])/2]);let K;K=ot?((0,j.$W)(lt[0],nt)+(0,j.$W)(M[0],nt))/2-(0,j.$W)(Z[0],nt):(lt[0]+M[0])/2-Z[0];const U=(lt[1]+M[1])/2-Z[1];Y=K*K+U*U>this.errorThresholdSquared_}if(Y){if(Math.abs($[0]-at[0])<=Math.abs($[1]-at[1])){const k=[(F[0]+at[0])/2,(F[1]+at[1])/2],Z=this.transformInv_(k),K=[(St[0]+$[0])/2,(St[1]+$[1])/2],U=this.transformInv_(K);this.addQuad_($,F,k,K,lt,Tt,Z,U,f-1),this.addQuad_(K,k,at,St,U,Z,M,l,f-1)}else{const k=[($[0]+F[0])/2,($[1]+F[1])/2],Z=this.transformInv_(k),K=[(at[0]+St[0])/2,(at[1]+St[1])/2],U=this.transformInv_(K);this.addQuad_($,k,K,St,lt,Z,U,l,f-1),this.addQuad_(k,F,at,K,Z,Tt,M,U,f-1)}return}}if(ot){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&C)&&this.addTriangle_($,at,St,lt,M,l),0==(14&C)&&this.addTriangle_($,at,F,lt,M,Tt),C&&(0==(13&C)&&this.addTriangle_(F,St,$,Tt,l,lt),0==(7&C)&&this.addTriangle_(F,St,at,Tt,l,M))}calculateSourceExtent(){const $=(0,x.lJ)();return this.triangles_.forEach(function(F,at,St){const lt=F.source;(0,x.Wj)($,lt[0]),(0,x.Wj)($,lt[1]),(0,x.Wj)($,lt[2])}),$}getTriangles(){return this.triangles_}}($,at,k,C,U*(void 0!==O?O:.5),K),0===this.triangulation_.getTriangles().length)return void(this.state=V.Z.EMPTY);this.sourceZ_=F.getZForResolution(U);let ht=this.triangulation_.calculateSourceExtent();if(C&&($.canWrapX()?(ht[1]=(0,j.uZ)(ht[1],C[1],C[3]),ht[3]=(0,j.uZ)(ht[3],C[1],C[3])):ht=(0,x.Ed)(ht,C)),(0,x.bg)(ht)){const xt=F.getTileRangeForExtentAndZ(ht,this.sourceZ_);for(let Pt=xt.minX;Pt<=xt.maxX;Pt++)for(let Ot=xt.minY;Ot<=xt.maxY;Ot++){const At=f(this.sourceZ_,Pt,Ot,M);At&&this.sourceTiles_.push(At)}0===this.sourceTiles_.length&&(this.state=V.Z.EMPTY)}else this.state=V.Z.EMPTY}getImage(){return this.canvas_}reproject_(){const $=[];if(this.sourceTiles_.forEach(function(F,at,St){F&&F.getState()==V.Z.LOADED&&$.push({extent:this.sourceTileGrid_.getTileCoordExtent(F.tileCoord),image:F.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===$.length)this.state=V.Z.ERROR;else{const F=this.wrappedTileCoord_[0],at=this.targetTileGrid_.getTileSize(F),St="number"==typeof at?at:at[0],lt="number"==typeof at?at:at[1],Tt=this.targetTileGrid_.getResolution(F),M=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function T(W,$,F,at,St,lt,Tt,M,l,f,O,H){const nt=(0,h.E4)(Math.round(F*W),Math.round(F*$),S);if(H||(nt.imageSmoothingEnabled=!1),0===l.length)return nt.canvas;function ot(et){return Math.round(et*F)/F}nt.scale(F,F),nt.globalCompositeOperation="lighter";const Y=(0,x.lJ)();l.forEach(function(et,ht,xt){(0,x.l7)(Y,et.extent)});const C=(0,x.dz)(Y),k=(0,x.Cr)(Y),Z=(0,h.E4)(Math.round(F*C/at),Math.round(F*k/at));H||(Z.imageSmoothingEnabled=!1);const K=F/at;l.forEach(function(et,ht,xt){const Pt=et.extent[0]-Y[0],Ot=-(et.extent[3]-Y[3]),At=(0,x.dz)(et.extent),zt=(0,x.Cr)(et.extent);et.image.width>0&&et.image.height>0&&Z.drawImage(et.image,f,f,et.image.width-2*f,et.image.height-2*f,Pt*K,Ot*K,At*K,zt*K)});const U=(0,x.rL)(Tt);return M.getTriangles().forEach(function(et,ht,xt){const Pt=et.source,Ot=et.target;let At=Pt[0][0],zt=Pt[0][1],Yt=Pt[1][0],Ht=Pt[1][1],Wt=Pt[2][0],Jt=Pt[2][1];const Qt=ot((Ot[0][0]-U[0])/lt),qt=ot(-(Ot[0][1]-U[1])/lt),ie=ot((Ot[1][0]-U[0])/lt),Rt=ot(-(Ot[1][1]-U[1])/lt),a=ot((Ot[2][0]-U[0])/lt),w=ot(-(Ot[2][1]-U[1])/lt),X=At,ut=zt;At=0,zt=0,Yt-=X,Ht-=ut,Wt-=X,Jt-=ut;const Et=(0,j.SV)([[Yt,Ht,0,0,ie-Qt],[Wt,Jt,0,0,a-Qt],[0,0,Yt,Ht,Rt-qt],[0,0,Wt,Jt,w-qt]]);if(Et){if(nt.save(),nt.beginPath(),function v(){if(void 0===d){const W=document.createElement("canvas").getContext("2d");W.globalCompositeOperation="lighter",W.fillStyle="rgba(210, 0, 0, 0.75)",_(W,4,5,4,0),_(W,4,5,0,5);const $=W.getImageData(0,0,3,3).data;d=R($,0)||R($,4)||R($,8)}return d}()||!H){nt.moveTo(ie,Rt);const bt=4,Kt=Qt-ie,Nt=qt-Rt;for(let Bt=0;Bt<bt;Bt++)nt.lineTo(ie+ot((Bt+1)*Kt/bt),Rt+ot(Bt*Nt/(bt-1))),Bt!=bt-1&&nt.lineTo(ie+ot((Bt+1)*Kt/bt),Rt+ot((Bt+1)*Nt/(bt-1)));nt.lineTo(a,w)}else nt.moveTo(ie,Rt),nt.lineTo(Qt,qt),nt.lineTo(a,w);nt.clip(),nt.transform(Et[0],Et[2],Et[1],Et[3],Qt,qt),nt.translate(Y[0]-X,Y[3]-ut),nt.scale(at/F,-at/F),nt.drawImage(Z.canvas,0,0),nt.restore()}}),O&&(nt.save(),nt.globalCompositeOperation="source-over",nt.strokeStyle="black",nt.lineWidth=1,M.getTriangles().forEach(function(et,ht,xt){const Pt=et.target,Ot=(Pt[0][0]-U[0])/lt,At=-(Pt[0][1]-U[1])/lt,zt=(Pt[1][0]-U[0])/lt,Yt=-(Pt[1][1]-U[1])/lt,Ht=(Pt[2][0]-U[0])/lt,Wt=-(Pt[2][1]-U[1])/lt;nt.beginPath(),nt.moveTo(zt,Yt),nt.lineTo(Ot,At),nt.lineTo(Ht,Wt),nt.closePath(),nt.stroke()}),nt.restore()),nt.canvas}(St,lt,this.pixelRatio_,M,this.sourceTileGrid_.getExtent(),Tt,l,this.triangulation_,$,this.gutter_,this.renderEdges_,this.interpolate),this.state=V.Z.LOADED}this.changed()}load(){if(this.state==V.Z.IDLE){this.state=V.Z.LOADING,this.changed();let $=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(F,at,St){const lt=F.getState();if(lt==V.Z.IDLE||lt==V.Z.LOADING){$++;const Tt=(0,u.oL)(F,b.Z.CHANGE,function(M){const l=F.getState();(l==V.Z.LOADED||l==V.Z.ERROR||l==V.Z.EMPTY)&&((0,u.bN)(Tt),$--,0===$&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(Tt)}}.bind(this)),0===$?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(F,at,St){F.getState()==V.Z.IDLE&&F.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(u.bN),this.sourcesListenerKeys_=null}release(){this.canvas_&&((0,h.jy)(this.canvas_.getContext("2d")),S.push(this.canvas_),this.canvas_=null),super.release()}}},9857:(kt,dt,c)=>{"use strict";c.d(dt,{Gw:()=>x,YP:()=>q,gE:()=>V,h$:()=>b});var st=c(2156);function b(A){if(void 0!==A)return 0}function q(A){if(void 0!==A)return A}function V(A){const j=2*Math.PI/A;return function(L,y){return y?L:void 0!==L?L=Math.floor(L/j+.5)*j:void 0}}function x(A){return A=A||(0,st.Yr)(5),function(j,L){return L?j:void 0!==j?Math.abs(j)<=A?0:j:void 0}}},1750:(kt,dt,c)=>{"use strict";function b(x){return x[0]>0&&x[1]>0}function q(x,A,j){return void 0===j&&(j=[0,0]),j[0]=x[0]*A+.5|0,j[1]=x[1]*A+.5|0,j}function V(x,A){return Array.isArray(x)?x:(void 0===A?A=[x,x]:(A[0]=x,A[1]=x),A)}c.d(dt,{Pq:()=>V,bA:()=>q,py:()=>b})},5672:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>ie});var st=c(9972),b=c(9001),q=c(8252),V=c(1911);function j(Rt,a,w,X){return void 0!==X?(X[0]=Rt,X[1]=a,X[2]=w,X):[Rt,a,w]}function L(Rt,a,w){return Rt+"/"+a+"/"+w}function y(Rt){return L(Rt[0],Rt[1],Rt[2])}const _=class S extends class x{constructor(a){this.highWaterMark=void 0!==a?a:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(a){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(a){return this.entries_.hasOwnProperty(a)}forEach(a){let w=this.oldest_;for(;w;)a(w.value_,w.key_,this),w=w.newer}get(a,w){const X=this.entries_[a];return(0,V.h)(void 0!==X,15),X===this.newest_||(X===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(X.newer.older=X.older,X.older.newer=X.newer),X.newer=null,X.older=this.newest_,this.newest_.newer=X,this.newest_=X),X.value_}remove(a){const w=this.entries_[a];return(0,V.h)(void 0!==w,15),w===this.newest_?(this.newest_=w.older,this.newest_&&(this.newest_.newer=null)):w===this.oldest_?(this.oldest_=w.newer,this.oldest_&&(this.oldest_.older=null)):(w.newer.older=w.older,w.older.newer=w.newer),delete this.entries_[a],--this.count_,w.value_}getCount(){return this.count_}getKeys(){const a=new Array(this.count_);let X,w=0;for(X=this.newest_;X;X=X.older)a[w++]=X.key_;return a}getValues(){const a=new Array(this.count_);let X,w=0;for(X=this.newest_;X;X=X.older)a[w++]=X.value_;return a}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(a){if(this.containsKey(a))return this.entries_[a].value_}pop(){const a=this.oldest_;return delete this.entries_[a.key_],a.newer&&(a.newer.older=null),this.oldest_=a.newer,this.oldest_||(this.newest_=null),--this.count_,a.value_}replace(a,w){this.get(a),this.entries_[a].value_=w}set(a,w){(0,V.h)(!(a in this.entries_),16);const X={key_:a,newer:null,older:this.newest_,value_:w};this.newest_?this.newest_.newer=X:this.oldest_=X,this.newest_=X,this.entries_[a]=X,++this.count_}setSize(a){this.highWaterMark=a}}{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(a){for(;this.canExpireCache()&&!(this.peekLast().getKey()in a);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const X=function n(Rt){return Rt.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(ut){ut.tileCoord[0]!==X&&(this.remove(y(ut.tileCoord)),ut.release())}.bind(this))}};var R=c(1999);var m=c(8214),G=c(4702),T=c(119),u=c(6003),B=c(6609),tt=c(9302),W=c(2156),$=c(760),F=c(2750),at=c(2456),St=c(1750);const lt=[0,0,0],l=class M{constructor(a){let w;if(this.minZoom=void 0!==a.minZoom?a.minZoom:0,this.resolutions_=a.resolutions,(0,V.h)((0,at.pT)(this.resolutions_,function(ut,pt){return pt-ut},!0),17),!a.origins)for(let ut=0,pt=this.resolutions_.length-1;ut<pt;++ut)if(w){if(this.resolutions_[ut]/this.resolutions_[ut+1]!==w){w=void 0;break}}else w=this.resolutions_[ut]/this.resolutions_[ut+1];this.zoomFactor_=w,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==a.origin?a.origin:null,this.origins_=null,void 0!==a.origins&&(this.origins_=a.origins,(0,V.h)(this.origins_.length==this.resolutions_.length,20));const X=a.extent;void 0!==X&&!this.origin_&&!this.origins_&&(this.origin_=(0,$.rL)(X)),(0,V.h)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==a.tileSizes&&(this.tileSizes_=a.tileSizes,(0,V.h)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==a.tileSize?a.tileSize:this.tileSizes_?null:tt.S,(0,V.h)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==X?X:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==a.sizes?this.fullTileRanges_=a.sizes.map(function(ut,pt){const Et=new B.Z(Math.min(0,ut[0]),Math.max(ut[0]-1,-1),Math.min(0,ut[1]),Math.max(ut[1]-1,-1));if(X){const bt=this.getTileRangeForExtentAndZ(X,pt);Et.minX=Math.max(bt.minX,Et.minX),Et.maxX=Math.min(bt.maxX,Et.maxX),Et.minY=Math.max(bt.minY,Et.minY),Et.maxY=Math.min(bt.maxY,Et.maxY)}return Et},this):X&&this.calculateTileRanges_(X)}forEachTileCoord(a,w,X){const ut=this.getTileRangeForExtentAndZ(a,w);for(let pt=ut.minX,Et=ut.maxX;pt<=Et;++pt)for(let bt=ut.minY,Kt=ut.maxY;bt<=Kt;++bt)X([w,pt,bt])}forEachTileCoordParentTileRange(a,w,X,ut){let pt,Et,bt,Kt=null,Nt=a[0]-1;for(2===this.zoomFactor_?(Et=a[1],bt=a[2]):Kt=this.getTileCoordExtent(a,ut);Nt>=this.minZoom;){if(2===this.zoomFactor_?(Et=Math.floor(Et/2),bt=Math.floor(bt/2),pt=(0,B.T)(Et,Et,bt,bt,X)):pt=this.getTileRangeForExtentAndZ(Kt,Nt,X),w(Nt,pt))return!0;--Nt}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(a){return this.origin_?this.origin_:this.origins_[a]}getResolution(a){return this.resolutions_[a]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(a,w,X){if(a[0]<this.maxZoom){if(2===this.zoomFactor_){const pt=2*a[1],Et=2*a[2];return(0,B.T)(pt,pt+1,Et,Et+1,w)}const ut=this.getTileCoordExtent(a,X||this.tmpExtent_);return this.getTileRangeForExtentAndZ(ut,a[0]+1,w)}return null}getTileRangeForTileCoordAndZ(a,w,X){if(w>this.maxZoom||w<this.minZoom)return null;const ut=a[0],pt=a[1],Et=a[2];if(w===ut)return(0,B.T)(pt,Et,pt,Et,X);if(this.zoomFactor_){const Kt=Math.pow(this.zoomFactor_,w-ut),Nt=Math.floor(pt*Kt),Bt=Math.floor(Et*Kt);if(w<ut)return(0,B.T)(Nt,Nt,Bt,Bt,X);const te=Math.floor(Kt*(pt+1))-1,le=Math.floor(Kt*(Et+1))-1;return(0,B.T)(Nt,te,Bt,le,X)}const bt=this.getTileCoordExtent(a,this.tmpExtent_);return this.getTileRangeForExtentAndZ(bt,w,X)}getTileRangeExtent(a,w,X){const ut=this.getOrigin(a),pt=this.getResolution(a),Et=(0,St.Pq)(this.getTileSize(a),this.tmpSize_);return(0,$.T9)(ut[0]+w.minX*Et[0]*pt,ut[1]+w.minY*Et[1]*pt,ut[0]+(w.maxX+1)*Et[0]*pt,ut[1]+(w.maxY+1)*Et[1]*pt,X)}getTileRangeForExtentAndZ(a,w,X){const ut=lt;this.getTileCoordForXYAndZ_(a[0],a[3],w,!1,ut);const pt=ut[1],Et=ut[2];return this.getTileCoordForXYAndZ_(a[2],a[1],w,!0,ut),(0,B.T)(pt,ut[1],Et,ut[2],X)}getTileCoordCenter(a){const w=this.getOrigin(a[0]),X=this.getResolution(a[0]),ut=(0,St.Pq)(this.getTileSize(a[0]),this.tmpSize_);return[w[0]+(a[1]+.5)*ut[0]*X,w[1]-(a[2]+.5)*ut[1]*X]}getTileCoordExtent(a,w){const X=this.getOrigin(a[0]),ut=this.getResolution(a[0]),pt=(0,St.Pq)(this.getTileSize(a[0]),this.tmpSize_),Et=X[0]+a[1]*pt[0]*ut,bt=X[1]-(a[2]+1)*pt[1]*ut;return(0,$.T9)(Et,bt,Et+pt[0]*ut,bt+pt[1]*ut,w)}getTileCoordForCoordAndResolution(a,w,X){return this.getTileCoordForXYAndResolution_(a[0],a[1],w,!1,X)}getTileCoordForXYAndResolution_(a,w,X,ut,pt){const Et=this.getZForResolution(X),bt=X/this.getResolution(Et),Kt=this.getOrigin(Et),Nt=(0,St.Pq)(this.getTileSize(Et),this.tmpSize_);let Bt=bt*(a-Kt[0])/X/Nt[0],te=bt*(Kt[1]-w)/X/Nt[1];return ut?(Bt=(0,W.mD)(Bt,5)-1,te=(0,W.mD)(te,5)-1):(Bt=(0,W.GW)(Bt,5),te=(0,W.GW)(te,5)),j(Et,Bt,te,pt)}getTileCoordForXYAndZ_(a,w,X,ut,pt){const Et=this.getOrigin(X),bt=this.getResolution(X),Kt=(0,St.Pq)(this.getTileSize(X),this.tmpSize_);let Nt=(a-Et[0])/bt/Kt[0],Bt=(Et[1]-w)/bt/Kt[1];return ut?(Nt=(0,W.mD)(Nt,5)-1,Bt=(0,W.mD)(Bt,5)-1):(Nt=(0,W.GW)(Nt,5),Bt=(0,W.GW)(Bt,5)),j(X,Nt,Bt,pt)}getTileCoordForCoordAndZ(a,w,X){return this.getTileCoordForXYAndZ_(a[0],a[1],w,!1,X)}getTileCoordResolution(a){return this.resolutions_[a[0]]}getTileSize(a){return this.tileSize_?this.tileSize_:this.tileSizes_[a]}getFullTileRange(a){return this.fullTileRanges_?this.fullTileRanges_[a]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,a):null}getZForResolution(a,w){const X=(0,at.h7)(this.resolutions_,a,w||0);return(0,W.uZ)(X,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(a,w){return(0,F.mV)(w,0,w.length,2,this.getTileCoordExtent(a))}calculateTileRanges_(a){const w=this.resolutions_.length,X=new Array(w);for(let ut=this.minZoom;ut<w;++ut)X[ut]=this.getTileRangeForExtentAndZ(a,ut);this.fullTileRanges_=X}};function f(Rt){let a=Rt.getDefaultTileGrid();return a||(a=function Y(Rt,a,w,X){return function H(Rt,a,w,X){X=void 0!==X?X:"top-left";const ut=ot(Rt,a,w);return new l({extent:Rt,origin:(0,$.g0)(Rt,X),resolutions:ut,tileSize:w})}(C(Rt),a,w,X)}(Rt),Rt.setDefaultTileGrid(a)),a}function ot(Rt,a,w,X){a=void 0!==a?a:tt.e,w=(0,St.Pq)(void 0!==w?w:tt.S);const ut=(0,$.Cr)(Rt),pt=(0,$.dz)(Rt);X=X>0?X:Math.max(pt/w[0],ut/w[1]);const Et=a+1,bt=new Array(Et);for(let Kt=0;Kt<Et;++Kt)bt[Kt]=X/Math.pow(2,Kt);return bt}function C(Rt){let a=(Rt=(0,u.U2)(Rt)).getExtent();if(!a){const w=180*u.Wm.degrees/Rt.getMetersPerUnit();a=(0,$.T9)(-w,-w,w,w)}return a}class Z extends m.ZP{constructor(a,w){super(a),this.tile=w}}const K=class k extends G.Z{constructor(a){super({attributions:a.attributions,attributionsCollapsible:a.attributionsCollapsible,projection:a.projection,state:a.state,wrapX:a.wrapX,interpolate:a.interpolate}),this.opaque_=void 0!==a.opaque&&a.opaque,this.tilePixelRatio_=void 0!==a.tilePixelRatio?a.tilePixelRatio:1,this.tileGrid=void 0!==a.tileGrid?a.tileGrid:null,this.tileGrid&&(0,St.Pq)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new _(a.cacheSize||0),this.tmpSize=[0,0],this.key_=a.key||"",this.tileOptions={transition:a.transition,interpolate:a.interpolate},this.zDirection=a.zDirection?a.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(a,w){const X=this.getTileCacheForProjection(a);X&&X.expireCache(w)}forEachLoadedTile(a,w,X,ut){const pt=this.getTileCacheForProjection(a);if(!pt)return!1;let bt,Kt,Nt,Et=!0;for(let Bt=X.minX;Bt<=X.maxX;++Bt)for(let te=X.minY;te<=X.maxY;++te)Kt=L(w,Bt,te),Nt=!1,pt.containsKey(Kt)&&(bt=pt.get(Kt),Nt=bt.getState()===R.Z.LOADED,Nt&&(Nt=!1!==ut(bt))),Nt||(Et=!1);return Et}getGutterForProjection(a){return 0}getKey(){return this.key_}setKey(a){this.key_!==a&&(this.key_=a,this.changed())}getOpaque(a){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(a,w,X,ut,pt){return(0,T.O3)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(a){return this.tileGrid?this.tileGrid:f(a)}getTileCacheForProjection(a){const w=this.getProjection();return(0,V.h)(null===w||(0,u.OP)(w,a),68),this.tileCache}getTilePixelRatio(a){return this.tilePixelRatio_}getTilePixelSize(a,w,X){const ut=this.getTileGridForProjection(X),pt=this.getTilePixelRatio(w),Et=(0,St.Pq)(ut.getTileSize(a),this.tmpSize);return 1==pt?Et:(0,St.bA)(Et,pt,this.tmpSize)}getTileCoordForTileUrlFunction(a,w){w=void 0!==w?w:this.getProjection();const X=this.getTileGridForProjection(w);return this.getWrapX()&&w.isGlobal()&&(a=function O(Rt,a,w){const X=a[0],ut=Rt.getTileCoordCenter(a),pt=C(w);if((0,$.b8)(pt,ut))return a;{const Et=(0,$.dz)(pt),bt=Math.ceil((pt[0]-ut[0])/Et);return ut[0]+=Et*bt,Rt.getTileCoordForCoordAndZ(ut,X)}}(X,a,w)),function d(Rt,a){const w=Rt[0],X=Rt[1],ut=Rt[2];if(a.getMinZoom()>w||w>a.getMaxZoom())return!1;const pt=a.getFullTileRange(w);return!pt||pt.containsXY(X,ut)}(a,X)?a:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(a,w){const X=this.getTileCacheForProjection(w);a>X.highWaterMark&&(X.highWaterMark=a)}useTile(a,w,X,ut){}};function U(Rt,a){const w=/\{z\}/g,X=/\{x\}/g,ut=/\{y\}/g,pt=/\{-y\}/g;return function(Et,bt,Kt){if(Et)return Rt.replace(w,Et[0].toString()).replace(X,Et[1].toString()).replace(ut,Et[2].toString()).replace(pt,function(){const Bt=a.getFullTileRange(Et[0]);return(0,V.h)(Bt,55),(Bt.getHeight()-Et[2]-1).toString()})}}class Ot extends K{constructor(a){super({attributions:a.attributions,cacheSize:a.cacheSize,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tilePixelRatio:a.tilePixelRatio,wrapX:a.wrapX,transition:a.transition,interpolate:a.interpolate,key:a.key,attributionsCollapsible:a.attributionsCollapsible,zDirection:a.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Ot.prototype.tileUrlFunction,this.tileLoadFunction=a.tileLoadFunction,a.tileUrlFunction&&(this.tileUrlFunction=a.tileUrlFunction),this.urls=null,a.urls?this.setUrls(a.urls):a.url&&this.setUrl(a.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(a){const w=a.target,X=(0,T.sq)(w),ut=w.getState();let pt;ut==R.Z.LOADING?(this.tileLoadingKeys_[X]=!0,pt="tileloadstart"):X in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[X],pt=ut==R.Z.ERROR?"tileloaderror":ut==R.Z.LOADED?"tileloadend":void 0),null!=pt&&this.dispatchEvent(new Z(pt,w))}setTileLoadFunction(a){this.tileCache.clear(),this.tileLoadFunction=a,this.changed()}setTileUrlFunction(a,w){this.tileUrlFunction=a,this.tileCache.pruneExceptNewestZ(),void 0!==w?this.setKey(w):this.changed()}setUrl(a){const w=function Pt(Rt){const a=[];let w=/\{([a-z])-([a-z])\}/.exec(Rt);if(w){const X=w[1].charCodeAt(0),ut=w[2].charCodeAt(0);let pt;for(pt=X;pt<=ut;++pt)a.push(Rt.replace(w[0],String.fromCharCode(pt)));return a}if(w=/\{(\d+)-(\d+)\}/.exec(Rt),w){const X=parseInt(w[2],10);for(let ut=parseInt(w[1],10);ut<=X;ut++)a.push(Rt.replace(w[0],ut.toString()));return a}return a.push(Rt),a}(a);this.urls=w,this.setUrls(w)}setUrls(a){this.urls=a;const w=a.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function et(Rt,a){const w=Rt.length,X=new Array(w);for(let ut=0;ut<w;++ut)X[ut]=U(Rt[ut],a);return function ht(Rt){return 1===Rt.length?Rt[0]:function(a,w,X){if(a){const ut=function h(Rt){return(Rt[1]<<Rt[0])+Rt[2]}(a),pt=(0,W.$W)(ut,Rt.length);return Rt[pt](a,w,X)}}}(X)}(a,this.tileGrid),w):this.setKey(w)}tileUrlFunction(a,w,X){}useTile(a,w,X){const ut=L(a,w,X);this.tileCache.containsKey(ut)&&this.tileCache.get(ut)}}const At=Ot;function Yt(Rt,a){Rt.getImage().src=a}const Ht=class zt extends At{constructor(a){super({attributions:a.attributions,cacheSize:a.cacheSize,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction?a.tileLoadFunction:Yt,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,wrapX:a.wrapX,transition:a.transition,interpolate:void 0===a.interpolate||a.interpolate,key:a.key,attributionsCollapsible:a.attributionsCollapsible,zDirection:a.zDirection}),this.crossOrigin=void 0!==a.crossOrigin?a.crossOrigin:null,this.tileClass=void 0!==a.tileClass?a.tileClass:b.Z,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=a.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const a in this.tileCacheForProjection)if(this.tileCacheForProjection[a].canExpireCache())return!0;return!1}expireCache(a,w){const X=this.getTileCacheForProjection(a);this.tileCache.expireCache(this.tileCache==X?w:{});for(const ut in this.tileCacheForProjection){const pt=this.tileCacheForProjection[ut];pt.expireCache(pt==X?w:{})}}getGutterForProjection(a){return this.getProjection()&&a&&!(0,u.OP)(this.getProjection(),a)?0:this.getGutter()}getGutter(){return 0}getKey(){let a=super.getKey();return this.getInterpolate()||(a+=":disable-interpolation"),a}getOpaque(a){return!(this.getProjection()&&a&&!(0,u.OP)(this.getProjection(),a))&&super.getOpaque(a)}getTileGridForProjection(a){const w=this.getProjection();if(this.tileGrid&&(!w||(0,u.OP)(w,a)))return this.tileGrid;{const X=(0,T.sq)(a);return X in this.tileGridForProjection||(this.tileGridForProjection[X]=f(a)),this.tileGridForProjection[X]}}getTileCacheForProjection(a){const w=this.getProjection();if(!w||(0,u.OP)(w,a))return this.tileCache;{const X=(0,T.sq)(a);return X in this.tileCacheForProjection||(this.tileCacheForProjection[X]=new _(this.tileCache.highWaterMark)),this.tileCacheForProjection[X]}}createTile_(a,w,X,ut,pt,Et){const bt=[a,w,X],Kt=this.getTileCoordForTileUrlFunction(bt,pt),Nt=Kt?this.tileUrlFunction(Kt,ut,pt):void 0,Bt=new this.tileClass(bt,void 0!==Nt?R.Z.IDLE:R.Z.EMPTY,void 0!==Nt?Nt:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return Bt.key=Et,Bt.addEventListener(st.Z.CHANGE,this.handleTileChange.bind(this)),Bt}getTile(a,w,X,ut,pt){const Et=this.getProjection();if(!Et||!pt||(0,u.OP)(Et,pt))return this.getTileInternal(a,w,X,ut,Et||pt);{const bt=this.getTileCacheForProjection(pt),Kt=[a,w,X];let Nt;const Bt=y(Kt);bt.containsKey(Bt)&&(Nt=bt.get(Bt));const te=this.getKey();if(Nt&&Nt.key==te)return Nt;{const le=this.getTileGridForProjection(Et),De=this.getTileGridForProjection(pt),he=this.getTileCoordForTileUrlFunction(Kt,pt),oe=new q.Z(Et,le,pt,De,Kt,he,this.getTilePixelRatio(ut),this.getGutter(),function(ce,Te,Se,xe){return this.getTileInternal(ce,Te,Se,xe,Et)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return oe.key=te,Nt?(oe.interimTile=Nt,oe.refreshInterimChain(),bt.replace(Bt,oe)):bt.set(Bt,oe),oe}}}getTileInternal(a,w,X,ut,pt){let Et=null;const bt=L(a,w,X),Kt=this.getKey();if(this.tileCache.containsKey(bt)){if(Et=this.tileCache.get(bt),Et.key!=Kt){const Nt=Et;Et=this.createTile_(a,w,X,ut,pt,Kt),Et.interimTile=Nt.getState()==R.Z.IDLE?Nt.interimTile:Nt,Et.refreshInterimChain(),this.tileCache.replace(bt,Et)}}else Et=this.createTile_(a,w,X,ut,pt,Kt),this.tileCache.set(bt,Et);return Et}setRenderReprojectionEdges(a){if(this.renderReprojectionEdges_!=a){this.renderReprojectionEdges_=a;for(const w in this.tileCacheForProjection)this.tileCacheForProjection[w].clear();this.changed()}}setTileGridForProjection(a,w){const X=(0,u.U2)(a);if(X){const ut=(0,T.sq)(X);ut in this.tileGridForProjection||(this.tileGridForProjection[ut]=w)}}clear(){super.clear();for(const a in this.tileCacheForProjection)this.tileCacheForProjection[a].clear()}},Jt=class Wt extends Ht{constructor(a){const w=void 0!==(a=a||{}).projection?a.projection:"EPSG:3857",X=void 0!==a.tileGrid?a.tileGrid:function nt(Rt){const a=Rt||{},w=a.extent||(0,u.U2)("EPSG:3857").getExtent(),X={extent:w,minZoom:a.minZoom,tileSize:a.tileSize,resolutions:ot(w,a.maxZoom,a.tileSize,a.maxResolution)};return new l(X)}({extent:C(w),maxResolution:a.maxResolution,maxZoom:a.maxZoom,minZoom:a.minZoom,tileSize:a.tileSize});super({attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,interpolate:a.interpolate,opaque:a.opaque,projection:w,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileGrid:X,tileLoadFunction:a.tileLoadFunction,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,wrapX:void 0===a.wrapX||a.wrapX,transition:a.transition,attributionsCollapsible:a.attributionsCollapsible,zDirection:a.zDirection}),this.gutter_=void 0!==a.gutter?a.gutter:0}getGutter(){return this.gutter_}},ie=class qt extends Jt{constructor(a){let w;w=void 0!==(a=a||{}).attributions?a.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],super({attributions:w,attributionsCollapsible:!1,cacheSize:a.cacheSize,crossOrigin:void 0!==a.crossOrigin?a.crossOrigin:"anonymous",interpolate:a.interpolate,maxZoom:void 0!==a.maxZoom?a.maxZoom:19,opaque:void 0===a.opaque||a.opaque,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileLoadFunction:a.tileLoadFunction,transition:a.transition,url:void 0!==a.url?a.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:a.wrapX,zDirection:a.zDirection})}}},4702:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>A});var st=c(3632),b=c(119),q=c(6003);function x(j){return j?Array.isArray(j)?function(L){return j}:"function"==typeof j?j:function(L){return[j]}:null}const A=class V extends st.Z{constructor(L){super(),this.projection=(0,q.U2)(L.projection),this.attributions_=x(L.attributions),this.attributionsCollapsible_=void 0===L.attributionsCollapsible||L.attributionsCollapsible,this.loading=!1,this.state_=void 0!==L.state?L.state:"ready",this.wrapX_=void 0!==L.wrapX&&L.wrapX,this.interpolate_=!!L.interpolate,this.viewResolver=null,this.viewRejector=null;const y=this;this.viewPromise_=new Promise(function(i,n){y.viewResolver=i,y.viewRejector=n})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(){return(0,b.O3)()}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(L){this.attributions_=x(L),this.changed()}setState(L){this.state_=L,this.changed()}}},7392:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>q});var st=c(8225);class b extends st.Z{constructor(x){super({points:1/0,fill:(x=x||{radius:5}).fill,radius:x.radius,stroke:x.stroke,scale:void 0!==x.scale?x.scale:1,rotation:void 0!==x.rotation?x.rotation:0,rotateWithView:void 0!==x.rotateWithView&&x.rotateWithView,displacement:void 0!==x.displacement?x.displacement:[0,0],declutterMode:x.declutterMode})}clone(){const x=this.getScale(),A=new b({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(x)?x.slice():x,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return A.setOpacity(this.getOpacity()),A}setRadius(x){this.radius_=x,this.render()}}const q=b},5044:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>b});class st{constructor(V){this.color_=void 0!==(V=V||{}).color?V.color:null}clone(){const V=this.getColor();return new st({color:Array.isArray(V)?V.slice():V||void 0})}getColor(){return this.color_}setColor(V){this.color_=V}}const b=st},9570:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>R});var st=c(9972),b=c(521),q=c(6398),V=c(3783),x=c(1911),A=c(8007),j=c(1992),L=c(2956),y=c(3641);let i=null;class n extends A.Z{constructor(m,G,T,u,B,tt){super(),this.hitDetectionImage_=null,this.image_=m,this.crossOrigin_=u,this.canvas_={},this.color_=tt,this.unlisten_=null,this.imageState_=B,this.size_=T,this.src_=G}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===b.Z.LOADED){i||(i=(0,j.E4)(1,1)),i.drawImage(this.image_,0,0);try{i.getImageData(0,0,1,1),this.tainted_=!1}catch(m){i=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(st.Z.CHANGE)}handleImageError_(){this.imageState_=b.Z.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=b.Z.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(m){return this.image_||this.initializeImage_(),this.replaceColor_(m),this.canvas_[m]?this.canvas_[m]:this.image_}getPixelRatio(m){return this.replaceColor_(m),this.canvas_[m]?m:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const m=this.size_[0],G=this.size_[1],T=(0,j.E4)(m,G);T.fillRect(0,0,m,G),this.hitDetectionImage_=T.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===b.Z.IDLE){this.image_||this.initializeImage_(),this.imageState_=b.Z.LOADING;try{this.image_.src=this.src_}catch(m){this.handleImageError_()}this.unlisten_=(0,y.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(m){if(!this.color_||this.canvas_[m]||this.imageState_!==b.Z.LOADED)return;const G=this.image_,T=document.createElement("canvas");T.width=Math.ceil(G.width*m),T.height=Math.ceil(G.height*m);const u=T.getContext("2d");u.scale(m,m),u.drawImage(G,0,0),u.globalCompositeOperation="multiply",u.fillStyle=(0,V.XC)(this.color_),u.fillRect(0,0,T.width/m,T.height/m),u.globalCompositeOperation="destination-in",u.drawImage(G,0,0),this.canvas_[m]=T}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}var S=c(119);class _ extends q.Z{constructor(m){super({opacity:void 0!==(m=m||{}).opacity?m.opacity:1,rotation:void 0!==m.rotation?m.rotation:0,scale:void 0!==m.scale?m.scale:1,displacement:void 0!==m.displacement?m.displacement:[0,0],rotateWithView:void 0!==m.rotateWithView&&m.rotateWithView,declutterMode:m.declutterMode}),this.anchor_=void 0!==m.anchor?m.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==m.anchorOrigin?m.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==m.anchorXUnits?m.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==m.anchorYUnits?m.anchorYUnits:"fraction",this.crossOrigin_=void 0!==m.crossOrigin?m.crossOrigin:null;const tt=void 0!==m.img?m.img:null;this.imgSize_=m.imgSize;let W=m.src;(0,x.h)(!(void 0!==W&&tt),4),(0,x.h)(!tt||tt&&this.imgSize_,5),(void 0===W||0===W.length)&&tt&&(W=tt.src||(0,S.sq)(tt)),(0,x.h)(void 0!==W&&W.length>0,6);const $=void 0!==m.src?b.Z.IDLE:b.Z.LOADED;this.color_=void 0!==m.color?(0,V._2)(m.color):null,this.iconImage_=function h(v,m,G,T,u,B){let tt=L.c.get(m,T,B);return tt||(tt=new n(v,m,G,T,u,B),L.c.set(m,T,B,tt)),tt}(tt,W,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,$,this.color_),this.offset_=void 0!==m.offset?m.offset:[0,0],this.offsetOrigin_=void 0!==m.offsetOrigin?m.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==m.size?m.size:null}clone(){const m=this.getScale();return new _({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(m)?m.slice():m,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let m=this.normalizedAnchor_;if(!m){m=this.anchor_;const u=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!u)return null;m=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(m[0]*=u[0]),"fraction"==this.anchorYUnits_&&(m[1]*=u[1])}if("top-left"!=this.anchorOrigin_){if(!u)return null;m===this.anchor_&&(m=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(m[0]=-m[0]+u[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(m[1]=-m[1]+u[1])}this.normalizedAnchor_=m}const G=this.getDisplacement(),T=this.getScaleArray();return[m[0]-G[0]/T[0],m[1]+G[1]/T[1]]}setAnchor(m){this.anchor_=m,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(m){return this.iconImage_.getImage(m)}getPixelRatio(m){return this.iconImage_.getPixelRatio(m)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let m=this.offset_;if("top-left"!=this.offsetOrigin_){const G=this.getSize(),T=this.iconImage_.getSize();if(!G||!T)return null;m=m.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(m[0]=T[0]-G[0]-m[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(m[1]=T[1]-G[1]-m[1])}return this.origin_=m,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(m){this.iconImage_.addEventListener(st.Z.CHANGE,m)}load(){this.iconImage_.load()}unlistenImageChange(m){this.iconImage_.removeEventListener(st.Z.CHANGE,m)}}const R=_},2956:(kt,dt,c)=>{"use strict";c.d(dt,{c:()=>x});var st=c(3783);function q(A,j,L){return j+":"+A+":"+(L?(0,st.XC)(L):"null")}const x=new class b{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let j=0;for(const L in this.cache_){const y=this.cache_[L];0==(3&j++)&&!y.hasListener()&&(delete this.cache_[L],--this.cacheSize_)}}}get(j,L,y){const i=q(j,L,y);return i in this.cache_?this.cache_[i]:null}set(j,L,y,i){const n=q(j,L,y);this.cache_[n]=i,++this.cacheSize_}setSize(j){this.maxCacheSize_=j,this.expire()}}},6398:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>V});var st=c(119),b=c(1750);class q{constructor(A){this.opacity_=A.opacity,this.rotateWithView_=A.rotateWithView,this.rotation_=A.rotation,this.scale_=A.scale,this.scaleArray_=(0,b.Pq)(A.scale),this.displacement_=A.displacement,this.declutterMode_=A.declutterMode}clone(){const A=this.getScale();return new q({opacity:this.getOpacity(),scale:Array.isArray(A)?A.slice():A,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,st.O3)()}getImage(A){return(0,st.O3)()}getHitDetectionImage(){return(0,st.O3)()}getPixelRatio(A){return 1}getImageState(){return(0,st.O3)()}getImageSize(){return(0,st.O3)()}getOrigin(){return(0,st.O3)()}getSize(){return(0,st.O3)()}setDisplacement(A){this.displacement_=A}setOpacity(A){this.opacity_=A}setRotateWithView(A){this.rotateWithView_=A}setRotation(A){this.rotation_=A}setScale(A){this.scale_=A,this.scaleArray_=(0,b.Pq)(A)}listenImageChange(A){(0,st.O3)()}load(){(0,st.O3)()}unlistenImageChange(A){(0,st.O3)()}}const V=q},8225:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>L});var st=c(521),b=c(6398),q=c(3783),V=c(5813),x=c(1992),A=c(4686);class j extends b.Z{constructor(i){super({opacity:1,rotateWithView:void 0!==i.rotateWithView&&i.rotateWithView,rotation:void 0!==i.rotation?i.rotation:0,scale:void 0!==i.scale?i.scale:1,displacement:void 0!==i.displacement?i.displacement:[0,0],declutterMode:i.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==i.fill?i.fill:null,this.origin_=[0,0],this.points_=i.points,this.radius_=void 0!==i.radius?i.radius:i.radius1,this.radius2_=i.radius2,this.angle_=void 0!==i.angle?i.angle:0,this.stroke_=void 0!==i.stroke?i.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const i=this.getScale(),n=new j({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(i)?i.slice():i,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const i=this.size_;if(!i)return null;const n=this.getDisplacement(),h=this.getScaleArray();return[i[0]/2-n[0]/h[0],i[1]/2+n[1]/h[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(i){this.fill_=i,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(i){let n=this.canvas_[i];if(!n){const h=this.renderOptions_,d=(0,x.E4)(h.size*i,h.size*i);this.draw_(h,d,i),n=d.canvas,this.canvas_[i]=n}return n}getPixelRatio(i){return i}getImageSize(){return this.size_}getImageState(){return st.Z.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(i){this.stroke_=i,this.render()}listenImageChange(i){}load(){}unlistenImageChange(i){}calculateLineJoinSize_(i,n,h){if(0===n||this.points_===1/0||"bevel"!==i&&"miter"!==i)return n;let d=this.radius_,S=void 0===this.radius2_?d:this.radius2_;if(d<S){const M=d;d=S,S=M}const R=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),v=S*Math.sin(R),G=d-Math.sqrt(S*S-v*v),T=Math.sqrt(v*v+G*G),u=T/v;if("miter"===i&&u<=h)return u*n;const B=n/2/u,tt=n/2*(G/T),$=Math.sqrt((d+B)*(d+B)+tt*tt)-d;if(void 0===this.radius2_||"bevel"===i)return 2*$;const F=d*Math.sin(R),St=S-Math.sqrt(d*d-F*F),Tt=Math.sqrt(F*F+St*St)/F;return Tt<=h?2*Math.max($,Tt*n/2-S-d):2*$}createRenderOptions(){let S,i=A.rc,n=0,h=null,d=0,_=0;this.stroke_&&(S=this.stroke_.getColor(),null===S&&(S=A.Tx),S=(0,V.y)(S),_=this.stroke_.getWidth(),void 0===_&&(_=A.yC),h=this.stroke_.getLineDash(),d=this.stroke_.getLineDashOffset(),i=this.stroke_.getLineJoin(),void 0===i&&(i=A.rc),n=this.stroke_.getMiterLimit(),void 0===n&&(n=A.V4));const R=this.calculateLineJoinSize_(i,_,n),v=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:S,strokeWidth:_,size:Math.ceil(2*v+R),lineDash:h,lineDashOffset:d,lineJoin:i,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const i=this.renderOptions_.size;this.canvas_={},this.size_=[i,i]}draw_(i,n,h){if(n.scale(h,h),n.translate(i.size/2,i.size/2),this.createPath_(n),this.fill_){let d=this.fill_.getColor();null===d&&(d=A.bL),n.fillStyle=(0,V.y)(d),n.fill()}this.stroke_&&(n.strokeStyle=i.strokeStyle,n.lineWidth=i.strokeWidth,i.lineDash&&(n.setLineDash(i.lineDash),n.lineDashOffset=i.lineDashOffset),n.lineJoin=i.lineJoin,n.miterLimit=i.miterLimit,n.stroke())}createHitDetectionCanvas_(i){if(this.fill_){let n=this.fill_.getColor(),h=0;if("string"==typeof n&&(n=(0,q._2)(n)),null===n?h=1:Array.isArray(n)&&(h=4===n.length?n[3]:1),0===h){const d=(0,x.E4)(i.size,i.size);this.hitDetectionCanvas_=d.canvas,this.drawHitDetectionCanvas_(i,d)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(i){let n=this.points_;const h=this.radius_;if(n===1/0)i.arc(0,0,h,0,2*Math.PI);else{const d=void 0===this.radius2_?h:this.radius2_;void 0!==this.radius2_&&(n*=2);const S=this.angle_-Math.PI/2,_=2*Math.PI/n;for(let R=0;R<n;R++){const v=S+R*_,m=R%2==0?h:d;i.lineTo(m*Math.cos(v),m*Math.sin(v))}i.closePath()}}drawHitDetectionCanvas_(i,n){n.translate(i.size/2,i.size/2),this.createPath_(n),n.fillStyle=A.bL,n.fill(),this.stroke_&&(n.strokeStyle=i.strokeStyle,n.lineWidth=i.strokeWidth,i.lineDash&&(n.setLineDash(i.lineDash),n.lineDashOffset=i.lineDashOffset),n.lineJoin=i.lineJoin,n.miterLimit=i.miterLimit,n.stroke())}}const L=j},6785:(kt,dt,c)=>{"use strict";c.d(dt,{Z:()=>b});class st{constructor(V){this.color_=void 0!==(V=V||{}).color?V.color:null,this.lineCap_=V.lineCap,this.lineDash_=void 0!==V.lineDash?V.lineDash:null,this.lineDashOffset_=V.lineDashOffset,this.lineJoin_=V.lineJoin,this.miterLimit_=V.miterLimit,this.width_=V.width}clone(){const V=this.getColor();return new st({color:Array.isArray(V)?V.slice():V||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(V){this.color_=V}setLineCap(V){this.lineCap_=V}setLineDash(V){this.lineDash_=V}setLineDashOffset(V){this.lineDashOffset_=V}setLineJoin(V){this.lineJoin_=V}setMiterLimit(V){this.miterLimit_=V}setWidth(V){this.width_=V}}const b=st},109:(kt,dt,c)=>{"use strict";c.d(dt,{J$:()=>A,ZP:()=>n,yF:()=>L});var st=c(7392),b=c(5044),q=c(6785),V=c(1911);class x{constructor(d){d=d||{},this.geometry_=null,this.geometryFunction_=i,void 0!==d.geometry&&this.setGeometry(d.geometry),this.fill_=void 0!==d.fill?d.fill:null,this.image_=void 0!==d.image?d.image:null,this.renderer_=void 0!==d.renderer?d.renderer:null,this.hitDetectionRenderer_=void 0!==d.hitDetectionRenderer?d.hitDetectionRenderer:null,this.stroke_=void 0!==d.stroke?d.stroke:null,this.text_=void 0!==d.text?d.text:null,this.zIndex_=d.zIndex}clone(){let d=this.getGeometry();return d&&"object"==typeof d&&(d=d.clone()),new x({geometry:d,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(d){this.renderer_=d}setHitDetectionRenderer(d){this.hitDetectionRenderer_=d}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(d){this.fill_=d}getImage(){return this.image_}setImage(d){this.image_=d}getStroke(){return this.stroke_}setStroke(d){this.stroke_=d}getText(){return this.text_}setText(d){this.text_=d}getZIndex(){return this.zIndex_}setGeometry(d){"function"==typeof d?this.geometryFunction_=d:"string"==typeof d?this.geometryFunction_=function(S){return S.get(d)}:d?void 0!==d&&(this.geometryFunction_=function(){return d}):this.geometryFunction_=i,this.geometry_=d}setZIndex(d){this.zIndex_=d}}function A(h){let d;if("function"==typeof h)d=h;else{let S;Array.isArray(h)?S=h:((0,V.h)("function"==typeof h.getZIndex,41),S=[h]),d=function(){return S}}return d}let j=null;function L(h,d){if(!j){const S=new b.Z({color:"rgba(255,255,255,0.4)"}),_=new q.Z({color:"#3399CC",width:1.25});j=[new x({image:new st.Z({fill:S,stroke:_,radius:5}),fill:S,stroke:_})]}return j}function i(h){return h.getGeometry()}const n=x},9302:(kt,dt,c)=>{"use strict";c.d(dt,{S:()=>b,e:()=>st});const st=42,b=256},483:(kt,dt,c)=>{"use strict";c.d(dt,{BB:()=>T,Ue:()=>V,lk:()=>L,n3:()=>h,nb:()=>v,nn:()=>y,qC:()=>S});var st=c(9996),b=c(1911);function V(){return[1,0,0,1,0,0]}function L(u,B){return u[0]=B[0],u[1]=B[1],u[2]=B[2],u[3]=B[3],u[4]=B[4],u[5]=B[5],u}function y(u,B){const tt=B[0],W=B[1];return B[0]=u[0]*tt+u[2]*W+u[4],B[1]=u[1]*tt+u[3]*W+u[5],B}function h(u,B,tt){return function j(u,B,tt,W,$,F,at){return u[0]=B,u[1]=tt,u[2]=W,u[3]=$,u[4]=F,u[5]=at,u}(u,B,0,0,tt,0,0)}function S(u,B,tt,W,$,F,at,St){const lt=Math.sin(F),Tt=Math.cos(F);return u[0]=W*Tt,u[1]=$*lt,u[2]=-W*lt,u[3]=$*Tt,u[4]=at*W*Tt-St*W*lt+B,u[5]=at*$*lt+St*$*Tt+tt,u}function v(u,B){const tt=function m(u){return u[0]*u[3]-u[1]*u[2]}(B);(0,b.h)(0!==tt,32);const W=B[0],$=B[1],F=B[2],at=B[3],St=B[4],lt=B[5];return u[0]=at/tt,u[1]=-$/tt,u[2]=-F/tt,u[3]=W/tt,u[4]=(F*lt-at*St)/tt,u[5]=-(W*lt-$*St)/tt,u}let G;function T(u){const B="matrix("+u.join(", ")+")";if(st.Id)return B;const tt=G||(G=document.createElement("div"));return tt.style.transform=B,tt.style.transform}new Array(6)},119:(kt,dt,c)=>{"use strict";function st(){throw new Error("Unimplemented abstract method.")}c.d(dt,{O3:()=>st,sq:()=>q});let b=0;function q(x){return x.ol_uid||(x.ol_uid=String(++b))}}}]);