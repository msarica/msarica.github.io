(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7164],{7164:(V,U,y)=>{"use strict";y.r(U),y.d(U,{StoryBuilderPageModule:()=>at});var T=y(9808),b=y(4182),h=y(7590),k=y(5470),g=y(655);y(3037);const P="propertyInfo";function B(i,l,r,m){let _=Reflect.getMetadata(P,i)||{};_[l]=Object.assign(Object.assign({},_[l]),{[r]:m}),Reflect.defineMetadata(P,_,i)}function S(i,l){B(i,l,"editable",!0)}class G{get controlData(){return this._controlData||(this._controlData=this._getControlData()),this._controlData}_getControlData(){const l=this;let r=Reflect.getMetadata(P,l)||{};const m=[];for(let _ of Object.keys(r)){const M=r[_]||{},F=M.dataType||Reflect.getMetadata("design:type",l,_)||_,H=M.displayName||(i=_).charAt(0).toUpperCase()+i.slice(1);let Q=F;F===String||F===Date?Q="text":F===Number?Q="number":F===Boolean&&(Q="checkbox"),m.push({label:H,name:_,type:Q,required:!0,value:"",validators:{pattern:M.validateFor||void 0}})}var i;return{controls:m}}generateForm(l,r){const m=this.controlData;console.log(m);for(let _ of m.controls){const M=[];_.required&&M.push(b.kI.required),_.validators.pattern&&M.push(b.kI.pattern(_.validators.pattern)),l.addControl(_.name,r.control(_.value,M))}}}class J extends G{}(0,g.gn)([S,(0,g.w6)("design:type",String)],J.prototype,"name",void 0),(0,g.gn)([S,(0,g.w6)("design:type",String)],J.prototype,"description",void 0),(0,g.gn)([S,function E(i){return function(l,r){B(l,r,"dataType",i)}}("text"),function X(i){return function(l,r){B(l,r,"validateFor",i)}}(/\d+/),(0,g.w6)("design:type",Array)],J.prototype,"location",void 0);class I extends G{}(0,g.gn)([S,(0,g.w6)("design:type",String)],I.prototype,"title",void 0),(0,g.gn)([S,(0,g.w6)("design:type",String)],I.prototype,"text",void 0),(0,g.gn)([S,(0,g.w6)("design:type",Array)],I.prototype,"enables",void 0),(0,g.gn)([S,(0,g.w6)("design:type",Array)],I.prototype,"disables",void 0),(0,g.gn)([S,(0,g.w6)("design:type",String)],I.prototype,"afterExplored",void 0);class K{constructor(l,r){this.form=l,this.fb=r,this.pointsFormArray=new b.Oe([]),this.pointIndex=0,this.points=[];const m=new J;this.game={form:m,data:m.controlData},m.generateForm(this.form,this.fb),this.form.addControl("points",this.pointsFormArray)}get gameControls(){var l,r;return null===(r=null===(l=this.game)||void 0===l?void 0:l.data)||void 0===r?void 0:r.controls}addNote(){const l=new I;this.points.push({form:l,data:l.controlData});const r=this.fb.group({});this.pointsFormArray.push(r),l.generateForm(r,this.fb)}}var e=y(2096);function tt(i,l){if(1&i&&(e.TgZ(0,"ion-label"),e._uU(1),e.qZA()),2&i){const r=e.oxw().$implicit;e.xp6(1),e.Oqu(r.label)}}function et(i,l){if(1&i&&e._UZ(0,"ion-input",11),2&i){const r=e.oxw().$implicit;e.Q6J("type",r.type)("formControlName",r.name)("value",r.value)}}function nt(i,l){if(1&i&&e._UZ(0,"ion-textarea",12),2&i){const r=e.oxw().$implicit;e.Q6J("formControlName",r.name)("value",r.value)}}function rt(i,l){if(1&i&&e._UZ(0,"ion-checkbox",13),2&i){const r=e.oxw().$implicit;e.Q6J("formControlName",r.name)("checked",r.value)}}function ot(i,l){if(1&i&&e._UZ(0,"ion-toggle",13),2&i){const r=e.oxw().$implicit;e.Q6J("formControlName",r.name)("checked",r.value)}}function Z(i,l){if(1&i&&(e.TgZ(0,"ion-range",14),e._UZ(1,"ion-icon",15)(2,"ion-icon",16),e.qZA()),2&i){const r=e.oxw().$implicit;e.Q6J("min",r.options.min)("max",r.options.max)("formControlName",r.name),e.xp6(1),e.Q6J("name",r.options.icon),e.xp6(1),e.Q6J("name",r.options.icon)}}const D=function(){return["text","password","email","number","search","tel","url"]};function Y(i,l){if(1&i&&(e.TgZ(0,"ion-item"),e.YNc(1,tt,2,1,"ion-label",6),e.YNc(2,et,1,3,"ion-input",7),e.YNc(3,nt,1,2,"ion-textarea",8),e.YNc(4,rt,1,2,"ion-checkbox",9),e.YNc(5,ot,1,2,"ion-toggle",9),e.YNc(6,Z,3,5,"ion-range",10),e.qZA()),2&i){const r=l.$implicit;e.xp6(1),e.Q6J("ngIf",""!==r.label),e.xp6(1),e.Q6J("ngIf",e.DdM(6,D).includes(r.type)),e.xp6(1),e.Q6J("ngIf","textarea"===r.type),e.xp6(1),e.Q6J("ngIf","checkbox"===r.type),e.xp6(1),e.Q6J("ngIf","toggle"===r.type),e.xp6(1),e.Q6J("ngIf","range"===r.type)}}function R(i,l){if(1&i&&(e.TgZ(0,"ion-label"),e._uU(1),e.qZA()),2&i){const r=e.oxw().$implicit;e.xp6(1),e.Oqu(r.label)}}function $(i,l){if(1&i&&e._UZ(0,"ion-input",11),2&i){const r=e.oxw().$implicit;e.Q6J("type",r.type)("formControlName",r.name)("value",r.value)}}function q(i,l){if(1&i&&e._UZ(0,"ion-textarea",12),2&i){const r=e.oxw().$implicit;e.Q6J("formControlName",r.name)("value",r.value)}}function L(i,l){if(1&i&&e._UZ(0,"ion-checkbox",13),2&i){const r=e.oxw().$implicit;e.Q6J("formControlName",r.name)("checked",r.value)}}function W(i,l){if(1&i&&e._UZ(0,"ion-toggle",13),2&i){const r=e.oxw().$implicit;e.Q6J("formControlName",r.name)("checked",r.value)}}function z(i,l){if(1&i&&(e.TgZ(0,"ion-range",14),e._UZ(1,"ion-icon",15)(2,"ion-icon",16),e.qZA()),2&i){const r=e.oxw().$implicit;e.Q6J("min",r.options.min)("max",r.options.max)("formControlName",r.name),e.xp6(1),e.Q6J("name",r.options.icon),e.xp6(1),e.Q6J("name",r.options.icon)}}function v(i,l){if(1&i&&(e.TgZ(0,"ion-item"),e.YNc(1,R,2,1,"ion-label",6),e.YNc(2,$,1,3,"ion-input",7),e.YNc(3,q,1,2,"ion-textarea",8),e.YNc(4,L,1,2,"ion-checkbox",9),e.YNc(5,W,1,2,"ion-toggle",9),e.YNc(6,z,3,5,"ion-range",10),e.qZA()),2&i){const r=l.$implicit;e.xp6(1),e.Q6J("ngIf",""!==r.label),e.xp6(1),e.Q6J("ngIf",e.DdM(6,D).includes(r.type)),e.xp6(1),e.Q6J("ngIf","textarea"===r.type),e.xp6(1),e.Q6J("ngIf","checkbox"===r.type),e.xp6(1),e.Q6J("ngIf","toggle"===r.type),e.xp6(1),e.Q6J("ngIf","range"===r.type)}}function N(i,l){if(1&i&&(e.ynx(0),e.YNc(1,v,7,7,"ion-item",2),e.BQk()),2&i){const r=l.$implicit;e.xp6(1),e.Q6J("ngForOf",r.data.controls)}}const w=[{path:"",component:(()=>{class i{constructor(r,m){this.fb=r,this.viewContainerRef=m,this.points=[],this.gameForm=new J,this.myForm=this.fb.group({})}ngOnInit(){this.form=new K(this.myForm,this.fb)}addPoint(r){switch(r){case"multiplechoice":case"shortanswer":break;case"note":this.form.addNote()}}onSubmit(){console.log(this.myForm.valid),console.log(this.myForm.value)}get controls(){return Object.keys(this.myForm.controls)}}return i.\u0275fac=function(r){return new(r||i)(e.Y36(b.qu),e.Y36(e.s_b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-story-builder"]],decls:24,vars:3,consts:[[3,"formGroup","ngSubmit"],["formObj",""],[4,"ngFor","ngForOf"],[3,"click"],["formGroupName","points"],["button","","type","submit",1,"btn","btn-danger",3,"click"],[4,"ngIf"],[3,"type","formControlName","value",4,"ngIf"],[3,"formControlName","value",4,"ngIf"],[3,"formControlName","checked",4,"ngIf"],[3,"min","max","formControlName",4,"ngIf"],[3,"type","formControlName","value"],[3,"formControlName","value"],[3,"formControlName","checked"],[3,"min","max","formControlName"],["size","small","slot","start",3,"name"],["slot","end",3,"name"]],template:function(r,m){1&r&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"story-builder"),e.qZA()()(),e.TgZ(4,"ion-content")(5,"form",0,1),e.NdJ("ngSubmit",function(){return m.onSubmit()}),e.TgZ(7,"ion-item-divider")(8,"ion-label"),e._uU(9," Game "),e.qZA()(),e.YNc(10,Y,7,7,"ion-item",2),e.TgZ(11,"ion-item-divider")(12,"ion-label"),e._uU(13," Points "),e.qZA(),e.TgZ(14,"ion-button",3),e.NdJ("click",function(){return m.addPoint("note")}),e._uU(15," Note "),e.qZA(),e.TgZ(16,"ion-button",3),e.NdJ("click",function(){return m.addPoint("shortanswer")}),e._uU(17," Short Answer "),e.qZA(),e.TgZ(18,"ion-button",3),e.NdJ("click",function(){return m.addPoint("multiplechoice")}),e._uU(19," Multiple Choice "),e.qZA()(),e.TgZ(20,"div",4),e.YNc(21,N,2,1,"ng-container",2),e.qZA()(),e.TgZ(22,"ion-item",5),e.NdJ("click",function(){return m.onSubmit()}),e._uU(23,"Submit"),e.qZA()()),2&r&&(e.xp6(5),e.Q6J("formGroup",m.myForm),e.xp6(5),e.Q6J("ngForOf",null==m.form?null:m.form.gameControls),e.xp6(11),e.Q6J("ngForOf",null==m.form?null:m.form.points))},dependencies:[T.sg,T.O5,b._Y,b.JJ,b.JL,h.YG,h.nz,h.W2,h.Gu,h.gu,h.pK,h.Ie,h.rH,h.Q$,h.I_,h.g2,h.wd,h.ho,h.sr,h.w,h.QI,h.j9,b.sg,b.u,b.x0],encapsulation:2}),i})()}];let it=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[k.Bz.forChild(w),k.Bz]}),i})(),at=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[T.ez,b.u5,h.Pc,it,b.UX]}),i})()},3037:()=>{var V,U;U=V||(V={}),function(y){var T="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),b=h(U);function h(k,g){return function(O,A){"function"!=typeof k[O]&&Object.defineProperty(k,O,{configurable:!0,writable:!0,value:A}),g&&g(O,A)}}void 0===T.Reflect?T.Reflect=U:b=h(T.Reflect,b),function(y){var T=Object.prototype.hasOwnProperty,b="function"==typeof Symbol,h=b&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",k=b&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",g="function"==typeof Object.create,O={__proto__:[]}instanceof Array,A=!g&&!O,P={create:g?function(){return lt(Object.create(null))}:O?function(){return lt({__proto__:null})}:function(){return lt({})},has:A?function(t,n){return T.call(t,n)}:function(t,n){return n in t},get:A?function(t,n){return T.call(t,n)?t[n]:void 0}:function(t,n){return t[n]}},B=Object.getPrototypeOf(Function),S="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,E=S||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function yt(){var t={},n=[],o=function(){function s(f,c,d){this._index=0,this._keys=f,this._values=c,this._selector=d}return s.prototype["@@iterator"]=function(){return this},s.prototype[k]=function(){return this},s.prototype.next=function(){var f=this._index;if(f>=0&&f<this._keys.length){var c=this._selector(this._keys[f],this._values[f]);return f+1>=this._keys.length?(this._index=-1,this._keys=n,this._values=n):this._index++,{value:c,done:!1}}return{value:void 0,done:!0}},s.prototype.throw=function(f){throw this._index>=0&&(this._index=-1,this._keys=n,this._values=n),f},s.prototype.return=function(f){return this._index>=0&&(this._index=-1,this._keys=n,this._values=n),{value:f,done:!0}},s}();return function(){function s(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(s.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),s.prototype.has=function(f){return this._find(f,!1)>=0},s.prototype.get=function(f){var c=this._find(f,!1);return c>=0?this._values[c]:void 0},s.prototype.set=function(f,c){var d=this._find(f,!0);return this._values[d]=c,this},s.prototype.delete=function(f){var c=this._find(f,!1);if(c>=0){for(var d=this._keys.length,p=c+1;p<d;p++)this._keys[p-1]=this._keys[p],this._values[p-1]=this._values[p];return this._keys.length--,this._values.length--,f===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},s.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},s.prototype.keys=function(){return new o(this._keys,this._values,a)},s.prototype.values=function(){return new o(this._keys,this._values,u)},s.prototype.entries=function(){return new o(this._keys,this._values,x)},s.prototype["@@iterator"]=function(){return this.entries()},s.prototype[k]=function(){return this.entries()},s.prototype._find=function(f,c){return this._cacheKey!==f&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=f)),this._cacheIndex<0&&c&&(this._cacheIndex=this._keys.length,this._keys.push(f),this._values.push(void 0)),this._cacheIndex},s}();function a(s,f){return s}function u(s,f){return f}function x(s,f){return[s,f]}}():Map,ct=S||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function gt(){return function(){function t(){this._map=new E}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(n){return this._map.has(n)},t.prototype.add=function(n){return this._map.set(n,n),this},t.prototype.delete=function(n){return this._map.delete(n)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[k]=function(){return this.keys()},t}()}():Set,j=new(S||"function"!=typeof WeakMap?function vt(){var n=P.create(),o=a();return function(){function c(){this._key=a()}return c.prototype.has=function(d){var p=u(d,!1);return void 0!==p&&P.has(p,this._key)},c.prototype.get=function(d){var p=u(d,!1);return void 0!==p?P.get(p,this._key):void 0},c.prototype.set=function(d,p){return u(d,!0)[this._key]=p,this},c.prototype.delete=function(d){var p=u(d,!1);return void 0!==p&&delete p[this._key]},c.prototype.clear=function(){this._key=a()},c}();function a(){var c;do{c="@@WeakMap@@"+f()}while(P.has(n,c));return n[c]=!0,c}function u(c,d){if(!T.call(c,o)){if(!d)return;Object.defineProperty(c,o,{value:P.create()})}return c[o]}function x(c,d){for(var p=0;p<d;++p)c[p]=255*Math.random()|0;return c}function f(){var c=function s(c){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(c)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(c)):x(new Uint8Array(c),c):x(new Array(c),c)}(16);c[6]=79&c[6]|64,c[8]=191&c[8]|128;for(var d="",p=0;p<16;++p){var C=c[p];(4===p||6===p||8===p)&&(d+="-"),C<16&&(d+="0"),d+=C.toString(16).toLowerCase()}return d}}():WeakMap);function Z(t,n,o){var a=j.get(t);if(v(a)){if(!o)return;a=new E,j.set(t,a)}var u=a.get(n);if(v(u)){if(!o)return;u=new E,a.set(n,u)}return u}function D(t,n,o){if(Y(t,n,o))return!0;var u=ut(n);return!N(u)&&D(t,u,o)}function Y(t,n,o){var a=Z(n,o,!1);return!v(a)&&function i(t){return!!t}(a.has(t))}function R(t,n,o){if(Y(t,n,o))return $(t,n,o);var u=ut(n);return N(u)?void 0:R(t,u,o)}function $(t,n,o){var a=Z(n,o,!1);if(!v(a))return a.get(t)}function q(t,n,o,a){Z(o,a,!0).set(t,n)}function L(t,n){var o=W(t,n),a=ut(t);if(null===a)return o;var u=L(a,n);if(u.length<=0)return o;if(o.length<=0)return u;for(var x=new ct,s=[],f=0,c=o;f<c.length;f++)x.has(d=c[f])||(x.add(d),s.push(d));for(var C=0,pt=u;C<pt.length;C++){var d;x.has(d=pt[C])||(x.add(d),s.push(d))}return s}function W(t,n){var o=[],a=Z(t,n,!1);if(v(a))return o;for(var x=function Q(t){var n=H(t,k);if(!_(n))throw new TypeError;var o=n.call(t);if(!w(o))throw new TypeError;return o}(a.keys()),s=0;;){var f=_t(x);if(!f)return o.length=s,o;var c=mt(f);try{o[s]=c}catch(d){try{ht(x)}finally{throw d}}s++}}function z(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function v(t){return void 0===t}function N(t){return null===t}function w(t){return"object"==typeof t?null!==t:"function"==typeof t}function it(t,n){switch(z(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var o=3===n?"string":5===n?"number":"default",a=H(t,h);if(void 0!==a){var u=a.call(t,o);if(w(u))throw new TypeError;return u}return function at(t,n){if("string"===n){var o=t.toString;if(_(o)&&!w(a=o.call(t)))return a;if(_(u=t.valueOf)&&!w(a=u.call(t)))return a}else{var u;if(_(u=t.valueOf)&&!w(a=u.call(t)))return a;var a,x=t.toString;if(_(x)&&!w(a=x.call(t)))return a}throw new TypeError}(t,"default"===o?"number":o)}function r(t){var n=it(t,3);return function dt(t){return"symbol"==typeof t}(n)?n:function l(t){return""+t}(n)}function m(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function _(t){return"function"==typeof t}function M(t){return"function"==typeof t}function H(t,n){var o=t[n];if(null!=o){if(!_(o))throw new TypeError;return o}}function mt(t){return t.value}function _t(t){var n=t.next();return!n.done&&n}function ht(t){var n=t.return;n&&n.call(t)}function ut(t){var n=Object.getPrototypeOf(t);if("function"!=typeof t||t===B||n!==B)return n;var o=t.prototype,a=o&&Object.getPrototypeOf(o);if(null==a||a===Object.prototype)return n;var u=a.constructor;return"function"!=typeof u||u===t?n:u}function lt(t){return t.__=void 0,delete t.__,t}y("decorate",function G(t,n,o,a){if(v(o)){if(!m(t))throw new TypeError;if(!M(n))throw new TypeError;return function rt(t,n){for(var o=t.length-1;o>=0;--o){var u=(0,t[o])(n);if(!v(u)&&!N(u)){if(!M(u))throw new TypeError;n=u}}return n}(t,n)}if(!m(t))throw new TypeError;if(!w(n))throw new TypeError;if(!w(a)&&!v(a)&&!N(a))throw new TypeError;return N(a)&&(a=void 0),function ot(t,n,o,a){for(var u=t.length-1;u>=0;--u){var s=(0,t[u])(n,o,a);if(!v(s)&&!N(s)){if(!w(s))throw new TypeError;a=s}}return a}(t,n,o=r(o),a)}),y("metadata",function J(t,n){return function o(a,u){if(!w(a))throw new TypeError;if(!v(u)&&!function F(t){switch(z(t)){case 3:case 4:return!0;default:return!1}}(u))throw new TypeError;q(t,n,a,u)}}),y("defineMetadata",function I(t,n,o,a){if(!w(o))throw new TypeError;return v(a)||(a=r(a)),q(t,n,o,a)}),y("hasMetadata",function st(t,n,o){if(!w(n))throw new TypeError;return v(o)||(o=r(o)),D(t,n,o)}),y("hasOwnMetadata",function ft(t,n,o){if(!w(n))throw new TypeError;return v(o)||(o=r(o)),Y(t,n,o)}),y("getMetadata",function K(t,n,o){if(!w(n))throw new TypeError;return v(o)||(o=r(o)),R(t,n,o)}),y("getOwnMetadata",function e(t,n,o){if(!w(n))throw new TypeError;return v(o)||(o=r(o)),$(t,n,o)}),y("getMetadataKeys",function tt(t,n){if(!w(t))throw new TypeError;return v(n)||(n=r(n)),L(t,n)}),y("getOwnMetadataKeys",function et(t,n){if(!w(t))throw new TypeError;return v(n)||(n=r(n)),W(t,n)}),y("deleteMetadata",function nt(t,n,o){if(!w(n))throw new TypeError;v(o)||(o=r(o));var a=Z(n,o,!1);if(v(a)||!a.delete(t))return!1;if(a.size>0)return!0;var u=j.get(n);return u.delete(o),u.size>0||j.delete(n),!0})}(b)}()}}]);