(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function e(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(t){if(t.ep)return;t.ep=!0;const r=e(t);fetch(t.href,r)}})();const d=document.getElementById("puzzle-input"),a=document.getElementById("generate-btn"),c=document.getElementById("cipher-output"),o=document.getElementById("letter-map");function p(l){const i=Array.from(new Set(l.toUpperCase().replace(/[^A-Z]/g,""))),e=Array.from({length:26},(r,s)=>s+1);for(let r=e.length-1;r>0;r--){const s=Math.floor(Math.random()*(r+1));[e[r],e[s]]=[e[s],e[r]]}const n={};let t=0;for(const r of i)n[r]=e[t++];return n}function u(l,i){return l.trim().toUpperCase().split(/\s+/).map(e=>`<div class='printable-word'>${e.split("").map(t=>i[t]?`<div class='print-cell'>
          <div class='print-num'>${i[t]}</div>
          <div class='print-box'></div>
        </div>`:/[^A-Z]/.test(t)?`<div class='print-cell'>
          <div class='print-num'>&nbsp</div>
          <div class='print-punct'>${t}</div>
        </div>`:`<div class='print-cell'>
          <div class='print-num'>?</div>
          <div class='print-box'></div>
        </div>`).join("")}</div>`).join('<div class="print-space"></div>')}function m(l,i){let e='<div class="letter-map-grid">';for(let n=0;n<26;n++){const t=n+1,r=String.fromCharCode(65+n),s=i&&i.includes(r)?r:"";e+=`<div class="letter-cell">
      <span class="letter">${t}</span>
      <div class='print-box'>${s}</div>
    </div>`}return e+="</div>",e}function f(l,i){const e=i.toUpperCase().replace(/[^A-Z]/g,"").split("");if(e.length===0)return"";let n='<div class="cipher-key-table-horizontal"><table><tr>';return e.forEach(t=>{n+=`<th>${t}</th>`}),n+="</tr><tr>",e.forEach(t=>{n+=`<td>${l[t]||""}</td>`}),n+="</tr></table></div>",n}function h(l){const i=Object.keys(l).sort();if(i.length===0)return"";let e='<div class="full-cipher-map-table"><table><tr>';return i.forEach(n=>{e+=`<th>${n}</th>`}),e+="</tr><tr>",i.forEach(n=>{e+=`<td>${l[n]}</td>`}),e+="</tr></table></div>",e}document.getElementById("toggle-cipher-map").addEventListener("change",function(){const l=document.getElementById("full-cipher-map-table");l.style.display=this.checked?"":"none"});a.addEventListener("click",()=>{const l=d.value,i=document.getElementById("keyword-input").value;if(!l.trim()){c.innerHTML="<em>Please enter some text.</em>",document.getElementById("cipher-key-table").innerHTML="",document.getElementById("full-cipher-map-table").innerHTML="",o.innerHTML="";return}const e=p(l);c.innerHTML=`<div class='puzzle-title'>Secret Text</div><div class='printable-puzzle'>${u(l,e)}</div>`,document.getElementById("cipher-key-table").innerHTML=f(e,i),document.getElementById("full-cipher-map-table").innerHTML=h(e),document.getElementById("full-cipher-map-table").style.display=document.getElementById("toggle-cipher-map").checked?"":"none",o.innerHTML=m(e,i.toUpperCase().replace(/[^A-Z]/g,"").split(""))});
