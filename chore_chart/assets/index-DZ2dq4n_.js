(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const m of o.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function s(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(e){if(e.ep)return;e.ep=!0;const o=s(e);fetch(e.href,o)}})();let f={},p="",r=null,l={};function h(){const n=new Date,t={weekday:"long",year:"numeric",month:"long",day:"numeric"},s=n.toLocaleDateString(void 0,t),a=n.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"});document.getElementById("datetime").textContent=`${s} — ${a}`;const e=n.toLocaleDateString();p!==e&&(p=e,L())}setInterval(h,1e3);h();function b(){const n=localStorage.getItem("CHORE_DATA");if(n)try{return JSON.parse(n)}catch(t){console.error("Error parsing localStorage data:",t)}try{return console.log("json data"),fetch("data.json").then(t=>t.json())}catch{}return Promise.resolve({people:{}})}function L(){b().then(n=>{f=n,$();const t=Object.keys(f.people)[0];y(t)})}function $(){const n=document.getElementById("tabs");n.innerHTML="",Object.entries(f.people).forEach(([t,s])=>{const a=document.createElement("button");a.className="tab";let e="";s.avatar&&s.avatar.startsWith("data:image")?e=`<img src='${s.avatar}' class='avatar' alt='avatar' />`:e="<span class='avatar'> </span>",a.innerHTML=`${e} ${t.charAt(0).toUpperCase()+t.slice(1)}`,a.onclick=()=>y(t),a.id=`tab-${t}`,n.appendChild(a)})}function y(n){r=n,document.querySelectorAll(".tab").forEach(s=>s.classList.remove("active"));const t=document.getElementById(`tab-${n}`);t&&t.classList.add("active"),v()}function v(){const n=document.getElementById("chore-list");if(n.innerHTML="",!r||!f.people[r])return;const t=f.people[r].chores,s=new Date().toLocaleDateString(void 0,{weekday:"long"}),a=t.filter(c=>!c.days||c.days.includes(s));l[r]||(l[r]=Array(t.length).fill(!1));let e=0;a.forEach((c,D)=>{const u=t.indexOf(c),d=f.chores[c.task]||{};l[r][u]&&e++;const i=document.createElement("div");i.className="chore"+(l[r][u]?" done":"");let g="";d.image&&(g=d.image.startsWith("data:image")?d.image:`${d.image}`),i.innerHTML=`
            ${g?`<img src='${g}' alt='${d.name||c.task}' class='chore-image' />`:""}
            <div style='display:flex;flex-direction:column;justify-content:center;flex:1;'>
                <span class='chore-task'>${d.name||c.task}</span>
            </div>
            <span class="chore-toggle${l[r][u]?" checked":""}">${l[r][u]?"✔️":""}</span>
        `,i.setAttribute("tabindex","0"),i.setAttribute("role","button"),i.setAttribute("aria-label",`Mark '${d.name||c.task}' as done`),i.addEventListener("click",()=>toggleDone(u)),i.addEventListener("touchstart",()=>toggleDone(u)),n.appendChild(i)});const o=document.getElementById("completed-counter"),m=e===a.length?"⭐":"☆";o.innerHTML=`
        <span class='counter-value'>
            <span class='counter-star'>
                ${m} 
            </span>
            ${e} / ${a.length}
        </span>
    `}window.toggleDone=function(n){l[r][n]=!l[r][n],v()};
